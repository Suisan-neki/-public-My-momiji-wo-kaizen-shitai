function $yubin(e){AjaxZip3.callback(e)}Client_log=function(){var r=["5dcb9f0d10e09","60336b4c28e2d","5fdb0835c9dce","62202ac5147dc","5e2a5c6879658","60331e490bfc5","614d8cb84e518","5f52142dca206","61e9ff043d35e","60e56f24299f0","613af2ea7a879","60e6c88677961","60c8753d2d42d","6177ea030da1e","6305d972b0779","63071b96ebc2c","625928c900476"];this.client_log=function(o,e){if(0,-1!==r.indexOf(window.sincloInfo.site.key)){var s=sincloInfo.site.socket;"contact.sinclo"===location.host&&(s=location.protocol+"//"+location.host);try{var a=localStorage.getItem("_scl_userId")?localStorage.getItem("_scl_userId"):"none",t="no data";scl_check.isset(JSON.parse(sinclo_storage.l.get(sinclo.scenarioApi._lKey.scenarioBase)))&&(t=JSON.parse(sinclo_storage.l.get(sinclo.scenarioApi._lKey.scenarioBase)).s_currentScenarioSeqNum);var n="no data";scl_check.isset(JSON.parse(sinclo_storage.l.get(sinclo.scenarioApi._lKey.scenarioBase)))&&(n=JSON.parse(sinclo_storage.l.get(sinclo.scenarioApi._lKey.scenarioBase)).sh_currentSeq);var i="no data";scl_check.isset(JSON.parse(sinclo_storage.l.get(sinclo.scenarioApi._lKey.scenarioBase)))&&(i=JSON.parse(sinclo_storage.l.get(sinclo.scenarioApi._lKey.scenarioBase))),$.ajax({type:"POST",url:s+"/log/logging",dataType:"json",data:{companykey:window.sincloInfo.site.key,user:a,function_name:o,argument:e,data:JSON.stringify({s_currentScenarioSeqNum:t,sh_currentSeq:n,scenarioBase:i})}}).done(function(){}).fail(function(e,t,n){var i={jqXHR:e,textStatus:t,errorThrown:n};$.ajax({type:"POST",url:s+"/log/logging",dataType:"json",data:{companykey:window.sincloInfo.site.key,user:a,function_name:o,argument:JSON.stringify(i),data:JSON.stringify({s_currentScenarioSeqNum:"-",sh_currentSeq:"-",scenarioBase:"-"})}}).done(function(){})})}catch(e){}}}},
/*!
 * jQuery JavaScript Library v3.5.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2020-05-04T22:49Z
 */
function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(k,e){"use strict";function m(e){return null!=e&&e===e.window}var t=[],i=Object.getPrototypeOf,r=t.slice,f=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},c=t.push,o=t.indexOf,n={},s=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),b={},y=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},T=k.document,d={type:!0,src:!0,nonce:!0,noModule:!0};function x(e,t,n){var i,o,s=(n=n||T).createElement("script");if(s.text=e,t)for(i in d)(o=t[i]||t.getAttribute&&t.getAttribute(i))&&s.setAttribute(i,o);n.head.appendChild(s).parentNode.removeChild(s)}function _(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[s.call(e)]||"object":typeof e}var p="3.5.1",S=function(e,t){return new S.fn.init(e,t)};function u(e){var t=!!e&&"length"in e&&e.length,n=_(e);return!y(e)&&!m(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:p,constructor:S,length:0,toArray:function(){return r.call(this)},get:function(e){return null==e?r.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(n){return this.pushStack(S.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,n,i,o,s,a=arguments[0]||{},r=1,c=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[r]||{},r++),"object"==typeof a||y(a)||(a={}),r===c&&(a=this,r--);r<c;r++)if(null!=(e=arguments[r]))for(t in e)i=e[t],"__proto__"!==t&&a!==i&&(l&&i&&(S.isPlainObject(i)||(o=Array.isArray(i)))?(n=a[t],s=o&&!Array.isArray(n)?[]:o||S.isPlainObject(n)?n:{},o=!1,a[t]=S.extend(l,s,i)):void 0!==i&&(a[t]=i));return a},S.extend({expando:"jQuery"+(p+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==s.call(e))&&(!(t=i(e))||"function"==typeof(n=v.call(t,"constructor")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){x(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,i=0;if(u(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(u(Object(e))?S.merge(n,"string"==typeof e?[e]:e):c.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:o.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,o=e.length;i<n;i++)e[o++]=t[i];return e.length=o,e},grep:function(e,t,n){for(var i=[],o=0,s=e.length,a=!n;o<s;o++)!t(e[o],o)!=a&&i.push(e[o]);return i},map:function(e,t,n){var i,o,s=0,a=[];if(u(e))for(i=e.length;s<i;s++)null!=(o=t(e[s],s,n))&&a.push(o);else for(s in e)null!=(o=t(e[s],s,n))&&a.push(o);return f(a)},guid:1,support:b}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var g=
/*!
 * Sizzle CSS Selector Engine v2.3.5
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2020-03-14
 */
function(n){function p(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(65536+n):String.fromCharCode(n>>10|55296,1023&n|56320))}function o(){w()}var e,g,x,s,a,h,u,m,_,c,l,w,k,r,T,f,d,v,b,S="sizzle"+1*new Date,y=n.document,I=0,i=0,A=ce(),C=ce(),B=ce(),N=ce(),D=function(e,t){return e===t&&(l=!0),0},M={}.hasOwnProperty,t=[],F=t.pop,E=t.push,$=t.push,O=t.slice,P=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},W="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",H="[\\x20\\t\\r\\n\\f]",j="(?:\\\\[\\da-fA-F]{1,6}"+H+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",R="\\["+H+"*("+j+")(?:"+H+"*([*^$|!~]?=)"+H+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+j+"))|)"+H+"*\\]",z=":("+j+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+R+")*)|.*)\\)|)",L=new RegExp(H+"+","g"),q=new RegExp("^"+H+"+|((?:^|[^\\\\])(?:\\\\.)*)"+H+"+$","g"),K=new RegExp("^"+H+"*,"+H+"*"),U=new RegExp("^"+H+"*([>+~]|"+H+")"+H+"*"),V=new RegExp(H+"|>"),J=new RegExp(z),Y=new RegExp("^"+j+"$"),Z={ID:new RegExp("^#("+j+")"),CLASS:new RegExp("^\\.("+j+")"),TAG:new RegExp("^("+j+"|[*])"),ATTR:new RegExp("^"+R),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+H+"*(even|odd|(([+-]|)(\\d*)n|)"+H+"*(?:([+-]|)"+H+"*(\\d+)|))"+H+"*\\)|)","i"),bool:new RegExp("^(?:"+W+")$","i"),needsContext:new RegExp("^"+H+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+H+"*((?:-\\d)?\\d*)"+H+"*\\)|)(?=[^-]|$)","i")},G=/HTML$/i,X=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,ee=/^[^{]+\{\s*\[native \w/,te=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ne=/[+~]/,ie=new RegExp("\\\\[\\da-fA-F]{1,6}"+H+"?|\\\\([^\\r\\n\\f])","g"),oe=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,se=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ae=xe(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{$.apply(t=O.call(y.childNodes),y.childNodes),t[y.childNodes.length].nodeType}catch(e){$={apply:t.length?function(e,t){E.apply(e,O.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function re(t,e,n,i){var o,s,a,r,c,l,d,p=e&&e.ownerDocument,u=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==u&&9!==u&&11!==u)return n;if(!i&&(w(e),e=e||k,T)){if(11!==u&&(c=te.exec(t)))if(o=c[1]){if(9===u){if(!(a=e.getElementById(o)))return n;if(a.id===o)return n.push(a),n}else if(p&&(a=p.getElementById(o))&&b(e,a)&&a.id===o)return n.push(a),n}else{if(c[2])return $.apply(n,e.getElementsByTagName(t)),n;if((o=c[3])&&g.getElementsByClassName&&e.getElementsByClassName)return $.apply(n,e.getElementsByClassName(o)),n}if(g.qsa&&!N[t+" "]&&(!f||!f.test(t))&&(1!==u||"object"!==e.nodeName.toLowerCase())){if(d=t,p=e,1===u&&(V.test(t)||U.test(t))){for((p=ne.test(t)&&ve(e.parentNode)||e)===e&&g.scope||((r=e.getAttribute("id"))?r=r.replace(oe,se):e.setAttribute("id",r=S)),s=(l=h(t)).length;s--;)l[s]=(r?"#"+r:":scope")+" "+ye(l[s]);d=l.join(",")}try{return $.apply(n,p.querySelectorAll(d)),n}catch(e){N(t,!0)}finally{r===S&&e.removeAttribute("id")}}}return m(t.replace(q,"$1"),e,n,i)}function ce(){var i=[];return function e(t,n){return i.push(t+" ")>x.cacheLength&&delete e[i.shift()],e[t+" "]=n}}function le(e){return e[S]=!0,e}function de(e){var t=k.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function pe(e,t){for(var n=e.split("|"),i=n.length;i--;)x.attrHandle[n[i]]=t}function ue(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function ge(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function me(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function fe(a){return le(function(s){return s=+s,le(function(e,t){for(var n,i=a([],e.length,s),o=i.length;o--;)e[n=i[o]]&&(e[n]=!(t[n]=e[n]))})})}function ve(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in g=re.support={},a=re.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!G.test(t||n&&n.nodeName||"HTML")},w=re.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:y;return i!=k&&9===i.nodeType&&i.documentElement&&(r=(k=i).documentElement,T=!a(k),y!=k&&(n=k.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",o,!1):n.attachEvent&&n.attachEvent("onunload",o)),g.scope=de(function(e){return r.appendChild(e).appendChild(k.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),g.attributes=de(function(e){return e.className="i",!e.getAttribute("className")}),g.getElementsByTagName=de(function(e){return e.appendChild(k.createComment("")),!e.getElementsByTagName("*").length}),g.getElementsByClassName=ee.test(k.getElementsByClassName),g.getById=de(function(e){return r.appendChild(e).id=S,!k.getElementsByName||!k.getElementsByName(S).length}),g.getById?(x.filter.ID=function(e){var t=e.replace(ie,p);return function(e){return e.getAttribute("id")===t}},x.find.ID=function(e,t){if(void 0!==t.getElementById&&T){var n=t.getElementById(e);return n?[n]:[]}}):(x.filter.ID=function(e){var n=e.replace(ie,p);return function(e){var t=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},x.find.ID=function(e,t){if(void 0!==t.getElementById&&T){var n,i,o,s=t.getElementById(e);if(s){if((n=s.getAttributeNode("id"))&&n.value===e)return[s];for(o=t.getElementsByName(e),i=0;s=o[i++];)if((n=s.getAttributeNode("id"))&&n.value===e)return[s]}return[]}}),x.find.TAG=g.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):g.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],o=0,s=t.getElementsByTagName(e);if("*"!==e)return s;for(;n=s[o++];)1===n.nodeType&&i.push(n);return i},x.find.CLASS=g.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&T)return t.getElementsByClassName(e)},d=[],f=[],(g.qsa=ee.test(k.querySelectorAll))&&(de(function(e){var t;r.appendChild(e).innerHTML="<a id='"+S+"'></a><select id='"+S+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&f.push("[*^$]="+H+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||f.push("\\["+H+"*(?:value|"+W+")"),e.querySelectorAll("[id~="+S+"-]").length||f.push("~="),(t=k.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||f.push("\\["+H+"*name"+H+"*="+H+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||f.push(":checked"),e.querySelectorAll("a#"+S+"+*").length||f.push(".#.+[+~]"),e.querySelectorAll("\\\f"),f.push("[\\r\\n\\f]")}),de(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=k.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&f.push("name"+H+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&f.push(":enabled",":disabled"),r.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&f.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),f.push(",.*:")})),(g.matchesSelector=ee.test(v=r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.oMatchesSelector||r.msMatchesSelector))&&de(function(e){g.disconnectedMatch=v.call(e,"*"),v.call(e,"[s!='']:x"),d.push("!=",z)}),f=f.length&&new RegExp(f.join("|")),d=d.length&&new RegExp(d.join("|")),t=ee.test(r.compareDocumentPosition),b=t||ee.test(r.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!g.sortDetached&&t.compareDocumentPosition(e)===n?e==k||e.ownerDocument==y&&b(y,e)?-1:t==k||t.ownerDocument==y&&b(y,t)?1:c?P(c,e)-P(c,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,i=0,o=e.parentNode,s=t.parentNode,a=[e],r=[t];if(!o||!s)return e==k?-1:t==k?1:o?-1:s?1:c?P(c,e)-P(c,t):0;if(o===s)return ue(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)r.unshift(n);for(;a[i]===r[i];)i++;return i?ue(a[i],r[i]):a[i]==y?-1:r[i]==y?1:0}),k},re.matches=function(e,t){return re(e,null,null,t)},re.matchesSelector=function(e,t){if(w(e),g.matchesSelector&&T&&!N[t+" "]&&(!d||!d.test(t))&&(!f||!f.test(t)))try{var n=v.call(e,t);if(n||g.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){N(t,!0)}return 0<re(t,k,null,[e]).length},re.contains=function(e,t){return(e.ownerDocument||e)!=k&&w(e),b(e,t)},re.attr=function(e,t){(e.ownerDocument||e)!=k&&w(e);var n=x.attrHandle[t.toLowerCase()],i=n&&M.call(x.attrHandle,t.toLowerCase())?n(e,t,!T):void 0;return void 0!==i?i:g.attributes||!T?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},re.escape=function(e){return(e+"").replace(oe,se)},re.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},re.uniqueSort=function(e){var t,n=[],i=0,o=0;if(l=!g.detectDuplicates,c=!g.sortStable&&e.slice(0),e.sort(D),l){for(;t=e[o++];)t===e[o]&&(i=n.push(o));for(;i--;)e.splice(n[i],1)}return c=null,e},s=re.getText=function(e){var t,n="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i++];)n+=s(t);return n},(x=re.selectors={cacheLength:50,createPseudo:le,match:Z,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ie,p),e[3]=(e[3]||e[4]||e[5]||"").replace(ie,p),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||re.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&re.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Z.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&J.test(n)&&(t=h(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ie,p).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=A[e+" "];return t||(t=new RegExp("(^|"+H+")"+e+"("+H+"|$)"))&&A(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,i,o){return function(e){var t=re.attr(e,n);return null==t?"!="===i:!i||(t+="","="===i?t===o:"!="===i?t!==o:"^="===i?o&&0===t.indexOf(o):"*="===i?o&&-1<t.indexOf(o):"$="===i?o&&t.slice(-o.length)===o:"~="===i?-1<(" "+t.replace(L," ")+" ").indexOf(o):"|="===i&&(t===o||t.slice(0,o.length+1)===o+"-"))}},CHILD:function(h,e,t,m,f){var v="nth"!==h.slice(0,3),b="last"!==h.slice(-4),y="of-type"===e;return 1===m&&0===f?function(e){return!!e.parentNode}:function(e,t,n){var i,o,s,a,r,c,l=v!=b?"nextSibling":"previousSibling",d=e.parentNode,p=y&&e.nodeName.toLowerCase(),u=!n&&!y,g=!1;if(d){if(v){for(;l;){for(a=e;a=a[l];)if(y?a.nodeName.toLowerCase()===p:1===a.nodeType)return!1;c=l="only"===h&&!c&&"nextSibling"}return!0}if(c=[b?d.firstChild:d.lastChild],b&&u){for(g=(r=(i=(o=(s=(a=d)[S]||(a[S]={}))[a.uniqueID]||(s[a.uniqueID]={}))[h]||[])[0]===I&&i[1])&&i[2],a=r&&d.childNodes[r];a=++r&&a&&a[l]||(g=r=0)||c.pop();)if(1===a.nodeType&&++g&&a===e){o[h]=[I,r,g];break}}else if(u&&(g=r=(i=(o=(s=(a=e)[S]||(a[S]={}))[a.uniqueID]||(s[a.uniqueID]={}))[h]||[])[0]===I&&i[1]),!1===g)for(;(a=++r&&a&&a[l]||(g=r=0)||c.pop())&&((y?a.nodeName.toLowerCase()!==p:1!==a.nodeType)||!++g||(u&&((o=(s=a[S]||(a[S]={}))[a.uniqueID]||(s[a.uniqueID]={}))[h]=[I,g]),a!==e)););return(g-=f)===m||g%m==0&&0<=g/m}}},PSEUDO:function(e,s){var t,a=x.pseudos[e]||x.setFilters[e.toLowerCase()]||re.error("unsupported pseudo: "+e);return a[S]?a(s):1<a.length?(t=[e,e,"",s],x.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){for(var n,i=a(e,s),o=i.length;o--;)e[n=P(e,i[o])]=!(t[n]=i[o])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var i=[],o=[],r=u(e.replace(q,"$1"));return r[S]?le(function(e,t,n,i){for(var o,s=r(e,null,i,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,t,n){return i[0]=e,r(i,null,n,o),i[0]=null,!o.pop()}}),has:le(function(t){return function(e){return 0<re(t,e).length}}),contains:le(function(t){return t=t.replace(ie,p),function(e){return-1<(e.textContent||s(e)).indexOf(t)}}),lang:le(function(n){return Y.test(n||"")||re.error("unsupported lang: "+n),n=n.replace(ie,p).toLowerCase(),function(e){var t;do{if(t=T?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===r},focus:function(e){return e===k.activeElement&&(!k.hasFocus||k.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:me(!1),disabled:me(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return X.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:fe(function(){return[0]}),last:fe(function(e,t){return[t-1]}),eq:fe(function(e,t,n){return[n<0?n+t:n]}),even:fe(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:fe(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:fe(function(e,t,n){for(var i=n<0?n+t:t<n?t:n;0<=--i;)e.push(i);return e}),gt:fe(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}}).pseudos.nth=x.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[e]=ge(e);for(e in{submit:!0,reset:!0})x.pseudos[e]=he(e);function be(){}function ye(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function xe(r,e,t){var c=e.dir,l=e.next,d=l||c,p=t&&"parentNode"===d,u=i++;return e.first?function(e,t,n){for(;e=e[c];)if(1===e.nodeType||p)return r(e,t,n);return!1}:function(e,t,n){var i,o,s,a=[I,u];if(n){for(;e=e[c];)if((1===e.nodeType||p)&&r(e,t,n))return!0}else for(;e=e[c];)if(1===e.nodeType||p)if(o=(s=e[S]||(e[S]={}))[e.uniqueID]||(s[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[c]||e;else{if((i=o[d])&&i[0]===I&&i[1]===u)return a[2]=i[2];if((o[d]=a)[2]=r(e,t,n))return!0}return!1}}function _e(o){return 1<o.length?function(e,t,n){for(var i=o.length;i--;)if(!o[i](e,t,n))return!1;return!0}:o[0]}function we(e,t,n,i,o){for(var s,a=[],r=0,c=e.length,l=null!=t;r<c;r++)(s=e[r])&&(n&&!n(s,i,o)||(a.push(s),l&&t.push(r)));return a}function ke(g,h,m,f,v,e){return f&&!f[S]&&(f=ke(f)),v&&!v[S]&&(v=ke(v,e)),le(function(e,t,n,i){var o,s,a,r=[],c=[],l=t.length,d=e||function(e,t,n){for(var i=0,o=t.length;i<o;i++)re(e,t[i],n);return n}(h||"*",n.nodeType?[n]:n,[]),p=!g||!e&&h?d:we(d,r,g,n,i),u=m?v||(e?g:l||f)?[]:t:p;if(m&&m(p,u,n,i),f)for(o=we(u,c),f(o,[],n,i),s=o.length;s--;)(a=o[s])&&(u[c[s]]=!(p[c[s]]=a));if(e){if(v||g){if(v){for(o=[],s=u.length;s--;)(a=u[s])&&o.push(p[s]=a);v(null,u=[],o,i)}for(s=u.length;s--;)(a=u[s])&&-1<(o=v?P(e,a):r[s])&&(e[o]=!(t[o]=a))}}else u=we(u===t?u.splice(l,u.length):u),v?v(null,t,u,i):$.apply(t,u)})}function Te(e){for(var o,t,n,i=e.length,s=x.relative[e[0].type],a=s||x.relative[" "],r=s?1:0,c=xe(function(e){return e===o},a,!0),l=xe(function(e){return-1<P(o,e)},a,!0),d=[function(e,t,n){var i=!s&&(n||t!==_)||((o=t).nodeType?c(e,t,n):l(e,t,n));return o=null,i}];r<i;r++)if(t=x.relative[e[r].type])d=[xe(_e(d),t)];else{if((t=x.filter[e[r].type].apply(null,e[r].matches))[S]){for(n=++r;n<i&&!x.relative[e[n].type];n++);return ke(1<r&&_e(d),1<r&&ye(e.slice(0,r-1).concat({value:" "===e[r-2].type?"*":""})).replace(q,"$1"),t,r<n&&Te(e.slice(r,n)),n<i&&Te(e=e.slice(n)),n<i&&ye(e))}d.push(t)}return _e(d)}function Se(f,v){function e(e,t,n,i,o){var s,a,r,c=0,l="0",d=e&&[],p=[],u=_,g=e||y&&x.find.TAG("*",o),h=I+=null==u?1:Math.random()||.1,m=g.length;for(o&&(_=t==k||t||o);l!==m&&null!=(s=g[l]);l++){if(y&&s){for(a=0,t||s.ownerDocument==k||(w(s),n=!T);r=f[a++];)if(r(s,t||k,n)){i.push(s);break}o&&(I=h)}b&&((s=!r&&s)&&c--,e&&d.push(s))}if(c+=l,b&&l!==c){for(a=0;r=v[a++];)r(d,p,t,n);if(e){if(0<c)for(;l--;)d[l]||p[l]||(p[l]=F.call(i));p=we(p)}$.apply(i,p),o&&!e&&0<p.length&&1<c+v.length&&re.uniqueSort(i)}return o&&(I=h,_=u),d}var b=0<v.length,y=0<f.length;return b?le(e):e}return be.prototype=x.filters=x.pseudos,x.setFilters=new be,h=re.tokenize=function(e,t){var n,i,o,s,a,r,c,l=C[e+" "];if(l)return t?0:l.slice(0);for(a=e,r=[],c=x.preFilter;a;){for(s in n&&!(i=K.exec(a))||(i&&(a=a.slice(i[0].length)||a),r.push(o=[])),n=!1,(i=U.exec(a))&&(n=i.shift(),o.push({value:n,type:i[0].replace(q," ")}),a=a.slice(n.length)),x.filter)!(i=Z[s].exec(a))||c[s]&&!(i=c[s](i))||(n=i.shift(),o.push({value:n,type:s,matches:i}),a=a.slice(n.length));if(!n)break}return t?a.length:a?re.error(e):C(e,r).slice(0)},u=re.compile=function(e,t){var n,i=[],o=[],s=B[e+" "];if(!s){for(n=(t=t||h(e)).length;n--;)(s=Te(t[n]))[S]?i.push(s):o.push(s);(s=B(e,Se(o,i))).selector=e}return s},m=re.select=function(e,t,n,i){var o,s,a,r,c,l="function"==typeof e&&e,d=!i&&h(e=l.selector||e);if(n=n||[],1===d.length){if(2<(s=d[0]=d[0].slice(0)).length&&"ID"===(a=s[0]).type&&9===t.nodeType&&T&&x.relative[s[1].type]){if(!(t=(x.find.ID(a.matches[0].replace(ie,p),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(s.shift().value.length)}for(o=Z.needsContext.test(e)?0:s.length;o--&&(a=s[o],!x.relative[r=a.type]);)if((c=x.find[r])&&(i=c(a.matches[0].replace(ie,p),ne.test(s[0].type)&&ve(t.parentNode)||t))){if(s.splice(o,1),!(e=i.length&&ye(s)))return $.apply(n,i),n;break}}return(l||u(e,d))(i,t,!T,n,!t||ne.test(e)&&ve(t.parentNode)||t),n},g.sortStable=S.split("").sort(D).join("")===S,g.detectDuplicates=!!l,w(),g.sortDetached=de(function(e){return 1&e.compareDocumentPosition(k.createElement("fieldset"))}),de(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||pe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),g.attributes&&de(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||pe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),de(function(e){return null==e.getAttribute("disabled")})||pe(W,function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),re}(k);S.find=g,S.expr=g.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=g.uniqueSort,S.text=g.getText,S.isXMLDoc=g.isXML,S.contains=g.contains,S.escapeSelector=g.escape;function h(e,t,n){for(var i=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&S(e).is(n))break;i.push(e)}return i}function w(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}var I=S.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var C=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function B(e,n,i){return y(n)?S.grep(e,function(e,t){return!!n.call(e,t,e)!==i}):n.nodeType?S.grep(e,function(e){return e===n!==i}):"string"!=typeof n?S.grep(e,function(e){return-1<o.call(n,e)!==i}):S.filter(n,e,i)}S.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?S.find.matchesSelector(i,e)?[i]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,i=this.length,o=this;if("string"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<i;t++)if(S.contains(o[t],this))return!0}));for(n=this.pushStack([]),t=0;t<i;t++)S.find(e,o[t],n);return 1<i?S.uniqueSort(n):n},filter:function(e){return this.pushStack(B(this,e||[],!1))},not:function(e){return this.pushStack(B(this,e||[],!0))},is:function(e){return!!B(this,"string"==typeof e&&I.test(e)?S(e):e||[],!1).length}});var N,D=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,n){var i,o;if(!e)return this;if(n=n||N,"string"!=typeof e)return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this);if(!(i="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:D.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:T,!0)),C.test(i[1])&&S.isPlainObject(t))for(i in t)y(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(o=T.getElementById(i[2]))&&(this[0]=o,this.length=1),this}).prototype=S.fn,N=S(T);var M=/^(?:parents|prev(?:Until|All))/,F={children:!0,contents:!0,next:!0,prev:!0};function E(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,i=0,o=this.length,s=[],a="string"!=typeof e&&S(e);if(!I.test(e))for(;i<o;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&S.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(1<s.length?S.uniqueSort(s):s)},index:function(e){return e?"string"==typeof e?o.call(S(e),this[0]):o.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,"parentNode")},parentsUntil:function(e,t,n){return h(e,"parentNode",n)},next:function(e){return E(e,"nextSibling")},prev:function(e){return E(e,"previousSibling")},nextAll:function(e){return h(e,"nextSibling")},prevAll:function(e){return h(e,"previousSibling")},nextUntil:function(e,t,n){return h(e,"nextSibling",n)},prevUntil:function(e,t,n){return h(e,"previousSibling",n)},siblings:function(e){return w((e.parentNode||{}).firstChild,e)},children:function(e){return w(e.firstChild)},contents:function(e){return null!=e.contentDocument&&i(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},function(i,o){S.fn[i]=function(e,t){var n=S.map(this,o,e);return"Until"!==i.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=S.filter(t,n)),1<this.length&&(F[i]||S.uniqueSort(n),M.test(i)&&n.reverse()),this.pushStack(n)}});var $=/[^\x20\t\r\n\f]+/g;function O(e){return e}function P(e){throw e}function W(e,t,n,i){var o;try{e&&y(o=e.promise)?o.call(e).done(t).fail(n):e&&y(o=e.then)?o.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(i){var e,n;i="string"==typeof i?(e=i,n={},S.each(e.match($)||[],function(e,t){n[t]=!0}),n):S.extend({},i);function o(){for(r=r||i.once,a=s=!0;l.length;d=-1)for(t=l.shift();++d<c.length;)!1===c[d].apply(t[0],t[1])&&i.stopOnFalse&&(d=c.length,t=!1);i.memory||(t=!1),s=!1,r&&(c=t?[]:"")}var s,t,a,r,c=[],l=[],d=-1,p={add:function(){return c&&(t&&!s&&(d=c.length-1,l.push(t)),function n(e){S.each(e,function(e,t){y(t)?i.unique&&p.has(t)||c.push(t):t&&t.length&&"string"!==_(t)&&n(t)})}(arguments),t&&!s&&o()),this},remove:function(){return S.each(arguments,function(e,t){for(var n;-1<(n=S.inArray(t,c,n));)c.splice(n,1),n<=d&&d--}),this},has:function(e){return e?-1<S.inArray(e,c):0<c.length},empty:function(){return c=c&&[],this},disable:function(){return r=l=[],c=t="",this},disabled:function(){return!c},lock:function(){return r=l=[],t||s||(c=t=""),this},locked:function(){return!!r},fireWith:function(e,t){return r||(t=[e,(t=t||[]).slice?t.slice():t],l.push(t),s||o()),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!a}};return p},S.extend({Deferred:function(e){var s=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],o="pending",a={state:function(){return o},always:function(){return r.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var o=arguments;return S.Deferred(function(i){S.each(s,function(e,t){var n=y(o[t[4]])&&o[t[4]];r[t[1]](function(){var e=n&&n.apply(this,arguments);e&&y(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[t[0]+"With"](this,n?[e]:arguments)})}),o=null}).promise()},then:function(t,n,i){var c=0;function l(o,s,a,r){return function(){function e(){var e,t;if(!(o<c)){if((e=a.apply(n,i))===s.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,y(t)?r?t.call(e,l(c,s,O,r),l(c,s,P,r)):(c++,t.call(e,l(c,s,O,r),l(c,s,P,r),l(c,s,O,s.notifyWith))):(a!==O&&(n=void 0,i=[e]),(r||s.resolveWith)(n,i))}}var n=this,i=arguments,t=r?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),c<=o+1&&(a!==P&&(n=void 0,i=[e]),s.rejectWith(n,i))}};o?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),k.setTimeout(t))}}return S.Deferred(function(e){s[0][3].add(l(0,e,y(i)?i:O,e.notifyWith)),s[1][3].add(l(0,e,y(t)?t:O)),s[2][3].add(l(0,e,y(n)?n:P))}).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},r={};return S.each(s,function(e,t){var n=t[2],i=t[5];a[t[1]]=n.add,i&&n.add(function(){o=i},s[3-e][2].disable,s[3-e][3].disable,s[0][2].lock,s[0][3].lock),n.add(t[3].fire),r[t[0]]=function(){return r[t[0]+"With"](this===r?void 0:this,arguments),this},r[t[0]+"With"]=n.fireWith}),a.promise(r),e&&e.call(r,r),r},when:function(e){function t(t){return function(e){o[t]=this,s[t]=1<arguments.length?r.call(arguments):e,--n||a.resolveWith(o,s)}}var n=arguments.length,i=n,o=Array(i),s=r.call(arguments),a=S.Deferred();if(n<=1&&(W(e,a.done(t(i)).resolve,a.reject,!n),"pending"===a.state()||y(s[i]&&s[i].then)))return a.then();for(;i--;)W(s[i],t(i),a.reject);return a.promise()}});var H=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){k.console&&k.console.warn&&e&&H.test(e.name)&&k.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){k.setTimeout(function(){throw e})};var j=S.Deferred();function R(){T.removeEventListener("DOMContentLoaded",R),k.removeEventListener("load",R),S.ready()}S.fn.ready=function(e){return j.then(e).catch(function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||j.resolveWith(T,[S])}}),S.ready.then=j.then,"complete"===T.readyState||"loading"!==T.readyState&&!T.documentElement.doScroll?k.setTimeout(S.ready):(T.addEventListener("DOMContentLoaded",R),k.addEventListener("load",R));var z=function(e,t,n,i,o,s,a){var r=0,c=e.length,l=null==n;if("object"===_(n))for(r in o=!0,n)z(e,t,r,n[r],!0,s,a);else if(void 0!==i&&(o=!0,y(i)||(a=!0),l&&(t=a?(t.call(e,i),null):(l=t,function(e,t,n){return l.call(S(e),n)})),t))for(;r<c;r++)t(e[r],n,a?i:i.call(e[r],r,t(e[r],n)));return o?e:l?t.call(e):c?t(e[0],n):s},L=/^-ms-/,q=/-([a-z])/g;function K(e,t){return t.toUpperCase()}function U(e){return e.replace(L,"ms-").replace(q,K)}function V(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}function J(){this.expando=S.expando+J.uid++}J.uid=1,J.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,o=this.cache(e);if("string"==typeof t)o[U(t)]=n;else for(i in t)o[U(i)]=t[i];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][U(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){n=(t=Array.isArray(t)?t.map(U):(t=U(t))in i?[t]:t.match($)||[]).length;for(;n--;)delete i[t[n]]}void 0!==t&&!S.isEmptyObject(i)||(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Y=new J,Z=new J,G=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,X=/[A-Z]/g;function Q(e,t,n){var i,o;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(X,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n="true"===(o=n)||"false"!==o&&("null"===o?null:o===+o+""?+o:G.test(o)?JSON.parse(o):o)}catch(e){}Z.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Z.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Z.access(e,t,n)},removeData:function(e,t){Z.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),S.fn.extend({data:function(n,e){var t,i,o,s=this[0],a=s&&s.attributes;if(void 0!==n)return"object"==typeof n?this.each(function(){Z.set(this,n)}):z(this,function(e){var t;if(s&&void 0===e)return void 0!==(t=Z.get(s,n))?t:void 0!==(t=Q(s,n))?t:void 0;this.each(function(){Z.set(this,n,e)})},null,e,1<arguments.length,null,!0);if(this.length&&(o=Z.get(s),1===s.nodeType&&!Y.get(s,"hasDataAttrs"))){for(t=a.length;t--;)a[t]&&0===(i=a[t].name).indexOf("data-")&&(i=U(i.slice(5)),Q(s,i,o[i]));Y.set(s,"hasDataAttrs",!0)}return o},removeData:function(e){return this.each(function(){Z.remove(this,e)})}}),S.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=Y.get(e,t),n&&(!i||Array.isArray(n)?i=Y.access(e,t,S.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=S.queue(e,t),i=n.length,o=n.shift(),s=S._queueHooks(e,t);"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===t&&n.unshift("inprogress"),delete s.stop,o.call(e,function(){S.dequeue(e,t)},s)),!i&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y.get(e,n)||Y.access(e,n,{empty:S.Callbacks("once memory").add(function(){Y.remove(e,[t+"queue",n])})})}}),S.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?S.queue(this[0],t):void 0===n?this:this.each(function(){var e=S.queue(this,t,n);S._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function n(){--o||s.resolveWith(a,[a])}var i,o=1,s=S.Deferred(),a=this,r=this.length;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";r--;)(i=Y.get(a[r],e+"queueHooks"))&&i.empty&&(o++,i.empty.add(n));return n(),s.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],ie=T.documentElement,oe=function(e){return S.contains(e.ownerDocument,e)},se={composed:!0};ie.getRootNode&&(oe=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(se)===e.ownerDocument});var ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&oe(e)&&"none"===S.css(e,"display")};function re(e,t,n,i){var o,s,a=20,r=i?function(){return i.cur()}:function(){return S.css(e,t,"")},c=r(),l=n&&n[3]||(S.cssNumber[t]?"":"px"),d=e.nodeType&&(S.cssNumber[t]||"px"!==l&&+c)&&te.exec(S.css(e,t));if(d&&d[3]!==l){for(c/=2,l=l||d[3],d=+c||1;a--;)S.style(e,t,d+l),(1-s)*(1-(s=r()/c||.5))<=0&&(a=0),d/=s;d*=2,S.style(e,t,d+l),n=n||[]}return n&&(d=+d||+c||0,o=n[1]?d+(n[1]+1)*n[2]:+n[2],i&&(i.unit=l,i.start=d,i.end=o)),o}var ce={};function le(e,t){for(var n,i,o,s,a,r,c,l=[],d=0,p=e.length;d<p;d++)(i=e[d]).style&&(n=i.style.display,t?("none"===n&&(l[d]=Y.get(i,"display")||null,l[d]||(i.style.display="")),""===i.style.display&&ae(i)&&(l[d]=(c=a=s=void 0,a=(o=i).ownerDocument,r=o.nodeName,(c=ce[r])||(s=a.body.appendChild(a.createElement(r)),c=S.css(s,"display"),s.parentNode.removeChild(s),"none"===c&&(c="block"),ce[r]=c)))):"none"!==n&&(l[d]="none",Y.set(i,"display",n)));for(d=0;d<p;d++)null!=l[d]&&(e[d].style.display=l[d]);return e}S.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?S(this).show():S(this).hide()})}});var de,pe,ue=/^(?:checkbox|radio)$/i,ge=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i;de=T.createDocumentFragment().appendChild(T.createElement("div")),(pe=T.createElement("input")).setAttribute("type","radio"),pe.setAttribute("checked","checked"),pe.setAttribute("name","t"),de.appendChild(pe),b.checkClone=de.cloneNode(!0).cloneNode(!0).lastChild.checked,de.innerHTML="<textarea>x</textarea>",b.noCloneChecked=!!de.cloneNode(!0).lastChild.defaultValue,de.innerHTML="<option></option>",b.option=!!de.lastChild;var me={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function fe(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?S.merge([e],n):n}function ve(e,t){for(var n=0,i=e.length;n<i;n++)Y.set(e[n],"globalEval",!t||Y.get(t[n],"globalEval"))}me.tbody=me.tfoot=me.colgroup=me.caption=me.thead,me.th=me.td,b.option||(me.optgroup=me.option=[1,"<select multiple='multiple'>","</select>"]);var be=/<|&#?\w+;/;function ye(e,t,n,i,o){for(var s,a,r,c,l,d,p=t.createDocumentFragment(),u=[],g=0,h=e.length;g<h;g++)if((s=e[g])||0===s)if("object"===_(s))S.merge(u,s.nodeType?[s]:s);else if(be.test(s)){for(a=a||p.appendChild(t.createElement("div")),r=(ge.exec(s)||["",""])[1].toLowerCase(),c=me[r]||me._default,a.innerHTML=c[1]+S.htmlPrefilter(s)+c[2],d=c[0];d--;)a=a.lastChild;S.merge(u,a.childNodes),(a=p.firstChild).textContent=""}else u.push(t.createTextNode(s));for(p.textContent="",g=0;s=u[g++];)if(i&&-1<S.inArray(s,i))o&&o.push(s);else if(l=oe(s),a=fe(p.appendChild(s),"script"),l&&ve(a),n)for(d=0;s=a[d++];)he.test(s.type||"")&&n.push(s);return p}var xe=/^key/,_e=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,we=/^([^.]*)(?:\.(.+)|)/;function ke(){return!0}function Te(){return!1}function Se(e,t){return e===function(){try{return T.activeElement}catch(e){}}()==("focus"===t)}function Ie(e,t,n,i,o,s){var a,r;if("object"==typeof t){for(r in"string"!=typeof n&&(i=i||n,n=void 0),t)Ie(e,r,n,i,t[r],s);return e}if(null==i&&null==o?(o=n,i=n=void 0):null==o&&("string"==typeof n?(o=i,i=void 0):(o=i,i=n,n=void 0)),!1===o)o=Te;else if(!o)return e;return 1===s&&(a=o,(o=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,o,i,n)})}function Ae(e,o,s){s?(Y.set(e,o,!1),S.event.add(e,o,{namespace:!1,handler:function(e){var t,n,i=Y.get(this,o);if(1&e.isTrigger&&this[o]){if(i.length)(S.event.special[o]||{}).delegateType&&e.stopPropagation();else if(i=r.call(arguments),Y.set(this,o,i),t=s(this,o),this[o](),i!==(n=Y.get(this,o))||t?Y.set(this,o,!1):n={},i!==n)return e.stopImmediatePropagation(),e.preventDefault(),n.value}else i.length&&(Y.set(this,o,{value:S.event.trigger(S.extend(i[0],S.Event.prototype),i.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,o)&&S.event.add(e,o,ke)}S.event={global:{},add:function(t,e,n,i,o){var s,a,r,c,l,d,p,u,g,h,m,f=Y.get(t);if(V(t))for(n.handler&&(n=(s=n).handler,o=s.selector),o&&S.find.matchesSelector(ie,o),n.guid||(n.guid=S.guid++),(c=f.events)||(c=f.events=Object.create(null)),(a=f.handle)||(a=f.handle=function(e){return void 0!==S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match($)||[""]).length;l--;)g=m=(r=we.exec(e[l])||[])[1],h=(r[2]||"").split(".").sort(),g&&(p=S.event.special[g]||{},g=(o?p.delegateType:p.bindType)||g,p=S.event.special[g]||{},d=S.extend({type:g,origType:m,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&S.expr.match.needsContext.test(o),namespace:h.join(".")},s),(u=c[g])||((u=c[g]=[]).delegateCount=0,p.setup&&!1!==p.setup.call(t,i,h,a)||t.addEventListener&&t.addEventListener(g,a)),p.add&&(p.add.call(t,d),d.handler.guid||(d.handler.guid=n.guid)),o?u.splice(u.delegateCount++,0,d):u.push(d),S.event.global[g]=!0)},remove:function(e,t,n,i,o){var s,a,r,c,l,d,p,u,g,h,m,f=Y.hasData(e)&&Y.get(e);if(f&&(c=f.events)){for(l=(t=(t||"").match($)||[""]).length;l--;)if(g=m=(r=we.exec(t[l])||[])[1],h=(r[2]||"").split(".").sort(),g){for(p=S.event.special[g]||{},u=c[g=(i?p.delegateType:p.bindType)||g]||[],r=r[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=u.length;s--;)d=u[s],!o&&m!==d.origType||n&&n.guid!==d.guid||r&&!r.test(d.namespace)||i&&i!==d.selector&&("**"!==i||!d.selector)||(u.splice(s,1),d.selector&&u.delegateCount--,p.remove&&p.remove.call(e,d));a&&!u.length&&(p.teardown&&!1!==p.teardown.call(e,h,f.handle)||S.removeEvent(e,g,f.handle),delete c[g])}else for(g in c)S.event.remove(e,g+t[l],n,i,!0);S.isEmptyObject(c)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,n,i,o,s,a,r=new Array(arguments.length),c=S.event.fix(e),l=(Y.get(this,"events")||Object.create(null))[c.type]||[],d=S.event.special[c.type]||{};for(r[0]=c,t=1;t<arguments.length;t++)r[t]=arguments[t];if(c.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,c)){for(a=S.event.handlers.call(this,c,l),t=0;(o=a[t++])&&!c.isPropagationStopped();)for(c.currentTarget=o.elem,n=0;(s=o.handlers[n++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!1!==s.namespace&&!c.rnamespace.test(s.namespace)||(c.handleObj=s,c.data=s.data,void 0!==(i=((S.event.special[s.origType]||{}).handle||s.handler).apply(o.elem,r))&&!1===(c.result=i)&&(c.preventDefault(),c.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,c),c.result}},handlers:function(e,t){var n,i,o,s,a,r=[],c=t.delegateCount,l=e.target;if(c&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(s=[],a={},n=0;n<c;n++)void 0===a[o=(i=t[n]).selector+" "]&&(a[o]=i.needsContext?-1<S(o,this).index(l):S.find(o,this,null,[l]).length),a[o]&&s.push(i);s.length&&r.push({elem:l,handlers:s})}return l=this,c<t.length&&r.push({elem:l,handlers:t.slice(c)}),r},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:y(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return ue.test(t.type)&&t.click&&A(t,"input")&&Ae(t,"click",ke),!1},trigger:function(e){var t=this||e;return ue.test(t.type)&&t.click&&A(t,"input")&&Ae(t,"click"),!0},_default:function(e){var t=e.target;return ue.test(t.type)&&t.click&&A(t,"input")&&Y.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ke:Te,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Te,isPropagationStopped:Te,isImmediatePropagationStopped:Te,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ke,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ke,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ke,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&xe.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&_e.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},function(e,t){S.event.special[e]={setup:function(){return Ae(this,e,Se),!1},trigger:function(){return Ae(this,e),!0},delegateType:t}}),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,o){S.event.special[e]={delegateType:o,bindType:o,handle:function(e){var t,n=e.relatedTarget,i=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=i.origType,t=i.handler.apply(this,arguments),e.type=o),t}}}),S.fn.extend({on:function(e,t,n,i){return Ie(this,e,t,n,i)},one:function(e,t,n,i){return Ie(this,e,t,n,i,1)},off:function(e,t,n){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,S(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Te),this.each(function(){S.event.remove(this,e,n,t)});for(o in e)this.off(o,t,e[o]);return this}});var Ce=/<script|<style|<link/i,Be=/checked\s*(?:[^=]|=\s*.checked.)/i,Ne=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function De(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function Me(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Fe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ee(e,t){var n,i,o,s,a,r;if(1===t.nodeType){if(Y.hasData(e)&&(r=Y.get(e).events))for(o in Y.remove(t,"handle events"),r)for(n=0,i=r[o].length;n<i;n++)S.event.add(t,o,r[o][n]);Z.hasData(e)&&(s=Z.access(e),a=S.extend({},s),Z.set(t,a))}}function $e(n,i,o,s){i=f(i);var e,t,a,r,c,l,d=0,p=n.length,u=p-1,g=i[0],h=y(g);if(h||1<p&&"string"==typeof g&&!b.checkClone&&Be.test(g))return n.each(function(e){var t=n.eq(e);h&&(i[0]=g.call(this,e,t.html())),$e(t,i,o,s)});if(p&&(t=(e=ye(i,n[0].ownerDocument,!1,n,s)).firstChild,1===e.childNodes.length&&(e=t),t||s)){for(r=(a=S.map(fe(e,"script"),Me)).length;d<p;d++)c=e,d!==u&&(c=S.clone(c,!0,!0),r&&S.merge(a,fe(c,"script"))),o.call(n[d],c,d);if(r)for(l=a[a.length-1].ownerDocument,S.map(a,Fe),d=0;d<r;d++)c=a[d],he.test(c.type||"")&&!Y.access(c,"globalEval")&&S.contains(l,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?S._evalUrl&&!c.noModule&&S._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},l):x(c.textContent.replace(Ne,""),c,l))}return n}function Oe(e,t,n){for(var i,o=t?S.filter(t,e):e,s=0;null!=(i=o[s]);s++)n||1!==i.nodeType||S.cleanData(fe(i)),i.parentNode&&(n&&oe(i)&&ve(fe(i,"script")),i.parentNode.removeChild(i));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var i,o,s,a,r,c,l,d=e.cloneNode(!0),p=oe(e);if(!(b.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=fe(d),i=0,o=(s=fe(e)).length;i<o;i++)r=s[i],c=a[i],"input"===(l=c.nodeName.toLowerCase())&&ue.test(r.type)?c.checked=r.checked:"input"!==l&&"textarea"!==l||(c.defaultValue=r.defaultValue);if(t)if(n)for(s=s||fe(e),a=a||fe(d),i=0,o=s.length;i<o;i++)Ee(s[i],a[i]);else Ee(e,d);return 0<(a=fe(d,"script")).length&&ve(a,!p&&fe(e,"script")),d},cleanData:function(e){for(var t,n,i,o=S.event.special,s=0;void 0!==(n=e[s]);s++)if(V(n)){if(t=n[Y.expando]){if(t.events)for(i in t.events)o[i]?S.event.remove(n,i):S.removeEvent(n,i,t.handle);n[Y.expando]=void 0}n[Z.expando]&&(n[Z.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Oe(this,e,!0)},remove:function(e){return Oe(this,e)},text:function(e){return z(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return $e(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||De(this,e).appendChild(e)})},prepend:function(){return $e(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=De(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return $e(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return $e(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(fe(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return z(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ce.test(e)&&!me[(ge.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(fe(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return $e(this,arguments,function(e){var t=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(fe(this)),t&&t.replaceChild(e,this))},n)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){S.fn[e]=function(e){for(var t,n=[],i=S(e),o=i.length-1,s=0;s<=o;s++)t=s===o?this:this.clone(!0),S(i[s])[a](t),c.apply(n,t.get());return this.pushStack(n)}});function Pe(e,t,n){var i,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];for(o in i=n.call(e),t)e.style[o]=s[o];return i}var We,He,je,Re,ze,Le,qe,Ke,Ue=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Ve=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=k),t.getComputedStyle(e)},Je=new RegExp(ne.join("|"),"i");function Ye(){if(Ke){qe.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Ke.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ie.appendChild(qe).appendChild(Ke);var e=k.getComputedStyle(Ke);We="1%"!==e.top,Le=12===Ze(e.marginLeft),Ke.style.right="60%",Re=36===Ze(e.right),He=36===Ze(e.width),Ke.style.position="absolute",je=12===Ze(Ke.offsetWidth/3),ie.removeChild(qe),Ke=null}}function Ze(e){return Math.round(parseFloat(e))}function Ge(e,t,n){var i,o,s,a,r=e.style;return(n=n||Ve(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||oe(e)||(a=S.style(e,t)),!b.pixelBoxStyles()&&Ue.test(a)&&Je.test(t)&&(i=r.width,o=r.minWidth,s=r.maxWidth,r.minWidth=r.maxWidth=r.width=a,a=n.width,r.width=i,r.minWidth=o,r.maxWidth=s)),void 0!==a?a+"":a}function Xe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}qe=T.createElement("div"),(Ke=T.createElement("div")).style&&(Ke.style.backgroundClip="content-box",Ke.cloneNode(!0).style.backgroundClip="",b.clearCloneStyle="content-box"===Ke.style.backgroundClip,S.extend(b,{boxSizingReliable:function(){return Ye(),He},pixelBoxStyles:function(){return Ye(),Re},pixelPosition:function(){return Ye(),We},reliableMarginLeft:function(){return Ye(),Le},scrollboxSize:function(){return Ye(),je},reliableTrDimensions:function(){var e,t,n,i;return null==ze&&(e=T.createElement("table"),t=T.createElement("tr"),n=T.createElement("div"),e.style.cssText="position:absolute;left:-11111px",t.style.height="1px",n.style.height="9px",ie.appendChild(e).appendChild(t).appendChild(n),i=k.getComputedStyle(t),ze=3<parseInt(i.height),ie.removeChild(e)),ze}}));var Qe=["Webkit","Moz","ms"],et=T.createElement("div").style,tt={};function nt(e){var t=S.cssProps[e]||tt[e];return t||(e in et?e:tt[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Qe.length;n--;)if((e=Qe[n]+t)in et)return e}(e)||e)}var it=/^(none|table(?!-c[ea]).+)/,ot=/^--/,st={position:"absolute",visibility:"hidden",display:"block"},at={letterSpacing:"0",fontWeight:"400"};function rt(e,t,n){var i=te.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function ct(e,t,n,i,o,s){var a="width"===t?1:0,r=0,c=0;if(n===(i?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(c+=S.css(e,n+ne[a],!0,o)),i?("content"===n&&(c-=S.css(e,"padding"+ne[a],!0,o)),"margin"!==n&&(c-=S.css(e,"border"+ne[a]+"Width",!0,o))):(c+=S.css(e,"padding"+ne[a],!0,o),"padding"!==n?c+=S.css(e,"border"+ne[a]+"Width",!0,o):r+=S.css(e,"border"+ne[a]+"Width",!0,o));return!i&&0<=s&&(c+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-s-c-r-.5))||0),c}function lt(e,t,n){var i=Ve(e),o=(!b.boxSizingReliable()||n)&&"border-box"===S.css(e,"boxSizing",!1,i),s=o,a=Ge(e,t,i),r="offset"+t[0].toUpperCase()+t.slice(1);if(Ue.test(a)){if(!n)return a;a="auto"}return(!b.boxSizingReliable()&&o||!b.reliableTrDimensions()&&A(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===S.css(e,"display",!1,i))&&e.getClientRects().length&&(o="border-box"===S.css(e,"boxSizing",!1,i),(s=r in e)&&(a=e[r])),(a=parseFloat(a)||0)+ct(e,t,n||(o?"border":"content"),s,i,a)+"px"}function dt(e,t,n,i,o){return new dt.prototype.init(e,t,n,i,o)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ge(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,s,a,r=U(t),c=ot.test(t),l=e.style;if(c||(t=nt(r)),a=S.cssHooks[t]||S.cssHooks[r],void 0===n)return a&&"get"in a&&void 0!==(o=a.get(e,!1,i))?o:l[t];"string"===(s=typeof n)&&(o=te.exec(n))&&o[1]&&(n=re(e,t,o),s="number"),null!=n&&n==n&&("number"!==s||c||(n+=o&&o[3]||(S.cssNumber[r]?"":"px")),b.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,i))||(c?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,i){var o,s,a,r=U(t);return ot.test(t)||(t=nt(r)),(a=S.cssHooks[t]||S.cssHooks[r])&&"get"in a&&(o=a.get(e,!0,n)),void 0===o&&(o=Ge(e,t,i)),"normal"===o&&t in at&&(o=at[t]),""===n||n?(s=parseFloat(o),!0===n||isFinite(s)?s||0:o):o}}),S.each(["height","width"],function(e,c){S.cssHooks[c]={get:function(e,t,n){if(t)return!it.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?lt(e,c,n):Pe(e,st,function(){return lt(e,c,n)})},set:function(e,t,n){var i,o=Ve(e),s=!b.scrollboxSize()&&"absolute"===o.position,a=(s||n)&&"border-box"===S.css(e,"boxSizing",!1,o),r=n?ct(e,c,n,a,o):0;return a&&s&&(r-=Math.ceil(e["offset"+c[0].toUpperCase()+c.slice(1)]-parseFloat(o[c])-ct(e,c,"border",!1,o)-.5)),r&&(i=te.exec(t))&&"px"!==(i[3]||"px")&&(e.style[c]=t,t=S.css(e,c)),rt(0,t,r)}}}),S.cssHooks.marginLeft=Xe(b.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ge(e,"marginLeft"))||e.getBoundingClientRect().left-Pe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(o,s){S.cssHooks[o+s]={expand:function(e){for(var t=0,n={},i="string"==typeof e?e.split(" "):[e];t<4;t++)n[o+ne[t]+s]=i[t]||i[t-2]||i[0];return n}},"margin"!==o&&(S.cssHooks[o+s].set=rt)}),S.fn.extend({css:function(e,t){return z(this,function(e,t,n){var i,o,s={},a=0;if(Array.isArray(t)){for(i=Ve(e),o=t.length;a<o;a++)s[t[a]]=S.css(e,t[a],!1,i);return s}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=dt).prototype={constructor:dt,init:function(e,t,n,i,o,s){this.elem=e,this.prop=n,this.easing=o||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=s||(S.cssNumber[n]?"":"px")},cur:function(){var e=dt.propHooks[this.prop];return e&&e.get?e.get(this):dt.propHooks._default.get(this)},run:function(e){var t,n=dt.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):dt.propHooks._default.set(this),this}}).init.prototype=dt.prototype,(dt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[nt(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=dt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=dt.prototype.init,S.fx.step={};var pt,ut,gt,ht,mt=/^(?:toggle|show|hide)$/,ft=/queueHooks$/;function vt(){ut&&(!1===T.hidden&&k.requestAnimationFrame?k.requestAnimationFrame(vt):k.setTimeout(vt,S.fx.interval),S.fx.tick())}function bt(){return k.setTimeout(function(){pt=void 0}),pt=Date.now()}function yt(e,t){var n,i=0,o={height:e};for(t=t?1:0;i<4;i+=2-t)o["margin"+(n=ne[i])]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function xt(e,t,n){for(var i,o=(_t.tweeners[t]||[]).concat(_t.tweeners["*"]),s=0,a=o.length;s<a;s++)if(i=o[s].call(n,t,e))return i}function _t(s,e,t){var n,a,i=0,o=_t.prefilters.length,r=S.Deferred().always(function(){delete c.elem}),c=function(){if(a)return!1;for(var e=pt||bt(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),i=0,o=l.tweens.length;i<o;i++)l.tweens[i].run(n);return r.notifyWith(s,[l,n,t]),n<1&&o?t:(o||r.notifyWith(s,[l,1,0]),r.resolveWith(s,[l]),!1)},l=r.promise({elem:s,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:pt||bt(),duration:t.duration,tweens:[],createTween:function(e,t){var n=S.Tween(s,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(r.notifyWith(s,[l,1,0]),r.resolveWith(s,[l,e])):r.rejectWith(s,[l,e]),this}}),d=l.props;for(!function(e,t){var n,i,o,s,a;for(n in e)if(o=t[i=U(n)],s=e[n],Array.isArray(s)&&(o=s[1],s=e[n]=s[0]),n!==i&&(e[i]=s,delete e[n]),(a=S.cssHooks[i])&&"expand"in a)for(n in s=a.expand(s),delete e[i],s)n in e||(e[n]=s[n],t[n]=o);else t[i]=o}(d,l.opts.specialEasing);i<o;i++)if(n=_t.prefilters[i].call(l,s,d,l.opts))return y(n.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return S.map(d,xt,l),y(l.opts.start)&&l.opts.start.call(s,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(c,{elem:s,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(_t,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return re(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){for(var n,i=0,o=(e=y(e)?(t=e,["*"]):e.match($)).length;i<o;i++)n=e[i],_t.tweeners[n]=_t.tweeners[n]||[],_t.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var i,o,s,a,r,c,l,d,p="width"in t||"height"in t,u=this,g={},h=e.style,m=e.nodeType&&ae(e),f=Y.get(e,"fxshow");for(i in n.queue||(null==(a=S._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,r=a.empty.fire,a.empty.fire=function(){a.unqueued||r()}),a.unqueued++,u.always(function(){u.always(function(){a.unqueued--,S.queue(e,"fx").length||a.empty.fire()})})),t)if(o=t[i],mt.test(o)){if(delete t[i],s=s||"toggle"===o,o===(m?"hide":"show")){if("show"!==o||!f||void 0===f[i])continue;m=!0}g[i]=f&&f[i]||S.style(e,i)}if((c=!S.isEmptyObject(t))||!S.isEmptyObject(g))for(i in p&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=f&&f.display)&&(l=Y.get(e,"display")),"none"===(d=S.css(e,"display"))&&(l?d=l:(le([e],!0),l=e.style.display||l,d=S.css(e,"display"),le([e]))),("inline"===d||"inline-block"===d&&null!=l)&&"none"===S.css(e,"float")&&(c||(u.done(function(){h.display=l}),null==l&&(d=h.display,l="none"===d?"":d)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",u.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),c=!1,g)c||(f?"hidden"in f&&(m=f.hidden):f=Y.access(e,"fxshow",{display:l}),s&&(f.hidden=!m),m&&le([e],!0),u.done(function(){for(i in m||le([e]),Y.remove(e,"fxshow"),g)S.style(e,i,g[i])})),c=xt(m?f[i]:0,i,u),i in f||(f[i]=c.start,m&&(c.end=c.start,c.start=0))}],prefilter:function(e,t){t?_t.prefilters.unshift(e):_t.prefilters.push(e)}}),S.speed=function(e,t,n){var i=e&&"object"==typeof e?S.extend({},e):{complete:n||!n&&t||y(e)&&e,duration:e,easing:n&&t||t&&!y(t)&&t};return S.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in S.fx.speeds?i.duration=S.fx.speeds[i.duration]:i.duration=S.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){y(i.old)&&i.old.call(this),i.queue&&S.dequeue(this,i.queue)},i},S.fn.extend({fadeTo:function(e,t,n,i){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(t,e,n,i){function o(){var e=_t(this,S.extend({},t),a);(s||Y.get(this,"finish"))&&e.stop(!0)}var s=S.isEmptyObject(t),a=S.speed(e,n,i);return o.finish=o,s||!1===a.queue?this.each(o):this.queue(a.queue,o)},stop:function(o,e,s){function a(e){var t=e.stop;delete e.stop,t(s)}return"string"!=typeof o&&(s=e,e=o,o=void 0),e&&this.queue(o||"fx",[]),this.each(function(){var e=!0,t=null!=o&&o+"queueHooks",n=S.timers,i=Y.get(this);if(t)i[t]&&i[t].stop&&a(i[t]);else for(t in i)i[t]&&i[t].stop&&ft.test(t)&&a(i[t]);for(t=n.length;t--;)n[t].elem!==this||null!=o&&n[t].queue!==o||(n[t].anim.stop(s),e=!1,n.splice(t,1));!e&&s||S.dequeue(this,o)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=Y.get(this),n=t[a+"queue"],i=t[a+"queueHooks"],o=S.timers,s=n?n.length:0;for(t.finish=!0,S.queue(this,a,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===a&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<s;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),S.each(["toggle","show","hide"],function(e,i){var o=S.fn[i];S.fn[i]=function(e,t,n){return null==e||"boolean"==typeof e?o.apply(this,arguments):this.animate(yt(i,!0),e,t,n)}}),S.each({slideDown:yt("show"),slideUp:yt("hide"),slideToggle:yt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,i){S.fn[e]=function(e,t,n){return this.animate(i,e,t,n)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(pt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),pt=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){ut||(ut=!0,vt())},S.fx.stop=function(){ut=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(i,e){return i=S.fx&&S.fx.speeds[i]||i,e=e||"fx",this.queue(e,function(e,t){var n=k.setTimeout(e,i);t.stop=function(){k.clearTimeout(n)}})},gt=T.createElement("input"),ht=T.createElement("select").appendChild(T.createElement("option")),gt.type="checkbox",b.checkOn=""!==gt.value,b.optSelected=ht.selected,(gt=T.createElement("input")).value="t",gt.type="radio",b.radioValue="t"===gt.value;var wt,kt=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return z(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,n){var i,o,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===e.getAttribute?S.prop(e,t,n):(1===s&&S.isXMLDoc(e)||(o=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?wt:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(i=o.get(e,t))?i:null==(i=S.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!b.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,o=t&&t.match($);if(o&&1===e.nodeType)for(;n=o[i++];)e.removeAttribute(n)}}),wt={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),function(e,t){var a=kt[t]||S.find.attr;kt[t]=function(e,t,n){var i,o,s=t.toLowerCase();return n||(o=kt[s],kt[s]=i,i=null!=a(e,t,n)?s:null,kt[s]=o),i}});var Tt=/^(?:input|select|textarea|button)$/i,St=/^(?:a|area)$/i;function It(e){return(e.match($)||[]).join(" ")}function At(e){return e.getAttribute&&e.getAttribute("class")||""}function Ct(e){return Array.isArray(e)?e:"string"==typeof e&&e.match($)||[]}S.fn.extend({prop:function(e,t){return z(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,n){var i,o,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&S.isXMLDoc(e)||(t=S.propFix[t]||t,o=S.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:e[t]=n:o&&"get"in o&&null!==(i=o.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):Tt.test(e.nodeName)||St.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),b.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,n,i,o,s,a,r,c=0;if(y(t))return this.each(function(e){S(this).addClass(t.call(this,e,At(this)))});if((e=Ct(t)).length)for(;n=this[c++];)if(o=At(n),i=1===n.nodeType&&" "+It(o)+" "){for(a=0;s=e[a++];)i.indexOf(" "+s+" ")<0&&(i+=s+" ");o!==(r=It(i))&&n.setAttribute("class",r)}return this},removeClass:function(t){var e,n,i,o,s,a,r,c=0;if(y(t))return this.each(function(e){S(this).removeClass(t.call(this,e,At(this)))});if(!arguments.length)return this.attr("class","");if((e=Ct(t)).length)for(;n=this[c++];)if(o=At(n),i=1===n.nodeType&&" "+It(o)+" "){for(a=0;s=e[a++];)for(;-1<i.indexOf(" "+s+" ");)i=i.replace(" "+s+" "," ");o!==(r=It(i))&&n.setAttribute("class",r)}return this},toggleClass:function(o,t){var s=typeof o,a="string"==s||Array.isArray(o);return"boolean"==typeof t&&a?t?this.addClass(o):this.removeClass(o):y(o)?this.each(function(e){S(this).toggleClass(o.call(this,e,At(this),t),t)}):this.each(function(){var e,t,n,i;if(a)for(t=0,n=S(this),i=Ct(o);e=i[t++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else void 0!==o&&"boolean"!=s||((e=At(this))&&Y.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===o?"":Y.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&-1<(" "+It(At(n))+" ").indexOf(t))return!0;return!1}});var Bt=/\r/g;S.fn.extend({val:function(n){var i,e,o,t=this[0];return arguments.length?(o=y(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=o?n.call(this,e,S(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=S.map(t,function(e){return null==e?"":e+""})),(i=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&void 0!==i.set(this,t,"value")||(this.value=t))})):t?(i=S.valHooks[t.type]||S.valHooks[t.nodeName.toLowerCase()])&&"get"in i&&void 0!==(e=i.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(Bt,""):null==e?"":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:It(S.text(e))}},select:{get:function(e){var t,n,i,o=e.options,s=e.selectedIndex,a="select-one"===e.type,r=a?null:[],c=a?s+1:o.length;for(i=s<0?c:a?s:0;i<c;i++)if(((n=o[i]).selected||i===s)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=S(n).val(),a)return t;r.push(t)}return r},set:function(e,t){for(var n,i,o=e.options,s=S.makeArray(t),a=o.length;a--;)((i=o[a]).selected=-1<S.inArray(S.valHooks.option.get(i),s))&&(n=!0);return n||(e.selectedIndex=-1),s}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},b.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),b.focusin="onfocusin"in k;function Nt(e){e.stopPropagation()}var Dt=/^(?:focusinfocus|focusoutblur)$/;S.extend(S.event,{trigger:function(e,t,n,i){var o,s,a,r,c,l,d,p,u=[n||T],g=v.call(e,"type")?e.type:e,h=v.call(e,"namespace")?e.namespace.split("."):[];if(s=p=a=n=n||T,3!==n.nodeType&&8!==n.nodeType&&!Dt.test(g+S.event.triggered)&&(-1<g.indexOf(".")&&(g=(h=g.split(".")).shift(),h.sort()),c=g.indexOf(":")<0&&"on"+g,(e=e[S.expando]?e:new S.Event(g,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),d=S.event.special[g]||{},i||!d.trigger||!1!==d.trigger.apply(n,t))){if(!i&&!d.noBubble&&!m(n)){for(r=d.delegateType||g,Dt.test(r+g)||(s=s.parentNode);s;s=s.parentNode)u.push(s),a=s;a===(n.ownerDocument||T)&&u.push(a.defaultView||a.parentWindow||k)}for(o=0;(s=u[o++])&&!e.isPropagationStopped();)p=s,e.type=1<o?r:d.bindType||g,(l=(Y.get(s,"events")||Object.create(null))[e.type]&&Y.get(s,"handle"))&&l.apply(s,t),(l=c&&s[c])&&l.apply&&V(s)&&(e.result=l.apply(s,t),!1===e.result&&e.preventDefault());return e.type=g,i||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(u.pop(),t)||!V(n)||c&&y(n[g])&&!m(n)&&((a=n[c])&&(n[c]=null),S.event.triggered=g,e.isPropagationStopped()&&p.addEventListener(g,Nt),n[g](),e.isPropagationStopped()&&p.removeEventListener(g,Nt),S.event.triggered=void 0,a&&(n[c]=a)),e.result}},simulate:function(e,t,n){var i=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(i,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),b.focusin||S.each({focus:"focusin",blur:"focusout"},function(n,i){function o(e){S.event.simulate(i,e.target,S.event.fix(e))}S.event.special[i]={setup:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,i);t||e.addEventListener(n,o,!0),Y.access(e,i,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,i)-1;t?Y.access(e,i,t):(e.removeEventListener(n,o,!0),Y.remove(e,i))}}});var Mt=k.location,Ft={guid:Date.now()},Et=/\?/;S.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new k.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||S.error("Invalid XML: "+e),t};var $t=/\[\]$/,Ot=/\r?\n/g,Pt=/^(?:submit|button|image|reset|file)$/i,Wt=/^(?:input|select|textarea|keygen)/i;function Ht(n,e,i,o){var t;if(Array.isArray(e))S.each(e,function(e,t){i||$t.test(n)?o(n,t):Ht(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,i,o)});else if(i||"object"!==_(e))o(n,e);else for(t in e)Ht(n+"["+t+"]",e[t],i,o)}S.param=function(e,t){function n(e,t){var n=y(t)?t():t;o[o.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)}var i,o=[];if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){n(this.name,this.value)});else for(i in e)Ht(i,e[i],t,n);return o.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&Wt.test(this.nodeName)&&!Pt.test(e)&&(this.checked||!ue.test(e))}).map(function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(e){return{name:t.name,value:e.replace(Ot,"\r\n")}}):{name:t.name,value:n.replace(Ot,"\r\n")}}).get()}});var jt=/%20/g,Rt=/#.*$/,zt=/([?&])_=[^&]*/,Lt=/^(.*?):[ \t]*([^\r\n]*)$/gm,qt=/^(?:GET|HEAD)$/,Kt=/^\/\//,Ut={},Vt={},Jt="*/".concat("*"),Yt=T.createElement("a");function Zt(s){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,i=0,o=e.toLowerCase().match($)||[];if(y(t))for(;n=o[i++];)"+"===n[0]?(n=n.slice(1)||"*",(s[n]=s[n]||[]).unshift(t)):(s[n]=s[n]||[]).push(t)}}function Gt(t,o,s,a){var r={},c=t===Vt;function l(e){var i;return r[e]=!0,S.each(t[e]||[],function(e,t){var n=t(o,s,a);return"string"!=typeof n||c||r[n]?c?!(i=n):void 0:(o.dataTypes.unshift(n),l(n),!1)}),i}return l(o.dataTypes[0])||!r["*"]&&l("*")}function Xt(e,t){var n,i,o=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:i=i||{})[n]=t[n]);return i&&S.extend(!0,e,i),e}Yt.href=Mt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Mt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Mt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Jt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Xt(Xt(e,S.ajaxSettings),t):Xt(S.ajaxSettings,e)},ajaxPrefilter:Zt(Ut),ajaxTransport:Zt(Vt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var d,p,u,n,g,i,h,m,o,s,f=S.ajaxSetup({},t),v=f.context||f,b=f.context&&(v.nodeType||v.jquery)?S(v):S.event,y=S.Deferred(),x=S.Callbacks("once memory"),_=f.statusCode||{},a={},r={},c="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n)for(n={};t=Lt.exec(u);)n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?u:null},setRequestHeader:function(e,t){return null==h&&(e=r[e.toLowerCase()]=r[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)w.always(e[w.status]);else for(t in e)_[t]=[_[t],e[t]];return this},abort:function(e){var t=e||c;return d&&d.abort(t),l(0,t),this}};if(y.promise(w),f.url=((e||f.url||Mt.href)+"").replace(Kt,Mt.protocol+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match($)||[""],null==f.crossDomain){i=T.createElement("a");try{i.href=f.url,i.href=i.href,f.crossDomain=Yt.protocol+"//"+Yt.host!=i.protocol+"//"+i.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=S.param(f.data,f.traditional)),Gt(Ut,f,t,w),h)return w;for(o in(m=S.event&&f.global)&&0==S.active++&&S.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!qt.test(f.type),p=f.url.replace(Rt,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(jt,"+")):(s=f.url.slice(p.length),f.data&&(f.processData||"string"==typeof f.data)&&(p+=(Et.test(p)?"&":"?")+f.data,delete f.data),!1===f.cache&&(p=p.replace(zt,"$1"),s=(Et.test(p)?"&":"?")+"_="+Ft.guid+++s),f.url=p+s),f.ifModified&&(S.lastModified[p]&&w.setRequestHeader("If-Modified-Since",S.lastModified[p]),S.etag[p]&&w.setRequestHeader("If-None-Match",S.etag[p])),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&w.setRequestHeader("Content-Type",f.contentType),w.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Jt+"; q=0.01":""):f.accepts["*"]),f.headers)w.setRequestHeader(o,f.headers[o]);if(f.beforeSend&&(!1===f.beforeSend.call(v,w,f)||h))return w.abort();if(c="abort",x.add(f.complete),w.done(f.success),w.fail(f.error),d=Gt(Vt,f,t,w)){if(w.readyState=1,m&&b.trigger("ajaxSend",[w,f]),h)return w;f.async&&0<f.timeout&&(g=k.setTimeout(function(){w.abort("timeout")},f.timeout));try{h=!1,d.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,i){var o,s,a,r,c,l=t;h||(h=!0,g&&k.clearTimeout(g),d=void 0,u=i||"",w.readyState=0<e?4:0,o=200<=e&&e<300||304===e,n&&(r=function(e,t,n){for(var i,o,s,a,r=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(o in r)if(r[o]&&r[o].test(i)){c.unshift(o);break}if(c[0]in n)s=c[0];else{for(o in n){if(!c[0]||e.converters[o+" "+c[0]]){s=o;break}a=a||o}s=s||a}if(s)return s!==c[0]&&c.unshift(s),n[s]}(f,w,n)),!o&&-1<S.inArray("script",f.dataTypes)&&(f.converters["text script"]=function(){}),r=function(e,t,n,i){var o,s,a,r,c,l={},d=e.dataTypes.slice();if(d[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(s=d.shift();s;)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!c&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=s,s=d.shift())if("*"===s)s=c;else if("*"!==c&&c!==s){if(!(a=l[c+" "+s]||l["* "+s]))for(o in l)if((r=o.split(" "))[1]===s&&(a=l[c+" "+r[0]]||l["* "+r[0]])){!0===a?a=l[o]:!0!==l[o]&&(s=r[0],d.unshift(r[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+c+" to "+s}}}return{state:"success",data:t}}(f,r,w,o),o?(f.ifModified&&((c=w.getResponseHeader("Last-Modified"))&&(S.lastModified[p]=c),(c=w.getResponseHeader("etag"))&&(S.etag[p]=c)),204===e||"HEAD"===f.type?l="nocontent":304===e?l="notmodified":(l=r.state,s=r.data,o=!(a=r.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),w.status=e,w.statusText=(t||l)+"",o?y.resolveWith(v,[s,l,w]):y.rejectWith(v,[w,l,a]),w.statusCode(_),_=void 0,m&&b.trigger(o?"ajaxSuccess":"ajaxError",[w,f,o?s:a]),x.fireWith(v,[w,l]),m&&(b.trigger("ajaxComplete",[w,f]),--S.active||S.event.trigger("ajaxStop")))}return w},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],function(e,o){S[o]=function(e,t,n,i){return y(t)&&(i=i||n,n=t,t=void 0),S.ajax(S.extend({url:e,type:o,dataType:i,data:t,success:n},S.isPlainObject(e)&&e))}}),S.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(y(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return y(n)?this.each(function(e){S(this).wrapInner(n.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=y(t);return this.each(function(e){S(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new k.XMLHttpRequest}catch(e){}};var Qt={0:200,1223:204},en=S.ajaxSettings.xhr();b.cors=!!en&&"withCredentials"in en,b.ajax=en=!!en,S.ajaxTransport(function(o){var s,a;if(b.cors||en&&!o.crossDomain)return{send:function(e,t){var n,i=o.xhr();if(i.open(o.type,o.url,o.async,o.username,o.password),o.xhrFields)for(n in o.xhrFields)i[n]=o.xhrFields[n];for(n in o.mimeType&&i.overrideMimeType&&i.overrideMimeType(o.mimeType),o.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)i.setRequestHeader(n,e[n]);s=function(e){return function(){s&&(s=a=i.onload=i.onerror=i.onabort=i.ontimeout=i.onreadystatechange=null,"abort"===e?i.abort():"error"===e?"number"!=typeof i.status?t(0,"error"):t(i.status,i.statusText):t(Qt[i.status]||i.status,i.statusText,"text"!==(i.responseType||"text")||"string"!=typeof i.responseText?{binary:i.response}:{text:i.responseText},i.getAllResponseHeaders()))}},i.onload=s(),a=i.onerror=i.ontimeout=s("error"),void 0!==i.onabort?i.onabort=a:i.onreadystatechange=function(){4===i.readyState&&k.setTimeout(function(){s&&a()})},s=s("abort");try{i.send(o.hasContent&&o.data||null)}catch(e){if(s)throw e}},abort:function(){s&&s()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),S.ajaxTransport("script",function(n){var i,o;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){i=S("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",o=function(e){i.remove(),o=null,e&&t("error"===e.type?404:200,e.type)}),T.head.appendChild(i[0])},abort:function(){o&&o()}}});var tn,nn=[],on=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=nn.pop()||S.expando+"_"+Ft.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",function(e,t,n){var i,o,s,a=!1!==e.jsonp&&(on.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&on.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(on,"$1"+i):!1!==e.jsonp&&(e.url+=(Et.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return s||S.error(i+" was not called"),s[0]},e.dataTypes[0]="json",o=k[i],k[i]=function(){s=arguments},n.always(function(){void 0===o?S(k).removeProp(i):k[i]=o,e[i]&&(e.jsonpCallback=t.jsonpCallback,nn.push(i)),s&&y(o)&&o(s[0]),s=o=void 0}),"script"}),b.createHTMLDocument=((tn=T.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===tn.childNodes.length),S.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(b.createHTMLDocument?((i=(t=T.implementation.createHTMLDocument("")).createElement("base")).href=T.location.href,t.head.appendChild(i)):t=T),s=!n&&[],(o=C.exec(e))?[t.createElement(o[1])]:(o=ye([e],t,s),s&&s.length&&S(s).remove(),S.merge([],o.childNodes)));var i,o,s},S.fn.load=function(e,t,n){var i,o,s,a=this,r=e.indexOf(" ");return-1<r&&(i=It(e.slice(r)),e=e.slice(0,r)),y(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),0<a.length&&S.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){s=arguments,a.html(i?S("<div>").append(S.parseHTML(e)).find(i):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,s||[e.responseText,t,e])})}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,n){var i,o,s,a,r,c,l=S.css(e,"position"),d=S(e),p={};"static"===l&&(e.style.position="relative"),r=d.offset(),s=S.css(e,"top"),c=S.css(e,"left"),o=("absolute"===l||"fixed"===l)&&-1<(s+c).indexOf("auto")?(a=(i=d.position()).top,i.left):(a=parseFloat(s)||0,parseFloat(c)||0),y(t)&&(t=t.call(e,n,S.extend({},r))),null!=t.top&&(p.top=t.top-r.top+a),null!=t.left&&(p.left=t.left-r.left+o),"using"in t?t.using.call(e,p):("number"==typeof p.top&&(p.top+="px"),"number"==typeof p.left&&(p.left+="px"),d.css(p))}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)});var e,n,i=this[0];return i?i.getClientRects().length?(e=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,i=this[0],o={top:0,left:0};if("fixed"===S.css(i,"position"))t=i.getBoundingClientRect();else{for(t=this.offset(),n=i.ownerDocument,e=i.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===S.css(e,"position");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&((o=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),o.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-o.top-S.css(i,"marginTop",!0),left:t.left-o.left-S.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===S.css(e,"position");)e=e.offsetParent;return e||ie})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,o){var s="pageYOffset"===o;S.fn[t]=function(e){return z(this,function(e,t,n){var i;if(m(e)?i=e:9===e.nodeType&&(i=e.defaultView),void 0===n)return i?i[o]:e[t];i?i.scrollTo(s?i.pageXOffset:n,s?n:i.pageYOffset):e[t]=n},t,e,arguments.length)}}),S.each(["top","left"],function(e,n){S.cssHooks[n]=Xe(b.pixelPosition,function(e,t){if(t)return t=Ge(e,n),Ue.test(t)?S(e).position()[n]+"px":t})}),S.each({Height:"height",Width:"width"},function(a,r){S.each({padding:"inner"+a,content:r,"":"outer"+a},function(i,s){S.fn[s]=function(e,t){var n=arguments.length&&(i||"boolean"!=typeof e),o=i||(!0===e||!0===t?"margin":"border");return z(this,function(e,t,n){var i;return m(e)?0===s.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+a],i["scroll"+a],e.body["offset"+a],i["offset"+a],i["client"+a])):void 0===n?S.css(e,t,o):S.style(e,t,n,o)},r,n?e:void 0,n)}})}),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){S.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var sn=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;S.proxy=function(e,t){var n,i,o;if("string"==typeof t&&(n=e[t],t=e,e=n),y(e))return i=r.call(arguments,2),(o=function(){return e.apply(t||this,i.concat(r.call(arguments)))}).guid=e.guid=e.guid||S.guid++,o},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=A,S.isFunction=y,S.isWindow=m,S.camelCase=U,S.type=_,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(sn,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return S});var an=k.jQuery,rn=k.$;return S.noConflict=function(e){return k.$===S&&(k.$=rn),e&&k.jQuery===S&&(k.jQuery=an),S},k.sincloJquery=S}),
/*!
 * Socket.IO v4.8.1
 * (c) 2014-2024 Guillermo Rauch
 * Released under the MIT License.
 */
function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).io=t()}(this,function(){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,"symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(o,"string"))?s:s+""),i)}var o,s}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=h(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,r=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){r=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(r)throw s}}}}function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)!{}.hasOwnProperty.call(n,i)||(e[i]=n[i])}return e}).apply(null,arguments)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){e.prototype=Object.create(t.prototype),p(e.prototype.constructor=e,t)}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function t(e){var n="function"==typeof Map?new Map:void 0;return(t=function(e){if(null===e||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return function(e,t,n){if(d())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,t);var o=new(e.bind.apply(e,i));return n&&p(o,n.prototype),o}(e,arguments,c(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),p(t,e)})(e)}var m=Object.create(null);m.open="0",m.close="1",m.ping="2",m.pong="3",m.message="4",m.upgrade="5",m.noop="6";var f=Object.create(null);Object.keys(m).forEach(function(e){f[m[e]]=e});var n,v={type:"error",data:"parser error"},b="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),y="function"==typeof ArrayBuffer,x=function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},_=function(e,t,n){var i=e.type,o=e.data;return b&&o instanceof Blob?t?n(o):w(o,n):y&&(o instanceof ArrayBuffer||x(o))?t?n(o):w(new Blob([o]),n):n(m[i]+(o||""))},w=function(e,t){var n=new FileReader;return n.onload=function(){var e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};function k(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T="undefined"==typeof Uint8Array?[]:new Uint8Array(256),S=0;S<e.length;S++)T[e.charCodeAt(S)]=S;function I(e,t){if("string"!=typeof e)return{type:"message",data:N(e,t)};var n=e.charAt(0);return"b"===n?{type:"message",data:B(e.substring(1),t)}:f[n]?1<e.length?{type:f[n],data:e.substring(1)}:{type:f[n]}:v}var A,C="function"==typeof ArrayBuffer,B=function(e,t){if(C){var n=function(e){var t,n,i,o,s,a=.75*e.length,r=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var l=new ArrayBuffer(a),d=new Uint8Array(l);for(t=0;t<r;t+=4)n=T[e.charCodeAt(t)],i=T[e.charCodeAt(t+1)],o=T[e.charCodeAt(t+2)],s=T[e.charCodeAt(t+3)],d[c++]=n<<2|i>>4,d[c++]=(15&i)<<4|o>>2,d[c++]=(3&o)<<6|63&s;return l}(e);return N(n,t)}return{base64:!0,data:e}},N=function(e,t){switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},D=String.fromCharCode(30);function M(){return new TransformStream({transform:function(s,a){var e,t;e=s,t=function(e){var t,n=e.length;if(n<126)t=new Uint8Array(1),new DataView(t.buffer).setUint8(0,n);else if(n<65536){t=new Uint8Array(3);var i=new DataView(t.buffer);i.setUint8(0,126),i.setUint16(1,n)}else{t=new Uint8Array(9);var o=new DataView(t.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(n))}s.data&&"string"!=typeof s.data&&(t[0]|=128),a.enqueue(t),a.enqueue(e)},b&&e.data instanceof Blob?e.data.arrayBuffer().then(k).then(t):y&&(e.data instanceof ArrayBuffer||x(e.data))?t(k(e.data)):_(e,!1,function(e){n=n||new TextEncoder,t(n.encode(e))})}})}function F(e){return e.reduce(function(e,t){return e+t.length},0)}function E(e,t){if(e[0].length===t)return e.shift();for(var n=new Uint8Array(t),i=0,o=0;o<t;o++)n[o]=e[0][i++],i===e[0].length&&(e.shift(),i=0);return e.length&&i<e[0].length&&(e[0]=e[0].slice(i)),n}function $(e){if(e)return function(e){for(var t in $.prototype)e[t]=$.prototype[t];return e}(e)}$.prototype.on=$.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},$.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},$.prototype.off=$.prototype.removeListener=$.prototype.removeAllListeners=$.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<i.length;o++)if((n=i[o])===t||n.fn===t){i.splice(o,1);break}return 0===i.length&&delete this._callbacks["$"+e],this},$.prototype.emitReserved=$.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(n){i=0;for(var o=(n=n.slice(0)).length;i<o;++i)n[i].apply(this,t)}return this},$.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},$.prototype.hasListeners=function(e){return!!this.listeners(e).length};var O="function"==typeof Promise&&"function"==typeof Promise.resolve?function(e){return Promise.resolve().then(e)}:function(e,t){return t(e,0)},P="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function W(n){for(var e=arguments.length,t=new Array(1<e?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return t.reduce(function(e,t){return n.hasOwnProperty(t)&&(e[t]=n[t]),e},{})}var H=P.setTimeout,j=P.clearTimeout;function R(e,t){t.useNativeTimers?(e.setTimeoutFn=H.bind(P),e.clearTimeoutFn=j.bind(P)):(e.setTimeoutFn=P.setTimeout.bind(P),e.clearTimeoutFn=P.clearTimeout.bind(P))}var z=1.33;function L(e){return"string"==typeof e?function(e){for(var t=0,n=0,i=0,o=e.length;i<o;i++)(t=e.charCodeAt(i))<128?n+=1:t<2048?n+=2:t<55296||57344<=t?n+=3:(i++,n+=4);return n}(e):Math.ceil((e.byteLength||e.size)*z)}function q(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}var K=function(o){function e(e,t,n){var i;return(i=o.call(this,e)||this).description=t,i.context=n,i.type="TransportError",i}return l(e,o),e}(t(Error)),U=function(i){function e(e){var t;return(t=i.call(this)||this).writable=!1,R(t,e),t.opts=e,t.query=e.query,t.socket=e.socket,t.supportsBinary=!e.forceBase64,t}l(e,i);var t=e.prototype;return t.onError=function(e,t,n){return i.prototype.emitReserved.call(this,"error",new K(e,t,n)),this},t.open=function(){return this.readyState="opening",this.doOpen(),this},t.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},t.send=function(e){"open"===this.readyState&&this.write(e)},t.onOpen=function(){this.readyState="open",this.writable=!0,i.prototype.emitReserved.call(this,"open")},t.onData=function(e){var t=I(e,this.socket.binaryType);this.onPacket(t)},t.onPacket=function(e){i.prototype.emitReserved.call(this,"packet",e)},t.onClose=function(e){this.readyState="closed",i.prototype.emitReserved.call(this,"close",e)},t.pause=function(){},t.createUri=function(e,t){var n=1<arguments.length&&void 0!==t?t:{};return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)},t._hostname=function(){var e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"},t._port=function(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""},t._query=function(e){var t=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""},e}($),V=function(t){function e(){var e;return(e=t.apply(this,arguments)||this)._polling=!1,e}l(e,t);var n=e.prototype;return n.doOpen=function(){this._poll()},n.pause=function(e){var t=this;this.readyState="pausing";function n(){t.readyState="paused",e()}if(this._polling||!this.writable){var i=0;this._polling&&(i++,this.once("pollComplete",function(){--i||n()})),this.writable||(i++,this.once("drain",function(){--i||n()}))}else n()},n._poll=function(){this._polling=!0,this.doPoll(),this.emitReserved("poll")},n.onData=function(e){var t=this;(function(e,t){for(var n=e.split(D),i=[],o=0;o<n.length;o++){var s=I(n[o],t);if(i.push(s),"error"===s.type)break}return i})(e,this.socket.binaryType).forEach(function(e){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose({description:"transport closed by the server"}),!1;t.onPacket(e)}),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())},n.doClose=function(){function e(){t.write([{type:"close"}])}var t=this;"open"===this.readyState?e():this.once("open",e)},n.write=function(e){var t,n,i,o,s,a=this;this.writable=!1,n=function(e){a.doWrite(e,function(){a.writable=!0,a.emitReserved("drain")})},i=(t=e).length,o=new Array(i),s=0,t.forEach(function(e,t){_(e,!1,function(e){o[t]=e,++s===i&&n(o.join(D))})})},n.uri=function(){var e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=q()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)},s(e,[{key:"name",get:function(){return"polling"}}])}(U),J=!1;try{J="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){}var Y=J;function Z(){}var G=function(o){function e(e){var t;if(t=o.call(this,e)||this,"undefined"!=typeof location){var n="https:"===location.protocol,i=location.port;i=i||(n?"443":"80"),t.xd="undefined"!=typeof location&&e.hostname!==location.hostname||i!==e.port}return t}l(e,o);var t=e.prototype;return t.doWrite=function(e,t){var n=this,i=this.request({method:"POST",data:e});i.on("success",t),i.on("error",function(e,t){n.onError("xhr post error",e,t)})},t.doPoll=function(){var n=this,e=this.request();e.on("data",this.onData.bind(this)),e.on("error",function(e,t){n.onError("xhr poll error",e,t)}),this.pollXhr=e},e}(V),X=function(o){function s(e,t,n){var i;return(i=o.call(this)||this).createRequest=e,R(i,n),i._opts=n,i._method=n.method||"GET",i._uri=t,i._data=void 0!==n.data?n.data:null,i._create(),i}l(s,o);var e=s.prototype;return e._create=function(){var e,t=this,n=W(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;var i=this._xhr=this.createRequest(n);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders)for(var o in i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0),this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(o)&&i.setRequestHeader(o,this._opts.extraHeaders[o])}catch(e){}if("POST"===this._method)try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{i.setRequestHeader("Accept","*/*")}catch(e){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=function(){var e;3===i.readyState&&(null===(e=t._opts.cookieJar)||void 0===e||e.parseCookies(i.getResponseHeader("set-cookie"))),4===i.readyState&&(200===i.status||1223===i.status?t._onLoad():t.setTimeoutFn(function(){t._onError("number"==typeof i.status?i.status:0)},0))},i.send(this._data)}catch(e){return void this.setTimeoutFn(function(){t._onError(e)},0)}"undefined"!=typeof document&&(this._index=s.requestsCount++,s.requests[this._index]=this)},e._onError=function(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)},e._cleanup=function(e){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=Z,e)try{this._xhr.abort()}catch(e){}"undefined"!=typeof document&&delete s.requests[this._index],this._xhr=null}},e._onLoad=function(){var e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())},e.abort=function(){this._cleanup()},s}($);if(X.requestsCount=0,X.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",Q);else if("function"==typeof addEventListener){addEventListener("onpagehide"in P?"pagehide":"unload",Q,!1)}function Q(){for(var e in X.requests)X.requests.hasOwnProperty(e)&&X.requests[e].abort()}var ee,te=(ee=ie({xdomain:!1}))&&null!==ee.responseType,ne=function(i){function e(e){var t;t=i.call(this,e)||this;var n=e&&e.forceBase64;return t.supportsBinary=te&&!n,t}return l(e,i),e.prototype.request=function(e){var t=0<arguments.length&&void 0!==e?e:{};return r(t,{xd:this.xd},this.opts),new X(ie,this.uri(),t)},e}(G);function ie(e){var t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||Y))return new XMLHttpRequest}catch(e){}if(!t)try{return new(P[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}var oe="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),se=function(e){function t(){return e.apply(this,arguments)||this}l(t,e);var n=t.prototype;return n.doOpen=function(){var e=this.uri(),t=this.opts.protocols,n=oe?{}:W(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()},n.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.opts.autoUnref&&t.ws._socket.unref(),t.onOpen()},this.ws.onclose=function(e){return t.onClose({description:"websocket connection closed",context:e})},this.ws.onmessage=function(e){return t.onData(e.data)},this.ws.onerror=function(e){return t.onError("websocket error",e)}},n.write=function(e){var i=this;this.writable=!1;for(var t=function(){var t=e[o],n=o===e.length-1;_(t,i.supportsBinary,function(e){try{i.doWrite(t,e)}catch(e){}n&&O(function(){i.writable=!0,i.emitReserved("drain")},i.setTimeoutFn)})},o=0;o<e.length;o++)t()},n.doClose=function(){void 0!==this.ws&&(this.ws.onerror=function(){},this.ws.close(),this.ws=null)},n.uri=function(){var e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=q()),this.supportsBinary||(t.b64=1),this.createUri(e,t)},s(t,[{key:"name",get:function(){return"websocket"}}])}(U),ae=P.WebSocket||P.MozWebSocket,re={websocket:function(e){function t(){return e.apply(this,arguments)||this}l(t,e);var n=t.prototype;return n.createSocket=function(e,t,n){return oe?new ae(e,t,n):t?new ae(e,t):new ae(e)},n.doWrite=function(e,t){this.ws.send(t)},t}(se),webtransport:function(e){function t(){return e.apply(this,arguments)||this}l(t,e);var n=t.prototype;return n.doOpen=function(){var s=this;try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(function(){s.onClose()}).catch(function(e){s.onError("webtransport error",e)}),this._transport.ready.then(function(){s._transport.createBidirectionalStream().then(function(e){var t=function(c,l){A=A||new TextDecoder;var d=[],p=0,u=-1,g=!1;return new TransformStream({transform:function(e,t){for(d.push(e);;){if(0===p){if(F(d)<1)break;var n=E(d,1);g=128==(128&n[0]),u=127&n[0],p=u<126?3:126===u?1:2}else if(1===p){if(F(d)<2)break;var i=E(d,2);u=new DataView(i.buffer,i.byteOffset,i.length).getUint16(0),p=3}else if(2===p){if(F(d)<8)break;var o=E(d,8),s=new DataView(o.buffer,o.byteOffset,o.length),a=s.getUint32(0);if(a>Math.pow(2,21)-1){t.enqueue(v);break}u=a*Math.pow(2,32)+s.getUint32(4),p=3}else{if(F(d)<u)break;var r=E(d,u);t.enqueue(I(g?r:A.decode(r),l)),p=0}if(0===u||c<u){t.enqueue(v);break}}}})}(Number.MAX_SAFE_INTEGER,s.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),i=M();i.readable.pipeTo(e.writable),s._writer=i.writable.getWriter();!function i(){n.read().then(function(e){var t=e.done,n=e.value;t||(s.onPacket(n),i())}).catch(function(e){})}();var o={type:"open"};s.query.sid&&(o.data='{"sid":"'.concat(s.query.sid,'"}')),s._writer.write(o).then(function(){return s.onOpen()})})})},n.write=function(n){var i=this;this.writable=!1;for(var e=function(){var e=n[o],t=o===n.length-1;i._writer.write(e).then(function(){t&&O(function(){i.writable=!0,i.emitReserved("drain")},i.setTimeoutFn)})},o=0;o<n.length;o++)e()},n.doClose=function(){var e;null===(e=this._transport)||void 0===e||e.close()},s(t,[{key:"name",get:function(){return"webtransport"}}])}(U),polling:ne},ce=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,le=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function de(e){if(8e3<e.length)throw"URI too long";var t=e,n=e.indexOf("["),i=e.indexOf("]");-1!=n&&-1!=i&&(e=e.substring(0,n)+e.substring(n,i).replace(/:/g,";")+e.substring(i,e.length));for(var o,s,a=ce.exec(e||""),r={},c=14;c--;)r[le[c]]=a[c]||"";return-1!=n&&-1!=i&&(r.source=t,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=function(e){var t=e.replace(/\/{2,9}/g,"/").split("/");"/"!=e.slice(0,1)&&0!==e.length||t.splice(0,1);"/"==e.slice(-1)&&t.splice(t.length-1,1);return t}(r.path),r.queryKey=(o=r.query,s={},o.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,n){t&&(s[t]=n)}),s),r}var pe="function"==typeof addEventListener&&"function"==typeof removeEventListener,ue=[];pe&&addEventListener("offline",function(){ue.forEach(function(e){return e()})},!1);var ge=function(o){function i(e,t){var n;if((n=o.call(this)||this).binaryType="arraybuffer",n.writeBuffer=[],n._prevBufferLen=0,n._pingInterval=-1,n._pingTimeout=-1,n._maxPayload=-1,n._pingTimeoutTime=1/0,e&&"object"===g(e)&&(t=e,e=null),e){var i=de(e);t.hostname=i.host,t.secure="https"===i.protocol||"wss"===i.protocol,t.port=i.port,i.query&&(t.query=i.query)}else t.host&&(t.hostname=de(t.host).host);return R(n,t),n.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=n.secure?"443":"80"),n.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),n.port=t.port||("undefined"!=typeof location&&location.port?location.port:n.secure?"443":"80"),n.transports=[],n._transportsByName={},t.transports.forEach(function(e){var t=e.prototype.name;n.transports.push(t),n._transportsByName[t]=e}),n.opts=r({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),n.opts.path=n.opts.path.replace(/\/$/,"")+(n.opts.addTrailingSlash?"/":""),"string"==typeof n.opts.query&&(n.opts.query=function(e){for(var t={},n=e.split("&"),i=0,o=n.length;i<o;i++){var s=n[i].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}(n.opts.query)),pe&&(n.opts.closeOnBeforeunload&&(n._beforeunloadEventListener=function(){n.transport&&(n.transport.removeAllListeners(),n.transport.close())},addEventListener("beforeunload",n._beforeunloadEventListener,!1)),"localhost"!==n.hostname&&(n._offlineEventListener=function(){n._onClose("transport close",{description:"network connection lost"})},ue.push(n._offlineEventListener))),n.opts.withCredentials&&(n._cookieJar=void 0),n._open(),n}l(i,o);var e=i.prototype;return e.createTransport=function(e){var t=r({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);var n=r({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)},e._open=function(){var e=this;if(0!==this.transports.length){var t=this.opts.rememberUpgrade&&i.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";var n=this.createTransport(t);n.open(),this.setTransport(n)}else this.setTimeoutFn(function(){e.emitReserved("error","No transports available")},0)},e.setTransport=function(e){var t=this;this.transport&&this.transport.removeAllListeners(),(this.transport=e).on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",function(e){return t._onClose("transport close",e)})},e.onOpen=function(){this.readyState="open",i.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()},e._onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":var t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}},e.onHandshake=function(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()},e._resetPingTimeout=function(){var e=this;this.clearTimeoutFn(this._pingTimeoutTimer);var t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(function(){e._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()},e._onDrain=function(){this.writeBuffer.splice(0,this._prevBufferLen),(this._prevBufferLen=0)===this.writeBuffer.length?this.emitReserved("drain"):this.flush()},e.flush=function(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){var e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}},e._getWritablePackets=function(){if(!(this._maxPayload&&"polling"===this.transport.name&&1<this.writeBuffer.length))return this.writeBuffer;for(var e=1,t=0;t<this.writeBuffer.length;t++){var n=this.writeBuffer[t].data;if(n&&(e+=L(n)),0<t&&e>this._maxPayload)return this.writeBuffer.slice(0,t);e+=2}return this.writeBuffer},e._hasPingExpired=function(){var e=this;if(!this._pingTimeoutTime)return!0;var t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,O(function(){e._onClose("ping timeout")},this.setTimeoutFn)),t},e.write=function(e,t,n){return this._sendPacket("message",e,t,n),this},e.send=function(e,t,n){return this._sendPacket("message",e,t,n),this},e._sendPacket=function(e,t,n,i){if("function"==typeof t&&(i=t,t=void 0),"function"==typeof n&&(i=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var o={type:e,data:t,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),i&&this.once("flush",i),this.flush()}},e.close=function(){function e(){i._onClose("forced close"),i.transport.close()}function t(){i.off("upgrade",t),i.off("upgradeError",t),e()}function n(){i.once("upgrade",t),i.once("upgradeError",t)}var i=this;return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",function(){i.upgrading?n():e()}):this.upgrading?n():e()),this},e._onError=function(e){if(i.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&1<this.transports.length&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)},e._onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),pe&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){var n=ue.indexOf(this._offlineEventListener);-1!==n&&ue.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}},i}($);ge.protocol=4;var he=function(i){function e(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n="object"===g(e)?e:t;return(!n.transports||n.transports&&"string"==typeof n.transports[0])&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(function(e){return re[e]}).filter(function(e){return!!e})),i.call(this,e,n)||this}return l(e,i),e}(function(t){function e(){var e;return(e=t.apply(this,arguments)||this)._upgrades=[],e}l(e,t);var n=e.prototype;return n.onOpen=function(){if(t.prototype.onOpen.call(this),"open"===this.readyState&&this.opts.upgrade)for(var e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])},n._probe=function(e){var n=this,i=this.createTransport(e),o=!1;ge.priorWebsocketSuccess=!1;function t(){o||(i.send([{type:"ping",data:"probe"}]),i.once("packet",function(e){if(!o)if("pong"===e.type&&"probe"===e.data){if(n.upgrading=!0,n.emitReserved("upgrading",i),!i)return;ge.priorWebsocketSuccess="websocket"===i.name,n.transport.pause(function(){o||"closed"!==n.readyState&&(d(),n.setTransport(i),i.send([{type:"upgrade"}]),n.emitReserved("upgrade",i),i=null,n.upgrading=!1,n.flush())})}else{var t=new Error("probe error");t.transport=i.name,n.emitReserved("upgradeError",t)}}))}function s(){o||(o=!0,d(),i.close(),i=null)}var a=function(e){var t=new Error("probe error: "+e);t.transport=i.name,s(),n.emitReserved("upgradeError",t)};function r(){a("transport closed")}function c(){a("socket closed")}function l(e){i&&e.name!==i.name&&s()}var d=function(){i.removeListener("open",t),i.removeListener("error",a),i.removeListener("close",r),n.off("close",c),n.off("upgrading",l)};i.once("open",t),i.once("error",a),i.once("close",r),this.once("close",c),this.once("upgrading",l),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(function(){o||i.open()},200):i.open()},n.onHandshake=function(e){this._upgrades=this._filterUpgrades(e.upgrades),t.prototype.onHandshake.call(this,e)},n._filterUpgrades=function(e){for(var t=[],n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t},e}(ge));function me(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}he.protocol;var fe,ve,be={exports:{}};function ye(){if(ve)return fe;ve=1;var i=36e5,o=864e5;function s(e,t,n,i){var o=1.5*n<=t;return Math.round(e/n)+" "+i+(o?"s":"")}return fe=function(e,t){t=t||{};var n=g(e);if("string"===n&&0<e.length)return function(e){if(100<(e=String(e)).length)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"weeks":case"week":case"w":return 6048e5*n;case"days":case"day":case"d":return n*o;case"hours":case"hour":case"hrs":case"hr":case"h":return n*i;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*n;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(e);if("number"===n&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(o<=t)return s(e,t,o,"day");if(i<=t)return s(e,t,i,"hour");if(6e4<=t)return s(e,t,6e4,"minute");if(1e3<=t)return s(e,t,1e3,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(o<=t)return Math.round(e/o)+"d";if(i<=t)return Math.round(e/i)+"h";if(6e4<=t)return Math.round(e/6e4)+"m";if(1e3<=t)return Math.round(e/1e3)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}}var xe,_e,we=function(t){function l(e){var r,t,n,i=null;function c(){for(var e=arguments.length,o=new Array(e),t=0;t<e;t++)o[t]=arguments[t];if(c.enabled){var s=c,n=Number(new Date),i=n-(r||n);s.diff=i,s.prev=r,s.curr=n,r=n,o[0]=l.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var a=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(e,t){if("%%"===e)return"%";a++;var n=l.formatters[t];if("function"==typeof n){var i=o[a];e=n.call(s,i),o.splice(a,1),a--}return e}),l.formatArgs.call(s,o),(s.log||l.log).apply(s,o)}}return c.namespace=e,c.useColors=l.useColors(),c.color=l.selectColor(e),c.extend=o,c.destroy=l.destroy,Object.defineProperty(c,"enabled",{enumerable:!0,configurable:!1,get:function(){return null!==i?i:(t!==l.namespaces&&(t=l.namespaces,n=l.enabled(e)),n)},set:function(e){i=e}}),"function"==typeof l.init&&l.init(c),c}function o(e,t){var n=l(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function n(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return((l.debug=l).default=l).coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},l.disable=function(){var e=[].concat(u(l.names.map(n)),u(l.skips.map(n).map(function(e){return"-"+e}))).join(",");return l.enable(""),e},l.enable=function(e){var t;l.save(e),l.namespaces=e,l.names=[],l.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?l.skips.push(new RegExp("^"+e.slice(1)+"$")):l.names.push(new RegExp("^"+e+"$")))},l.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=l.skips.length;t<n;t++)if(l.skips[t].test(e))return!1;for(t=0,n=l.names.length;t<n;t++)if(l.names[t].test(e))return!0;return!1},l.humanize=ye(),l.destroy=function(){},Object.keys(t).forEach(function(e){l[e]=t[e]}),l.names=[],l.skips=[],l.formatters={},l.selectColor=function(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return l.colors[Math.abs(t)%l.colors.length]},l.enable(l.load()),l};(_e=(xe=be).exports).formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+xe.exports.humanize(this.diff),!this.useColors)return;var t="color: "+this.color;e.splice(1,0,t,"color: inherit");var n=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(i=n))}),e.splice(i,0,t)},_e.save=function(e){try{e?_e.storage.setItem("debug",e):_e.storage.removeItem("debug")}catch(e){}},_e.load=function(){var e;try{e=_e.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},_e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},_e.storage=function(){try{return localStorage}catch(e){}}(),_e.destroy=function(){!0},_e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],_e.log=console.debug||console.log||function(){},xe.exports=we(_e),xe.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}};var ke=me(be.exports),Te=ke("socket.io-client:url");var Se="function"==typeof ArrayBuffer,Ie=function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer},Ae=Object.prototype.toString,Ce="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Ae.call(Blob),Be="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===Ae.call(File);function Ne(e){return Se&&(e instanceof ArrayBuffer||Ie(e))||Ce&&e instanceof Blob||Be&&e instanceof File}function De(e){var t=[],n=e.data,i=e;return i.data=function e(t,n){if(!t)return t;{if(Ne(t)){var i={_placeholder:!0,num:n.length};return n.push(t),i}if(Array.isArray(t)){for(var o=new Array(t.length),s=0;s<t.length;s++)o[s]=e(t[s],n);return o}if("object"===g(t)&&!(t instanceof Date)){var a={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(a[r]=e(t[r],n));return a}}return t}(n,t),i.attachments=t.length,{packet:i,buffers:t}}function Me(e,t){return e.data=function e(t,n){if(!t)return t;{if(t&&!0===t._placeholder){var i="number"==typeof t.num&&0<=t.num&&t.num<n.length;if(i)return n[t.num];throw new Error("illegal attachments")}if(Array.isArray(t))for(var o=0;o<t.length;o++)t[o]=e(t[o],n);else if("object"===g(t))for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=e(t[s],n))}return t}(e.data,t),delete e.attachments,e}var Fe,Ee,$e=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];(Ee=Fe=Fe||{})[Ee.CONNECT=0]="CONNECT",Ee[Ee.DISCONNECT=1]="DISCONNECT",Ee[Ee.EVENT=2]="EVENT",Ee[Ee.ACK=3]="ACK",Ee[Ee.CONNECT_ERROR=4]="CONNECT_ERROR",Ee[Ee.BINARY_EVENT=5]="BINARY_EVENT",Ee[Ee.BINARY_ACK=6]="BINARY_ACK";var Oe=function(){function e(e){this.replacer=e}var t=e.prototype;return t.encode=function(e){return e.type!==Fe.EVENT&&e.type!==Fe.ACK||!function e(t,n){if(!t||"object"!==g(t))return!1;if(Array.isArray(t)){for(var i=0,o=t.length;i<o;i++)if(e(t[i]))return!0;return!1}if(Ne(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return e(t.toJSON(),!0);for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&e(t[s]))return!0;return!1}(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===Fe.EVENT?Fe.BINARY_EVENT:Fe.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})},t.encodeAsString=function(e){var t=""+e.type;return e.type!==Fe.BINARY_EVENT&&e.type!==Fe.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t},t.encodeAsBinary=function(e){var t=De(e),n=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(n),i},e}(),Pe=function(i){function d(e){var t;return(t=i.call(this)||this).reviver=e,t}l(d,i);var e=d.prototype;return e.add=function(e){var t;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");var n=(t=this.decodeString(e)).type===Fe.BINARY_EVENT;n||t.type===Fe.BINARY_ACK?(t.type=n?Fe.EVENT:Fe.ACK,this.reconstructor=new We(t),0===t.attachments&&i.prototype.emitReserved.call(this,"decoded",t)):i.prototype.emitReserved.call(this,"decoded",t)}else{if(!Ne(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,i.prototype.emitReserved.call(this,"decoded",t))}},e.decodeString=function(e){var t=0,n={type:Number(e.charAt(0))};if(void 0===Fe[n.type])throw new Error("unknown packet type "+n.type);if(n.type===Fe.BINARY_EVENT||n.type===Fe.BINARY_ACK){for(var i=t+1;"-"!==e.charAt(++t)&&t!=e.length;);var o=e.substring(i,t);if(o!=Number(o)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(o)}if("/"===e.charAt(t+1)){for(var s=t+1;++t;){if(","===e.charAt(t))break;if(t===e.length)break}n.nsp=e.substring(s,t)}else n.nsp="/";var a=e.charAt(t+1);if(""!==a&&Number(a)==a){for(var r=t+1;++t;){var c=e.charAt(t);if(null==c||Number(c)!=c){--t;break}if(t===e.length)break}n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){var l=this.tryParse(e.substr(t));if(!d.isPayloadValid(n.type,l))throw new Error("invalid payload");n.data=l}return n},e.tryParse=function(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}},d.isPayloadValid=function(e,t){switch(e){case Fe.CONNECT:return je(t);case Fe.DISCONNECT:return void 0===t;case Fe.CONNECT_ERROR:return"string"==typeof t||je(t);case Fe.EVENT:case Fe.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===$e.indexOf(t[0]));case Fe.ACK:case Fe.BINARY_ACK:return Array.isArray(t)}},e.destroy=function(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)},d}($),We=function(){function e(e){this.packet=e,this.buffers=[],this.reconPack=e}var t=e.prototype;return t.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length!==this.reconPack.attachments)return null;var t=Me(this.reconPack,this.buffers);return this.finishedReconstruction(),t},t.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]},e}();var He=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function je(e){return"[object Object]"===Object.prototype.toString.call(e)}var Re=Object.freeze({__proto__:null,protocol:5,get PacketType(){return Fe},Encoder:Oe,Decoder:Pe,isPacketValid:function(e){return"string"==typeof e.nsp&&(void 0===(t=e.id)||He(t))&&function(e,t){switch(e){case Fe.CONNECT:return void 0===t||je(t);case Fe.DISCONNECT:return void 0===t;case Fe.EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===$e.indexOf(t[0]));case Fe.ACK:return Array.isArray(t);case Fe.CONNECT_ERROR:return"string"==typeof t||je(t);default:return!1}}(e.type,e.data);var t}});function ze(e,t,n){return e.on(t,n),function(){e.off(t,n)}}var Le=ke("socket.io-client:socket"),qe=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),Ke=function(o){function e(e,t,n){var i;return(i=o.call(this)||this).connected=!1,i.recovered=!1,i.receiveBuffer=[],i.sendBuffer=[],i._queue=[],i._queueSeq=0,i.ids=0,i.acks={},i.flags={},i.io=e,i.nsp=t,n&&n.auth&&(i.auth=n.auth),i._opts=r({},n),i.io._autoConnect&&i.open(),i}l(e,o);var t=e.prototype;return t.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[ze(e,"open",this.onopen.bind(this)),ze(e,"packet",this.onpacket.bind(this)),ze(e,"error",this.onerror.bind(this)),ze(e,"close",this.onclose.bind(this))]}},t.connect=function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this},t.open=function(){return this.connect()},t.send=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this},t.emit=function(e){var t,n,i;if(qe.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var o=arguments.length,s=new Array(1<o?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];if(s.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(s),this;var r={type:Fe.EVENT,data:s,options:{}};if(r.options.compress=!1!==this.flags.compress,"function"==typeof s[s.length-1]){var c=this.ids++;Le("emitting packet with ack id %d",c);var l=s.pop();this._registerAckCallback(c,l),r.id=c}var d=null===(n=null===(t=this.io.engine)||void 0===t?void 0:t.transport)||void 0===n?void 0:n.writable,p=this.connected&&!(null===(i=this.io.engine)||void 0===i?void 0:i._hasPingExpired());return this.flags.volatile&&!d?Le("discard packet as the transport is not currently writable"):p?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r),this.flags={},this},t._registerAckCallback=function(t,i){var e,o=this,n=null!==(e=this.flags.timeout)&&void 0!==e?e:this._opts.ackTimeout;if(void 0!==n){var s=this.io.setTimeoutFn(function(){delete o.acks[t];for(var e=0;e<o.sendBuffer.length;e++)o.sendBuffer[e].id===t&&(Le("removing packet with ack id %d from the buffer",t),o.sendBuffer.splice(e,1));Le("event with ack id %d has timed out after %d ms",t,n),i.call(o,new Error("operation has timed out"))},n),a=function(){o.io.clearTimeoutFn(s);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.apply(o,t)};a.withError=!0,this.acks[t]=a}else this.acks[t]=i},t.emitWithAck=function(t){for(var o=this,e=arguments.length,s=new Array(1<e?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];return new Promise(function(n,i){function e(e,t){return e?i(e):n(t)}e.withError=!0,s.push(e),o.emit.apply(o,[t].concat(s))})},t._addToQueue=function(e){var o,s=this;"function"==typeof e[e.length-1]&&(o=e.pop());var a={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:r({fromQueue:!0},this.flags)};e.push(function(e){if(a===s._queue[0]){if(null!==e)a.tryCount>s._opts.retries&&(Le("packet [%d] is discarded after %d tries",a.id,a.tryCount),s._queue.shift(),o&&o(e));else if(Le("packet [%d] was successfully sent",a.id),s._queue.shift(),o){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];o.apply(void 0,[null].concat(n))}return a.pending=!1,s._drainQueue()}}),this._queue.push(a),this._drainQueue()},t._drainQueue=function(e){var t=0<arguments.length&&void 0!==e&&e;if(Le("draining queue"),this.connected&&0!==this._queue.length){var n=this._queue[0];!n.pending||t?(n.pending=!0,n.tryCount++,Le("sending packet [%d] (try nÂ°%d)",n.id,n.tryCount),this.flags=n.flags,this.emit.apply(this,n.args)):Le("packet [%d] has already been sent and is waiting for an ack",n.id)}},t.packet=function(e){e.nsp=this.nsp,this.io._packet(e)},t.onopen=function(){var t=this;Le("transport is open - connecting"),"function"==typeof this.auth?this.auth(function(e){t._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)},t._sendConnectPacket=function(e){this.packet({type:Fe.CONNECT,data:this._pid?r({pid:this._pid,offset:this._lastOffset},e):e})},t.onerror=function(e){this.connected||this.emitReserved("connect_error",e)},t.onclose=function(e,t){Le("close (%s)",e),this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()},t._clearAcks=function(){var n=this;Object.keys(this.acks).forEach(function(t){if(!n.sendBuffer.some(function(e){return String(e.id)===t})){var e=n.acks[t];delete n.acks[t],e.withError&&e.call(n,new Error("socket has been disconnected"))}})},t.onpacket=function(e){if(e.nsp===this.nsp)switch(e.type){case Fe.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Fe.EVENT:case Fe.BINARY_EVENT:this.onevent(e);break;case Fe.ACK:case Fe.BINARY_ACK:this.onack(e);break;case Fe.DISCONNECT:this.ondisconnect();break;case Fe.CONNECT_ERROR:this.destroy();var t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}},t.onevent=function(e){var t=e.data||[];Le("emitting event %j",t),null!=e.id&&(Le("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))},t.emitEvent=function(e){if(this._anyListeners&&this._anyListeners.length){var t,n=a(this._anyListeners.slice());try{for(n.s();!(t=n.n()).done;){t.value.apply(this,e)}}catch(e){n.e(e)}finally{n.f()}}o.prototype.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])},t.ack=function(i){var o=this,s=!1;return function(){if(!s){s=!0;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Le("sending ack %j",t),o.packet({type:Fe.ACK,id:i,data:t})}}},t.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(delete this.acks[e.id],Le("calling ack %s with %j",e.id,e.data),t.withError&&e.data.unshift(null),t.apply(this,e.data)):Le("bad ack %s",e.id)},t.onconnect=function(e,t){Le("socket connected with id %s",e),this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)},t.emitBuffered=function(){var t=this;this.receiveBuffer.forEach(function(e){return t.emitEvent(e)}),this.receiveBuffer=[],this.sendBuffer.forEach(function(e){t.notifyOutgoingListeners(e),t.packet(e)}),this.sendBuffer=[]},t.ondisconnect=function(){Le("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},t.destroy=function(){this.subs&&(this.subs.forEach(function(e){return e()}),this.subs=void 0),this.io._destroy(this)},t.disconnect=function(){return this.connected&&(Le("performing disconnect (%s)",this.nsp),this.packet({type:Fe.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},t.close=function(){return this.disconnect()},t.compress=function(e){return this.flags.compress=e,this},t.timeout=function(e){return this.flags.timeout=e,this},t.onAny=function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this},t.prependAny=function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this},t.offAny=function(e){if(!this._anyListeners)return this;if(e){for(var t=this._anyListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this},t.listenersAny=function(){return this._anyListeners||[]},t.onAnyOutgoing=function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this},t.prependAnyOutgoing=function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this},t.offAnyOutgoing=function(e){if(!this._anyOutgoingListeners)return this;if(e){for(var t=this._anyOutgoingListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this},t.listenersAnyOutgoing=function(){return this._anyOutgoingListeners||[]},t.notifyOutgoingListeners=function(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){var t,n=a(this._anyOutgoingListeners.slice());try{for(n.s();!(t=n.n()).done;){t.value.apply(this,e.data)}}catch(e){n.e(e)}finally{n.f()}}},s(e,[{key:"disconnected",get:function(){return!this.connected}},{key:"active",get:function(){return!!this.subs}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}}])}($);function Ue(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=0<e.jitter&&e.jitter<=1?e.jitter:0,this.attempts=0}Ue.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},Ue.prototype.reset=function(){this.attempts=0},Ue.prototype.setMin=function(e){this.ms=e},Ue.prototype.setMax=function(e){this.max=e},Ue.prototype.setJitter=function(e){this.jitter=e};var Ve=ke("socket.io-client:manager"),Je=function(s){function e(e,t){var n,i;(n=s.call(this)||this).nsps={},n.subs=[],e&&"object"===g(e)&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",n.opts=t,R(n,t),n.reconnection(!1!==t.reconnection),n.reconnectionAttempts(t.reconnectionAttempts||1/0),n.reconnectionDelay(t.reconnectionDelay||1e3),n.reconnectionDelayMax(t.reconnectionDelayMax||5e3),n.randomizationFactor(null!==(i=t.randomizationFactor)&&void 0!==i?i:.5),n.backoff=new Ue({min:n.reconnectionDelay(),max:n.reconnectionDelayMax(),jitter:n.randomizationFactor()}),n.timeout(null==t.timeout?2e4:t.timeout),n._readyState="closed",n.uri=e;var o=t.parser||Re;return n.encoder=new o.Encoder,n.decoder=new o.Decoder,n._autoConnect=!1!==t.autoConnect,n._autoConnect&&n.open(),n}l(e,s);var t=e.prototype;return t.reconnection=function(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection},t.reconnectionAttempts=function(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)},t.reconnectionDelay=function(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)},t.randomizationFactor=function(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)},t.reconnectionDelayMax=function(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)},t.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},t.maybeReconnectOnOpen=function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},t.open=function(t){var n=this;if(Ve("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;Ve("opening %s",this.uri),this.engine=new he(this.uri,this.opts);var e=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;function o(e){Ve("error"),n.cleanup(),n._readyState="closed",n.emitReserved("error",e),t?t(e):n.maybeReconnectOnOpen()}var s=ze(e,"open",function(){i.onopen(),t&&t()}),a=ze(e,"error",o);if(!1!==this._timeout){var r=this._timeout;Ve("connect attempt will timeout after %d",r);var c=this.setTimeoutFn(function(){Ve("connect attempt timed out after %d",r),s(),o(new Error("timeout")),e.close()},r);this.opts.autoUnref&&c.unref(),this.subs.push(function(){n.clearTimeoutFn(c)})}return this.subs.push(s),this.subs.push(a),this},t.connect=function(e){return this.open(e)},t.onopen=function(){Ve("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");var e=this.engine;this.subs.push(ze(e,"ping",this.onping.bind(this)),ze(e,"data",this.ondata.bind(this)),ze(e,"error",this.onerror.bind(this)),ze(e,"close",this.onclose.bind(this)),ze(this.decoder,"decoded",this.ondecoded.bind(this)))},t.onping=function(){this.emitReserved("ping")},t.ondata=function(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}},t.ondecoded=function(e){var t=this;O(function(){t.emitReserved("packet",e)},this.setTimeoutFn)},t.onerror=function(e){Ve("error",e),this.emitReserved("error",e)},t.socket=function(e,t){var n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Ke(this,e,t),this.nsps[e]=n),n},t._destroy=function(){for(var e=0,t=Object.keys(this.nsps);e<t.length;e++){var n=t[e];if(this.nsps[n].active)return void Ve("socket %s is still active, skipping close",n)}this._close()},t._packet=function(e){Ve("writing packet %j",e);for(var t=this.encoder.encode(e),n=0;n<t.length;n++)this.engine.write(t[n],e.options)},t.cleanup=function(){Ve("cleanup"),this.subs.forEach(function(e){return e()}),this.subs.length=0,this.decoder.destroy()},t._close=function(){Ve("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")},t.disconnect=function(){return this._close()},t.onclose=function(e,t){var n;Ve("closed due to %s",e),this.cleanup(),null===(n=this.engine)||void 0===n||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()},t.reconnect=function(){var t=this;if(this._reconnecting||this.skipReconnect)return this;var n=this;if(this.backoff.attempts>=this._reconnectionAttempts)Ve("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var e=this.backoff.duration();Ve("will wait %dms before reconnect attempt",e),this._reconnecting=!0;var i=this.setTimeoutFn(function(){n.skipReconnect||(Ve("attempting reconnect"),t.emitReserved("reconnect_attempt",n.backoff.attempts),n.skipReconnect||n.open(function(e){e?(Ve("reconnect attempt error"),n._reconnecting=!1,n.reconnect(),t.emitReserved("reconnect_error",e)):(Ve("reconnect success"),n.onreconnect())}))},e);this.opts.autoUnref&&i.unref(),this.subs.push(function(){t.clearTimeoutFn(i)})}},t.onreconnect=function(){var e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)},e}($),Ye=ke("socket.io-client"),Ze={};function Ge(e,t){"object"===g(e)&&(t=e,e=void 0);var n,i=function(e,t,n){var i=1<arguments.length&&void 0!==t?t:"",o=2<arguments.length?n:void 0,s=e;o=o||"undefined"!=typeof location&&location,null==e&&(e=o.protocol+"//"+o.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?o.protocol+e:o.host+e),/^(https?|wss?):\/\//.test(e)||(Te("protocol-less url %s",e),e=void 0!==o?o.protocol+"//"+e:"https://"+e),Te("parse %s",e),s=de(e)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";var a=-1!==s.host.indexOf(":")?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+a+":"+s.port+i,s.href=s.protocol+"://"+a+(o&&o.port===s.port?"":":"+s.port),s}(e,(t=t||{}).path||"/socket.io"),o=i.source,s=i.id,a=i.path,r=Ze[s]&&a in Ze[s].nsps;return n=t.forceNew||t["force new connection"]||!1===t.multiplex||r?(Ye("ignoring socket cache for %s",o),new Je(o,t)):(Ze[s]||(Ye("new io instance for %s",o),Ze[s]=new Je(o,t)),Ze[s]),i.query&&!t.query&&(t.query=i.queryKey),n.socket(i.path,t)}return r(Ge,{Manager:Je,Socket:Ke,io:Ge,connect:Ge}),Ge}),function(e,t){e.flatpickr=t(),sincloJquery.flatpickr=t()}(this,function(){"use strict";var Q=function(e){return("0"+e).slice(-2)},ee=function(e){return!0===e?1:0};function te(n,i,o){var s;return void 0===o&&(o=!1),function(){var e=this,t=arguments;null!==s&&clearTimeout(s),s=window.setTimeout(function(){s=null,o||n.apply(e,t)},i),o&&!s&&n.apply(e,t)}}function e(){}var ne=function(e){return e instanceof Array?e:[e]},ie=function(e,t,n){return n.months[t?"shorthand":"longhand"][e]},x={D:e,F:function(e,t,n){e.setMonth(n.months.longhand.indexOf(t))},G:function(e,t){e.setHours(parseFloat(t))},H:function(e,t){e.setHours(parseFloat(t))},J:function(e,t){e.setDate(parseFloat(t))},K:function(e,t,n){e.setHours(e.getHours()%12+12*ee(new RegExp(n.amPM[1],"i").test(t)))},M:function(e,t,n){e.setMonth(n.months.shorthand.indexOf(t))},S:function(e,t){e.setSeconds(parseFloat(t))},U:function(e,t){return new Date(1e3*parseFloat(t))},W:function(e,t){var n=parseInt(t);return new Date(e.getFullYear(),0,2+7*(n-1),0,0,0,0)},Y:function(e,t){e.setFullYear(parseFloat(t))},Z:function(e,t){return new Date(t)},d:function(e,t){e.setDate(parseFloat(t))},h:function(e,t){e.setHours(parseFloat(t))},i:function(e,t){e.setMinutes(parseFloat(t))},j:function(e,t){e.setDate(parseFloat(t))},l:e,m:function(e,t){e.setMonth(parseFloat(t)-1)},n:function(e,t){e.setMonth(parseFloat(t)-1)},s:function(e,t){e.setSeconds(parseFloat(t))},w:e,y:function(e,t){e.setFullYear(2e3+parseFloat(t))}},oe={D:"(\\w+)",F:"(\\w+)",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"(\\w+)",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"(\\w+)",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},r={Z:function(e){return e.toISOString()},D:function(e,t,n){return t.weekdays.shorthand[r.w(e,t,n)]},F:function(e,t,n){return ie(r.n(e,t,n)-1,!1,t)},G:function(e,t,n){return Q(r.h(e,t,n))},H:function(e){return Q(e.getHours())},J:function(e,t){return void 0!==t.ordinal?e.getDate()+t.ordinal(e.getDate()):e.getDate()},K:function(e,t){return t.amPM[ee(11<e.getHours())]},M:function(e,t){return ie(e.getMonth(),!0,t)},S:function(e){return Q(e.getSeconds())},U:function(e){return e.getTime()/1e3},W:function(e,t,n){return n.getWeek(e)},Y:function(e){return e.getFullYear()},d:function(e){return Q(e.getDate())},h:function(e){return e.getHours()%12?e.getHours()%12:12},i:function(e){return Q(e.getMinutes())},j:function(e){return e.getDate()},l:function(e,t){return t.weekdays.longhand[e.getDay()]},m:function(e){return Q(e.getMonth()+1)},n:function(e){return e.getMonth()+1},s:function(e){return e.getSeconds()},w:function(e){return e.getDay()},y:function(e){return String(e.getFullYear()).substring(2)}},se={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(e){var t=e%100;if(3<t&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year"},ae=function(e){var t=e.config,s=void 0===t?_:t,n=e.l10n,a=void 0===n?se:n;return function(i,e,t){var o=t||a;return void 0!==s.formatDate?s.formatDate(i,e,o):e.split("").map(function(e,t,n){return r[e]&&"\\"!==n[t-1]?r[e](i,o,s):"\\"!==e?e:""}).join("")}},re=function(e){var t=e.config,b=void 0===t?_:t,n=e.l10n,y=void 0===n?se:n;return function(e,t,n,i){if(0===e||e){var o,s=i||y,a=e;if(e instanceof Date)o=new Date(e.getTime());else if("string"!=typeof e&&void 0!==e.toFixed)o=new Date(e);else if("string"==typeof e){var r=t||(b||_).dateFormat,c=String(e).trim();if("today"===c)o=new Date,n=!0;else if(/Z$/.test(c)||/GMT$/.test(c))o=new Date(e);else if(b&&b.parseDate)o=b.parseDate(e,r);else{o=b&&b.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0);for(var l,d=[],p=0,u=0,g="";p<r.length;p++){var h=r[p],m="\\"===h,f="\\"===r[p-1]||m;if(oe[h]&&!f){g+=oe[h];var v=new RegExp(g).exec(e);v&&(l=!0)&&d["Y"!==h?"push":"unshift"]({fn:x[h],val:v[++u]})}else m||(g+=".");d.forEach(function(e){var t=e.fn,n=e.val;return o=t(o,n,s)||o})}o=l?o:void 0}}if(o instanceof Date&&!isNaN(o.getTime()))return!0===n&&o.setHours(0,0,0,0),o;b.errorHandler(new Error("Invalid date provided: "+a))}}};function ce(e,t,n){return void 0===n&&(n=!0),!1!==n?new Date(e.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):e.getTime()-t.getTime()}var le=function(e,t,n){return e>Math.min(t,n)&&e<Math.max(t,n)},de={DAY:864e5},pe=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],_={_disable:[],_enable:[],allowInput:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enable:[],enableSeconds:!1,enableTime:!1,errorHandler:function(e){return"undefined"!=typeof console&&void 0},getWeek:function(e){var t=new Date(e.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1};function ue(e,t,n){if(!0===n)return e.classList.add(t);e.classList.remove(t)}function ge(e,t,n){var i=window.document.createElement(e);return t=t||"",n=n||"",i.className=t,void 0!==n&&(i.textContent=n),i}function he(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function me(e,t){var n=ge("div","numInputWrapper"),i=ge("input","numInput "+e),o=ge("span","arrowUp"),s=ge("span","arrowDown");if(i.type="text",i.pattern="\\d*",void 0!==t)for(var a in t)i.setAttribute(a,t[a]);return n.appendChild(i),n.appendChild(o),n.appendChild(s),n}"function"!=typeof Object.assign&&(Object.assign=function(n){if(!n)throw TypeError("Cannot convert undefined or null to object");for(var e=arguments.length,i=new Array(1<e?e-1:0),t=1;t<e;t++)i[t-1]=arguments[t];for(var o=function(){var t=i[s];t&&Object.keys(t).forEach(function(e){return n[e]=t[e]})},s=0;s<i.length;s++)o();return n});var fe=300;function a(l,d){var f={config:Object.assign({},ve.defaultConfig),l10n:se};function p(e){return e.bind(f)}function t(){var t=f.config;!1===t.weekNumbers&&1===t.showMonths||!0!==t.noCalendar&&window.requestAnimationFrame(function(){if(f.calendarContainer.style.visibility="hidden",f.calendarContainer.style.display="block",void 0!==f.daysContainer){var e=(f.days.offsetWidth+1)*t.showMonths;f.daysContainer.style.width=e+"px",f.calendarContainer.style.width=e+(void 0!==f.weekWrapper?f.weekWrapper.offsetWidth:0)+"px",f.calendarContainer.style.removeProperty("visibility"),f.calendarContainer.style.removeProperty("display")}})}function u(e){if(0!==f.selectedDates.length){void 0!==e&&"blur"!==e.type&&function(e){e.preventDefault();var t="keydown"===e.type,n=e.target;void 0!==f.amPM&&e.target===f.amPM&&(f.amPM.textContent=f.l10n.amPM[ee(f.amPM.textContent===f.l10n.amPM[0])]);var i=parseFloat(n.getAttribute("data-min")),o=parseFloat(n.getAttribute("data-max")),s=parseFloat(n.getAttribute("data-step")),a=parseInt(n.value,10),r=a+s*(e.delta||(t?38===e.which?1:-1:0));if(void 0!==n.value&&2===n.value.length){var c=n===f.hourElement,l=n===f.minuteElement;r<i?(r=o+r+ee(!c)+(ee(c)&&ee(!f.amPM)),l&&v(void 0,-1,f.hourElement)):o<r&&(r=n===f.hourElement?r-o-ee(!f.amPM):i,l&&v(void 0,1,f.hourElement)),f.amPM&&c&&(1===s?r+a===23:Math.abs(r-a)>s)&&(f.amPM.textContent=f.l10n.amPM[ee(f.amPM.textContent===f.l10n.amPM[0])]),n.value=Q(r)}}(e);var t=f._input.value;g(),G(),f._input.value!==t&&f._debouncedChange()}}function g(){if(void 0!==f.hourElement&&void 0!==f.minuteElement){var e,t=(parseInt(f.hourElement.value.slice(-2),10)||0)%24,n=(parseInt(f.minuteElement.value,10)||0)%60,i=void 0!==f.secondElement?(parseInt(f.secondElement.value,10)||0)%60:0;void 0!==f.amPM&&(e=f.amPM.textContent,t=t%12+12*ee(e===f.l10n.amPM[1]));var o=void 0!==f.config.minTime||f.config.minDate&&f.minDateHasTime&&f.latestSelectedDateObj&&0===ce(f.latestSelectedDateObj,f.config.minDate,!0);if(void 0!==f.config.maxTime||f.config.maxDate&&f.maxDateHasTime&&f.latestSelectedDateObj&&0===ce(f.latestSelectedDateObj,f.config.maxDate,!0)){var s=void 0!==f.config.maxTime?f.config.maxTime:f.config.maxDate;(t=Math.min(t,s.getHours()))===s.getHours()&&(n=Math.min(n,s.getMinutes())),n===s.getMinutes()&&(i=Math.min(i,s.getSeconds()))}if(o){var a=void 0!==f.config.minTime?f.config.minTime:f.config.minDate;(t=Math.max(t,a.getHours()))===a.getHours()&&(n=Math.max(n,a.getMinutes())),n===a.getMinutes()&&(i=Math.max(i,a.getSeconds()))}r(t,n,i)}}function o(e){var t=e||f.latestSelectedDateObj;t&&r(t.getHours(),t.getMinutes(),t.getSeconds())}function i(){var e=f.config.defaultHour,t=f.config.defaultMinute,n=f.config.defaultSeconds;if(void 0!==f.config.minDate){var i=f.config.minDate.getHours(),o=f.config.minDate.getMinutes();(e=Math.max(e,i))===i&&(t=Math.max(o,t)),e===i&&t===o&&(n=f.config.minDate.getSeconds())}if(void 0!==f.config.maxDate){var s=f.config.maxDate.getHours(),a=f.config.maxDate.getMinutes();(e=Math.min(e,s))===s&&(t=Math.min(a,t)),e===s&&t===a&&(n=f.config.maxDate.getSeconds())}r(e,t,n)}function r(e,t,n){void 0!==f.latestSelectedDateObj&&f.latestSelectedDateObj.setHours(e%24,t,n||0,0),f.hourElement&&f.minuteElement&&!f.isMobile&&(f.hourElement.value=Q(f.config.time_24hr?e:(12+e)%12+12*ee(e%12==0)),f.minuteElement.value=Q(t),void 0!==f.amPM&&(f.amPM.textContent=f.l10n.amPM[ee(12<=e)]),void 0!==f.secondElement&&(f.secondElement.value=Q(n)))}function n(e){var t=parseInt(e.target.value)+(e.delta||0);(1<t/1e3||"Enter"===e.key&&!/[^\d]/.test(t.toString()))&&D(t)}function s(t,n,i,o){return n instanceof Array?n.forEach(function(e){return s(t,e,i,o)}):t instanceof Array?t.forEach(function(e){return s(e,n,i,o)}):(t.addEventListener(n,i,o),void f._handlers.push({element:t,event:n,handler:i,options:o}))}function a(t){return function(e){1===e.which&&t(e)}}function h(){U("onChange")}function c(e){var t=void 0!==e?f.parseDate(e):f.latestSelectedDateObj||(f.config.minDate&&f.config.minDate>f.now?f.config.minDate:f.config.maxDate&&f.config.maxDate<f.now?f.config.maxDate:f.now);try{void 0!==t&&(f.currentYear=t.getFullYear(),f.currentMonth=t.getMonth())}catch(e){e.message="Invalid date supplied: "+t,f.config.errorHandler(e)}f.redraw()}function m(e){~e.target.className.indexOf("arrow")&&v(e,e.target.classList.contains("arrowUp")?1:-1)}function v(e,t,n){var i=e&&e.target,o=n||i&&i.parentNode&&i.parentNode.firstChild,s=V("increment");s.delta=t,o&&o.dispatchEvent(s)}function b(e,t,n,i){var o,s=M(t,!0),a=ge("span","flatpickr-day "+e,t.getDate().toString());return a.dateObj=t,a.$i=i,a.setAttribute("aria-label",f.formatDate(t,f.config.ariaDateFormat)),-1===e.indexOf("hidden")&&0===ce(t,f.now)&&((f.todayDateElem=a).classList.add("today"),a.setAttribute("aria-current","date")),s?(a.tabIndex=-1,J(t)&&(a.classList.add("selected"),f.selectedDateElem=a,"range"===f.config.mode&&(ue(a,"startRange",f.selectedDates[0]&&0===ce(t,f.selectedDates[0],!0)),ue(a,"endRange",f.selectedDates[1]&&0===ce(t,f.selectedDates[1],!0)),"nextMonthDay"===e&&a.classList.add("inRange")))):a.classList.add("disabled"),"range"===f.config.mode&&(o=t,!("range"!==f.config.mode||f.selectedDates.length<2)&&0<=ce(o,f.selectedDates[0])&&ce(o,f.selectedDates[1])<=0&&!J(t)&&a.classList.add("inRange")),f.weekNumbers&&1===f.config.showMonths&&"prevMonthDay"!==e&&n%7==1&&f.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+f.config.getWeek(t)+"</span>"),U("onDayCreate",a),a}function y(e){e.focus(),"range"===f.config.mode&&$(e)}function x(e){for(var t=0<e?0:f.config.showMonths-1,n=0<e?f.config.showMonths:-1,i=t;i!=n;i+=e)for(var o=f.daysContainer.children[i],s=0<e?0:o.children.length-1,a=0<e?o.children.length:-1,r=s;r!=a;r+=e){var c=o.children[r];if(-1===c.className.indexOf("hidden")&&M(c.dateObj))return c}}function _(e,t){var n=F(document.activeElement||document.body),i=void 0!==e?e:n?document.activeElement:void 0!==f.selectedDateElem&&F(f.selectedDateElem)?f.selectedDateElem:void 0!==f.todayDateElem&&F(f.todayDateElem)?f.todayDateElem:x(0<t?1:-1);return void 0===i?f._input.focus():n?void function(e,t){for(var n=-1===e.className.indexOf("Month")?e.dateObj.getMonth():f.currentMonth,i=0<t?f.config.showMonths:-1,o=0<t?1:-1,s=n-f.currentMonth;s!=i;s+=o)for(var a=f.daysContainer.children[s],r=n-f.currentMonth===s?e.$i+t:t<0?a.children.length-1:0,c=a.children.length,l=r;0<=l&&l<c&&l!=(0<t?c:-1);l+=o){var d=a.children[l];if(-1===d.className.indexOf("hidden")&&M(d.dateObj)&&Math.abs(e.$i-l)>=Math.abs(t))return y(d)}f.changeMonth(o),_(x(o),0)}(i,t):y(i)}function w(e,t){for(var n=(new Date(e,t,1).getDay()-f.l10n.firstDayOfWeek+7)%7,i=f.utils.getDaysInMonth((t-1+12)%12),o=f.utils.getDaysInMonth(t),s=window.document.createDocumentFragment(),a=1<f.config.showMonths,r=a?"prevMonthDay hidden":"prevMonthDay",c=a?"nextMonthDay hidden":"nextMonthDay",l=i+1-n,d=0;l<=i;l++,d++)s.appendChild(b(r,new Date(e,t-1,l),l,d));for(l=1;l<=o;l++,d++)s.appendChild(b("",new Date(e,t,l),l,d));for(var p=o+1;p<=42-n&&(1===f.config.showMonths||d%7!=0);p++,d++)s.appendChild(b(c,new Date(e,t+1,p%o),p,d));var u=ge("div","dayContainer");return u.appendChild(s),u}function k(){if(void 0!==f.daysContainer){he(f.daysContainer),f.weekNumbers&&he(f.weekNumbers);for(var e=document.createDocumentFragment(),t=0;t<f.config.showMonths;t++){var n=new Date(f.currentYear,f.currentMonth,1);n.setMonth(f.currentMonth+t),e.appendChild(w(n.getFullYear(),n.getMonth()))}f.daysContainer.appendChild(e),f.days=f.daysContainer.firstChild,"range"===f.config.mode&&1===f.selectedDates.length&&$()}}function T(){var e=ge("div","flatpickr-month"),t=window.document.createDocumentFragment(),n=ge("span","cur-month"),i=me("cur-year",{tabindex:"-1"}),o=i.getElementsByTagName("input")[0];o.setAttribute("aria-label",f.l10n.yearAriaLabel),f.config.minDate&&o.setAttribute("data-min",f.config.minDate.getFullYear().toString()),f.config.maxDate&&(o.setAttribute("data-max",f.config.maxDate.getFullYear().toString()),o.disabled=!!f.config.minDate&&f.config.minDate.getFullYear()===f.config.maxDate.getFullYear());var s=ge("div","flatpickr-current-month");return s.appendChild(n),s.appendChild(i),t.appendChild(s),e.appendChild(t),{container:e,yearElement:o,monthElement:n}}function S(){he(f.monthNav),f.monthNav.appendChild(f.prevMonthNav);for(var e=f.config.showMonths;e--;){var t=T();f.yearElements.push(t.yearElement),f.monthElements.push(t.monthElement),f.monthNav.appendChild(t.container)}f.monthNav.appendChild(f.nextMonthNav)}function I(){f.weekdayContainer?he(f.weekdayContainer):f.weekdayContainer=ge("div","flatpickr-weekdays");for(var e=f.config.showMonths;e--;){var t=ge("div","flatpickr-weekdaycontainer");f.weekdayContainer.appendChild(t)}return A(),f.weekdayContainer}function A(){var e=f.l10n.firstDayOfWeek,t=f.l10n.weekdays.shorthand.concat();0<e&&e<t.length&&(t=t.splice(e,t.length).concat(t.splice(0,e)));for(var n=f.config.showMonths;n--;)f.weekdayContainer.children[n].innerHTML="\n      <span class=flatpickr-weekday>\n        "+t.join("</span><span class=flatpickr-weekday>")+"\n      </span>\n      "}function C(e,t){void 0===t&&(t=!0);var n=t?e:e-f.currentMonth;n<0&&!0===f._hidePrevMonthArrow||0<n&&!0===f._hideNextMonthArrow||(f.currentMonth+=n,(f.currentMonth<0||11<f.currentMonth)&&(f.currentYear+=11<f.currentMonth?1:-1,f.currentMonth=(f.currentMonth+12)%12,U("onYearChange")),k(),U("onMonthChange"),Y())}function B(e){return!(!f.config.appendTo||!f.config.appendTo.contains(e))||f.calendarContainer.contains(e)}function N(t){if(f.isOpen&&!f.config.inline){var e=B(t.target),n=t.target===f.input||t.target===f.altInput||f.element.contains(t.target)||t.path&&t.path.indexOf&&(~t.path.indexOf(f.input)||~t.path.indexOf(f.altInput)),i="blur"===t.type?n&&t.relatedTarget&&!B(t.relatedTarget):!n&&!e,o=!f.config.ignoredFocusElements.some(function(e){return e.contains(t.target)});i&&o&&(f.close(),"range"===f.config.mode&&1===f.selectedDates.length&&(f.clear(!1),f.redraw()))}}function D(e){if(!(!e||f.config.minDate&&e<f.config.minDate.getFullYear()||f.config.maxDate&&e>f.config.maxDate.getFullYear())){var t=f.currentYear!==e;f.currentYear=e||f.currentYear,f.config.maxDate&&f.currentYear===f.config.maxDate.getFullYear()?f.currentMonth=Math.min(f.config.maxDate.getMonth(),f.currentMonth):f.config.minDate&&f.currentYear===f.config.minDate.getFullYear()&&(f.currentMonth=Math.max(f.config.minDate.getMonth(),f.currentMonth)),t&&(f.redraw(),U("onYearChange"))}}function M(e,t){void 0===t&&(t=!0);var n=f.parseDate(e,void 0,t);if(f.config.minDate&&n&&ce(n,f.config.minDate,void 0!==t?t:!f.minDateHasTime)<0||f.config.maxDate&&n&&0<ce(n,f.config.maxDate,void 0!==t?t:!f.maxDateHasTime))return!1;if(0===f.config.enable.length&&0===f.config.disable.length)return!0;if(void 0===n)return!1;for(var i,o=0<f.config.enable.length,s=o?f.config.enable:f.config.disable,a=0;a<s.length;a++){if("function"==typeof(i=s[a])&&i(n))return o;if(i instanceof Date&&void 0!==n&&i.getTime()===n.getTime())return o;if("string"==typeof i&&void 0!==n){var r=f.parseDate(i,void 0,!0);return r&&r.getTime()===n.getTime()?o:!o}if("object"==typeof i&&void 0!==n&&i.from&&i.to&&n.getTime()>=i.from.getTime()&&n.getTime()<=i.to.getTime())return o}return!o}function F(e){return void 0!==f.daysContainer&&-1===e.className.indexOf("hidden")&&f.daysContainer.contains(e)}function E(e){var t=e.target===f._input,n=f.config.allowInput,i=f.isOpen&&(!n||!t),o=f.config.inline&&t&&!n;if(13===e.keyCode&&t){if(n)return f.setDate(f._input.value,!0,e.target===f.altInput?f.config.altFormat:f.config.dateFormat),e.target.blur();f.open()}else if(B(e.target)||i||o){var s=!!f.timeContainer&&f.timeContainer.contains(e.target);switch(e.keyCode){case 13:s?u():z(e);break;case 27:e.preventDefault(),R();break;case 8:case 46:t&&!f.config.allowInput&&(e.preventDefault(),f.clear());break;case 37:case 39:if(s)f.hourElement&&f.hourElement.focus();else if(e.preventDefault(),void 0!==f.daysContainer&&(!1===n||F(document.activeElement))){var a=39===e.keyCode?1:-1;e.ctrlKey?(C(a),_(x(1),0)):_(void 0,a)}break;case 38:case 40:e.preventDefault();var r=40===e.keyCode?1:-1;f.daysContainer&&void 0!==e.target.$i?e.ctrlKey?(D(f.currentYear-r),_(x(1),0)):s||_(void 0,7*r):f.config.enableTime&&(!s&&f.hourElement&&f.hourElement.focus(),u(e),f._debouncedChange());break;case 9:if(!s){f.element.focus();break}var c=[f.hourElement,f.minuteElement,f.secondElement,f.amPM].filter(function(e){return e}),l=c.indexOf(e.target);if(-1!==l){var d=c[l+(e.shiftKey?-1:1)];void 0!==d?(e.preventDefault(),d.focus()):f.element.focus()}}}if(void 0!==f.amPM&&e.target===f.amPM)switch(e.key){case f.l10n.amPM[0].charAt(0):case f.l10n.amPM[0].charAt(0).toLowerCase():f.amPM.textContent=f.l10n.amPM[0],g(),G();break;case f.l10n.amPM[1].charAt(0):case f.l10n.amPM[1].charAt(0).toLowerCase():f.amPM.textContent=f.l10n.amPM[1],g(),G()}U("onKeyDown",e)}function $(s){if(1===f.selectedDates.length&&(!s||s.classList.contains("flatpickr-day")&&!s.classList.contains("disabled"))){for(var a=s?s.dateObj.getTime():f.days.firstElementChild.dateObj.getTime(),r=f.parseDate(f.selectedDates[0],void 0,!0).getTime(),e=Math.min(a,f.selectedDates[0].getTime()),t=Math.max(a,f.selectedDates[0].getTime()),n=f.daysContainer.lastChild.lastChild.dateObj.getTime(),c=!1,l=0,d=0,i=e;i<n;i+=de.DAY)M(new Date(i),!0)||(c=c||e<i&&i<t,i<r&&(!l||l<i)?l=i:r<i&&(!d||i<d)&&(d=i));for(var p=0;p<f.config.showMonths;p++)for(var u=f.daysContainer.children[p],g=f.daysContainer.children[p-1],o=function(e,t){var n=u.children[e],i=n.dateObj.getTime(),o=0<l&&i<l||0<d&&d<i;return o?(n.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(e){n.classList.remove(e)}),"continue"):c&&!o?"continue":(["startRange","inRange","endRange","notAllowed"].forEach(function(e){n.classList.remove(e)}),void(void 0!==s&&(s.classList.add(a<f.selectedDates[0].getTime()?"startRange":"endRange"),!u.contains(s)&&0<p&&g&&g.lastChild.dateObj.getTime()>=i||(r<a&&i===r?n.classList.add("startRange"):a<r&&i===r&&n.classList.add("endRange"),l<=i&&(0===d||i<=d)&&le(i,r,a)&&n.classList.add("inRange")))))},h=0,m=u.children.length;h<m;h++)o(h)}}function O(){!f.isOpen||f.config.static||f.config.inline||H()}function P(i){return function(e){var t=f.config["_"+i+"Date"]=f.parseDate(e,f.config.dateFormat),n=f.config["_"+("min"===i?"max":"min")+"Date"];void 0!==t&&(f["min"===i?"minDateHasTime":"maxDateHasTime"]=0<t.getHours()||0<t.getMinutes()||0<t.getSeconds()),f.selectedDates&&(f.selectedDates=f.selectedDates.filter(function(e){return M(e)}),f.selectedDates.length||"min"!==i||o(t),G()),f.daysContainer&&(j(),void 0!==t?f.currentYearElement[i]=t.getFullYear().toString():f.currentYearElement.removeAttribute(i),f.currentYearElement.disabled=!!n&&void 0!==t&&n.getFullYear()===t.getFullYear())}}function W(){"object"!=typeof f.config.locale&&void 0===ve.l10ns[f.config.locale]&&f.config.errorHandler(new Error("flatpickr: invalid locale "+f.config.locale)),f.l10n=Object.assign({},ve.l10ns.default,"object"==typeof f.config.locale?f.config.locale:"default"!==f.config.locale?ve.l10ns[f.config.locale]:void 0),oe.K="("+f.l10n.amPM[0]+"|"+f.l10n.amPM[1]+"|"+f.l10n.amPM[0].toLowerCase()+"|"+f.l10n.amPM[1].toLowerCase()+")",f.formatDate=ae(f),f.parseDate=re({config:f.config,l10n:f.l10n})}function H(e){if(void 0!==f.calendarContainer){U("onPreCalendarPosition");var t=e||f._positionElement,n=Array.prototype.reduce.call(f.calendarContainer.children,function(e,t){return e+t.offsetHeight},0),i=f.calendarContainer.offsetWidth,o=f.config.position.split(" "),s=o[0],a=1<o.length?o[1]:null,r=t.getBoundingClientRect(),c=window.innerHeight-r.bottom,l="above"===s||"below"!==s&&c<n&&r.top>n,d=window.pageYOffset+r.top+(l?-n-2:t.offsetHeight+2);if(ue(f.calendarContainer,"arrowTop",!l),ue(f.calendarContainer,"arrowBottom",l),!f.config.inline){var p=window.pageXOffset+r.left-(null!=a&&"center"===a?(i-r.width)/2:0),u=window.document.body.offsetWidth-r.right,g=p+i>window.document.body.offsetWidth;ue(f.calendarContainer,"rightMost",g),f.config.static||(f.calendarContainer.style.top=d+"px",g?(f.calendarContainer.style.left="auto",f.calendarContainer.style.right=u+"px"):(f.calendarContainer.style.left=p+"px",f.calendarContainer.style.right="auto"))}}}function j(){f.config.noCalendar||f.isMobile||(Y(),k())}function R(){f._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(f.close,0):f.close()}function z(e){e.preventDefault(),e.stopPropagation();var t=function e(t,n){return n(t)?t:t.parentNode?e(t.parentNode,n):void 0}(e.target,function(e){return e.classList&&e.classList.contains("flatpickr-day")&&!e.classList.contains("disabled")&&!e.classList.contains("notAllowed")});if(void 0!==t){var n=t,i=f.latestSelectedDateObj=new Date(n.dateObj.getTime()),o=(i.getMonth()<f.currentMonth||i.getMonth()>f.currentMonth+f.config.showMonths-1)&&"range"!==f.config.mode;if(f.selectedDateElem=n,"single"===f.config.mode)f.selectedDates=[i];else if("multiple"===f.config.mode){var s=J(i);s?f.selectedDates.splice(parseInt(s),1):f.selectedDates.push(i)}else"range"===f.config.mode&&(2===f.selectedDates.length&&f.clear(!1),f.selectedDates.push(i),0!==ce(i,f.selectedDates[0],!0)&&f.selectedDates.sort(function(e,t){return e.getTime()-t.getTime()}));if(g(),o){var a=f.currentYear!==i.getFullYear();f.currentYear=i.getFullYear(),f.currentMonth=i.getMonth(),a&&U("onYearChange"),U("onMonthChange")}if(Y(),k(),G(),f.config.enableTime&&setTimeout(function(){return f.showTimeInput=!0},50),o||"range"===f.config.mode||1!==f.config.showMonths?f.selectedDateElem&&f.selectedDateElem.focus():y(n),void 0!==f.hourElement&&setTimeout(function(){return void 0!==f.hourElement&&f.hourElement.select()},451),f.config.closeOnSelect){var r="single"===f.config.mode&&!f.config.enableTime,c="range"===f.config.mode&&2===f.selectedDates.length&&!f.config.enableTime;(r||c)&&R()}h()}}f.parseDate=re({config:f.config,l10n:f.l10n}),f._handlers=[],f._bind=s,f._setHoursFromDate=o,f._positionCalendar=H,f.changeMonth=C,f.changeYear=D,f.clear=function(e){void 0===e&&(e=!0),f.input.value="",void 0!==f.altInput&&(f.altInput.value=""),void 0!==f.mobileInput&&(f.mobileInput.value=""),f.selectedDates=[],f.latestSelectedDateObj=void 0,!(f.showTimeInput=!1)===f.config.enableTime&&i(),f.redraw(),e&&U("onChange")},f.close=function(){f.isOpen=!1,f.isMobile||(f.calendarContainer.classList.remove("open"),f._input.classList.remove("active")),U("onClose")},f._createElement=ge,f.destroy=function(){void 0!==f.config&&U("onDestroy");for(var e=f._handlers.length;e--;){var t=f._handlers[e];t.element.removeEventListener(t.event,t.handler,t.options)}if(f._handlers=[],f.mobileInput)f.mobileInput.parentNode&&f.mobileInput.parentNode.removeChild(f.mobileInput),f.mobileInput=void 0;else if(f.calendarContainer&&f.calendarContainer.parentNode)if(f.config.static&&f.calendarContainer.parentNode){var n=f.calendarContainer.parentNode;if(n.lastChild&&n.removeChild(n.lastChild),n.parentNode){for(;n.firstChild;)n.parentNode.insertBefore(n.firstChild,n);n.parentNode.removeChild(n)}}else f.calendarContainer.parentNode.removeChild(f.calendarContainer);f.altInput&&(f.input.type="text",f.altInput.parentNode&&f.altInput.parentNode.removeChild(f.altInput),delete f.altInput),f.input&&(f.input.type=f.input._type,f.input.classList.remove("flatpickr-input"),f.input.removeAttribute("readonly"),f.input.value=""),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(e){try{delete f[e]}catch(e){}})},f.isEnabled=M,f.jumpToDate=c,f.open=function(e,t){if(void 0===t&&(t=f._positionElement),!0===f.isMobile)return e&&(e.preventDefault(),e.target&&e.target.blur()),void 0!==f.mobileInput&&(f.mobileInput.focus(),f.mobileInput.click()),void U("onOpen");if(!f._input.disabled&&!f.config.inline){var n=f.isOpen;f.isOpen=!0,n||(f.calendarContainer.classList.add("open"),f._input.classList.add("active"),U("onOpen"),H(t)),!0===f.config.enableTime&&!0===f.config.noCalendar&&(0===f.selectedDates.length&&(f.setDate(void 0!==f.config.minDate?new Date(f.config.minDate.getTime()):new Date,!1),i(),G()),!1!==f.config.allowInput||void 0!==e&&f.timeContainer.contains(e.relatedTarget)||setTimeout(function(){return f.hourElement.select()},50))}},f.redraw=j,f.set=function(e,t){null!==e&&"object"==typeof e?Object.assign(f.config,e):(f.config[e]=t,void 0!==L[e]?L[e].forEach(function(e){return e()}):-1<pe.indexOf(e)&&(f.config[e]=ne(t))),f.redraw(),c(),G(!1)},f.setDate=function(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=f.config.dateFormat),0!==e&&!e||e instanceof Array&&0===e.length)return f.clear(t);q(e,n),f.showTimeInput=0<f.selectedDates.length,f.latestSelectedDateObj=f.selectedDates[0],f.redraw(),c(),o(),G(t),t&&U("onChange")},f.toggle=function(e){if(!0===f.isOpen)return f.close();f.open(e)};var L={locale:[W,A],showMonths:[S,t,I]};function q(e,t){var n=[];if(e instanceof Array)n=e.map(function(e){return f.parseDate(e,t)});else if(e instanceof Date||"number"==typeof e)n=[f.parseDate(e,t)];else if("string"==typeof e)switch(f.config.mode){case"single":case"time":n=[f.parseDate(e,t)];break;case"multiple":n=e.split(f.config.conjunction).map(function(e){return f.parseDate(e,t)});break;case"range":n=e.split(f.l10n.rangeSeparator).map(function(e){return f.parseDate(e,t)})}else f.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(e)));f.selectedDates=n.filter(function(e){return e instanceof Date&&M(e,!1)}),"range"===f.config.mode&&f.selectedDates.sort(function(e,t){return e.getTime()-t.getTime()})}function K(e){return e.slice().map(function(e){return"string"==typeof e||"number"==typeof e||e instanceof Date?f.parseDate(e,void 0,!0):e&&"object"==typeof e&&e.from&&e.to?{from:f.parseDate(e.from,void 0),to:f.parseDate(e.to,void 0)}:e}).filter(function(e){return e})}function U(e,t){if(void 0!==f.config){var n=f.config[e];if(void 0!==n&&0<n.length)for(var i=0;n[i]&&i<n.length;i++)n[i](f.selectedDates,f.input.value,f,t);"onChange"===e&&(f.input.dispatchEvent(V("change")),f.input.dispatchEvent(V("input")))}}function V(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}function J(e){for(var t=0;t<f.selectedDates.length;t++)if(0===ce(f.selectedDates[t],e))return""+t;return!1}function Y(){f.config.noCalendar||f.isMobile||!f.monthNav||(f.yearElements.forEach(function(e,t){var n=new Date(f.currentYear,f.currentMonth,1);n.setMonth(f.currentMonth+t),f.monthElements[t].textContent=ie(n.getMonth(),f.config.shorthandCurrentMonth,f.l10n)+" ",e.value=n.getFullYear().toString()}),f._hidePrevMonthArrow=void 0!==f.config.minDate&&(f.currentYear===f.config.minDate.getFullYear()?f.currentMonth<=f.config.minDate.getMonth():f.currentYear<f.config.minDate.getFullYear()),f._hideNextMonthArrow=void 0!==f.config.maxDate&&(f.currentYear===f.config.maxDate.getFullYear()?f.currentMonth+1>f.config.maxDate.getMonth():f.currentYear>f.config.maxDate.getFullYear()))}function Z(t){return f.selectedDates.map(function(e){return f.formatDate(e,t)}).filter(function(e,t,n){return"range"!==f.config.mode||f.config.enableTime||n.indexOf(e)===t}).join("range"!==f.config.mode?f.config.conjunction:f.l10n.rangeSeparator)}function G(e){if(void 0===e&&(e=!0),0===f.selectedDates.length)return f.clear(e);void 0!==f.mobileInput&&f.mobileFormatStr&&(f.mobileInput.value=void 0!==f.latestSelectedDateObj?f.formatDate(f.latestSelectedDateObj,f.mobileFormatStr):""),f.input.value=Z(f.config.dateFormat),void 0!==f.altInput&&(f.altInput.value=Z(f.config.altFormat)),!1!==e&&U("onValueUpdate")}function X(e){e.preventDefault();var t=f.prevMonthNav.contains(e.target),n=f.nextMonthNav.contains(e.target);t||n?C(t?-1:1):0<=f.yearElements.indexOf(e.target)?e.target.select():e.target.classList.contains("arrowUp")?f.changeYear(f.currentYear+1):e.target.classList.contains("arrowDown")&&f.changeYear(f.currentYear-1)}return function(){f.element=f.input=l,f.isOpen=!1,function(){var e=["wrap","weekNumbers","allowInput","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],t=Object.assign({},d,JSON.parse(JSON.stringify(l.dataset||{}))),n={};f.config.parseDate=t.parseDate,f.config.formatDate=t.formatDate,Object.defineProperty(f.config,"enable",{get:function(){return f.config._enable},set:function(e){f.config._enable=K(e)}}),Object.defineProperty(f.config,"disable",{get:function(){return f.config._disable},set:function(e){f.config._disable=K(e)}});var i="time"===t.mode;t.dateFormat||!t.enableTime&&!i||(n.dateFormat=t.noCalendar||i?"H:i"+(t.enableSeconds?":S":""):ve.defaultConfig.dateFormat+" H:i"+(t.enableSeconds?":S":"")),t.altInput&&(t.enableTime||i)&&!t.altFormat&&(n.altFormat=t.noCalendar||i?"h:i"+(t.enableSeconds?":S K":" K"):ve.defaultConfig.altFormat+" h:i"+(t.enableSeconds?":S":"")+" K"),Object.defineProperty(f.config,"minDate",{get:function(){return f.config._minDate},set:P("min")}),Object.defineProperty(f.config,"maxDate",{get:function(){return f.config._maxDate},set:P("max")});function o(t){return function(e){f.config["min"===t?"_minTime":"_maxTime"]=f.parseDate(e,"H:i")}}Object.defineProperty(f.config,"minTime",{get:function(){return f.config._minTime},set:o("min")}),Object.defineProperty(f.config,"maxTime",{get:function(){return f.config._maxTime},set:o("max")}),"time"===t.mode&&(f.config.noCalendar=!0,f.config.enableTime=!0),Object.assign(f.config,n,t);for(var s=0;s<e.length;s++)f.config[e[s]]=!0===f.config[e[s]]||"true"===f.config[e[s]];pe.filter(function(e){return void 0!==f.config[e]}).forEach(function(e){f.config[e]=ne(f.config[e]||[]).map(p)}),f.isMobile=!f.config.disableMobile&&!f.config.inline&&"single"===f.config.mode&&!f.config.disable.length&&!f.config.enable.length&&!f.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var a=0;a<f.config.plugins.length;a++){var r=f.config.plugins[a](f)||{};for(var c in r)-1<pe.indexOf(c)?f.config[c]=ne(r[c]).map(p).concat(f.config[c]):void 0===t[c]&&(f.config[c]=r[c])}U("onParseConfig")}(),W(),function(){if(f.input=f.config.wrap?l.querySelector("[data-input]"):l,!f.input)return f.config.errorHandler(new Error("Invalid input element specified"));f.input._type=f.input.type,f.input.type="text",f.input.classList.add("flatpickr-input"),f._input=f.input,f.config.altInput&&(f.altInput=ge(f.input.nodeName,f.input.className+" "+f.config.altInputClass),f._input=f.altInput,f.altInput.placeholder=f.input.placeholder,f.altInput.disabled=f.input.disabled,f.altInput.required=f.input.required,f.altInput.tabIndex=f.input.tabIndex,f.altInput.type="text",f.input.setAttribute("type","hidden"),!f.config.static&&f.input.parentNode&&f.input.parentNode.insertBefore(f.altInput,f.input.nextSibling)),f.config.allowInput||f._input.setAttribute("readonly","readonly"),f._positionElement=f.config.positionElement||f._input}(),function(){f.selectedDates=[],f.now=f.parseDate(f.config.now)||new Date;var e=f.config.defaultDate||("INPUT"!==f.input.nodeName&&"TEXTAREA"!==f.input.nodeName||!f.input.placeholder||f.input.value!==f.input.placeholder?f.input.value:null);e&&q(e,f.config.dateFormat);var t=0<f.selectedDates.length?f.selectedDates[0]:f.config.minDate&&f.config.minDate.getTime()>f.now.getTime()?f.config.minDate:f.config.maxDate&&f.config.maxDate.getTime()<f.now.getTime()?f.config.maxDate:f.now;f.currentYear=t.getFullYear(),f.currentMonth=t.getMonth(),0<f.selectedDates.length&&(f.latestSelectedDateObj=f.selectedDates[0]),void 0!==f.config.minTime&&(f.config.minTime=f.parseDate(f.config.minTime,"H:i")),void 0!==f.config.maxTime&&(f.config.maxTime=f.parseDate(f.config.maxTime,"H:i")),f.minDateHasTime=!!f.config.minDate&&(0<f.config.minDate.getHours()||0<f.config.minDate.getMinutes()||0<f.config.minDate.getSeconds()),f.maxDateHasTime=!!f.config.maxDate&&(0<f.config.maxDate.getHours()||0<f.config.maxDate.getMinutes()||0<f.config.maxDate.getSeconds()),Object.defineProperty(f,"showTimeInput",{get:function(){return f._showTimeInput},set:function(e){f._showTimeInput=e,f.calendarContainer&&ue(f.calendarContainer,"showTimeInput",e),f.isOpen&&H()}})}(),f.utils={getDaysInMonth:function(e,t){return void 0===e&&(e=f.currentMonth),void 0===t&&(t=f.currentYear),1===e&&(t%4==0&&t%100!=0||t%400==0)?29:f.l10n.daysInMonth[e]}},f.isMobile||function(){var e=window.document.createDocumentFragment();if(f.calendarContainer=ge("div","flatpickr-calendar"),f.calendarContainer.tabIndex=-1,!f.config.noCalendar){if(e.appendChild((f.monthNav=ge("div","flatpickr-months"),f.yearElements=[],f.monthElements=[],f.prevMonthNav=ge("span","flatpickr-prev-month"),f.prevMonthNav.innerHTML=f.config.prevArrow,f.nextMonthNav=ge("span","flatpickr-next-month"),f.nextMonthNav.innerHTML=f.config.nextArrow,S(),Object.defineProperty(f,"_hidePrevMonthArrow",{get:function(){return f.__hidePrevMonthArrow},set:function(e){f.__hidePrevMonthArrow!==e&&(ue(f.prevMonthNav,"disabled",e),f.__hidePrevMonthArrow=e)}}),Object.defineProperty(f,"_hideNextMonthArrow",{get:function(){return f.__hideNextMonthArrow},set:function(e){f.__hideNextMonthArrow!==e&&(ue(f.nextMonthNav,"disabled",e),f.__hideNextMonthArrow=e)}}),f.currentYearElement=f.yearElements[0],Y(),f.monthNav)),f.innerContainer=ge("div","flatpickr-innerContainer"),f.config.weekNumbers){var t=function(){f.calendarContainer.classList.add("hasWeeks");var e=ge("div","flatpickr-weekwrapper");e.appendChild(ge("span","flatpickr-weekday",f.l10n.weekAbbreviation));var t=ge("div","flatpickr-weeks");return e.appendChild(t),{weekWrapper:e,weekNumbers:t}}(),n=t.weekWrapper,i=t.weekNumbers;f.innerContainer.appendChild(n),f.weekNumbers=i,f.weekWrapper=n}f.rContainer=ge("div","flatpickr-rContainer"),f.rContainer.appendChild(I()),f.daysContainer||(f.daysContainer=ge("div","flatpickr-days"),f.daysContainer.tabIndex=-1),k(),f.rContainer.appendChild(f.daysContainer),f.innerContainer.appendChild(f.rContainer),e.appendChild(f.innerContainer)}f.config.enableTime&&e.appendChild(function(){f.calendarContainer.classList.add("hasTime"),f.config.noCalendar&&f.calendarContainer.classList.add("noCalendar"),f.timeContainer=ge("div","flatpickr-time"),f.timeContainer.tabIndex=-1;var e=ge("span","flatpickr-time-separator",":"),t=me("flatpickr-hour");f.hourElement=t.getElementsByTagName("input")[0];var n=me("flatpickr-minute");if(f.minuteElement=n.getElementsByTagName("input")[0],f.hourElement.tabIndex=f.minuteElement.tabIndex=-1,f.hourElement.value=Q(f.latestSelectedDateObj?f.latestSelectedDateObj.getHours():f.config.time_24hr?f.config.defaultHour:function(e){switch(e%24){case 0:case 12:return 12;default:return e%12}}(f.config.defaultHour)),f.minuteElement.value=Q(f.latestSelectedDateObj?f.latestSelectedDateObj.getMinutes():f.config.defaultMinute),f.hourElement.setAttribute("data-step",f.config.hourIncrement.toString()),f.minuteElement.setAttribute("data-step",f.config.minuteIncrement.toString()),f.hourElement.setAttribute("data-min",f.config.time_24hr?"0":"1"),f.hourElement.setAttribute("data-max",f.config.time_24hr?"23":"12"),f.minuteElement.setAttribute("data-min","0"),f.minuteElement.setAttribute("data-max","59"),f.timeContainer.appendChild(t),f.timeContainer.appendChild(e),f.timeContainer.appendChild(n),f.config.time_24hr&&f.timeContainer.classList.add("time24hr"),f.config.enableSeconds){f.timeContainer.classList.add("hasSeconds");var i=me("flatpickr-second");f.secondElement=i.getElementsByTagName("input")[0],f.secondElement.value=Q(f.latestSelectedDateObj?f.latestSelectedDateObj.getSeconds():f.config.defaultSeconds),f.secondElement.setAttribute("data-step",f.minuteElement.getAttribute("data-step")),f.secondElement.setAttribute("data-min",f.minuteElement.getAttribute("data-min")),f.secondElement.setAttribute("data-max",f.minuteElement.getAttribute("data-max")),f.timeContainer.appendChild(ge("span","flatpickr-time-separator",":")),f.timeContainer.appendChild(i)}return f.config.time_24hr||(f.amPM=ge("span","flatpickr-am-pm",f.l10n.amPM[ee(11<(f.latestSelectedDateObj?f.hourElement.value:f.config.defaultHour))]),f.amPM.title=f.l10n.toggleTitle,f.amPM.tabIndex=-1,f.timeContainer.appendChild(f.amPM)),f.timeContainer}()),ue(f.calendarContainer,"rangeMode","range"===f.config.mode),ue(f.calendarContainer,"animate",!0===f.config.animate),ue(f.calendarContainer,"multiMonth",1<f.config.showMonths),f.calendarContainer.appendChild(e);var o=void 0!==f.config.appendTo&&void 0!==f.config.appendTo.nodeType;if((f.config.inline||f.config.static)&&(f.calendarContainer.classList.add(f.config.inline?"inline":"static"),f.config.inline&&(!o&&f.element.parentNode?f.element.parentNode.insertBefore(f.calendarContainer,f._input.nextSibling):void 0!==f.config.appendTo&&f.config.appendTo.appendChild(f.calendarContainer)),f.config.static)){var s=ge("div","flatpickr-wrapper");f.element.parentNode&&f.element.parentNode.insertBefore(s,f.element),s.appendChild(f.element),f.altInput&&s.appendChild(f.altInput),s.appendChild(f.calendarContainer)}f.config.static||f.config.inline||(void 0!==f.config.appendTo?f.config.appendTo:window.document.body).appendChild(f.calendarContainer)}(),function(){if(f.config.wrap&&["open","close","toggle","clear"].forEach(function(t){Array.prototype.forEach.call(f.element.querySelectorAll("[data-"+t+"]"),function(e){return s(e,"click",f[t])})}),f.isMobile)return function(){var e=f.config.enableTime?f.config.noCalendar?"time":"datetime-local":"date";f.mobileInput=ge("input",f.input.className+" flatpickr-mobile"),f.mobileInput.step=f.input.getAttribute("step")||"any",f.mobileInput.tabIndex=1,f.mobileInput.type=e,f.mobileInput.disabled=f.input.disabled,f.mobileInput.required=f.input.required,f.mobileInput.placeholder=f.input.placeholder,f.mobileFormatStr="datetime-local"==e?"Y-m-d\\TH:i:S":"date"==e?"Y-m-d":"H:i:S",0<f.selectedDates.length&&(f.mobileInput.defaultValue=f.mobileInput.value=f.formatDate(f.selectedDates[0],f.mobileFormatStr)),f.config.minDate&&(f.mobileInput.min=f.formatDate(f.config.minDate,"Y-m-d")),f.config.maxDate&&(f.mobileInput.max=f.formatDate(f.config.maxDate,"Y-m-d")),f.input.type="hidden",void 0!==f.altInput&&(f.altInput.type="hidden");try{f.input.parentNode&&f.input.parentNode.insertBefore(f.mobileInput,f.input.nextSibling)}catch(e){}s(f.mobileInput,"change",function(e){f.setDate(e.target.value,!1,f.mobileFormatStr),U("onChange"),U("onClose")})}();var e=te(O,50);f._debouncedChange=te(h,fe),f.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&s(f.daysContainer,"mouseover",function(e){"range"===f.config.mode&&$(e.target)}),s(window.document.body,"keydown",E),f.config.static||s(f._input,"keydown",E),f.config.inline||f.config.static||s(window,"resize",e),void 0!==window.ontouchstart?s(window.document,"click",N):s(window.document,"mousedown",a(N)),s(window.document,"focus",N,{capture:!0}),!0===f.config.clickOpens&&(s(f._input,"focus",f.open),s(f._input,"mousedown",a(f.open))),void 0!==f.daysContainer&&(s(f.monthNav,"mousedown",a(X)),s(f.monthNav,["keyup","increment"],n),s(f.daysContainer,"mousedown",a(z))),void 0!==f.timeContainer&&void 0!==f.minuteElement&&void 0!==f.hourElement&&(s(f.timeContainer,["increment"],u),s(f.timeContainer,"blur",u,{capture:!0}),s(f.timeContainer,"mousedown",a(m)),s([f.hourElement,f.minuteElement],["focus","click"],function(e){return e.target.select()}),void 0!==f.secondElement&&s(f.secondElement,"focus",function(){return f.secondElement&&f.secondElement.select()}),void 0!==f.amPM&&s(f.amPM,"mousedown",a(function(e){u(e),h()})))}(),(f.selectedDates.length||f.config.noCalendar)&&(f.config.enableTime&&o(f.config.noCalendar?f.latestSelectedDateObj||f.config.minDate:void 0),G(!1)),t(),f.showTimeInput=0<f.selectedDates.length||f.config.noCalendar;var e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!f.isMobile&&e&&H(),U("onReady")}(),f}function n(e,t){for(var n=Array.prototype.slice.call(e),i=[],o=0;o<n.length;o++){var s=n[o];try{if(null!==s.getAttribute("data-fp-omit"))continue;void 0!==s._flatpickr&&(s._flatpickr.destroy(),s._flatpickr=void 0),s._flatpickr=a(s,t||{}),i.push(s._flatpickr)}catch(e){}}return 1===i.length?i[0]:i}"undefined"!=typeof HTMLElement&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(e){return n(this,e)},HTMLElement.prototype.flatpickr=function(e){return n([this],e)});var ve=function(e,t){return e instanceof NodeList?n(e,t):n("string"==typeof e?window.document.querySelectorAll(e):[e],t)};return ve.defaultConfig=_,ve.l10ns={en:Object.assign({},se),default:Object.assign({},se)},ve.localize=function(e){ve.l10ns.default=Object.assign({},ve.l10ns.default,e)},ve.setDefaults=function(e){ve.defaultConfig=Object.assign({},ve.defaultConfig,e)},ve.parseDate=re({}),ve.formatDate=ae({}),ve.compareDates=ce,"undefined"!=typeof sincloJquery&&(sincloJquery.fn.flatpickr=function(e){return n(this,e)}),Date.prototype.fp_incr=function(e){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof e?parseInt(e,10):e))},"undefined"!=typeof window&&(window.flatpickr=ve),ve}),function(){"use strict";!function(d){"use strict";var a=window.Slick||{};(a=function(){function e(e,t){var n,i=this;i.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:d(e),appendDots:d(e),arrows:!0,asNavFor:null,prevArrow:'<button class="slick-prev" aria-label="Previous" type="button">Previous</button>',nextArrow:'<button class="slick-next" aria-label="Next" type="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(e,t){return d('<button type="button" />').text(t+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,focusOnChange:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},i.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,scrolling:!1,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,swiping:!1,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},d.extend(i,i.initials),i.activeBreakpoint=null,i.animType=null,i.animProp=null,i.breakpoints=[],i.breakpointSettings=[],i.cssTransitions=!1,i.focussed=!1,i.interrupted=!1,i.hidden="hidden",i.paused=!0,i.positionProp=null,i.respondTo=null,i.rowCount=1,i.shouldClick=!0,i.$slider=d(e),i.$slidesCache=null,i.transformType=null,i.transitionType=null,i.visibilityChange="visibilitychange",i.windowWidth=0,i.windowTimer=null,n=d(e).data("slick")||{},i.options=d.extend({},i.defaults,t,n),i.currentSlide=i.options.initialSlide,i.originalSettings=i.options,"undefined"!=typeof document.mozHidden?(i.hidden="mozHidden",i.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(i.hidden="webkitHidden",i.visibilityChange="webkitvisibilitychange"),i.autoPlay=d.proxy(i.autoPlay,i),i.autoPlayClear=d.proxy(i.autoPlayClear,i),i.autoPlayIterator=d.proxy(i.autoPlayIterator,i),i.changeSlide=d.proxy(i.changeSlide,i),i.clickHandler=d.proxy(i.clickHandler,i),i.selectHandler=d.proxy(i.selectHandler,i),i.setPosition=d.proxy(i.setPosition,i),i.swipeHandler=d.proxy(i.swipeHandler,i),i.dragHandler=d.proxy(i.dragHandler,i),i.keyHandler=d.proxy(i.keyHandler,i),i.instanceUid=o++,i.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,i.registerBreakpoints(),i.init(!0)}var o=0;return e}()).prototype.activateADA=function(){var e=this;e.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},a.prototype.addSlide=a.prototype.slickAdd=function(e,t,n){var i=this;if("boolean"==typeof t)n=t,t=null;else if(t<0||t>=i.slideCount)return!1;i.unload(),"number"==typeof t?0===t&&0===i.$slides.length?d(e).appendTo(i.$slideTrack):n?d(e).insertBefore(i.$slides.eq(t)):d(e).insertAfter(i.$slides.eq(t)):n===!0?d(e).prependTo(i.$slideTrack):d(e).appendTo(i.$slideTrack),i.$slides=i.$slideTrack.children(this.options.slide),i.$slideTrack.children(this.options.slide).detach(),i.$slideTrack.append(i.$slides),i.$slides.each(function(e,t){d(t).attr("data-slick-index",e)}),i.$slidesCache=i.$slides,i.reinit()},a.prototype.animateHeight=function(){var e=this;if(1===e.options.slidesToShow&&e.options.adaptiveHeight===!0&&e.options.vertical===!1){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.animate({height:t},e.options.speed)}},a.prototype.animateSlide=function(e,t){var n={},i=this;i.animateHeight(),i.options.rtl===!0&&i.options.vertical===!1&&(e=-e),i.transformsEnabled===!1?i.options.vertical===!1?i.$slideTrack.animate({left:e},i.options.speed,i.options.easing,t):i.$slideTrack.animate({top:e},i.options.speed,i.options.easing,t):i.cssTransitions===!1?(i.options.rtl===!0&&(i.currentLeft=-i.currentLeft),d({animStart:i.currentLeft}).animate({animStart:e},{duration:i.options.speed,easing:i.options.easing,step:function(e){e=Math.ceil(e),i.options.vertical===!1?(n[i.animType]="translate("+e+"px, 0px)",i.$slideTrack.css(n)):(n[i.animType]="translate(0px,"+e+"px)",i.$slideTrack.css(n))},complete:function(){t&&t.call()}})):(i.applyTransition(),e=Math.ceil(e),i.options.vertical===!1?n[i.animType]="translate3d("+e+"px, 0px, 0px)":n[i.animType]="translate3d(0px,"+e+"px, 0px)",i.$slideTrack.css(n),t&&setTimeout(function(){i.disableTransition(),t.call()},i.options.speed))},a.prototype.getNavTarget=function(){var e=this,t=e.options.asNavFor;return t&&null!==t&&(t=d(t).not(e.$slider)),t},a.prototype.asNavFor=function(t){var e=this,n=e.getNavTarget();null!==n&&"object"==typeof n&&n.each(function(){var e=d(this).slick("getSlick");e.unslicked||e.slideHandler(t,!0)})},a.prototype.applyTransition=function(e){var t=this,n={};t.options.fade===!1?n[t.transitionType]=t.transformType+" "+t.options.speed+"ms "+t.options.cssEase:n[t.transitionType]="opacity "+t.options.speed+"ms "+t.options.cssEase,t.options.fade===!1?t.$slideTrack.css(n):t.$slides.eq(e).css(n)},a.prototype.autoPlay=function(){var e=this;e.autoPlayClear(),e.slideCount>e.options.slidesToShow&&(e.autoPlayTimer=setInterval(e.autoPlayIterator,e.options.autoplaySpeed))},a.prototype.autoPlayClear=function(){var e=this;e.autoPlayTimer&&clearInterval(e.autoPlayTimer)},a.prototype.autoPlayIterator=function(){var e=this,t=e.currentSlide+e.options.slidesToScroll;e.paused||e.interrupted||e.focussed||(e.options.infinite===!1&&(1===e.direction&&e.currentSlide+1===e.slideCount-1?e.direction=0:0===e.direction&&(t=e.currentSlide-e.options.slidesToScroll,e.currentSlide-1===0&&(e.direction=1))),e.slideHandler(t))},a.prototype.buildArrows=function(){var e=this;e.options.arrows===!0&&(e.$prevArrow=d(e.options.prevArrow).addClass("slick-arrow"),e.$nextArrow=d(e.options.nextArrow).addClass("slick-arrow"),e.slideCount>e.options.slidesToShow?(e.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),e.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.prependTo(e.options.appendArrows),e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.appendTo(e.options.appendArrows),e.options.infinite!==!0&&e.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):e.$prevArrow.add(e.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},a.prototype.buildDots=function(){var e,t,n=this;if(n.options.dots===!0&&n.slideCount>n.options.slidesToShow){for(n.$slider.addClass("slick-dotted"),t=d("<ul />").addClass(n.options.dotsClass),e=0;e<=n.getDotCount();e+=1)t.append(d("<li />").append(n.options.customPaging.call(this,n,e)));n.$dots=t.appendTo(n.options.appendDots),n.$dots.find("li").first().addClass("slick-active")}},a.prototype.buildOut=function(){var e=this;e.$slides=e.$slider.children(e.options.slide+":not(.slick-cloned)").addClass("slick-slide"),e.slideCount=e.$slides.length,e.$slides.each(function(e,t){d(t).attr("data-slick-index",e).data("originalStyling",d(t).attr("style")||"")}),e.$slider.addClass("slick-slider"),e.$slideTrack=0===e.slideCount?d('<div class="slick-track"/>').appendTo(e.$slider):e.$slides.wrapAll('<div class="slick-track"/>').parent(),e.$list=e.$slideTrack.wrap('<div class="slick-list"/>').parent(),e.$slideTrack.css("opacity",0),e.options.centerMode!==!0&&e.options.swipeToSlide!==!0||(e.options.slidesToScroll=1),d("img[data-lazy]",e.$slider).not("[src]").addClass("slick-loading"),e.setupInfinite(),e.buildArrows(),e.buildDots(),e.updateDots(),e.setSlideClasses("number"==typeof e.currentSlide?e.currentSlide:0),e.options.draggable===!0&&e.$list.addClass("draggable")},a.prototype.buildRows=function(){var e,t,n,i,o,s,a,r=this;if(i=document.createDocumentFragment(),s=r.$slider.children(),r.options.rows>0){for(a=r.options.slidesPerRow*r.options.rows,o=Math.ceil(s.length/a),e=0;e<o;e++){var c=document.createElement("div");for(t=0;t<r.options.rows;t++){var l=document.createElement("div");for(n=0;n<r.options.slidesPerRow;n++){var d=e*a+(t*r.options.slidesPerRow+n);s.get(d)&&l.appendChild(s.get(d))}c.appendChild(l)}i.appendChild(c)}r.$slider.empty().append(i),r.$slider.children().children().children().css({width:100/r.options.slidesPerRow+"%",display:"inline-block"})}},a.prototype.checkResponsive=function(e,t){var n,i,o,s=this,a=!1,r=s.$slider.width(),c=window.innerWidth||d(window).width();if("window"===s.respondTo?o=c:"slider"===s.respondTo?o=r:"min"===s.respondTo&&(o=Math.min(c,r)),s.options.responsive&&s.options.responsive.length&&null!==s.options.responsive){i=null;for(n in s.breakpoints)s.breakpoints.hasOwnProperty(n)&&(s.originalSettings.mobileFirst===!1?o<s.breakpoints[n]&&(i=s.breakpoints[n]):o>s.breakpoints[n]&&(i=s.breakpoints[n]));null!==i?null!==s.activeBreakpoint?(i!==s.activeBreakpoint||t)&&(s.activeBreakpoint=i,"unslick"===s.breakpointSettings[i]?s.unslick(i):(s.options=d.extend({},s.originalSettings,s.breakpointSettings[i]),e===!0&&(s.currentSlide=s.options.initialSlide),s.refresh(e)),a=i):(s.activeBreakpoint=i,"unslick"===s.breakpointSettings[i]?s.unslick(i):(s.options=d.extend({},s.originalSettings,s.breakpointSettings[i]),e===!0&&(s.currentSlide=s.options.initialSlide),s.refresh(e)),a=i):null!==s.activeBreakpoint&&(s.activeBreakpoint=null,s.options=s.originalSettings,e===!0&&(s.currentSlide=s.options.initialSlide),s.refresh(e),a=i),e||a===!1||s.$slider.trigger("breakpoint",[s,a])}},a.prototype.changeSlide=function(e,t){var n,i,o,s=this,a=d(e.currentTarget);switch(a.is("a")&&e.preventDefault(),a.is("li")||(a=a.closest("li")),o=s.slideCount%s.options.slidesToScroll!==0,n=o?0:(s.slideCount-s.currentSlide)%s.options.slidesToScroll,e.data.message){case"previous":i=0===n?s.options.slidesToScroll:s.options.slidesToShow-n,s.slideCount>s.options.slidesToShow&&s.slideHandler(s.currentSlide-i,!1,t);break;case"next":i=0===n?s.options.slidesToScroll:n,s.slideCount>s.options.slidesToShow&&s.slideHandler(s.currentSlide+i,!1,t);break;case"index":var r=0===e.data.index?0:e.data.index||a.index()*s.options.slidesToScroll;s.slideHandler(s.checkNavigable(r),!1,t),a.children().trigger("focus");break;default:return}},a.prototype.checkNavigable=function(e){var t,n,i=this;if(t=i.getNavigableIndexes(),n=0,e>t[t.length-1])e=t[t.length-1];else for(var o in t){if(e<t[o]){e=n;break}n=t[o]}return e},a.prototype.cleanUpEvents=function(){var e=this;e.options.dots&&null!==e.$dots&&(d("li",e.$dots).off("click.slick",e.changeSlide).off("mouseenter.slick",d.proxy(e.interrupt,e,!0)).off("mouseleave.slick",d.proxy(e.interrupt,e,!1)),e.options.accessibility===!0&&e.$dots.off("keydown.slick",e.keyHandler)),e.$slider.off("focus.slick blur.slick"),e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow&&e.$prevArrow.off("click.slick",e.changeSlide),e.$nextArrow&&e.$nextArrow.off("click.slick",e.changeSlide),e.options.accessibility===!0&&(e.$prevArrow&&e.$prevArrow.off("keydown.slick",e.keyHandler),e.$nextArrow&&e.$nextArrow.off("keydown.slick",e.keyHandler))),e.$list.off("touchstart.slick mousedown.slick",e.swipeHandler),e.$list.off("touchmove.slick mousemove.slick",e.swipeHandler),e.$list.off("touchend.slick mouseup.slick",e.swipeHandler),e.$list.off("touchcancel.slick mouseleave.slick",e.swipeHandler),e.$list.off("click.slick",e.clickHandler),d(document).off(e.visibilityChange,e.visibility),e.cleanUpSlideEvents(),e.options.accessibility===!0&&e.$list.off("keydown.slick",e.keyHandler),e.options.focusOnSelect===!0&&d(e.$slideTrack).children().off("click.slick",e.selectHandler),d(window).off("orientationchange.slick.slick-"+e.instanceUid,e.orientationChange),d(window).off("resize.slick.slick-"+e.instanceUid,e.resize),d("[draggable!=true]",e.$slideTrack).off("dragstart",e.preventDefault),d(window).off("load.slick.slick-"+e.instanceUid,e.setPosition)},a.prototype.cleanUpSlideEvents=function(){var e=this;e.$list.off("mouseenter.slick",d.proxy(e.interrupt,e,!0)),e.$list.off("mouseleave.slick",d.proxy(e.interrupt,e,!1))},a.prototype.cleanUpRows=function(){var e,t=this;t.options.rows>0&&(e=t.$slides.children().children(),e.removeAttr("style"),t.$slider.empty().append(e))},a.prototype.clickHandler=function(e){var t=this;t.shouldClick===!1&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())},a.prototype.destroy=function(e){var t=this;t.autoPlayClear(),t.touchObject={},t.cleanUpEvents(),d(".slick-cloned",t.$slider).detach(),t.$dots&&t.$dots.remove(),t.$prevArrow&&t.$prevArrow.length&&(t.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.remove()),t.$nextArrow&&t.$nextArrow.length&&(t.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.remove()),t.$slides&&(t.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){d(this).attr("style",d(this).data("originalStyling"))}),t.$slideTrack.children(this.options.slide).detach(),t.$slideTrack.detach(),t.$list.detach(),t.$slider.append(t.$slides)),t.cleanUpRows(),t.$slider.removeClass("slick-slider"),t.$slider.removeClass("slick-initialized"),t.$slider.removeClass("slick-dotted"),t.unslicked=!0,e||t.$slider.trigger("destroy",[t])},a.prototype.disableTransition=function(e){var t=this,n={};n[t.transitionType]="",t.options.fade===!1?t.$slideTrack.css(n):t.$slides.eq(e).css(n)},a.prototype.fadeSlide=function(e,t){var n=this;n.cssTransitions===!1?(n.$slides.eq(e).css({zIndex:n.options.zIndex}),n.$slides.eq(e).animate({opacity:1},n.options.speed,n.options.easing,t)):(n.applyTransition(e),n.$slides.eq(e).css({opacity:1,zIndex:n.options.zIndex}),t&&setTimeout(function(){n.disableTransition(e),t.call()},n.options.speed))},a.prototype.fadeSlideOut=function(e){var t=this;t.cssTransitions===!1?t.$slides.eq(e).animate({opacity:0,zIndex:t.options.zIndex-2},t.options.speed,t.options.easing):(t.applyTransition(e),t.$slides.eq(e).css({opacity:0,zIndex:t.options.zIndex-2}))},a.prototype.filterSlides=a.prototype.slickFilter=function(e){var t=this;null!==e&&(t.$slidesCache=t.$slides,t.unload(),t.$slideTrack.children(this.options.slide).detach(),t.$slidesCache.filter(e).appendTo(t.$slideTrack),t.reinit())},a.prototype.focusHandler=function(){var n=this;n.$slider.off("focus.slick blur.slick").on("focus.slick","*",function(e){var t=d(this);setTimeout(function(){n.options.pauseOnFocus&&t.is(":focus")&&(n.focussed=!0,n.autoPlay())},0)}).on("blur.slick","*",function(e){d(this);n.options.pauseOnFocus&&(n.focussed=!1,n.autoPlay())})},a.prototype.getCurrent=a.prototype.slickCurrentSlide=function(){var e=this;return e.currentSlide},a.prototype.getDotCount=function(){var e=this,t=0,n=0,i=0;if(e.options.infinite===!0)if(e.slideCount<=e.options.slidesToShow)++i;else for(;t<e.slideCount;)++i,t=n+e.options.slidesToScroll,n+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;else if(e.options.centerMode===!0)i=e.slideCount;else if(e.options.asNavFor)for(;t<e.slideCount;)++i,t=n+e.options.slidesToScroll,n+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;else i=1+Math.ceil((e.slideCount-e.options.slidesToShow)/e.options.slidesToScroll);return i-1},a.prototype.getLeft=function(e){var t,n,i,o,s=this,a=0;return s.slideOffset=0,n=s.$slides.first().outerHeight(!0),s.options.infinite===!0?(s.slideCount>s.options.slidesToShow&&(s.slideOffset=s.slideWidth*s.options.slidesToShow*-1,o=-1,s.options.vertical===!0&&s.options.centerMode===!0&&(2===s.options.slidesToShow?o=-1.5:1===s.options.slidesToShow&&(o=-2)),a=n*s.options.slidesToShow*o),s.slideCount%s.options.slidesToScroll!==0&&e+s.options.slidesToScroll>s.slideCount&&s.slideCount>s.options.slidesToShow&&(e>s.slideCount?(s.slideOffset=(s.options.slidesToShow-(e-s.slideCount))*s.slideWidth*-1,a=(s.options.slidesToShow-(e-s.slideCount))*n*-1):(s.slideOffset=s.slideCount%s.options.slidesToScroll*s.slideWidth*-1,a=s.slideCount%s.options.slidesToScroll*n*-1))):e+s.options.slidesToShow>s.slideCount&&(s.slideOffset=(e+s.options.slidesToShow-s.slideCount)*s.slideWidth,a=(e+s.options.slidesToShow-s.slideCount)*n),s.slideCount<=s.options.slidesToShow&&(s.slideOffset=0,a=0),s.options.centerMode===!0&&s.slideCount<=s.options.slidesToShow?s.slideOffset=s.slideWidth*Math.floor(s.options.slidesToShow)/2-s.slideWidth*s.slideCount/2:s.options.centerMode===!0&&s.options.infinite===!0?s.slideOffset+=s.slideWidth*Math.floor(s.options.slidesToShow/2)-s.slideWidth:s.options.centerMode===!0&&(s.slideOffset=0,s.slideOffset+=s.slideWidth*Math.floor(s.options.slidesToShow/2)),t=s.options.vertical===!1?e*s.slideWidth*-1+s.slideOffset:e*n*-1+a,s.options.variableWidth===!0&&(i=s.slideCount<=s.options.slidesToShow||s.options.infinite===!1?s.$slideTrack.children(".slick-slide").eq(e):s.$slideTrack.children(".slick-slide").eq(e+s.options.slidesToShow),t=s.options.rtl===!0?i[0]?(s.$slideTrack.width()-i[0].offsetLeft-i.width())*-1:0:i[0]?i[0].offsetLeft*-1:0,s.options.centerMode===!0&&(i=s.slideCount<=s.options.slidesToShow||s.options.infinite===!1?s.$slideTrack.children(".slick-slide").eq(e):s.$slideTrack.children(".slick-slide").eq(e+s.options.slidesToShow+1),t=s.options.rtl===!0?i[0]?(s.$slideTrack.width()-i[0].offsetLeft-i.width())*-1:0:i[0]?i[0].offsetLeft*-1:0,t+=(s.$list.width()-i.outerWidth())/2)),t},a.prototype.getOption=a.prototype.slickGetOption=function(e){var t=this;return t.options[e]},a.prototype.getNavigableIndexes=function(){var e,t=this,n=0,i=0,o=[];for(t.options.infinite===!1?e=t.slideCount:(n=t.options.slidesToScroll*-1,i=t.options.slidesToScroll*-1,e=2*t.slideCount);n<e;)o.push(n),n=i+t.options.slidesToScroll,i+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;return o},a.prototype.getSlick=function(){return this},a.prototype.getSlideCount=function(){var e,s,a,t,r=this;return t=r.options.centerMode===!0?Math.floor(r.$list.width()/2):0,a=r.swipeLeft*-1+t,r.options.swipeToSlide===!0?(r.$slideTrack.find(".slick-slide").each(function(e,t){var n,i,o;if(n=d(t).outerWidth(),i=t.offsetLeft,r.options.centerMode!==!0&&(i+=n/2),o=i+n,a<o)return s=t,!1}),e=Math.abs(d(s).attr("data-slick-index")-r.currentSlide)||1):r.options.slidesToScroll},a.prototype.goTo=a.prototype.slickGoTo=function(e,t){var n=this;n.changeSlide({data:{message:"index",index:parseInt(e)}},t)},a.prototype.init=function(e){var t=this;d(t.$slider).hasClass("slick-initialized")||(d(t.$slider).addClass("slick-initialized"),t.buildRows(),t.buildOut(),t.setProps(),t.startLoad(),t.loadSlider(),t.initializeEvents(),t.updateArrows(),t.updateDots(),t.checkResponsive(!0),t.focusHandler()),e&&t.$slider.trigger("init",[t]),t.options.accessibility===!0&&t.initADA(),t.options.autoplay&&(t.paused=!1,t.autoPlay())},a.prototype.initADA=function(){var i=this,n=Math.ceil(i.slideCount/i.options.slidesToShow),o=i.getNavigableIndexes().filter(function(e){return e>=0&&e<i.slideCount});i.$slides.add(i.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),null!==i.$dots&&(i.$slides.not(i.$slideTrack.find(".slick-cloned")).each(function(e){var t=o.indexOf(e);if(d(this).attr({role:"tabpanel",id:"slick-slide"+i.instanceUid+e,tabindex:-1}),t!==-1){var n="slick-slide-control"+i.instanceUid+t;d("#"+n).length&&d(this).attr({"aria-describedby":n})}}),i.$dots.attr("role","tablist").find("li").each(function(e){var t=o[e];d(this).attr({role:"presentation"}),d(this).find("button").first().attr({role:"tab",id:"slick-slide-control"+i.instanceUid+e,"aria-controls":"slick-slide"+i.instanceUid+t,"aria-label":e+1+" of "+n,"aria-selected":null,tabindex:"-1"})}).eq(i.currentSlide).find("button").attr({"aria-selected":"true",tabindex:"0"}).end());for(var e=i.currentSlide,t=e+i.options.slidesToShow;e<t;e++)i.options.focusOnChange?i.$slides.eq(e).attr({tabindex:"0"}):i.$slides.eq(e).removeAttr("tabindex");i.activateADA()},a.prototype.initArrowEvents=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},e.changeSlide),e.$nextArrow.off("click.slick").on("click.slick",{message:"next"},e.changeSlide),e.options.accessibility===!0&&(e.$prevArrow.on("keydown.slick",e.keyHandler),e.$nextArrow.on("keydown.slick",e.keyHandler)))},a.prototype.initDotEvents=function(){var e=this;e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&(d("li",e.$dots).on("click.slick",{message:"index"},e.changeSlide),e.options.accessibility===!0&&e.$dots.on("keydown.slick",e.keyHandler)),e.options.dots===!0&&e.options.pauseOnDotsHover===!0&&e.slideCount>e.options.slidesToShow&&d("li",e.$dots).on("mouseenter.slick",d.proxy(e.interrupt,e,!0)).on("mouseleave.slick",d.proxy(e.interrupt,e,!1))},a.prototype.initSlideEvents=function(){var e=this;e.options.pauseOnHover&&(e.$list.on("mouseenter.slick",d.proxy(e.interrupt,e,!0)),e.$list.on("mouseleave.slick",d.proxy(e.interrupt,e,!1)))},a.prototype.initializeEvents=function(){var e=this;e.initArrowEvents(),e.initDotEvents(),e.initSlideEvents(),e.$list.on("touchstart.slick mousedown.slick",{action:"start"},e.swipeHandler),e.$list.on("touchmove.slick mousemove.slick",{action:"move"},e.swipeHandler),e.$list.on("touchend.slick mouseup.slick",{action:"end"},e.swipeHandler),e.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},e.swipeHandler),e.$list.on("click.slick",e.clickHandler),d(document).on(e.visibilityChange,d.proxy(e.visibility,e)),e.options.accessibility===!0&&e.$list.on("keydown.slick",e.keyHandler),e.options.focusOnSelect===!0&&d(e.$slideTrack).children().on("click.slick",e.selectHandler),d(window).on("orientationchange.slick.slick-"+e.instanceUid,d.proxy(e.orientationChange,e)),d(window).on("resize.slick.slick-"+e.instanceUid,d.proxy(e.resize,e)),d("[draggable!=true]",e.$slideTrack).on("dragstart",e.preventDefault),d(window).on("load.slick.slick-"+e.instanceUid,e.setPosition),d(e.setPosition)},a.prototype.initUI=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.show(),e.$nextArrow.show()),e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&e.$dots.show()},a.prototype.keyHandler=function(e){var t=this;e.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===e.keyCode&&t.options.accessibility===!0?t.changeSlide({data:{message:t.options.rtl===!0?"next":"previous"}}):39===e.keyCode&&t.options.accessibility===!0&&t.changeSlide({data:{message:t.options.rtl===!0?"previous":"next"}}))},a.prototype.lazyLoad=function(){function e(e){d("img[data-lazy]",e).each(function(){var e=d(this),t=d(this).attr("data-lazy"),n=d(this).attr("data-srcset"),i=d(this).attr("data-sizes")||s.$slider.attr("data-sizes"),o=document.createElement("img");o.onload=function(){e.animate({opacity:0},100,function(){n&&(e.attr("srcset",n),i&&e.attr("sizes",i)),e.attr("src",t).animate({opacity:1},200,function(){e.removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading")}),s.$slider.trigger("lazyLoaded",[s,e,t])})},o.onerror=function(){e.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),s.$slider.trigger("lazyLoadError",[s,e,t])},o.src=t})}var t,n,i,o,s=this;if(s.options.centerMode===!0?s.options.infinite===!0?(i=s.currentSlide+(s.options.slidesToShow/2+1),o=i+s.options.slidesToShow+2):(i=Math.max(0,s.currentSlide-(s.options.slidesToShow/2+1)),o=2+(s.options.slidesToShow/2+1)+s.currentSlide):(i=s.options.infinite?s.options.slidesToShow+s.currentSlide:s.currentSlide,o=Math.ceil(i+s.options.slidesToShow),s.options.fade===!0&&(i>0&&i--,o<=s.slideCount&&o++)),t=s.$slider.find(".slick-slide").slice(i,o),"anticipated"===s.options.lazyLoad)for(var a=i-1,r=o,c=s.$slider.find(".slick-slide"),l=0;l<s.options.slidesToScroll;l++)a<0&&(a=s.slideCount-1),t=t.add(c.eq(a)),t=t.add(c.eq(r)),a--,r++;e(t),s.slideCount<=s.options.slidesToShow?(n=s.$slider.find(".slick-slide"),e(n)):s.currentSlide>=s.slideCount-s.options.slidesToShow?(n=s.$slider.find(".slick-cloned").slice(0,s.options.slidesToShow),e(n)):0===s.currentSlide&&(n=s.$slider.find(".slick-cloned").slice(s.options.slidesToShow*-1),e(n))},a.prototype.loadSlider=function(){var e=this;e.setPosition(),e.$slideTrack.css({opacity:1}),e.$slider.removeClass("slick-loading"),e.initUI(),"progressive"===e.options.lazyLoad&&e.progressiveLazyLoad()},a.prototype.next=a.prototype.slickNext=function(){var e=this;e.changeSlide({data:{message:"next"}})},a.prototype.orientationChange=function(){var e=this;e.checkResponsive(),e.setPosition()},a.prototype.pause=a.prototype.slickPause=function(){var e=this;e.autoPlayClear(),e.paused=!0},a.prototype.play=a.prototype.slickPlay=function(){var e=this;e.autoPlay(),e.options.autoplay=!0,e.paused=!1,e.focussed=!1,e.interrupted=!1},a.prototype.postSlide=function(e){var t=this;if(!t.unslicked&&(t.$slider.trigger("afterChange",[t,e]),t.animating=!1,t.slideCount>t.options.slidesToShow&&t.setPosition(),t.swipeLeft=null,t.options.autoplay&&t.autoPlay(),t.options.accessibility===!0&&(t.initADA(),t.options.focusOnChange))){var n=d(t.$slides.get(t.currentSlide));n.attr("tabindex",0).focus()}},a.prototype.prev=a.prototype.slickPrev=function(){var e=this;e.changeSlide({data:{message:"previous"}})},a.prototype.preventDefault=function(e){e.preventDefault()},a.prototype.progressiveLazyLoad=function(e){e=e||1;var t,n,i,o,s,a=this,r=d("img[data-lazy]",a.$slider);r.length?(t=r.first(),n=t.attr("data-lazy"),i=t.attr("data-srcset"),o=t.attr("data-sizes")||a.$slider.attr("data-sizes"),s=document.createElement("img"),s.onload=function(){i&&(t.attr("srcset",i),o&&t.attr("sizes",o)),t.attr("src",n).removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading"),a.options.adaptiveHeight===!0&&a.setPosition(),a.$slider.trigger("lazyLoaded",[a,t,n]),a.progressiveLazyLoad()},s.onerror=function(){e<3?setTimeout(function(){a.progressiveLazyLoad(e+1)},500):(t.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),a.$slider.trigger("lazyLoadError",[a,t,n]),a.progressiveLazyLoad())},s.src=n):a.$slider.trigger("allImagesLoaded",[a])},a.prototype.refresh=function(e){var t,n,i=this;n=i.slideCount-i.options.slidesToShow,!i.options.infinite&&i.currentSlide>n&&(i.currentSlide=n),i.slideCount<=i.options.slidesToShow&&(i.currentSlide=0),t=i.currentSlide,i.destroy(!0),d.extend(i,i.initials,{currentSlide:t}),i.init(),e||i.changeSlide({data:{message:"index",index:t}},!1)},a.prototype.registerBreakpoints=function(){var e,t,n,i=this,o=i.options.responsive||null;if("array"===d.type(o)&&o.length){i.respondTo=i.options.respondTo||"window";for(e in o)if(n=i.breakpoints.length-1,o.hasOwnProperty(e)){for(t=o[e].breakpoint;n>=0;)i.breakpoints[n]&&i.breakpoints[n]===t&&i.breakpoints.splice(n,1),n--;i.breakpoints.push(t),i.breakpointSettings[t]=o[e].settings}i.breakpoints.sort(function(e,t){return i.options.mobileFirst?e-t:t-e})}},a.prototype.reinit=function(){var e=this;e.$slides=e.$slideTrack.children(e.options.slide).addClass("slick-slide"),e.slideCount=e.$slides.length,e.currentSlide>=e.slideCount&&0!==e.currentSlide&&(e.currentSlide=e.currentSlide-e.options.slidesToScroll),e.slideCount<=e.options.slidesToShow&&(e.currentSlide=0),e.registerBreakpoints(),e.setProps(),e.setupInfinite(),e.buildArrows(),e.updateArrows(),e.initArrowEvents(),e.buildDots(),e.updateDots(),e.initDotEvents(),e.cleanUpSlideEvents(),e.initSlideEvents(),e.checkResponsive(!1,!0),e.options.focusOnSelect===!0&&d(e.$slideTrack).children().on("click.slick",e.selectHandler),e.setSlideClasses("number"==typeof e.currentSlide?e.currentSlide:0),e.setPosition(),e.focusHandler(),e.paused=!e.options.autoplay,e.autoPlay(),e.$slider.trigger("reInit",[e])},a.prototype.resize=function(){var e=this;d(window).width()!==e.windowWidth&&(clearTimeout(e.windowDelay),e.windowDelay=window.setTimeout(function(){e.windowWidth=d(window).width(),e.checkResponsive(),e.unslicked||e.setPosition()},50))},a.prototype.removeSlide=a.prototype.slickRemove=function(e,t,n){var i=this;return"boolean"==typeof e?(t=e,e=t===!0?0:i.slideCount-1):e=t===!0?--e:e,!(i.slideCount<1||e<0||e>i.slideCount-1)&&(i.unload(),n===!0?i.$slideTrack.children().remove():i.$slideTrack.children(this.options.slide).eq(e).remove(),i.$slides=i.$slideTrack.children(this.options.slide),i.$slideTrack.children(this.options.slide).detach(),i.$slideTrack.append(i.$slides),i.$slidesCache=i.$slides,void i.reinit())},a.prototype.setCSS=function(e){var t,n,i=this,o={};i.options.rtl===!0&&(e=-e),t="left"==i.positionProp?Math.ceil(e)+"px":"0px",n="top"==i.positionProp?Math.ceil(e)+"px":"0px",o[i.positionProp]=e,i.transformsEnabled===!1?i.$slideTrack.css(o):(o={},i.cssTransitions===!1?(o[i.animType]="translate("+t+", "+n+")",i.$slideTrack.css(o)):(o[i.animType]="translate3d("+t+", "+n+", 0px)",i.$slideTrack.css(o)))},a.prototype.setDimensions=function(){var e=this;e.options.vertical===!1?e.options.centerMode===!0&&e.$list.css({padding:"0px "+e.options.centerPadding}):(e.$list.height(e.$slides.first().outerHeight(!0)*e.options.slidesToShow),e.options.centerMode===!0&&e.$list.css({padding:e.options.centerPadding+" 0px"})),e.listWidth=e.$list.width(),e.listHeight=e.$list.height(),e.options.vertical===!1&&e.options.variableWidth===!1?(e.slideWidth=Math.ceil(e.listWidth/e.options.slidesToShow),e.$slideTrack.width(Math.ceil(e.slideWidth*e.$slideTrack.children(".slick-slide").length))):e.options.variableWidth===!0?e.$slideTrack.width(5e3*e.slideCount):(e.slideWidth=Math.ceil(e.listWidth),e.$slideTrack.height(Math.ceil(e.$slides.first().outerHeight(!0)*e.$slideTrack.children(".slick-slide").length)));var t=e.$slides.first().outerWidth(!0)-e.$slides.first().width();e.options.variableWidth===!1&&e.$slideTrack.children(".slick-slide").width(e.slideWidth-t)},a.prototype.setFade=function(){var n,i=this;i.$slides.each(function(e,t){n=i.slideWidth*e*-1,i.options.rtl===!0?d(t).css({position:"relative",right:n,top:0,zIndex:i.options.zIndex-2,opacity:0}):d(t).css({position:"relative",left:n,top:0,zIndex:i.options.zIndex-2,opacity:0})}),i.$slides.eq(i.currentSlide).css({zIndex:i.options.zIndex-1,opacity:1})},a.prototype.setHeight=function(){var e=this;if(1===e.options.slidesToShow&&e.options.adaptiveHeight===!0&&e.options.vertical===!1){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.css("height",t)}},a.prototype.setOption=a.prototype.slickSetOption=function(){var e,t,n,i,o,s=this,a=!1;if("object"===d.type(arguments[0])?(n=arguments[0],a=arguments[1],o="multiple"):"string"===d.type(arguments[0])&&(n=arguments[0],i=arguments[1],a=arguments[2],"responsive"===arguments[0]&&"array"===d.type(arguments[1])?o="responsive":"undefined"!=typeof arguments[1]&&(o="single")),"single"===o)s.options[n]=i;else if("multiple"===o)d.each(n,function(e,t){s.options[e]=t});else if("responsive"===o)for(t in i)if("array"!==d.type(s.options.responsive))s.options.responsive=[i[t]];else{for(e=s.options.responsive.length-1;e>=0;)s.options.responsive[e].breakpoint===i[t].breakpoint&&s.options.responsive.splice(e,1),e--;s.options.responsive.push(i[t])}a&&(s.unload(),s.reinit())},a.prototype.setPosition=function(){var e=this;e.setDimensions(),e.setHeight(),e.options.fade===!1?e.setCSS(e.getLeft(e.currentSlide)):e.setFade(),e.$slider.trigger("setPosition",[e])},a.prototype.setProps=function(){var e=this,t=document.body.style;e.positionProp=e.options.vertical===!0?"top":"left","top"===e.positionProp?e.$slider.addClass("slick-vertical"):e.$slider.removeClass("slick-vertical"),void 0===t.WebkitTransition&&void 0===t.MozTransition&&void 0===t.msTransition||e.options.useCSS===!0&&(e.cssTransitions=!0),e.options.fade&&("number"==typeof e.options.zIndex?e.options.zIndex<3&&(e.options.zIndex=3):e.options.zIndex=e.defaults.zIndex),void 0!==t.OTransform&&(e.animType="OTransform",e.transformType="-o-transform",e.transitionType="OTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.MozTransform&&(e.animType="MozTransform",e.transformType="-moz-transform",e.transitionType="MozTransition",void 0===t.perspectiveProperty&&void 0===t.MozPerspective&&(e.animType=!1)),void 0!==t.webkitTransform&&(e.animType="webkitTransform",e.transformType="-webkit-transform",e.transitionType="webkitTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.msTransform&&(e.animType="msTransform",e.transformType="-ms-transform",e.transitionType="msTransition",void 0===t.msTransform&&(e.animType=!1)),void 0!==t.transform&&e.animType!==!1&&(e.animType="transform",e.transformType="transform",e.transitionType="transition"),e.transformsEnabled=e.options.useTransform&&null!==e.animType&&e.animType!==!1},a.prototype.setSlideClasses=function(e){var t,n,i,o,s=this;if(n=s.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),s.$slides.eq(e).addClass("slick-current"),s.options.centerMode===!0){var a=s.options.slidesToShow%2===0?1:0;t=Math.floor(s.options.slidesToShow/2),s.options.infinite===!0&&(e>=t&&e<=s.slideCount-1-t?s.$slides.slice(e-t+a,e+t+1).addClass("slick-active").attr("aria-hidden","false"):(i=s.options.slidesToShow+e,n.slice(i-t+1+a,i+t+2).addClass("slick-active").attr("aria-hidden","false")),0===e?n.eq(n.length-1-s.options.slidesToShow).addClass("slick-center"):e===s.slideCount-1&&n.eq(s.options.slidesToShow).addClass("slick-center")),s.$slides.eq(e).addClass("slick-center")}else e>=0&&e<=s.slideCount-s.options.slidesToShow?s.$slides.slice(e,e+s.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):n.length<=s.options.slidesToShow?n.addClass("slick-active").attr("aria-hidden","false"):(o=s.slideCount%s.options.slidesToShow,i=s.options.infinite===!0?s.options.slidesToShow+e:e,s.options.slidesToShow==s.options.slidesToScroll&&s.slideCount-e<s.options.slidesToShow?n.slice(i-(s.options.slidesToShow-o),i+o).addClass("slick-active").attr("aria-hidden","false"):n.slice(i,i+s.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"));"ondemand"!==s.options.lazyLoad&&"anticipated"!==s.options.lazyLoad||s.lazyLoad()},a.prototype.setupInfinite=function(){var e,t,n,i=this;if(i.options.fade===!0&&(i.options.centerMode=!1),i.options.infinite===!0&&i.options.fade===!1&&(t=null,i.slideCount>i.options.slidesToShow)){for(n=i.options.centerMode===!0?i.options.slidesToShow+1:i.options.slidesToShow,e=i.slideCount;e>i.slideCount-n;e-=1)t=e-1,d(i.$slides[t]).clone(!0).attr("id","").attr("data-slick-index",t-i.slideCount).prependTo(i.$slideTrack).addClass("slick-cloned");for(e=0;e<n+i.slideCount;e+=1)t=e,d(i.$slides[t]).clone(!0).attr("id","").attr("data-slick-index",t+i.slideCount).appendTo(i.$slideTrack).addClass("slick-cloned");i.$slideTrack.find(".slick-cloned").find("[id]").each(function(){d(this).attr("id","")})}},a.prototype.interrupt=function(e){var t=this;e||t.autoPlay(),t.interrupted=e},a.prototype.selectHandler=function(e){var t=this,n=d(e.target).is(".slick-slide")?d(e.target):d(e.target).parents(".slick-slide"),i=parseInt(n.attr("data-slick-index"));return i||(i=0),t.slideCount<=t.options.slidesToShow?void t.slideHandler(i,!1,!0):void t.slideHandler(i)},a.prototype.slideHandler=function(e,t,n){var i,o,s,a,r,c=null,l=this;if(t=t||!1,!(l.animating===!0&&l.options.waitForAnimate===!0||l.options.fade===!0&&l.currentSlide===e))return t===!1&&l.asNavFor(e),i=e,c=l.getLeft(i),a=l.getLeft(l.currentSlide),l.currentLeft=null===l.swipeLeft?a:l.swipeLeft,l.options.infinite===!1&&l.options.centerMode===!1&&(e<0||e>l.getDotCount()*l.options.slidesToScroll)?void(l.options.fade===!1&&(i=l.currentSlide,n!==!0&&l.slideCount>l.options.slidesToShow?l.animateSlide(a,function(){l.postSlide(i)}):l.postSlide(i))):l.options.infinite===!1&&l.options.centerMode===!0&&(e<0||e>l.slideCount-l.options.slidesToScroll)?void(l.options.fade===!1&&(i=l.currentSlide,n!==!0&&l.slideCount>l.options.slidesToShow?l.animateSlide(a,function(){l.postSlide(i)}):l.postSlide(i))):(l.options.autoplay&&clearInterval(l.autoPlayTimer),o=i<0?l.slideCount%l.options.slidesToScroll!==0?l.slideCount-l.slideCount%l.options.slidesToScroll:l.slideCount+i:i>=l.slideCount?l.slideCount%l.options.slidesToScroll!==0?0:i-l.slideCount:i,l.animating=!0,l.$slider.trigger("beforeChange",[l,l.currentSlide,o]),s=l.currentSlide,l.currentSlide=o,l.setSlideClasses(l.currentSlide),l.options.asNavFor&&(r=l.getNavTarget(),r=r.slick("getSlick"),r.slideCount<=r.options.slidesToShow&&r.setSlideClasses(l.currentSlide)),l.updateDots(),l.updateArrows(),l.options.fade===!0?(n!==!0?(l.fadeSlideOut(s),l.fadeSlide(o,function(){l.postSlide(o)})):l.postSlide(o),void l.animateHeight()):void(n!==!0&&l.slideCount>l.options.slidesToShow?l.animateSlide(c,function(){l.postSlide(o)}):l.postSlide(o)))},a.prototype.startLoad=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.hide(),e.$nextArrow.hide()),e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&e.$dots.hide(),e.$slider.addClass("slick-loading")},a.prototype.swipeDirection=function(){var e,t,n,i,o=this;return e=o.touchObject.startX-o.touchObject.curX,t=o.touchObject.startY-o.touchObject.curY,n=Math.atan2(t,e),i=Math.round(180*n/Math.PI),i<0&&(i=360-Math.abs(i)),i<=45&&i>=0?o.options.rtl===!1?"left":"right":i<=360&&i>=315?o.options.rtl===!1?"left":"right":i>=135&&i<=225?o.options.rtl===!1?"right":"left":o.options.verticalSwiping===!0?i>=35&&i<=135?"down":"up":"vertical"},a.prototype.swipeEnd=function(e){var t,n,i=this;if(i.dragging=!1,i.swiping=!1,i.scrolling)return i.scrolling=!1,!1;if(i.interrupted=!1,i.shouldClick=!(i.touchObject.swipeLength>10),void 0===i.touchObject.curX)return!1;if(i.touchObject.edgeHit===!0&&i.$slider.trigger("edge",[i,i.swipeDirection()]),i.touchObject.swipeLength>=i.touchObject.minSwipe){switch(n=i.swipeDirection()){case"left":case"down":t=i.options.swipeToSlide?i.checkNavigable(i.currentSlide+i.getSlideCount()):i.currentSlide+i.getSlideCount(),i.currentDirection=0;break;case"right":case"up":t=i.options.swipeToSlide?i.checkNavigable(i.currentSlide-i.getSlideCount()):i.currentSlide-i.getSlideCount(),i.currentDirection=1}"vertical"!=n&&(i.slideHandler(t),i.touchObject={},i.$slider.trigger("swipe",[i,n]))}else i.touchObject.startX!==i.touchObject.curX&&(i.slideHandler(i.currentSlide),i.touchObject={})},a.prototype.swipeHandler=function(e){var t=this;if(!(t.options.swipe===!1||"ontouchend"in document&&t.options.swipe===!1||t.options.draggable===!1&&e.type.indexOf("mouse")!==-1))switch(t.touchObject.fingerCount=e.originalEvent&&void 0!==e.originalEvent.touches?e.originalEvent.touches.length:1,t.touchObject.minSwipe=t.listWidth/t.options.touchThreshold,t.options.verticalSwiping===!0&&(t.touchObject.minSwipe=t.listHeight/t.options.touchThreshold),e.data.action){case"start":t.swipeStart(e);break;case"move":t.swipeMove(e);break;case"end":t.swipeEnd(e)}},a.prototype.swipeMove=function(e){var t,n,i,o,s,a,r=this;return s=void 0!==e.originalEvent?e.originalEvent.touches:null,!(!r.dragging||r.scrolling||s&&1!==s.length)&&(t=r.getLeft(r.currentSlide),r.touchObject.curX=void 0!==s?s[0].pageX:e.clientX,r.touchObject.curY=void 0!==s?s[0].pageY:e.clientY,r.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(r.touchObject.curX-r.touchObject.startX,2))),a=Math.round(Math.sqrt(Math.pow(r.touchObject.curY-r.touchObject.startY,2))),!r.options.verticalSwiping&&!r.swiping&&a>4?(r.scrolling=!0,!1):(r.options.verticalSwiping===!0&&(r.touchObject.swipeLength=a),n=r.swipeDirection(),void 0!==e.originalEvent&&r.touchObject.swipeLength>4&&(r.swiping=!0,e.preventDefault()),o=(r.options.rtl===!1?1:-1)*(r.touchObject.curX>r.touchObject.startX?1:-1),r.options.verticalSwiping===!0&&(o=r.touchObject.curY>r.touchObject.startY?1:-1),i=r.touchObject.swipeLength,r.touchObject.edgeHit=!1,r.options.infinite===!1&&(0===r.currentSlide&&"right"===n||r.currentSlide>=r.getDotCount()&&"left"===n)&&(i=r.touchObject.swipeLength*r.options.edgeFriction,r.touchObject.edgeHit=!0),r.options.vertical===!1?r.swipeLeft=t+i*o:r.swipeLeft=t+i*(r.$list.height()/r.listWidth)*o,r.options.verticalSwiping===!0&&(r.swipeLeft=t+i*o),r.options.fade!==!0&&r.options.touchMove!==!1&&(r.animating===!0?(r.swipeLeft=null,!1):void r.setCSS(r.swipeLeft))))},a.prototype.swipeStart=function(e){var t,n=this;return n.interrupted=!0,1!==n.touchObject.fingerCount||n.slideCount<=n.options.slidesToShow?(n.touchObject={},!1):(void 0!==e.originalEvent&&void 0!==e.originalEvent.touches&&(t=e.originalEvent.touches[0]),n.touchObject.startX=n.touchObject.curX=void 0!==t?t.pageX:e.clientX,n.touchObject.startY=n.touchObject.curY=void 0!==t?t.pageY:e.clientY,void(n.dragging=!0))},a.prototype.unfilterSlides=a.prototype.slickUnfilter=function(){var e=this;null!==e.$slidesCache&&(e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.appendTo(e.$slideTrack),e.reinit())},a.prototype.unload=function(){var e=this;d(".slick-cloned",e.$slider).remove(),e.$dots&&e.$dots.remove(),e.$prevArrow&&e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.remove(),e.$nextArrow&&e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.remove(),e.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},a.prototype.unslick=function(e){var t=this;t.$slider.trigger("unslick",[t,e]),t.destroy()},a.prototype.updateArrows=function(){var e,t=this;e=Math.floor(t.options.slidesToShow/2),t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&!t.options.infinite&&(t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),t.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===t.currentSlide?(t.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):t.currentSlide>=t.slideCount-t.options.slidesToShow&&t.options.centerMode===!1?(t.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):t.currentSlide>=t.slideCount-1&&t.options.centerMode===!0&&(t.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},a.prototype.updateDots=function(){var e=this;null!==e.$dots&&(e.$dots.find("li").removeClass("slick-active").end(),e.$dots.find("li").eq(Math.floor(e.currentSlide/e.options.slidesToScroll)).addClass("slick-active"))},a.prototype.visibility=function(){var e=this;e.options.autoplay&&(document[e.hidden]?e.interrupted=!0:e.interrupted=!1)},d.fn.slick=function(){var e,t,n=this,i=arguments[0],o=Array.prototype.slice.call(arguments,1),s=n.length;for(e=0;e<s;e++)if("object"==typeof i||"undefined"==typeof i?n[e].slick=new a(n[e],i):t=n[e].slick[i].apply(n[e].slick,o),"undefined"!=typeof t)return t;return n}}(sincloJquery)}(),AjaxZip3=function(){},AjaxZip3.VERSION="0.51",AjaxZip3.JSONDATA="https://yubinbango.github.io/yubinbango-data/data",AjaxZip3.CACHE=[],AjaxZip3.prev="",AjaxZip3.nzip="",AjaxZip3.fzip1="",AjaxZip3.fzip2="",AjaxZip3.fpref="",AjaxZip3.addr="",AjaxZip3.fstrt="",AjaxZip3.farea="",AjaxZip3.ffocus=!0,AjaxZip3.onSuccess=null,AjaxZip3.onFailure=null,AjaxZip3.PREFMAP=[null,"åæµ·é","éæ£®ç","å²©æç","å®®åç","ç§ç°ç","å±±å½¢ç","ç¦å³¶ç","è¨åç","æ æ¨ç","ç¾¤é¦¬ç","å¼çç","åèç","æ±äº¬é½","ç¥å¥å·ç","æ°æ½ç","å¯å±±ç","ç³å·ç","ç¦äºç","å±±æ¢¨ç","é·éç","å²éç","éå²¡ç","æç¥ç","ä¸éç","æ»è³ç","äº¬é½åº","å¤§éªåº","åµåº«ç","å¥è¯ç","åæ­å±±ç","é³¥åç","å³¶æ ¹ç","å²¡å±±ç","åºå³¶ç","å±±å£ç","å¾³å³¶ç","é¦å·ç","æåªç","é«ç¥ç","ç¦å²¡ç","ä½è³ç","é·å´ç","çæ¬ç","å¤§åç","å®®å´ç","é¹¿åå³¶ç","æ²ç¸ç"],AjaxZip3.zip2addr=function(e,t,n,i,o,s,a){if(AjaxZip3.fzip1=AjaxZip3.getElementByName(e),AjaxZip3.fzip2=AjaxZip3.getElementByName(t,AjaxZip3.fzip1),AjaxZip3.fpref=AjaxZip3.getElementByName(n,AjaxZip3.fzip1),AjaxZip3.faddr=AjaxZip3.getElementByName(i,AjaxZip3.fzip1),AjaxZip3.fstrt=AjaxZip3.getElementByName(s,AjaxZip3.fzip1),AjaxZip3.farea=AjaxZip3.getElementByName(o,AjaxZip3.fzip1),AjaxZip3.ffocus=void 0===a||a,AjaxZip3.fzip1&&AjaxZip3.fpref&&AjaxZip3.faddr){var r=AjaxZip3.fzip1.value;if(AjaxZip3.fzip2&&AjaxZip3.fzip2.value&&(r+=AjaxZip3.fzip2.value),r){AjaxZip3.nzip="";for(var c=0;c<r.length;c++){var l=r.charCodeAt(c);l<48||57<l||(AjaxZip3.nzip+=r.charAt(c))}if(!(AjaxZip3.nzip.length<7)){var d=AjaxZip3.nzip.substr(0,3),p=AjaxZip3.CACHE[d];if(p)return AjaxZip3.callback(p);AjaxZip3.zipjsonpquery()}}}},AjaxZip3.callback=function(e){function t(){"function"==typeof AjaxZip3.onFailure&&AjaxZip3.onFailure()}var n=e[AjaxZip3.nzip],i=AjaxZip3.nzip-0+4278190080+"";if(!n&&e[i]&&(n=e[i]),n){var o=n[0];if(o){var s=AjaxZip3.PREFMAP[o];if(s){var a=n[1];a=a||"";var r=n[2];r=r||"";var c=n[3];c=c||"";var l=AjaxZip3.faddr,d=a;if("select-one"==AjaxZip3.fpref.type||"select-multiple"==AjaxZip3.fpref.type)for(var p=AjaxZip3.fpref.options,u=0;u<p.length;u++){var g=p[u].value,h=p[u].text;p[u].selected=g==o||g==s||h==s}else AjaxZip3.fpref.name==AjaxZip3.faddr.name?d=s+d:AjaxZip3.fpref.value=s;if(AjaxZip3.farea?(l=AjaxZip3.farea,AjaxZip3.farea.value=r):d+=r,AjaxZip3.fstrt&&(l=AjaxZip3.fstrt,AjaxZip3.faddr.name==AjaxZip3.fstrt.name?d+=c:c&&(AjaxZip3.fstrt.value=c)),AjaxZip3.faddr.value=d,"function"==typeof AjaxZip3.onSuccess&&AjaxZip3.onSuccess(),AjaxZip3.ffocus&&l&&l.value){var m=l.value.length;if(l.focus(),l.createTextRange){var f=l.createTextRange();f.move("character",m),f.select()}else l.setSelectionRange&&l.setSelectionRange(m,m)}}else t()}else t()}else t()},AjaxZip3.getResponseText=function(e){var t=e.responseText;if(-1<navigator.appVersion.indexOf("KHTML")){var n=escape(t);n.indexOf("%u")<0&&-1<n.indexOf("%")&&(t=decodeURIComponent(n))}return t},AjaxZip3.getElementByName=function(e,t){if("string"==typeof e){var n=document.getElementsByName(e);if(!n)return null;if(!(1<n.length&&t&&t.form))return n[0];for(var i=t.form.elements,o=0;o<i.length;o++)if(i[o].name==e)return i[o]}return e},AjaxZip3.zipjsonpquery=function(){var e=AjaxZip3.JSONDATA+"/"+AjaxZip3.nzip.substr(0,3)+".js",t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("charset","UTF-8"),t.setAttribute("src",e),document.getElementsByTagName("head").item(0).appendChild(t)},function(x){x.fn.autoKana=function(e,t,n){var i,o,s,a,r,c,l=x.extend({katakana:!1,hankakuKatakana:!1},n),d=new RegExp("[^ ããã-ãã¼]","g"),p=new RegExp("[ãããããã£ããã]","g"),u=!1,g=null,h=!0;function m(){var e,t;if(""==(e=i.val())&&""!=o.val())v(),f();else{if(e=function(e){{if(-1!==e.indexOf(r))return e.replace(r,"");var t,n,i;for(n=r.split(""),i=e.split(""),t=0;t<n.length;t++)n[t]==i[t]&&(i[t]="");return i.join("")}}(e),s==e)return;s=e,h||(function(e){if(!h)if(1<Math.abs(a.length-e.length)){var t=e.join("").replace(p,"").split("");1<Math.abs(a.length-t.length)&&y()}else a.length==s.length&&a.join("")!=s&&s.match(d)&&y()}(t=e.replace(d,"").split("")),f(t))}}function f(e){if(!h&&(e&&(a=e),u)){var t=function(e){{if(l.katakana||l.hankakuKatakana){var t,n,i;for(i=new String,n=0;n<e.length;n++)t=e.charCodeAt(n),i+=12353<=(o=t)&&o<=12435||12445==o||12446==o?String.fromCharCode(t+96):e.charAt(n);return l.hankakuKatakana&&(i=function(e){var t={"ã¬":"ï½¶ï¾","ã®":"ï½·ï¾","ã°":"ï½¸ï¾","ã²":"ï½¹ï¾","ã´":"ï½ºï¾","ã¶":"ï½»ï¾","ã¸":"ï½¼ï¾","ãº":"ï½½ï¾","ã¼":"ï½¾ï¾","ã¾":"ï½¿ï¾","ã":"ï¾ï¾","ã":"ï¾ï¾","ã":"ï¾ï¾","ã":"ï¾ï¾","ã":"ï¾ï¾","ã":"ï¾ï¾","ã":"ï¾ï¾","ã":"ï¾ï¾","ã":"ï¾ï¾","ã":"ï¾ï¾","ã":"ï¾ï¾","ã":"ï¾ï¾","ã":"ï¾ï¾","ã":"ï¾ï¾","ã":"ï¾ï¾","ã´":"ï½³ï¾","ã·":"ï¾ï¾","ãº":"ï½¦ï¾","ã¢":"ï½±","ã¤":"ï½²","ã¦":"ï½³","ã¨":"ï½´","ãª":"ï½µ","ã«":"ï½¶","ã­":"ï½·","ã¯":"ï½¸","ã±":"ï½¹","ã³":"ï½º","ãµ":"ï½»","ã·":"ï½¼","ã¹":"ï½½","ã»":"ï½¾","ã½":"ï½¿","ã¿":"ï¾","ã":"ï¾","ã":"ï¾","ã":"ï¾","ã":"ï¾","ã":"ï¾","ã":"ï¾","ã":"ï¾","ã":"ï¾","ã":"ï¾","ã":"ï¾","ã":"ï¾","ã":"ï¾","ã":"ï¾","ã":"ï¾","ã":"ï¾","ã":"ï¾","ã ":"ï¾","ã¡":"ï¾","ã¢":"ï¾","ã¤":"ï¾","ã¦":"ï¾","ã¨":"ï¾","ã©":"ï¾","ãª":"ï¾","ã«":"ï¾","ã¬":"ï¾","ã­":"ï¾","ã¯":"ï¾","ã²":"ï½¦","ã³":"ï¾","ã¡":"ï½§","ã£":"ï½¨","ã¥":"ï½©","ã§":"ï½ª","ã©":"ï½«","ã":"ï½¯","ã£":"ï½¬","ã¥":"ï½­","ã§":"ï½®","ã":"ï½¡","ã":"ï½¤","ã¼":"ï½°","ã":"ï½¢","ã":"ï½£","ã»":"ï½¥"},n=new RegExp("("+Object.keys(t).join("|")+")","g");return e.replace(n,function(e){return t[e]}).replace(/ã/g,"ï¾").replace(/ã/g,"ï¾")}(i)),i}return e}var o}(c+a.join(""));o.val(t).change()}}function v(){h=!1,s=r=c="",a=[]}function b(){c=o.val(),h=!1,r=i.val()}function y(){c+=a.join(""),h=!0,a=[]}i=x(e),o=x(t),u=!0,v(),i.blur(function(e){clearInterval(g)}),i.focus(function(e){b(),g=setInterval(m,30)}),i.keydown(function(e){h&&b()})}}(sincloJquery),function(){var i=function(e,t){var n=this;i.count=(i.count||0)+1,this.count=i.count,this.isOpened=!1,this.input=a(e),this.input.setAttribute("autocomplete","off"),this.input.setAttribute("aria-expanded","false"),this.input.setAttribute("aria-owns","awesomplete_list_"+this.count),this.input.setAttribute("role","combobox"),this.options=t=t||{},function(e,t,n){for(var i in t){var o=t[i],s=e.input.getAttribute("data-"+i.toLowerCase());"number"==typeof o?e[i]=parseInt(s):!1===o?e[i]=null!==s:o instanceof Function?e[i]=null:e[i]=s,e[i]||0===e[i]||(e[i]=i in n?n[i]:o)}}(this,{minChars:2,maxItems:10,autoFirst:!1,data:i.DATA,filter:i.FILTER_CONTAINS,sort:!1!==t.sort&&i.SORT_BYLENGTH,container:i.CONTAINER,item:i.ITEM,replace:i.REPLACE,tabSelect:!1},t),this.index=-1,this.container=this.container(e),this.ul=a.create("ul",{hidden:"hidden",role:"listbox",id:"awesomplete_list_"+this.count,inside:this.container}),this.status=a.create("span",{className:"visually-hidden",role:"status","aria-live":"assertive","aria-atomic":!0,inside:this.container,textContent:0!=this.minChars?"Type "+this.minChars+" or more characters for results.":"Begin typing for results."}),this._events={input:{input:this.evaluate.bind(this),blur:this.close.bind(this,{reason:"blur"}),keydown:function(e){var t=e.keyCode;n.opened&&(13===t&&n.selected?(e.preventDefault(),n.select(void 0,void 0,e)):9===t&&n.selected&&n.tabSelect?n.select(void 0,void 0,e):27===t?n.close({reason:"esc"}):38!==t&&40!==t||(e.preventDefault(),n[38===t?"previous":"next"]()))}},form:{submit:this.close.bind(this,{reason:"submit"})},ul:{mousedown:function(e){e.preventDefault()},click:function(e){var t=e.target;if(t!==this){for(;t&&!/li/i.test(t.nodeName);)t=t.parentNode;t&&0===e.button&&(e.preventDefault(),n.select(t,e.target,e))}}}},a.bind(this.input,this._events.input),a.bind(this.input.form,this._events.form),a.bind(this.ul,this._events.ul),this.input.hasAttribute("list")?(this.list="#"+this.input.getAttribute("list"),this.input.removeAttribute("list")):this.list=this.input.getAttribute("data-list")||t.list||[],i.all.push(this)};function t(e){var t=Array.isArray(e)?{label:e[0],value:e[1]}:"object"==typeof e&&"label"in e&&"value"in e?e:{label:e,value:e};this.label=t.label||t.value,this.value=t.value}i.prototype={set list(e){if(Array.isArray(e))this._list=e;else if("string"==typeof e&&-1<e.indexOf(","))this._list=e.split(/\s*,\s*/);else if((e=a(e))&&e.children){var o=[];n.apply(e.children).forEach(function(e){if(!e.disabled){var t=e.textContent.trim(),n=e.value||t,i=e.label||t;""!==n&&o.push({label:i,value:n})}}),this._list=o}document.activeElement===this.input&&this.evaluate()},get selected(){return-1<this.index},get opened(){return this.isOpened},close:function(e){this.opened&&(this.input.setAttribute("aria-expanded","false"),this.ul.setAttribute("hidden",""),this.isOpened=!1,this.index=-1,this.status.setAttribute("hidden",""),a.fire(this.input,"awesomplete-close",e||{}))},open:function(){this.input.setAttribute("aria-expanded","true"),this.ul.removeAttribute("hidden"),this.isOpened=!0,this.status.removeAttribute("hidden"),this.autoFirst&&-1===this.index&&this.goto(0),a.fire(this.input,"awesomplete-open")},destroy:function(){if(a.unbind(this.input,this._events.input),a.unbind(this.input.form,this._events.form),!this.options.container){var e=this.container.parentNode;e.insertBefore(this.input,this.container),e.removeChild(this.container)}this.input.removeAttribute("autocomplete"),this.input.removeAttribute("aria-autocomplete");var t=i.all.indexOf(this);-1!==t&&i.all.splice(t,1)},next:function(){var e=this.ul.children.length;this.goto(this.index<e-1?this.index+1:e?0:-1)},previous:function(){var e=this.ul.children.length,t=this.index-1;this.goto(this.selected&&-1!=t?t:e-1)},goto:function(e){var t=this.ul.children;this.selected&&t[this.index].setAttribute("aria-selected","false"),-1<(this.index=e)&&0<t.length&&(t[e].setAttribute("aria-selected","true"),this.status.textContent=t[e].textContent+", list item "+(e+1)+" of "+t.length,this.input.setAttribute("aria-activedescendant",this.ul.id+"_item_"+this.index),this.ul.scrollTop=t[e].offsetTop-this.ul.clientHeight+t[e].clientHeight,a.fire(this.input,"awesomplete-highlight",{text:this.suggestions[this.index]}))},select:function(e,t,n){if(e?this.index=a.siblingIndex(e):e=this.ul.children[this.index],e){var i=this.suggestions[this.index];a.fire(this.input,"awesomplete-select",{text:i,origin:t||e,originalEvent:n})&&(this.replace(i),this.close({reason:"select"}),a.fire(this.input,"awesomplete-selectcomplete",{text:i,originalEvent:n}))}},evaluate:function(){var n=this,i=this.input.value;i.length>=this.minChars&&this._list&&0<this._list.length?(this.index=-1,this.ul.innerHTML="",this.suggestions=this._list.map(function(e){return new t(n.data(e,i))}).filter(function(e){return n.filter(e,i)}),!1!==this.sort&&(this.suggestions=this.suggestions.sort(this.sort)),this.suggestions=this.suggestions.slice(0,this.maxItems),this.suggestions.forEach(function(e,t){n.ul.appendChild(n.item(e,i,t))}),0===this.ul.children.length?(this.status.textContent="No results found",this.close({reason:"nomatches"})):(this.open(),this.status.textContent=this.ul.children.length+" results found")):(this.close({reason:"nomatches"}),this.status.textContent="No results found")}},i.all=[],i.FILTER_CONTAINS=function(e,t){return RegExp(a.regExpEscape(t.trim()),"i").test(e)},i.FILTER_STARTSWITH=function(e,t){return RegExp("^"+a.regExpEscape(t.trim()),"i").test(e)},i.SORT_BYLENGTH=function(e,t){return e.length!==t.length?e.length-t.length:e<t?-1:1},i.CONTAINER=function(e){return a.create("div",{className:"awesomplete",around:e})},i.ITEM=function(e,t,n){var i=""===t.trim()?e:e.replace(RegExp(a.regExpEscape(t.trim()),"gi"),"<mark>$&</mark>");return a.create("li",{innerHTML:i,role:"option","aria-selected":"false",id:"awesomplete_list_"+this.count+"_item_"+n})},i.REPLACE=function(e){this.input.value=e.value},i.DATA=function(e){return e},Object.defineProperty(t.prototype=Object.create(String.prototype),"length",{get:function(){return this.label.length}}),t.prototype.toString=t.prototype.valueOf=function(){return""+this.label};var n=Array.prototype.slice;function a(e,t){return"string"==typeof e?(t||document).querySelector(e):e||null}function e(e,t){return n.call((t||document).querySelectorAll(e))}function o(){e("input.awesomplete").forEach(function(e){new i(e)})}a.create=function(e,t){var n=document.createElement(e);for(var i in t){var o=t[i];if("inside"===i)a(o).appendChild(n);else if("around"===i){var s=a(o);s.parentNode.insertBefore(n,s),n.appendChild(s),null!=s.getAttribute("autofocus")&&s.focus()}else i in n?n[i]=o:n.setAttribute(i,o)}return n},a.bind=function(t,e){if(t)for(var n in e){var i=e[n];n.split(/\s+/).forEach(function(e){t.addEventListener(e,i)})}},a.unbind=function(t,e){if(t)for(var n in e){var i=e[n];n.split(/\s+/).forEach(function(e){t.removeEventListener(e,i)})}},a.fire=function(e,t,n){var i=document.createEvent("HTMLEvents");for(var o in i.initEvent(t,!0,!0),n)i[o]=n[o];return e.dispatchEvent(i)},a.regExpEscape=function(e){return e.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")},a.siblingIndex=function(e){for(var t=0;e=e.previousElementSibling;t++);return t},"undefined"!=typeof self&&(self.Awesomplete=i),"undefined"!=typeof Document&&("loading"!==document.readyState?o():document.addEventListener("DOMContentLoaded",o)),i.$=a,i.$$=e,"object"==typeof module&&module.exports&&(module.exports=i)}();var socket,cnst,common=sincloJquery.extend({},common),sinclo_storage,scl_check,userInfo,browserInfo,syncEvent,popup,vcPopup,uploadFileSelectorModal,sinclo,sincloVideo,preventWithdrawalOverlay,operationUtil,sinclo_client_log=new Client_log;function f_url(e){var t=e.search(/(\?|&)?sincloData=/);return t<0?browserInfo.href:e.substr(0,t)}function emit(e,t,n){var i=sincloJquery.Deferred();return socket.isConnected()?(t.siteKey=sincloInfo.site.key,t.msgId=common.createUUID(),scl_check.isset(userInfo.sendTabId)&&(t.to=userInfo.sendTabId),"customerInfo"!==e&&"sendAccessInfo"!==e||(t.accessId=userInfo.accessId,t.userIdType=userInfo.userIdType,t.userId=userInfo.userId,t.status=browserInfo.getActiveWindow(),t.sincloSessionId=userInfo.sincloSessionId),"connected"!==e&&"getChatMessage"!==e||(t.token=common.token,t.userIdType=userInfo.userIdType,t.userId=userInfo.userId),"connectSuccess"===e&&(t.widget=window.sincloInfo.widgetDisplay,t.accessId=userInfo.accessId,t.customerInfo=userInfo.customerInfo,t.customerInfoSettings=userInfo.customerInfoSettings),"customerInfo"!==e&&"sendAccessInfo"!==e||(t.contract=window.sincloInfo.contract),"syncReady"!==e&&"connectSuccess"!==e&&"customerInfo"!==e&&"sendAccessInfo"!==e||(t.subWindow=!1,!scl_check.isset(sinclo_storage.s.get("params"))&&userInfo.accessType!==cnst.access_type.host||(t.responderId=common.params.responderId,t.subWindow=!0)),"syncReady"!==e&&"connectSuccess"!==e&&"sendAccessInfo"!==e&&"customerInfo"!==e||(t.title=common.title()),"connectSuccess"!==e&&"sendWindowInfo"!==e&&"sendAutoChat"!==e&&"sendChat"!==e&&"storeScenarioMessage"!==e&&"saveCustomerInfoValue"!==e&&"beginBulkHearing"!==e&&"sendParseSignature"!==e&&"hideScenarioMessages"!==e&&"storeDiagramMessage"!==e&&"hideReservationMessages"!==e&&"chatReset"!==e||(t.userIdType=userInfo.userIdType,t.userId=userInfo.userId),"connectSuccess"!==e&&"sendWindowInfo"!==e&&"sendAutoChatMessages"!==e&&"getChatMessage"!==e&&"sendChat"!==e&&"sendAutoChatMessage"!==e||(t.chat=null),"syncBrowserInfo"!==e&&"syncChangeEv"!==e&&"requestSyncStop"!==e&&"requestSyncStart"!==e&&"connectContinue"!==e&&"sendConfirmConnect"!==e||(t.accessType=userInfo.accessType),"syncReady"!==e&&"connectSuccess"!==e&&"reqUrlChecker"!==e&&"customerInfo"!==e&&"requestSyncStart"!==e&&"connectContinue"!==e&&"sendAccessInfo"!==e&&"sendWindowInfo"!==e||(t.url=f_url(browserInfo.href)),"syncReady"!==e&&"connectSuccess"!==e&&"requestSyncStop"!==e&&"customerInfo"!==e&&"sendTabInfo"!==e&&"requestSyncStart"!==e&&"connectContinue"!==e&&"sendAccessInfo"!==e&&"sendConfirmConnect"!==e||(t.connectToken=userInfo.get(cnst.info_type.connect)),"sendWindowInfo"!=e&&"requestSyncStopForSubmit"!=e&&"startSyncToFrame"!=e||(t.connectToken=userInfo.connectToken),"requestSyncStop"==e&&userInfo.accessType===cnst.access_type.host&&(t.type=3),"requestSyncStop"==e&&userInfo.accessType===cnst.access_type.guest&&(t.type=4),"requestSyncStopForSubmit"===e?(t.tabId=userInfo.tabId,socket.emit(e,JSON.stringify(t))):""!==userInfo.tabId&&(t.tabId=userInfo.tabId,t.sincloSessionId=userInfo.sincloSessionId,socket.emit(e,JSON.stringify(t),n)),i.resolve(),i.promise()):(i.resolve(),i.promise())}function now(){var e=new Date;return"ã"+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+"ã"}function sclLink(e,t,n,i){i&&(i.preventDefault(),i.stopPropagation()),"clickMail"===n?e.match(/mailto\s*:/)&&(e=e.replace(/mailto\s*:/g,"")):"clickTelno"===n?e.match(/tel/)&&(e=e.replace(/tel\s*:/g,"")):"clickLink"===n&&scl_check.smartphone()&&sinclo.operatorInfo.ev(),t="<a "+t.replace(/\$nbsp;/g," ")+">"+e.replace(/\$nbsp;/g," ")+"</a>";var o=sinclo.chatApi;o.link=t,o.siteKey=sincloInfo.site.key,o.tabId=userInfo.tabId,o.sincloSessionId=userInfo.sincloSessionId,o.userIdType=userInfo.userIdType,o.userId=userInfo.userId;var s=i.currentTarget;scl_check.isset(sinclo_storage.s.get("requestFlg"))&&"false"!==sinclo_storage.s.get("requestFlg")?o.messageRequestFlg=0:(o.messageRequestFlg=1,sinclo_storage.s.set("requestFlg",!0)),common.hasGA()&&("clickLink"===n||(t=common.stringReplaceProcessForGA(t)),common.callGA(n,t,1)),socket&&!socket.isConnected()?socket.connect().then(function(){return sinclo.executeConnectSuccess(window.userInfo.connectSuccessData,window.userInfo.accessInfoData)}).then(sinclo.setHistoryId).then(function(){socket.emit("link",o),setTimeout(function(){0<=s.target.indexOf("_blank")?window.open(s.href):window.location.href=s.href},10)}):(socket.emit("link",o),setTimeout(function(){0<=s.target.indexOf("_blank")?window.open(s.href):window.location.href=s.href},10))}navigator.userAgentData&&navigator.userAgentData.getHighEntropyValues&&navigator.userAgentData.getHighEntropyValues(["platformVersion"]).then(function(e){if("Windows"===navigator.userAgentData.platform){var t=e.platformVersion.split(".")[0];13<=parseInt(t)&&(userInfo=Object.assign(userInfo,{newUserAgent:window.navigator.userAgent+" isWin11"}))}}).catch(function(e){}),function(jquery){"use strict";var $=jquery;cnst={access_type:{guest:1,host:2},tab_type:{open:1,close:2,none:3,disable:4},info_type:{user:1,access:2,ip:3,time:4,page:5,referrer:6,connect:7,tab:8,prev:9,staycount:10,gFrame:11,sendTabId:12,parentId:13,sincloSessionId:14,oldUserId:15},sync_type:{inner:1,outer:2},prefix:"_scl_"};var WSConnector=function(){var e={port:9090,reconnectionAttempts:5,rememberTransport:!1,autoConnect:!1,transports:["websocket"]};"5d6503bd31bf7"!==sincloInfo.site.key&&"5dd23b6ce231d"!==sincloInfo.site.key||(e.transports=["polling","websocket"]),this.connector=io.connect(sincloInfo.site.socket,e),this.getId=function(){return this.connector.id},this.connect=function(){var e=$.Deferred(),t=this;return this.isConnected()?(t.onceConnected(),e.resolve()):(this.connector.connect(),this.connector.once("connect",function(){t.isOnceConnected()||common.tabMessenger.notifyWSConnect(),t.onceConnected(),common.tabMessenger.isSubscribeConnecting?(common.tabMessenger.notifyConnectComplete(),e.resolve()):common.tabMessenger.waitAnotherTabConnecting().then(function(){e.resolve()})})),e.promise()},this.isOnceConnected=function(){var e=sinclo_storage.l.get("scl_w_connected");return e&&"true"===e},this.onceConnected=function(){sinclo_storage.l.set("scl_w_connected",!0)},this.clearOnceConnectedFlg=function(){sinclo_storage.l.unset("scl_w_connected")},this.on=function(e,t){this.connector.on(e,t)},this.once=function(e,t){this.connector.once(e,t)},this.emit=function(e,t,n){this.connector.emit(e,t,n)},this.close=function(){this.connector.close()},this.disconnect=function(){this.connector.disconnect()},this.isConnected=function(){return this.connector.connected},this.disconnected=function(){return this.connector.disconnected},this.isActive=function(){return this.isOnceConnected()&&this.isConnected()}},TabMessenger=function(){var o=null,s=null,a=null;this.notifyConnecting=!1,this.isSubscribeConnecting=!1;function e(e){if(-1!==e.key.indexOf("scl_t_msg")&&scl_check.isset(e.newValue)){var t=JSON.parse(e.newValue);t.m.ts===s&&t.m.t===userInfo.getTabId()&&"pi"===t.t.substr(0,2)||t.m.ts===a&&t.m.t===userInfo.getTabId()&&"po"===t.t.substr(0,2)||!scl_check.isset(t)||t.m.t===userInfo.getTabId()&&"pi"!==t.t.substr(0,2)&&"po"!==t.t.substr(0,2)||(0<=t.t.substr(0,2).indexOf("pi")?common.tabMessenger.pong():0<=t.t.substr(0,2).indexOf("po")?(n(),$(document).trigger("sinclo:pongReceived")):"ns"===t.t?(common.tabMessenger.notifyConnecting=!0,$(document).trigger("sinclo:notifyWSConnect")):"cc"===t.t?$(document).trigger("sinclo:connectionComplete"):"nrc"===t.t&&(operationUtil.destroyWidget(),common.wait(common.randomNumber(6e3,9e3)).then(function(){operationUtil.doFirstOnAnotherTab()})))}}var n=function(){o&&(clearTimeout(o),o=null)};this.subscribe=function(){window.addEventListener("storage",e)},this.unsubscribe=function(){window.removeEventListener("storage",e)},this.ping=function(){var t=$.Deferred(),n=this,e=scl_check.isIE()?750:50;o=setTimeout(function(){a=s=null,t.reject("timeout")},e),$(document).one("sinclo:pongReceived",function(e){n.pongReceived=!0,scl_check.objPath(sincloInfo,"custom.allowUniqueActiveTag")&&sincloInfo.custom.allowUniqueActiveTag&&n.unsubscribe(),t.resolve("pong")}),s=(new Date).getTime()+common.makeToken();var i="pi"+common.makeToken();return this.publish(i,{v:1,t:userInfo.getTabId(),ts:s}),t.promise()},this.waitAnotherTabConnecting=function(){var t=$.Deferred(),e=scl_check.isIE()?750:500,n=setTimeout(function(){t.resolve()},e);return $(document).one("sinclo:connectionComplete",function(e){clearTimeout(n),t.resolve()}),t.promise()},this.pong=function(){a=(new Date).getTime()+common.makeToken();var e="po"+common.makeToken();this.publish(e,{v:1,t:userInfo.getTabId(),ts:a})},this.notifyWSConnect=function(){common.tabMessenger.notifyConnecting=!0,this.publish("ns",{v:1,t:userInfo.getTabId()})},this.notifyConnectComplete=function(){this.publish("cc",{v:1,t:userInfo.getTabId()})},this.notifyResetChat=function(){this.publish("nrc",{v:1,t:userInfo.getTabId()})},this.isNotifyConnecting=function(){return common.tabMessenger.notifyConnecting},this.subscribeWSConnect=function(e){$(document).on("sinclo:notifyWSConnect",e)},this.clearFlg=function(){common.tabMessenger.notifyConnecting=!1},this.publish=function(e,t){var n="scl_t_msg"+common.makeToken();sinclo_storage.l.set(n,JSON.stringify({t:e,m:t})),setTimeout(function(){sinclo_storage.l.unset(n)},50)}};operationUtil={doFirst:function(){sinclo.operatorInfo.toggle(),socket.disconnect(),operationUtil.destroyWidget();sinclo_storage.s.get("amsg");operationUtil.clearTriggerFlag(),operationUtil.clearAllSessionStorageData(),operationUtil.clearMustLocalStorageData(),operationUtil.clearSessionData(),operationUtil.initalizeUserInfoData(),operationUtil.initializeChatApiData(),init(),scl_check.isset(common.tabMessenger)&&common.tabMessenger.notifyResetChat()},doFirstOnAnotherTab:function(){operationUtil.clearAllSessionStorageData(),operationUtil.initalizeUserInfoData(),operationUtil.initializeChatApiData(),init()},destroyWidget:function(){common.chatBotTypingTimerClear();var e=document.getElementById("sincloBox");e&&(common.widgetHandler.hide(),window.sincloInfo.contract.chat&&document.getElementsByTagName("sinclo-chat")[0]&&sinclo.chatApi.clearChatMessages(),e.parentNode.removeChild(e),common.firstTimeChatBotTyping=!0,common.tabMessenger.unsubscribe())},clearAllSessionStorageData:function(){["_scl_d_msg","bannerAct","callingMessageSecond","chatAct","chatEmit","closeAct","closeActFocusPage","connectToken","cv_unique_id","forNotHavingConnectionMessageStack","gFrame","initialNotification","inactiveTimeout","callingMessageSecond","nextNodeKey","notificationTime","mannedRequestFlg","operatorEntered","params","parentId","preWidgetOpened","preventWidgetShown","requestFlg","autoChatFlg","sendTabId","sorryMessageFlg","tabId","triggeredAutoSpeech","prevList","preWidgetOpened","vcInfo","Waiting_on_IE","widgetMaximized","widgetShown","widgetShowTimingType"].forEach(function(e,t,n){sinclo_storage.s.unset(e)})},clearMustLocalStorageData:function(){["scl_w_connected","bannerAct","textareaOpend","bannerAct","closeAct","widgetOpen","widgetMaximized","_scl_history_id","_scl_stay_logs_id","leaveFlg","amsg","currentChatOperator","answeringChatIdList","operatorIconList","s_currentdata","scl_d_currentdata","scl_tmp_msg"].forEach(function(e,t,n){sinclo_storage.l.unset(e)})},clearSessionData:function(){sinclo_storage.c.set("sincloSessionId","")},clearTriggerFlag:function(){sinclo.trigger.triggerIds={},sinclo.trigger.orTriggeredId=[]},initalizeUserInfoData:function(){userInfo.accessType=cnst.access_type.guest,userInfo.connectToken="",userInfo.tabId=null,userInfo.sincloSessionId=null,userInfo.userId=null,userInfo.userIdType=1,userInfo.accessId=null,userInfo.ipAddress=null,userInfo.pageTime=null,userInfo.gFrame=!1,userInfo.firstConnection=!1,userInfo.processReconnect=!1,userInfo.searchKeyword=null,userInfo.userAgent=window.navigator.userAgent,userInfo.customVariables={},userInfo.customerInfo={},userInfo.customerInfoSettings={},userInfo.accessInfoData={},userInfo.connectSuccessData={},userInfo.reAccess=!1,userInfo.noResetStrage=!1},initializeChatApiData:function(){sinclo.chatApi.saveFlg=!1,sinclo.chatApi.spFocusFlg=!1,sinclo.chatApi.online=!1,sinclo.chatApi.historyId=null,sinclo.chatApi.stayLogsId=null,sinclo.chatApi.unread=0,sinclo.chatApi.opUser="",sinclo.chatApi.opUserName="",sinclo.chatApi.continueClickThresholdMSec=5e3,sinclo.chatApi.bodyPosition="",sinclo.chatApi.bodyScrollPosition=0},_triggerCustomEventOnDocument:function(e){if(document.createEvent){(t=document.createEvent("HTMLEvents")).initEvent(e,!0,!0),document.dispatchEvent(t)}else{var t=document.createEventObject();document.fireEvent(e,t)}}},common=$.extend(common,{n:20,str:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",token:null,cursorTag:null,params:{},tmpParams:{},vcInfo:{},tabMessenger:new TabMessenger,getParams:function(){var e,t=location.href.split("?");void 0!==t[1]&&t[1].match(/sincloData/)&&(e=t[1].split("sincloData="))[1]&&(this.tmpParams=JSON.parse(decodeURIComponent(e[1])))},fullDateTime:function(e){function t(e){return("0"+e).slice(-2)}var n=scl_check.isset(e)?new Date(Number(e)):new Date;return n.getFullYear()+"-"+t(n.getMonth()+1)+"-"+t(n.getDate())+" "+t(n.getHours())+":"+t(n.getMinutes())+":"+t(n.getSeconds())+"."+Number(String(n.getMilliseconds()).slice(0,2))},formatDateParse:function(e){function t(e){return("0"+e).slice(-2)}var n=scl_check.isset(e)?new Date(Number(e)):new Date;return n.getFullYear()+"/"+t(n.getMonth()+1)+"/"+t(n.getDate())+" "+t(n.getHours())+":"+t(n.getMinutes())+":"+t(n.getSeconds())},saveParams:function(){this.params=this.tmpParams,sinclo_storage.s.set("params",JSON.stringify(this.params))},setParams:function(){this.params=common.jParse(sinclo_storage.s.get("params"))},unsetParams:function(){sinclo_storage.s.unset("params")},saveVcInfo:function(){sinclo_storage.s.set("vcInfo",JSON.stringify(this.vcInfo))},getVcInfo:function(){return JSON.parse(sinclo_storage.s.get("vcInfo"))||void 0},setVcInfo:function(e){this.vcInfo=e},unsetVcInfo:function(){sinclo_storage.s.unset("vcInfo")},title:function(){return document.getElementsByTagName("title")[0]?document.getElementsByTagName("title")[0].text:""},makeToken:function(){for(var e="",t=0;t<this.n;t++)e+=this.str[Math.floor(Math.random()*this.str.length)];return e},randomNumber:function(e,t){return Math.floor(Math.random()*(t+1-e))+e},token_add:function(){return this.token=this.makeToken(),this.token},jParse:function(e){return void 0===e?e:JSON.parse(e)},formatBytes:function(e,t){if(0==e)return"0 Bytes";var n=t||2,i=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,i)).toFixed(n))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][i]},createWidget:function(){(scl_check.hasCustomBannerImageSetting()||scl_check.hasOriginalImageSetting())&&scl_check.smartphone()&&(3===Number(common.getWidgetSettings().spBannerPosition)?common.getWidgetSettings().spBannerPosition=1:4===Number(common.getWidgetSettings().spBannerPosition)&&(common.getWidgetSettings().spBannerPosition=2));var e=common.getWidgetSettings(),t="",n=this.widgetCssTemplate(e),i=this.widgetHeaderTemplate(e),o=this.widgetCallOpTemplate(e),s=this.chatWidgetTemplate(e),a=this.widgetTemplate(e),r='<p id="fotter">Powered by <a target="sinclo" href="https://chat.sinclo.jp/?utm_medium=web-widget&utm_campaign=widget-referral&sinclo_account_key='+sincloInfo.site.key+'">sinclo</a></p>';return scl_check.isset(window.sincloInfo.widget.provideCompanyType)&&1===Number(window.sincloInfo.widget.provideCompanyType)&&(r='<p id="fotter">Powered by <a target="MediaTalk" href="https://mediatalk.medialink-ml.co.jp/?utm_medium=web-widget&utm_campaign=widget-referral&mediatalk_account_key='+sincloInfo.site.key+'">MediaTalk</a></p>'),scl_check.objPath(window.sincloInfo,"custom.widget.hideFotter")&&window.sincloInfo.custom.widget.hideFotter?r="":scl_check.objPath(window.sincloInfo,"custom.widget.changeFotter")&&scl_check.isset(window.sincloInfo.custom.widget.changeFotter)&&(r=window.sincloInfo.custom.widget.changeFotter),window.sincloInfo.contract.chat&&(window.sincloInfo.contract.synclo||window.sincloInfo.contract.hasOwnProperty("document")&&window.sincloInfo.contract.document)&&!scl_check.smartphone()?t+=o+s+a:window.sincloInfo.contract.chat&&(window.sincloInfo.contract.synclo||window.sincloInfo.contract.hasOwnProperty("document")&&window.sincloInfo.contract.document)&&scl_check.smartphone()?t+=o+s:(window.sincloInfo.contract.chat&&(t+=o+s),(window.sincloInfo.contract.synclo||window.sincloInfo.contract.hasOwnProperty("document")&&window.sincloInfo.contract.document)&&(t+=a)),2!==Number(e.closeButtonSetting)||1!==Number(e.closeButtonModeType)&&3!==Number(e.closeButtonModeType)?"<sinclo id='sincloBox' >"+n+"<div id='sincloWidgetBox'>"+i+t+r+"</div></sinclo>":"<sinclo id='sincloBox' >"+n+"<div id='sincloWidgetBox'>"+i+t+r+"</div><div id='sincloBannerBox' style='display: none;'>"+this.sincloBannerTemplate(e)+"</div></sinclo>"},getThinColor:function(e,t){var n,i,o,s=e.substr(1);o=3===s.length?(n=String(s.substr(0,1))+String(s.substr(0,1)),i=String(s.substr(1,1))+String(s.substr(1,1)),String(s.substr(2))+String(s.substr(2))):(n=String(s.substr(0,2)),i=String(s.substr(2,2)),String(s.substr(4)));var a=String(Math.floor(255-(255-parseInt(n,16))*t)),r=String(Math.floor(255-(255-parseInt(i,16))*t)),c=String(Math.floor(255-(255-parseInt(o,16))*t));return("#"+parseInt(a).toString(16)+parseInt(r).toString(16)+parseInt(c).toString(16)).toUpperCase()},getContrastColor:function(e){var t,n,i,o=e.substr(1);i=3===o.length?(t=String(o.substr(0,1))+String(o.substr(0,1)),n=String(o.substr(1,1))+String(o.substr(1,1)),String(o.substr(2))+String(o.substr(2))):(t=String(o.substr(0,2)),n=String(o.substr(2,2)),String(o.substr(4)));var s=String(255-parseInt(t,16)),a=String(255-parseInt(n,16)),r=String(255-parseInt(i,16));return("#"+parseInt(s).toString(16)+parseInt(a).toString(16)+parseInt(r).toString(16)).toUpperCase()},getColorList:function(e){e=common.getWidgetSettings();if(preventWithdrawalOverlay.isActive()&&(e=preventWithdrawalOverlay.makeWidgetSetting(window.sincloInfo.preventWithdrawalSettings.widget)),0===Number(e.colorSettingType)){var t,n,i,o=e.mainColor.substr(1);i=3===o.length?(t=String(o.substr(0,1))+String(o.substr(0,1)),n=String(o.substr(1,1))+String(o.substr(1,1)),String(o.substr(2))+String(o.substr(2))):(t=String(o.substr(0,2)),n=String(o.substr(2,2)),String(o.substr(4)));var s=String(Math.floor(255-.1*(255-parseInt(t,16)))),a=String(Math.floor(255-.1*(255-parseInt(n,16)))),r=String(Math.floor(255-.1*(255-parseInt(i,16)))),c=("#"+parseInt(s).toString(16)+parseInt(a).toString(16)+parseInt(r).toString(16)).toUpperCase(),l={mainColor:e.mainColor,stringColor:e.stringColor,messageTextColor:e.messageTextColor,otherTextColor:e.otherTextColor,widgetBorderColor:e.widgetBorderColor,chatTalkBorderColor:e.chatTalkBorderColor,headerBackgroundColor:"#FFFFFF",subTitleTextColor:e.mainColor,descriptionTextColor:e.otherTextColor,chatTalkBackgroundColor:"#FFFFFF",cNameTextColor:e.mainColor,reTextColor:e.messageTextColor,reBackgroundColor:c,reBorderColor:e.chatTalkBorderColor,reBorderNone:0,seTextColor:e.messageTextColor,seBackgroundColor:"#FFFFFF",seBorderColor:e.chatTalkBorderColor,seBorderNone:0,chatMessageBackgroundColor:"#FFFFFF",messageBoxTextColor:e.otherTextColor,messageBoxBackgroundColor:"#FFFFFF",messageBoxBorderColor:e.chatTalkBorderColor,messageBoxBorderNone:0,chatSendBtnTextColor:e.stringColor,chatSendBtnBackgroundColor:e.mainColor,widgetInsideBorderColor:e.widgetBorderColor,widgetInsideBorderNone:0,widgetBorderNone:0}}else{if(void 0===e.reBorderColor||"none"===e.reBorderColor)var d="#E8E7E0",p=1;else d=e.reBorderColor,p=0;if(void 0===e.seBorderColor||"none"===e.seBorderColor)var u="#E8E7E0",g=1;else u=e.seBorderColor,g=0;if(void 0===e.messageBoxBorderColor||"none"===e.messageBoxBorderColor)var h="#E8E7E0",m=1;else h=e.messageBoxBorderColor,m=0;if(void 0===e.widgetBorderColor||"none"===e.widgetBorderColor)var f=1;else e.widgetBorderColor,f=0;if(void 0===e.widgetInsideBorderColor||"none"===e.widgetInsideBorderColor)var v="#E8E7E0",b=1;else v=e.widgetInsideBorderColor,b=0;l={mainColor:e.mainColor,stringColor:e.stringColor,messageTextColor:e.messageTextColor,otherTextColor:e.otherTextColor,widgetBorderColor:e.widgetBorderColor,chatTalkBorderColor:e.chatTalkBorderColor,headerBackgroundColor:e.headerBackgroundColor,subTitleTextColor:e.subTitleTextColor,descriptionTextColor:e.descriptionTextColor,chatTalkBackgroundColor:e.chatTalkBackgroundColor,cNameTextColor:e.cNameTextColor,reTextColor:e.reTextColor,reBackgroundColor:e.reBackgroundColor,reBorderColor:d,reBorderNone:p,seTextColor:e.seTextColor,seBackgroundColor:e.seBackgroundColor,seBorderColor:u,seBorderNone:g,chatMessageBackgroundColor:e.chatMessageBackgroundColor,messageBoxTextColor:e.messageBoxTextColor,messageBoxBackgroundColor:e.messageBoxBackgroundColor,messageBoxBorderColor:h,messageBoxBorderNone:m,chatSendBtnTextColor:e.chatSendBtnTextColor,chatSendBtnBackgroundColor:e.chatSendBtnBackgroundColor,widgetInsideBorderColor:v,widgetInsideBorderNone:b,widgetBorderNone:f,closeBtnColor:e.closeBtnColor,closeBtnHoverColor:e.closeBtnHoverColor}}return l},getSizeType:function(e){switch(e){case 1:var t={boxHeight:447,boxWidth:285,widgetTitlePadding:7,widgetTitleHeight:32,widgetTitleTop:6,widgetSubTitleHeight:24,widgetDescriptionHeight:15,navigationHeight:55,chatTalkHeight:194,classFlexBoxRowHeight:75,sincloAccessInfoHeight:26.5,fotterHeight:26.5,telContentHeight:125,paddingBottom:30.8,d11font:11,d12font:12,d13font:13,d14font:14,d18font:18,d20font:20,d25font:25};break;case 2:t={boxHeight:540.5,boxWidth:342.5,widgetTitlePadding:7,widgetTitleHeight:32,widgetTitleTop:6,widgetSubTitleHeight:24,widgetDescriptionHeight:15,navigationHeight:55,chatTalkHeight:284,classFlexBoxRowHeight:75,sincloAccessInfoHeight:26.5,fotterHeight:26.5,telContentHeight:214.5,paddingBottom:45.6,d11font:12,d12font:13,d13font:14,d14font:15,d18font:19,d20font:21,d25font:26};break;case 3:t={boxHeight:632,boxWidth:400,widgetTitlePadding:7,widgetTitleHeight:32,widgetTitleTop:6,widgetSubTitleHeight:24,widgetDescriptionHeight:15,navigationHeight:55,chatTalkHeight:374,classFlexBoxRowHeight:75,sincloAccessInfoHeight:26.5,fotterHeight:26.5,telContentHeight:305,paddingBottom:60,d11font:12,d12font:13,d13font:14,d14font:15,d18font:19,d20font:21,d25font:26};break;case 4:t={boxHeight:632,boxWidth:common.getPageWidth(),widgetTitlePadding:7,widgetTitleHeight:32,widgetTitleTop:6,widgetSubTitleHeight:24,widgetDescriptionHeight:15,navigationHeight:55,chatTalkHeight:100,classFlexBoxRowHeight:75,sincloAccessInfoHeight:26.5,fotterHeight:26.5,telContentHeight:305,paddingBottom:60,d11font:12,d12font:13,d13font:14,d14font:15,d18font:19,d20font:21,d25font:26};break;case 5:t={boxHeight:632,boxWidth:common.getWidgetSettings().widgetCustomWidth,widgetTitlePadding:7,widgetTitleHeight:32,widgetTitleTop:6,widgetSubTitleHeight:24,widgetDescriptionHeight:15,navigationHeight:55,chatTalkHeight:common.getWidgetSettings().widgetCustomHeight,classFlexBoxRowHeight:75,sincloAccessInfoHeight:26.5,fotterHeight:26.5,telContentHeight:305,paddingBottom:60,d11font:12,d12font:13,d13font:14,d14font:15,d18font:19,d20font:21,d25font:26};break;default:t={boxHeight:447,boxWidth:285,widgetTitlePadding:7,widgetTitleHeight:32,widgetTitleTop:6,widgetSubTitleHeight:24,widgetDescriptionHeight:15,navigationHeight:55,chatTalkHeight:194,classFlexBoxRowHeight:75,sincloAccessInfoHeight:26.5,fotterHeight:26.5,telContentHeight:125,d11font:11,d12font:12,d13font:13,d14font:14,d18font:18,d20font:20,d25font:25}}return t},getAbridgementType:function(){var e=common.getWidgetSettings(),t=(Number(e.minimizeDesignType),Number(e.spHeaderLightFlg)),n=!1,i=!1,o=!1,s=!1;switch(e.minimizeDesignType){case 1:o=1===t?!(s=n=i=!1):s=n=i=!1;break;case 2:o=1===t?s=!(n=i=!1):!(s=!(n=i=!1));break;case 3:o=1===t?s=!(n=!(i=!0)):!(s=!(n=!(i=!0)));break;default:o=1===t?!(s=n=i=!1):s=n=i=!1}var a={pcMinRes:i,pcMaxRes:n,spMinRes:s,spMaxRes:o};if(scl_check.smartphone())if(common.isPortrait())var r=a.spMinRes,c=a.spMaxRes;else r=!0,c=!0;else r=a.pcMinRes,c=a.pcMaxRes;return{MinRes:r,MaxRes:c}},_headerContentsSettings:{_processSettings:function(){scl_check.smartphone()&&($("#widgetTitle").addClass("spview"),$("#widgetSubTitle").addClass("spview"),$("#widgetDescription").addClass("spview"));var e=common.getWidgetSettings().widget_title_top_type,t=common.getWidgetSettings().widget_title_name_type,n=common.getWidgetSettings().widget_title_explain_type;this._deciedPosition("#widgetTitle",Number(e)),this._deciedPosition("#widgetSubTitle",Number(t)),this._deciedPosition("#widgetDescription",Number(n)),this._setContentsView(Number(this._countContents()))},_deciedPosition:function(e,t){1===t?$(e).addClass("leftPosition"):2===t&&$(e).addClass("centerPosition")},_countContents:function(){return 1===Number(common.getWidgetSettings().showDescription)&&1===Number(common.getWidgetSettings().showSubtitle)?2:1===Number(common.getWidgetSettings().showDescription)||1===Number(common.getWidgetSettings().showSubtitle)?($("#widgetSubTitle").addClass("oneContent"),$("#widgetDescription").addClass("oneContent"),1):($("#widgetSubTitle").addClass("noContent"),$("#widgetDescription").addClass("noContent"),0)},_setContentsView:function(e){if(1===e){if(2===Number(common.getWidgetSettings().showDescription))return $("#widgetDescription").hide(),void $("#widgetDescription").remove();if(2===Number(common.getWidgetSettings().showSubtitle))return $("#widgetSubTitle").hide(),void $("#widgetSubTitle").remove()}}},indicateSimpleNoImage:function(){$("#widgetTitle").addClass("noImage"),$("#widgetSubTitle").addClass("noImage"),$("#widgetDescription").addClass("noImage"),common._headerContentsSettings._processSettings()},indicateSimpleImage:function(){common._headerContentsSettings._processSettings()},abridgementTypeShow:function(){$("#mainImage").show(),$("#widgetSubTitle").show(),$("#widgetDescription").show(),$("#widgetTitle").removeClass("noImage"),$("#widgetSubTitle").removeClass("noImage"),$("#widgetDescription").removeClass("noImage"),scl_check.smartphone()?common.isPortrait()?$("#sincloBox p#widgetTitle").hasClass("notSimple")||$("#sincloBox p#widgetTitle").addClass("notSimple"):$("#widgetTitle").css("text-align","center"):$("#sincloBox p#widgetTitle").hasClass("notSimple")||$("#sincloBox p#widgetTitle").addClass("notSimple"),2!==Number(common.getWidgetSettings().showMainImage)&&""!==common.getWidgetSettings().mainImage||$("#sincloBox p#widgetTitle").addClass("noImage")},abridgementTypehide:function(){$("#mainImage").hide(),$("#widgetSubTitle").hide(),$("#widgetDescription").hide(),scl_check.smartphone()?common.isPortrait()?$("#sincloBox p#widgetTitle").hasClass("notSimple")&&$("#sincloBox p#widgetTitle").removeClass("notSimple"):$("#widgetTitle").css("text-align","center"):$("#sincloBox p#widgetTitle").hasClass("notSimple")&&$("#sincloBox p#widgetTitle").removeClass("notSimple"),2!==Number(common.getWidgetSettings().showMainImage)&&""!==common.getWidgetSettings().mainImage||$("#sincloBox p#widgetTitle").addClass("noImage")},whenMaximizedBtnShow:function(){preventWithdrawalOverlay.isActive()?($("#fw-minimize-btn").hide(),$("#fw-close-btn").show()):($("#fw-minimize-btn").show(),$("#fw-close-btn").hide())},whenMinimizedBtnShow:function(){var e=common.getWidgetSettings();if(1===Number(e.closeButtonSetting))$("#fw-minimize-btn").hide(),$("#fw-close-btn").hide();else if(preventWithdrawalOverlay.isActive())$("#fw-minimize-btn").hide(),$("#fw-close-btn").show();else{$("#fw-minimize-btn").hide(),scl_check.smartphone()?common.isPortrait()?$("#fw-close-btn").show():$("#fw-close-btn").hide():$("#fw-close-btn").show()}},toRGBCode:function(e){if(0<=e.indexOf("#")){var t,n,i,o=e.substr(1);return i=3===o.length?(t=String(o.substr(0,1))+String(o.substr(0,1)),n=String(o.substr(1,1))+String(o.substr(1,1)),String(o.substr(2))+String(o.substr(2))):(t=String(o.substr(0,2)),n=String(o.substr(2,2)),String(o.substr(4))),"rgb("+parseInt(t,16)+", "+parseInt(n,16)+", "+parseInt(i,16)+")"}},defaultOrientation:!0,isPortrait:function(){var e=window.orientation%180==0;return e&&common.defaultOrientation||!(e||common.defaultOrientation)},widgetCssTemplate:function(e){var t="#333333",n=this.getSizeType(e.widgetSizeType),i=this.getColorList(e),o="",s=e.mainColor;s=e.mainColor,e.mainColor;if(0<=s.indexOf("#")){var a,r,c,l=s.substr(1);c=3===l.length?(a=String(l.substr(0,1))+String(l.substr(0,1)),r=String(l.substr(1,1))+String(l.substr(1,1)),String(l.substr(2))+String(l.substr(2))):(a=String(l.substr(0,2)),r=String(l.substr(2,2)),String(l.substr(4))),s="rgba("+parseInt(a,16)+", "+parseInt(r,16)+", "+parseInt(c,16)+", 0.1)",String(Math.floor(255-.1*(255-parseInt(a,16)))),String(Math.floor(255-.1*(255-parseInt(r,16)))),String(Math.floor(255-.1*(255-parseInt(c,16)))),"rgb("+String(Math.floor(255-.7*(255-parseInt(a,16))))+", "+String(Math.floor(255-.7*(255-parseInt(r,16))))+", "+String(Math.floor(255-.7*(255-parseInt(c,16))))+");"}var d="10px",p="0px";scl_check.smartphone()||(d=window.sincloInfo.custom&&window.sincloInfo.custom.widget&&window.sincloInfo.custom.widget.horizontalPosition?window.sincloInfo.custom.widget.horizontalPosition:1===Number(e.showCustomWidgetPosition)?e.customWidgetPosHorizontal+"px":"10px",p=window.sincloInfo.custom&&window.sincloInfo.custom.widget&&window.sincloInfo.custom.widget.verticalPosition?window.sincloInfo.custom.widget.verticalPosition:1===Number(e.showCustomWidgetPosition)?e.customWidgetPosVertical+"px":"0px");var u="",g={se:"",re:""};switch(Number(e.showPosition)){case 1:u="bottom: "+p+"; right: "+d+";",g={se:{mg:"margin-left: 10px;",color:i.seTextColor,textSize:e.seTextSize,backgroundColor:i.seBackgroundColor,borderColor:i.seBorderColor},re:{mg:"margin-right: 10px;",color:i.reTextColor,textSize:e.reTextSize,backgroundColor:i.reBackgroundColor,borderColor:i.reBorderColor}},4!==Number(common.getWidgetSettings().widgetSizeType)||scl_check.smartphone()||(u="bottom: 0; right: 0;");break;case 2:u="bottom: "+p+"; left: "+d+";",g={se:{mg:"margin-left: 10px;",color:i.seTextColor,textSize:e.seTextSize,backgroundColor:i.seBackgroundColor,borderColor:i.seBorderColor},re:{mg:"margin-right: 10px;",color:i.reTextColor,textSize:e.reTextSize,backgroundColor:i.reBackgroundColor,borderColor:i.reBorderColor}},4!==Number(common.getWidgetSettings().widgetSizeType)||scl_check.smartphone()||(u="bottom: 0; left: 0;");break;default:u="bottom: "+p+"; right: "+d+";",g={se:{mg:"margin-left: 10px;",color:i.seTextColor,textSize:e.seTextSize,backgroundColor:i.seBackgroundColor,borderColor:i.seBorderColor},re:{mg:"margin-right: 10px;",color:i.reTextColor,textSize:e.reTextSize,backgroundColor:i.reBackgroundColor,borderColor:i.reBorderColor}},4!==Number(common.getWidgetSettings().widgetSizeType)||scl_check.smartphone()||(u="bottom: 0; right: 0;")}switch(Number(e.chatMessageDesignType)){case 1:var h=" border-bottom-right-radius: 0;",m=" border-bottom-left-radius: 0;";1===Number(e.chatMessageArrowPosition)&&(h=" border-top-right-radius: 0;",m=" border-top-left-radius: 0;"),1==Number(e.widgetSizeType)&&(g.se.mg="margin-left: 37.5px; margin-right: 10px;"+h,g.re.mg="margin-left: 10px; margin-right: 17.5px;"+m),2==Number(e.widgetSizeType)&&(g.se.mg="margin-left: 45px; margin-right: 10px;"+h,g.re.mg="margin-left: 10px; margin-right: 21px;"+m),3!=Number(e.widgetSizeType)&&4!=Number(e.widgetSizeType)&&5!=Number(e.widgetSizeType)||(g.se.mg="margin-left: 52.7px; margin-right: 10px;"+h,g.re.mg="margin-left: 10px; margin-right: 24.6px;"+m);break;case 2:1==Number(e.widgetSizeType)&&(g.se.mg="margin-left: 37.5px;",g.re.mg="margin-right: 17.5px;"),2==Number(e.widgetSizeType)&&(g.se.mg="margin-left: 45px;",g.re.mg="margin-right: 21px;"),3!=Number(e.widgetSizeType)&&4!=Number(e.widgetSizeType)&&5!=Number(e.widgetSizeType)||(g.se.mg="margin-left: 52.7px;",g.re.mg="margin-right: 24.6px;");break;default:1==Number(e.widgetSizeType)&&(g.se.mg="margin-left: 37.5px; margin-right: 10px;  border-bottom-right-radius: 0;",g.re.mg="margin-left: 10px; margin-right: 17.5px; border-bottom-left-radius: 0;"),2==Number(e.widgetSizeType)&&(g.se.mg="margin-left: 45px; margin-right: 10px;  border-bottom-right-radius: 0;",g.re.mg="margin-left: 10px; margin-right: 21px; border-bottom-left-radius: 0;"),3!=Number(e.widgetSizeType)&&4!=Number(e.widgetSizeType)&&5!=Number(e.widgetSizeType)||(g.se.mg="margin-left: 52.7px; margin-right: 10px;  border-bottom-right-radius: 0;",g.re.mg="margin-left: 10px; margin-right: 24.6px; border-bottom-left-radius: 0;")}if(common.getWidgetSettings().isSendMessagePositionLeft){var f=JSON.stringify(g.se);g.se=g.re,g.re=JSON.parse(f)}var v=285,b=1;navigator.userAgent.toLowerCase();if(o+="  <style>",o+="      @media print{ sinclo { display:none!important; } }",o+='      @font-face { font-family: "FA5P"; font-style: normal; font-weight: 300; src: url("'+sincloInfo.site.files+'/webfonts/fa-light-300.eot"); src: url("'+sincloInfo.site.files+'/webfonts/fa-light-300.eot?#iefix") format("embedded-opentype"), url("'+sincloInfo.site.files+'/webfonts/fa-light-300.woff") format("woff"), url("'+sincloInfo.site.files+'/webfonts/fa-light-300.ttf") format("truetype"), url("'+sincloInfo.site.files+'/webfonts/fa-light-300.svg#fontawesome") format("svg"); }',o+='      @font-face { font-family: SincloFont; font-style: normal; font-weight: 900; src: url("'+sincloInfo.site.files+'/webfonts/fa-solid-900.eot"); src: url("'+sincloInfo.site.files+'/webfonts/fa-solid-900.eot?#iefix") format("embedded-opentype"), url("'+sincloInfo.site.files+'/webfonts/fa-solid-900.woff") format("woff"), url("'+sincloInfo.site.files+'/webfonts/fa-solid-900.ttf") format("truetype"), url("'+sincloInfo.site.files+'/webfonts/fa-solid-900.svg#fontawesome") format("svg"); }',o+='      #sincloBox .sinclo-fal { font-family: "FA5P"; display: inline-block; font-style: normal; font-weight: 300; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }',o+="      #sincloBox .sinclo-fal.fa-4x { font-size: 4em; }",o+='      #sincloBox ul#chatTalk li .sinclo-fal.fa-file:before { content: "\\f15b" }',o+='      #sincloBox ul#chatTalk li .sinclo-fal.fa-file-image:before { content: "\\f1c5" }',o+='      #sincloBox ul#chatTalk li .sinclo-fal.fa-file-pdf:before { content: "\\f1c1" }',o+='      #sincloBox ul#chatTalk li .sinclo-fal.fa-file-word:before { content: "\\f1c2" }',o+='      #sincloBox ul#chatTalk li .sinclo-fal.fa-file-powerpoint:before { content: "\\f1c4" }',o+='      #sincloBox ul#chatTalk li .sinclo-fal.fa-file-excel:before { content: "\\f1c3" }',o+='      #sincloBox ul#chatTalk li .sinclo-fal.fa-file-audio:before { content: "\\f1c7" }',o+='      #sincloBox ul#chatTalk li .sinclo-fal.fa-file-video:before { content: "\\f1c8" }',o+='      #sincloBox ul#chatTalk li .sinclo-fal.fa-file-zip:before { content: "\\f1c6" }',o+='      #sincloBox ul#chatTalk li .sinclo-fal.fa-file-code:before { content: "\\f1c9" }',o+='      #sincloBox ul#chatTalk li .sinclo-fal.fa-file-text:before { content: "\\f15c" }',o+='      #sincloBox ul#chatTalk li .sinclo-fal.fa-cloud-upload:before { content: "\\f0ee" }',o+='      #sincloBox ul#chatTalk li .sinclo-fal.fa-chevron-left:before { content: "\\f053" }',o+='      #sincloBox ul#chatTalk li .sinclo-fal.fa-chevron-right:before { content: "\\f054" }',o+='      #sincloBox ul#chatTalk li .sinclo-fal.fa-chevron-square-left:before { content: "\\f32a" }',o+='      #sincloBox ul#chatTalk li .sinclo-fal.fa-chevron-square-right:before { content: "\\f32b" }',o+='      #sincloBox ul#chatTalk li .sinclo-fal.fa-chevron-circle-left:before { content: "\\f137" }',o+='      #sincloBox ul#chatTalk li .sinclo-fal.fa-chevron-circle-right:before { content: "\\f138" }',o+='      #sincloBox .sinclo-fal.fa-comments:before { content: "\\f086" }',o+='      #sincloBox .sinclo-fal.fa-phone:before { content: "\\f095" }',o+='      #sincloBox .sinclo-fal.fa-robot:before { content: "\\f544" }',o+='      #sincloBox .sinclo-fal.fa-comment-alt-lines:before { content: "\\f4a6" }',o+='      #sincloBox .sinclo-fal.fa-comments-alt:before { content: "\\f4b6" }',o+='      #sincloBox .sinclo-fal.fa-comment-lines:before { content: "\\f4b0" }',o+='      #sincloBox .sinclo-fal.fa-user:before { content: "\\f007" }',o+='      #sincloBox .sinclo-fal.fa-times:before { content: "\\f00d" }',o+='      #sincloBox .sinclo-fal.fa-minus-square:before { content: "\\f146" }',o+='      #sincloBox div, #sincloBox span, #sincloBox applet, #sincloBox object, #sincloBox iframe, #sincloBox h1, #sincloBox h2, #sincloBox h3, #sincloBox h4, #sincloBox h5, #sincloBox h6, #sincloBox p, #sincloBox blockquote, #sincloBox pre, #sincloBox a, #sincloBox abbr, #sincloBox acronym, #sincloBox address, #sincloBox big, #sincloBox cite, #sincloBox code, #sincloBox del, #sincloBox dfn, #sincloBox em, #sincloBox img, #sincloBox ins, #sincloBox kbd, #sincloBox q, #sincloBox s, #sincloBox samp, #sincloBox small, #sincloBox strike, #sincloBox strong, #sincloBox sub, #sincloBox sup, #sincloBox tt, #sincloBox var, #sincloBox b, #sincloBox u, #sincloBox i, #sincloBox center, #sincloBox dl, #sincloBox dt, #sincloBox dd, #sincloBox ol, #sincloBox ul, #sincloBox li, #sincloBox fieldset, #sincloBox form, #sincloBox label, #sincloBox legend, #sincloBox table, #sincloBox caption, #sincloBox tbody, #sincloBox tfoot, #sincloBox thead, #sincloBox tr, #sincloBox th, #sincloBox td, #sincloBox article, #sincloBox aside, #sincloBox canvas, #sincloBox details, #sincloBox embed, #sincloBox figure, #sincloBox figcaption, #sincloBox footer, #sincloBox header, #sincloBox hgroup, #sincloBox menu, #sincloBox nav, #sincloBox output, #sincloBox ruby, #sincloBox section, #sincloBox summary, #sincloBox time, #sincloBox mark, #sincloBox audio, #sincloBox video {   font-family: "ãã©ã®ãè§ã´ ProN W3","HiraKakuProN-W3","ãã©ã®ãè§ã´ Pro W3","HiraKakuPro-W3","ã¡ã¤ãªãª","Meiryo","ï¼­ï¼³ ï¼°ã´ã·ãã¯","MS Pgothic",sans-serif,Helvetica,Helvetica Neue,Arial,Verdana;  font-weight: normal;  font-variant: normal;  position: static;  top: auto;  right: auto;  bottom: auto;  left: auto;  float: none;  box-sizing: border-box;  width: auto;  min-width: 0;  max-width: none;  height: auto;  min-height: 0;  max-height: none;  margin: 0;  padding: 0;  text-align: start;  vertical-align: baseline;  text-decoration: none;  text-indent: 0;  letter-spacing: normal;  word-spacing: normal;  color: #333;  border: 0;  background: initial;  box-shadow: none;  text-shadow: none;  -webkit-font-smoothing: subpixel-antialiased;  direction: ltr; }',o+="      #sincloBox article, #sincloBox aside, #sincloBox details, #sincloBox figcaption, #sincloBox figure, #sincloBox footer, #sincloBox header, #sincloBox hgroup, #sincloBox menu, #sincloBox nav, #sincloBox section { display: block; }",o+="      #sincloBox ol, #sincloBox ul { list-style: none; }",o+="      #sincloBox blockquote, #sincloBox q { quotes: none; }",o+="      #sincloBox blockquote:before, #sincloBox blockquote:after, #sincloBox q:before, #sincloBox q:after { content: ''; content: none; }",o+="      #sincloBox table { border-collapse: collapse; border-spacing: 0; }",o+="      #sincloBox { display: none; position: fixed; "+u+" z-index: 999998; background-color: rgba(0,0,0,0); }",o+='      #sincloBox * { color: #333333; line-height: 1.3; box-sizing: border-box; font-family: "ãã©ã®ãè§ã´ ProN W3","HiraKakuProN-W3","ãã©ã®ãè§ã´ Pro W3","HiraKakuPro-W3","ã¡ã¤ãªãª","Meiryo","ï¼­ï¼³ ï¼°ã´ã·ãã¯","MS Pgothic",sans-serif,Helvetica, Helvetica Neue, Arial, Verdana; letter-spacing: initial; }',o+="      #sincloBox *:before, #sincloBox *:after { box-sizing: content-box; }",o+="      #sincloBox .notSelect { -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; }",o+="      #sincloBox .sinclo-hide { display:none!important; }",o+="      #sincloBox .sinclo_se a { color: "+g.se.color+" }",o+="      #sincloBox .sinclo_re a { color: "+g.re.color+" }",o+="      #sincloBox ul#chatTalk li.sinclo_re span.telno { color: "+g.re.color+"; }",o+="      #sincloBox ul#chatTalk li.sinclo_re span.link { color: "+g.re.color+"; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon { display:grid; display:-ms-grid; grid-template-columns: minmax(max-content, max-content) 1fr 0px; -ms-grid-columns: minmax(max-content, max-content) 1fr 0px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon li.sinclo_re:not(.no-wrap) { justify-self: start; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon li.noneBalloon:not(.no-wrap) { justify-self: start; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon li.sinclo_re { -ms-grid-column-align: start; -ms-grid-column: 2; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon li.sinclo_re.no-wrap { -ms-grid-column-align: stretch; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon li.noneBalloon { -ms-grid-column-align: start; -ms-grid-column: 2; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon li.sinclo_re.recv_file_left { justify-self: stretch; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon.smallSize li.sinclo_re { margin-left: 1px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon.smallSize li.noneBalloon { margin-left: 1px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon.middleSize li.sinclo_re { margin-left: 3px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon.middleSize li.noneBalloon { margin-left: 3px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon.largeSize li.sinclo_re { margin-left: 5px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon.largeSize li.noneBalloon { margin-left: 5px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon.customSize li.sinclo_re { margin-left: 5px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon.customSize li.noneBalloon { margin-left: 5px; }",1===Number(e.chatMessageArrowPosition)?(o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv { display: flex; justify-content: flex-end; align-items: flex-start; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv .img_wrapper { margin-top: 10px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv i { margin-top: 10px; }"):o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv { display: flex; justify-content: flex-end; align-items: flex-end; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv .img_wrapper { display: inline-block; padding: 0px; text-align: center; border-radius: 50%; overflow: hidden; position: relative; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv .img_wrapper img { position:absolute; left: -100%; right: -100%; margin: auto; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv img { border-radius: 50% }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv i { display:flex; justify-content: center; align-items: center; border-radius: 50%; ",o+="      color:"+e.stringColor+"; background-color:"+e.mainColor+";}",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv i.fa-comment-alt-lines { padding-top: 4px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv i.fa-comments-alt { padding-top: 2px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv i.fa-phone { padding-top: 2px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv i.icon_border { border:1px solid"+e.stringColor+"}",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv.smallSize { max-width: 30px; min-width: 30px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv.smallSize .img_wrapper { width: 30px; height: 30px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv.smallSize .img_wrapper img { max-width: 30px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv.smallSize i { height: 30px; width: 30px; font-size: 20px }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv.middleSize { max-width: 37px; min-width: 37px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv.middleSize .img_wrapper { width: 35px; height: 35px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv.middleSize .img_wrapper img { max-width: 35px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv.middleSize i { height: 35px; width: 35px; font-size: 23px }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv.largeSize { max-width: 42px; min-width: 42px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv.largeSize .img_wrapper { width: 40px; height: 40px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv.largeSize .img_wrapper img { max-width: 40px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv.largeSize i { height: 40px; width: 40px; font-size: 26px }",o+="#sincloBox ul#chatTalk li .sinclo-pulldown { margin-top: 10px; height: 30px; background: url(none); padding: 5px!important; font-size: "+common.getFontSize(13)+"px!important; margin-bottom: 0!important; -webkit-appearance: menulist; }",o+="#sincloBox ul#chatTalk li button { cursor: pointer; min-height: 35px; margin-bottom: 1px; padding: 10px 15px; }",o+="#sincloBox ul#chatTalk div:before { content:none }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv.customSize { max-width: 42px; min-width: 42px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv.customSize .img_wrapper { width: 40px; height: 40px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv.customSize .img_wrapper img { max-width: 40px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv.customSize i { height: 40px; width: 40px; font-size: 26px }",o+="      #sincloBox ul#chatTalk li.sinclo_re .smallSizeImg { max-width: 165px; max-height: 120px; display:block;}",o+="      #sincloBox ul#chatTalk li.sinclo_re .middleSizeImg { max-width: 215px; max-height: 188px; display:block;}",o+="      #sincloBox ul#chatTalk li.sinclo_re .largeSizeImg { max-width: 265px; max-height: 285px; display:block;}",o+="      #sincloBox sinclo-div {display: block; }",o+="      #sincloBox label { display: inline; max-width: 100%; margin-bottom: 0; font-weight: normal;}",o+="      #sincloBox sinclo-div#widgetHeader { cursor:pointer; position: relative;}",o+="      #sincloBox #titleWrap { position: relative; }",o+="      #sincloBox input { text-align: left; }",o+='      #sincloBox sinclo-div#widgetHeader:after { content: " "; position: absolute; bottom: 0; left: 0; right: 0; z-index: -1; background-color: #FFF; }',o+='      #sincloBox span, #sincloBox pre { font-family: "ãã©ã®ãè§ã´ ProN W3","HiraKakuProN-W3","ãã©ã®ãè§ã´ Pro W3","HiraKakuPro-W3","ã¡ã¤ãªãª","Meiryo","ï¼­ï¼³ ï¼°ã´ã·ãã¯","MS Pgothic",sans-serif,Helvetica, Helvetica Neue, Arial, Verdana!important }',o+="      #sincloBox span#mainImage { cursor:pointer; z-index: 2; position: absolute; }",o+="      #sincloBox span#mainImage img { background-color: "+i.mainColor+" }",o+="      #sincloBox span#mainImage i.normal { color: "+i.stringColor+"; background-color: "+i.mainColor+"; }",o+="      #sincloBox span#mainImage i.fa-robot { padding-bottom: 3px; }",o+="      #sincloBox p#widgetTitle, #sincloBox sinclo-div#widgetTitle { position:relative; cursor:pointer; border: 1px solid "+i.mainColor+"; border-bottom:none; background-color: "+i.mainColor+";text-align: center; margin: 0; color: "+i.stringColor+" ;white-space: nowrap; text-overflow: ellipsis; overflow: hidden; z-index: auto;}",o+="      #sincloBox p#widgetTitle #sincloChatUnread { position: absolute; top: 0; left: 0; color: #FFF; font-style: normal; text-align: center; font-weight: bold; background-color: #FF5C5C; }",o+='      #sincloBox div#minimizeBtn { display: none; cursor: pointer; background-image: url("'+window.sincloInfo.site.files+'/img/widget/minimize.png"); background-position-y: 0px; position: absolute; top: calc(50% - 10px); right: 6px; bottom: 6px; content: " "; width: 20px; height: 20px; background-size: contain; vertical-align: middle; background-repeat: no-repeat; transition: transform 200ms linear; z-index: 2; }',o+="      #sincloBox #fw-minimize-btn i {top: -1px; right: 7px; position: absolute; z-index: 2; font-size: 26px; color: "+i.closeBtnColor+"; cursor: pointer;}",o+="      #sincloBox #fw-minimize-btn i:before {font-family: FA5P}",1===Number(e.closeButtonSetting)?o+='      #sincloBox div#closeBtn { display: none; cursor: pointer; background-image: url("'+window.sincloInfo.site.files+'/img/widget/close.png"); background-position-y: -1.5px; position: absolute; top: calc(50% - 9px); right: 6px; content: " "; width: 18px; height: 18px; background-size: contain; vertical-align: middle; background-repeat: no-repeat; transition: transform 200ms linear; z-index: 2; }':(o+='      #sincloBox div#closeBtn { display: none; cursor: pointer; background-image: url("'+window.sincloInfo.site.files+'/img/widget/close.png"); background-position-y: -1.5px; position: absolute; top: calc(50% - 8px); right: 6px; content: " "; width: 18px; height: 18px; background-size: contain; vertical-align: middle; background-repeat: no-repeat; transition: transform 200ms linear; z-index: 2; }',o+="      #sincloBox div#closeBtn:hover {background-color: #999999;}",o+="      #sincloBox #fw-close-btn {top: 3px; right: 5px; position: absolute; z-index: 2; cursor: pointer; display: inline-flex; align-items: center; justify-content: center; height: 27px; width: 27px; }",o+="      #sincloBox #fw-close-btn i {font-size: 23px; color: "+i.closeBtnColor+"; line-height: 1}",o+="      #sincloBox #fw-close-btn i:before {font-family: FA5P}",o+="      #sincloBox #fw-close-btn:hover {background-color: "+i.closeBtnHoverColor+";}"),o+="      #sincloBox div#sincloWidgetBox { position: relative; top: 0px; }",o+="      #sincloBox div#sincloWidgetBox > section { background-color: #FFF; border-top: none; }","5f75aa1a1d292"!==sincloInfo.site.key&&(o+="      #sincloBox div#sincloWidgetBox span:before, #sincloBox div#sincloWidgetBox span:after { width: 0px;}"),o+="      #sincloBox div#sincloBannerBox span:before, #sincloBox div#sincloBannerBox span:after { width: 0px;}",o+="      #sincloBox ul#chatTalk li a, #sincloBox #fotter a { display: inline; text-decoration: underline; }",o+="      #sincloBox section { display: none; padding: 0; top:0px!important; }",o+="      #sincloBox .flexBox { position: relative; display: -ms-flexbox; display: -webkit-flex; display: flex; -ms-flex-direction: column; -webkit-flex-direction: column; flex-direction: column }",1===e.chatMessageCopy?o+="      #sincloBox .flexBoxRow { display: -ms-flexbox; display: -webkit-flex; display: flex; -ms-flex-direction: row; -webkit-flex-direction: row; flex-direction: row; user-select: none;-moz-user-select: none;-webkit-user-select: none;-ms-user-select: none;}":o+="      #sincloBox .flexBoxRow { display: -ms-flexbox; display: -webkit-flex; display: flex; -ms-flex-direction: row; -webkit-flex-direction: row; flex-direction: row; }",window.sincloInfo.contract.chat){if(o+="      @keyframes rightEffect { 0% { transform :translate3d(20px, 0px, 0px); opacity :0; } 70% {} 100% { transform :translate3d(0px, 0px, 0px); opacity :1; } }",o+="      @keyframes leftEffect { 0% { transform :translate3d(-20px, 0px, 0px) scale(0.8); opacity :0; } 69% {} 100% { transform :translate3d(0px, 0px, 0px); opacity :1; } }",o+="      @keyframes fadeIn { 0% { opacity :0; } 100% { opacity :1; } }",o+="      @keyframes noneRightEffect { 0% { opacity :0; } 70% {} 100% { opacity :1; } }",o+="      @keyframes noneLeftEffect { 0% { opacity :0; } 69% {} 100% { opacity :1; } }",o+='      #sincloBox #mainImage em { display: flex; align-items: center; justify-content: center; position: fixed; background-image: url("'+window.sincloInfo.site.files+'/img/chat-bg.png");background-size: contain;background-repeat: no-repeat; color: #FFF; font-style: normal; text-align: center; font-weight: bold }',o+="      #sincloBox ul#chatTalk li .sinclo-fal.fa-4x { font-size:4em; }",o+="      #sincloBox ul#chatTalk li span.sendFileMessage { color: "+g.re.color+" }",o+="      #sincloBox ul#chatTalk li div.sendFileContent { display: table; table-layout:fixed; width: 100%; height: 64px; white-space: pre-line; margin-bottom: 0; }",o+="      #sincloBox ul#chatTalk li div.sendFileContent * { color: "+g.re.color+" }",o+="      #sincloBox ul#chatTalk li div.sendFileThumbnailArea { display: table-cell; width: 64px; height: 64px; border: 1px solid #D9D9D9; }",o+="      #sincloBox ul#chatTalk li div.sendFileMetaArea { display:table-cell; vertical-align: middle; margin-left: 10px; margin-bottom: 0px; }",o+="      #sincloBox ul#chatTalk li div.sendFileThumbnailArea .sendFileThumbnail { text-align: center; vertical-align: middle; display: inline-block; width: 100%; height: auto; margin-left: 0; margin-bottom: 0px; margin-right: auto; }",o+='      #sincloBox ul#chatTalk li div.sendFileThumbnailArea:before { content: ""; height: 100%; vertical-align: middle; width: 0px; display: inline-block; }',o+="      #sincloBox ul#chatTalk li div.sendFileMetaArea .data { margin-left: 1em; margin-bottom: 5px; display: block; }",o+="      #sincloBox ul#chatTalk li div.sendFileMetaArea .data.sendFileSize { margin-bottom: 0px; }",1===e.chatMessageCopy?o+="      #sincloBox ul#chatTalk { width: 100%; list-style-type: none; overflow-y: scroll; overflow-x: hidden; margin: 0; clear: both!important; user-select: none;-moz-user-select: none;-webkit-user-select: none;-ms-user-select: none; }":o+="      #sincloBox ul#chatTalk { width: 100%; list-style-type: none; overflow-y: scroll; overflow-x: hidden; margin: 0; clear: both!important; }",o+="      #sincloBox ul sinclo-chat { clear: both!important; }",o+="      #sincloBox ul sinclo-typing { padding-bottom: "+n.paddingBottom+"px; display: block; }",o+="      #sincloBox ul#chatTalk li { text-align: left!important; word-wrap: break-word; word-break: break-all; white-space: pre-wrap!important; background-color: transparent; white-space: pre; color: #333333; font-weight: normal!important; }",o+="      #sincloBox ul#chatTalk li.sinclo_se span.sinclo-text-line { display: inline-block; color:"+g.se.color+"; font-size: "+g.se.textSize+"px; }",o+="      #sincloBox ul#chatTalk li.sinclo_re span.sinclo-text-line { display: inline-block; color:"+g.re.color+"; font-size: "+g.re.textSize+"px; }",2===e.chatMessageDesignType){var y="sinclo_re",x="sinclo_se";common.getWidgetSettings().isSendMessagePositionLeft&&(y="sinclo_se",x="sinclo_re"),o+="      #sincloBox ul#chatTalk li { line-height: 1.4; padding: 10px 15px; border-radius: 12px !important;}",o+="      #sincloBox ul#chatTalk li."+x+" { "+g.se.mg+"background-color: "+g.se.backgroundColor+"; display: inline-block; position: relative; margin-right: 15px; border-bottom-right-radius: 0px!important; color:"+g.se.color+"; font-size: "+g.se.textSize+"px; }",o+="      #sincloBox ul#chatTalk li."+x+':before { height: 0px; content: ""; position: absolute; bottom: 0px; left: calc(100% - 3px); margin-top: -10px; border: 5px solid transparent; border-left: 5px solid '+g.se.backgroundColor+"; border-bottom: 5px solid "+g.se.backgroundColor+"; z-index: 2; }",o+="      #sincloBox ul#chatTalk li."+x+':after { height: 0px; content: ""; position: absolute; bottom: -1px; left: 100%; margin-top: -9px; border: 5px solid transparent; z-index: 1 }',0===i.seBorderNone&&(o+="      #sincloBox ul#chatTalk li."+x+":after {border-left: 5px solid "+g.se.borderColor+"; border-bottom: 5px solid "+g.se.borderColor+"; }"),o+="      #sincloBox ul#chatTalk li."+y+" { "+g.re.mg+"background-color:"+g.re.backgroundColor+"; display: inline-block; position: relative; margin-left: 10px; padding-right: 15px; border-bottom-left-radius: 0px!important; color:"+g.re.color+"; font-size: "+g.re.textSize+"px; }",o+="      #sincloBox ul#chatTalk li."+y+':not(.no-wrap):before { height: 0px; content: ""; position: absolute; bottom: 0px; left: -7px; margin-top: -10px; border: 5px solid transparent; border-right: 5px solid '+g.re.backgroundColor+"; border-bottom: 5px solid "+g.re.backgroundColor+"; z-index: 2; }",o+="      #sincloBox ul#chatTalk li."+y+':not(.no-wrap):after { height: 0px; content: ""; position: absolute; bottom: -1px; left: -10px; margin-top: -9px; border: 5px solid transparent; z-index: 1; }',0===i.reBorderNone&&(o+="      #sincloBox ul#chatTalk li."+y+":not(.no-wrap):after {border-right: 5px solid "+g.re.borderColor+"; border-bottom: 5px solid "+g.re.borderColor+"; }")}else o+="      #sincloBox ul#chatTalk li.sinclo_se { "+g.se.mg+"background-color: "+g.se.backgroundColor+"; color:"+g.se.color+"; font-size: "+g.se.textSize+"px; display: inline-block; position: relative;}",o+="      #sincloBox ul#chatTalk li.sinclo_re { "+g.re.mg+"background-color:"+g.re.backgroundColor+"; color:"+g.re.color+"; font-size: "+g.re.textSize+"px; display: inline-block; position: relative;}";1===e.chatMessageWithAnimation?(o+="      #sincloBox ul#chatTalk li.effect_right { -webkit-animation-name:rightEffect; animation-name:rightEffect; -webkit-animation-duration:0.5s; animation-duration:0.5s; -webkit-animation-iteration-count:1; animation-iteration-count:1; -webkit-animation-fill-mode:both; animation-fill-mode:both; -webkit-transform-origin:left bottom; transform-origin:left bottom; opacity:0; -webkit-animation-delay:0.6s; animation-delay:0.6s; }",o+="      #sincloBox ul#chatTalk :not(.grid_for_icon) > li.effect_left { -webkit-animation-name:leftEffect; animation-name:leftEffect; -webkit-animation-duration:0.5s; animation-duration:0.5s; -webkit-animation-iteration-count:1; animation-iteration-count:1; -webkit-animation-fill-mode:both; animation-fill-mode:both; -webkit-transform-origin:left bottom; transform-origin:left bottom; opacity:0; -webkit-animation-delay:0.6s; animation-delay:0.6s; }",o+="      #sincloBox ul#chatTalk .grid_for_icon.effect_left { -webkit-animation-name:leftEffect; animation-name:leftEffect; -webkit-animation-duration:0.5s; animation-duration:0.5s; -webkit-animation-iteration-count:1; animation-iteration-count:1; -webkit-animation-fill-mode:both; animation-fill-mode:both; -webkit-transform-origin:left bottom; transform-origin:left bottom; opacity:0; -webkit-animation-delay:0.6s; animation-delay:0.6s; }",o+="      #sincloBox ul#chatTalk .grid_for_icon.effect_left_wait { -webkit-animation-name:leftEffect; animation-name:leftEffect; -webkit-animation-duration:0.5s; animation-duration:0.5s; -webkit-animation-iteration-count:1; animation-iteration-count:1; -webkit-animation-fill-mode:both; animation-fill-mode:both; -webkit-transform-origin:left bottom; transform-origin:left bottom; opacity:0; }"):(o+="      #sincloBox ul#chatTalk li.effect_right { -webkit-animation-name:noneRightEffect; animation-name:noneRightEffect; -webkit-animation-duration:1ms; animation-duration:1ms; -webkit-animation-iteration-count:1; animation-iteration-count:1; -webkit-animation-fill-mode:both; animation-fill-mode:both; opacity:0; -webkit-animation-delay:0.7s; animation-delay:0.7s; }",o+="      #sincloBox ul#chatTalk :not(.grid_for_icon) > li.effect_left { -webkit-animation-name:noneLeftEffect; animation-name:noneLeftEffect; -webkit-animation-duration:1ms; animation-duration:1ms; -webkit-animation-iteration-count:1; animation-iteration-count:1; -webkit-animation-fill-mode:both; animation-fill-mode:both; opacity:0; -webkit-animation-delay:0.7s; animation-delay:0.7s; }",o+="      #sincloBox ul#chatTalk .grid_for_icon.effect_left { -webkit-animation-name:noneLeftEffect; animation-name:noneLeftEffect; -webkit-animation-duration:1ms; animation-duration:1ms; -webkit-animation-iteration-count:1; animation-iteration-count:1; -webkit-animation-fill-mode:both; animation-fill-mode:both; opacity:0; -webkit-animation-delay:0.7s; animation-delay:0.7s; }",o+="      #sincloBox ul#chatTalk .grid_for_icon.effect_left_wait { -webkit-animation-name:noneLeftEffect; animation-name:noneLeftEffect; -webkit-animation-duration:1ms; animation-duration:1ms; -webkit-animation-iteration-count:1; animation-iteration-count:1; -webkit-animation-fill-mode:both; animation-fill-mode:both; opacity:0; }"),o+="      #sincloBox ul#chatTalk li#sinclo_typeing_message { position: relative; color: #d5d5d5; border: none; text-align: center; }",o+="      #sincloBox ul#chatTalk li#sinclo_typeing_message span { position: absolute; top: 0; bottom: 0; left: 50%; display: block; }",o+="      #sincloBox ul#chatTalk li#sinclo_loading_file_message { position: relative; color: #d5d5d5; border: none; text-align: center; }",o+="      #sincloBox ul#chatTalk li#sinclo_loading_file_message span { display: flex;justify-content: center; }",o+="      #sincloBox ul#chatTalk li span.cName { display: block; color: "+i.cNameTextColor+"; font-weight: bold; }",o+="      #sincloBox ul#chatTalk li sinclo-radio { display: inline-block; margin-top: "+e.btwButtonMargin+"px; } ",o+="      #sincloBox ul#chatTalk li span.sinclo-text-line + sinclo-radio { margin-top: "+e.lineButtonMargin+"px; } ",o+='      #sincloBox ul#chatTalk li sinclo-radio [type="radio"] { display: none!important; -webkit-appearance: radio!important; -moz-appearance: radio!important; appearance: radio!important; } ',o+='      #sincloBox ul#chatTalk li sinclo-radio [type="radio"] + label { position: relative; display: inline-block; width: 100%; cursor: pointer; margin: 0; padding: 0 0 0 '+(Number(g.re.textSize)+7)+"px; color:"+g.re.color+"; min-height: 12px; font-size: "+g.re.textSize+"px; } ",o+='      #sincloBox ul#chatTalk li sinclo-radio [type="radio"] + label:before { content: ""; display: block; position: absolute; top: 0px; left: 0px;  width: '+Number(g.re.textSize)+"px; height: "+Number(g.re.textSize)+"px; border: 1px solid #999; border-radius: 50%; background-color: #FFF; margin-top:0px!important } ",o+='      #sincloBox ul#chatTalk li sinclo-radio [type="radio"]:checked + label:after { content: ""; display: block; position: absolute; top: '+Math.ceil(Number(g.re.textSize)/2)+"px; left: "+(g.re.textSize/2-(g.re.textSize-6)/2+1)+"px; margin-top: -"+(Math.round(g.re.textSize/2)-4)+"px; width: "+(Number(g.re.textSize)-6)+"px; height: "+(Number(g.re.textSize)-6)+"px; background: "+i.mainColor+"; border-radius: 50%; } ",o+='#sincloBox ul#chatTalk li [id^="sinclo-radio-button"] sinclo-radio { font-size: '+Number(g.re.textSize)+"px;}",o+='#sincloBox ul#chatTalk li [id^="sinclo-radio-button"] sinclo-radio [type="radio"] + label{ font-size: '+Number(g.re.textSize)+"px;}",o+="      #sincloBox ul#chatTalk sinclo-chat-receiver { cursor: pointer; display: none; position: absolute; left: 0; right: 0; width: 100%; height: 1.5em; background-color: rgba(0, 0, 0, 0.45); vertical-align: middle; word-wrap: break-word; z-index: 2; } ",o+='      #sincloBox ul#chatTalk sinclo-chat-receiver:before {content: ""; display: inline-block; border: 6px solid transparent; position: absolute; top: 50%; margin-top: -3px; left: 5px; height: 8px; border-top: 8px solid white; border-bottom: 0; }',o+="      #sincloBox ul#chatTalk sinclo-chat-receiver #receiveMessage { overflow: hidden; font-size: 10px; height: 100%; line-height: 2em; padding-left: 2em; color: #FFF; }",o+="      #sincloBox section#chatTab sinclo-div:not(#flexBoxWrap) { border-top: 1px solid "+i.widgetInsideBorderColor+"; background-color: "+i.chatMessageBackgroundColor+";}",o+="#sincloBox ul#chatTalk li .sinclo-checkbox { font-size: "+Number(g.re.textSize)+"px;}",o+="#sincloBox ul#chatTalk li .sinclo-checkbox .checkmark { width: "+(Number(g.re.textSize)+2)+"px; height: "+(Number(g.re.textSize)+2)+"px;}",o+='#sincloBox ul#chatTalk li .sinclo-checkbox .checkmark:after {content: "";position: absolute;display: none;left: '+(Number(g.re.textSize)-9)+"px;top: "+(Number(g.re.textSize)-12)+"px;width: 3px;height: 6px; border-width: 0 2px 2px 0;-webkit-transform: rotate(45deg);-ms-transform: rotate(45deg);transform: rotate(45deg);}",o+="#sincloBox ul#chatTalk li .sinclo-checkbox.labelStyle { background-color: transparent; }",o+="#sincloBox ul#chatTalk li .sinclo-checkbox.buttonStyle .checkmark {top: 9px;left: 8px; }",o+="#sincloBox ul#chatTalk li .sinclo-checkbox.buttonStyle {padding: 8px 8px 8px 28px;}",o+="#sincloBox ul#chatTalk li span.ok-button {width: 100px; height: 30px; line-height: 30px; cursor: pointer; margin: auto; margin-top: 10px; display: block; text-align:center; justify-content: center; align-items: center; border-radius: 12px; background-color: "+i.chatSendBtnBackgroundColor+"; color: "+i.chatSendBtnTextColor+";}",o+="#sincloBox ul#chatTalk li.sinclo_se.cancelable span.sinclo-text-line { text-decoration: underline; cursor: pointer; }",o+="#sincloBox ul#chatTalk li.sinclo_se.skip_input {display: none}",o+="#sincloBox ul#chatTalk div.grid_for_icon.smallSize li.sinclo_re.customWidth {width: calc(100% - 17.5px); }",o+="#sincloBox ul#chatTalk div.grid_for_icon.middleSize li.sinclo_re.customWidth {width: calc(100% - 21px); }",o+="#sincloBox ul#chatTalk li.sinclo_re.customWidth {width: calc(100% - 24.6px); }";var _="#sincloBox #chatTalk li.sinclo_se",w="#sincloBox #chatTalk li.sinclo_re";common.getWidgetSettings().isSendMessagePositionLeft&&(_="#sincloBox #chatTalk li.sinclo_re",w="#sincloBox #chatTalk li.sinclo_se"),1==Number(e.widgetSizeType)?(o+=w+".recv_file_left, "+w+".recv_file_right { display: block; padding: 10px!important; line-height: 0; }",o+=_+".uploaded { padding: 10px!important; line-height: 0; }",o+=w+" div.receiveFileContent div.selectFileArea p.drop-area-message { margin: 9px 0 6.5px; line-height: 20px; }",o+=w+" div.receiveFileContent div.selectFileArea p.drop-area-button { display: flex; justify-content: center; line-height: 0px; margin: 6.5px 0 9px; }"):scl_check.smartphone()||2==Number(e.widgetSizeType)?(o+=w+".recv_file_left, "+w+".recv_file_right { display: block; padding: "+12*common.getRatio()+"px!important; line-height: 0; }",o+=_+".uploaded { padding: "+12*common.getRatio()+"px!important; line-height: 0; }",o+=w+"  div.receiveFileContent div.selectFileArea p.drop-area-message { margin: "+13*common.getRatio()+"px 0 "+6.5*common.getRatio()+"px; line-height: "+24*common.getRatio()+"px; }",o+=w+"  div.receiveFileContent div.selectFileArea p.drop-area-button { display: flex; justify-content: center; line-height: 0px; margin: "+6.5*common.getRatio()+"px 0 "+13*common.getRatio()+"px; }",o+=w+"  div.cancelReceiveFileArea a {font-size: "+11*common.getRatio()+"px!important;}"):3==Number(e.widgetSizeType)&&(o+=w+".recv_file_left, "+w+".recv_file_right { display: block; padding: 14px!important; line-height: 0; }",o+=_+".uploaded { padding: 14px!important; line-height: 0; }",o+=w+" div.receiveFileContent div.selectFileArea p.drop-area-message { margin: 13px 0 6.5px; line-height: 24px; }",o+=w+" div.receiveFileContent div.selectFileArea p.drop-area-button { display: flex; justify-content: center; line-height: 0px; margin: 6.5px 0 13px; }"),o+=w+" div.receiveFileContent { position: relative; line-height: 0; border: 1px dashed "+g.re.color+"; }",o+=w+" div.receiveFileContent div.selectFileArea { line-height: 0; }",o+=w+" div.receiveFileContent div.selectFileArea p { margin: 6.5px 0; text-align: center; color:"+g.re.color+"; font-weight: bold; }",o+=w+" div.receiveFileContent a.select-file-button { display:inline-block; width:75%; padding: 5px 35px; border-radius: 0; text-decoration: none; cursor: pointer; text-align: center; background-color: "+g.re.color+"!important; color: "+g.re.backgroundColor+"; font-weight: normal; }",o+=w+" div.receiveFileContent a.select-file-button:hover { opacity: .8; }",o+=w+" div.cancelReceiveFileArea { margin-top: 5px; }",o+=w+" div.cancelReceiveFileArea a { font-size: "+(g.re.textSize-1)+"px; cursor: pointer; text-decoration: underline; }",o+=w+" div.receiveFileContent div.selectFileArea p.drop-area-icon i { line-height: 1; font-size: 3em; color: "+g.re.textSize+"; }",o+=_+" div.receiveFileContent { position: relative; line-height: 0; background-color: #FFF; padding: 5px; }",o+=_+" div.receiveFileContent div.selectFileArea { line-height: 3px; }",o+=_+" div.receiveFileContent div.selectFileArea p.preview { text-align: center; }",o+=_+" div.receiveFileContent div.selectFileArea p.preview img.small { max-width: 165px; max-height: 120px; }",o+=_+" div.receiveFileContent div.selectFileArea p.preview img.middle { max-width: 215px; max-height: 188px; }",o+=_+" div.receiveFileContent div.selectFileArea p.preview img.large { max-width: 265px; max-height: 285px; }",o+=_+" div.receiveFileContent div.selectFileArea p.commentarea { text-align: center; width: 100%; }",o+=_+" div.receiveFileContent div.selectFileArea p.commentarea textarea { display: block; margin: 0 auto; border-radius: 0px; width: 97%; height: 40px; resize: none; }",o+=_+" div.receiveFileContent div.selectFileArea p.commentarea textarea:focus { outline: none!important; border-color: "+i.chatSendBtnBackgroundColor+"!important;}",o+=_+" div.receiveFileContent div.actionButtonWrap { display: flex; justify-content: space-between; width: 97%; margin: 0 auto; font-size: 0px; }",o+=_+" div.receiveFileContent div.actionButtonWrap a:hover { opacity: .8; }",o+=_+" div.receiveFileContent div.actionButtonWrap a.cancel-file-button { display: block; margin-right: 2px; width: 49%; height: auto; padding: 5px 10px; border-radius: 0; text-decoration: none; cursor: pointer; margin: 0 auto; text-align: center; background-color: #7F7F7F!important; color: #FFF; font-weight: normal; word-break: keep-all; }",o+=_+" div.receiveFileContent div.actionButtonWrap a.send-file-button { display: block; margin-left: 2px; width: 49%; height: auto; padding: 5px 10px; border-radius: 0; text-decoration: none; cursor: pointer; margin: 0 auto; text-align: center; background-color: "+i.chatSendBtnBackgroundColor+"; color: "+i.chatSendBtnTextColor+"; font-weight: normal; word-break: keep-all; }",o+="#sincloBox #chatTalk li div div.loadingPopup { display: flex; flex-flow: column nowrap; justify-content: center; align-items: center; text-align:center; vertical-align: middle; color: #FFF; background-color: rgba(0, 0, 0, 0.7); position: absolute; top:0; right: 0; bottom: 0; left: 0; }",o+="#sincloBox #chatTalk li div div.loadingPopup.hide { display: none; }",o+="#sincloBox #chatTalk li div div.loadingPopup i { font-size: 6em; text-align:center; color: #FFF; }",o+="#sincloBox #chatTalk li div div.loadingPopup p.progressMessage { text-align:center; color: #FFF; }",o+="#sincloBox #chatTalk li div div.loadingPopup i.load { -webkit-animation: spin 1.5s linear infinite; -moz-animation: spin 1.5s linear infinite; -ms-animation: spin 1.5s linear infinite; -o-animation: spin 1.5s linear infinite; animation: spin 1.5s linear infinite; }",o+="@-webkit-keyframes spin { 0% {-webkit-transform: rotate(0deg);} 100% {-webkit-transform: rotate(360deg);} }",o+="@-moz-keyframes spin { 0% {-moz-transform: rotate(0deg);} 100% {-moz-transform: rotate(360deg);} }",o+="@-ms-keyframes spin { 0% {-ms-transform: rotate(0deg);} 100% {-ms-transform: rotate(360deg);} }",o+="@-o-keyframes spin { 0% {-o-transform: rotate(0deg);} 100% {-o-transform: rotate(360deg);} }",o+="@keyframes spin { 0% {transform: rotate(0deg);} 100% {transform: rotate(360deg);} }",o+="#sincloBox #chatTalk li.sinclo_re.sinclo_form { display: block; padding: 10px 15px 15px 15px; line-height: 0; }",o+="#sincloBox #chatTalk li.sinclo_re div.formContentArea { margin: 0; line-height: 0; }",o+="#sincloBox #chatTalk li.sinclo_re div.formContentArea p.formMessage { color: "+g.re.color+"; }",o+="#sincloBox #chatTalk li.sinclo_re div.formArea { background-color: #FFF; line-height: 0; padding: 10px 10px 0 10px; margin-top: 10px; }",o+="#sincloBox #chatTalk li.sinclo_re div.formElement { line-height: 0; color: #333; display: flex; justify-content: stretch; flex-flow: column nowrap; }",o+="#sincloBox #chatTalk li.sinclo_re div.formElement.withMB { margin-bottom: 8px; }",o+="#sincloBox #chatTalk li.sinclo_re div.formElement label.formLabel { margin-bottom: 3px; }",o+="#sincloBox #chatTalk li.sinclo_re div.formElement label.formLabel span.require { color: #7F0000 }",o+="#sincloBox #chatTalk li.sinclo_re div.formElement input.formInput { padding: 5px; border: 1px solid "+g.re.backgroundColor+"; }",o+="#sincloBox #chatTalk li.sinclo_re div.formArea p.formOKButtonArea { margin-top: 20px; margin-bottom: 20px; display: flex; align-items: center; justify-content: center;  }",o+="#sincloBox #chatTalk li.sinclo_re div.formArea p.formOKButtonArea span.formOKButton { width: 100px; height: 30px; cursor: pointer; display: inline-flex; justify-content: center; align-items: center; border-radius: 12px; background-color: "+i.chatSendBtnBackgroundColor+"; color: "+i.chatSendBtnTextColor+";  }",o+="#sincloBox #chatTalk li.sinclo_re div.formArea p.formOKButtonArea span.formOKButton:hover { opacity: 0.8; }",o+="#sincloBox #chatTalk li.sinclo_re div.formArea p.formOKButtonArea span.formOKButton.disabled { opacity: 0.38; cursor: auto; }",o+="#sincloBox #chatTalk li.sinclo_se.sinclo_form { display: block; padding: 15px; line-height: 0; }",o+="#sincloBox #chatTalk li.sinclo_se div.formContentArea { margin: 0; line-height: 0; }",o+="#sincloBox #chatTalk li.sinclo_se div.formArea { background-color: #FFF; line-height: 0; padding: 10px 10px 0 10px; }",o+="#sincloBox #chatTalk li.sinclo_se div.formElement { color: #333; display: flex; justify-content: stretch; flex-flow: column nowrap; }",o+="#sincloBox #chatTalk li.sinclo_se div.formElement.withMB { margin-bottom: 8px; }",o+="#sincloBox #chatTalk li.sinclo_se div.formElement label.formLabel { margin-bottom: 3px; }",o+="#sincloBox #chatTalk li.sinclo_se div.formElement label.formLabel span.require { color: #7F0000 }",o+="#sincloBox #chatTalk li.sinclo_se div.formElement input.formInput { padding: 5px; border: 1px solid "+g.se.backgroundColor+"; }",o+="#sincloBox #chatTalk li.sinclo_se div.formArea p.formOKButtonArea { margin-top: 20px; margin-bottom: 20px; display: flex; align-items: center; justify-content: center;  }",o+="#sincloBox #chatTalk li.sinclo_se div.formArea p.formOKButtonArea span.formOKButton { width: 100px; height: 30px; cursor: pointer; display: inline-flex; justify-content: center; align-items: center; border-radius: 12px; background-color: "+i.chatSendBtnBackgroundColor+"; color: "+i.chatSendBtnTextColor+"; opacity:0.38;  }",o+="#sincloBox #chatTalk li.sinclo_se div.formArea p.formOKButtonArea span.formOKButton.disabled { opacity: 0.38; cursor: auto; }",o+="#sincloBox #chatTalk li.sinclo_se.sinclo_form { display: block; padding: 10px 15px; line-height: 0; }",o+="#sincloBox #chatTalk li.sinclo_se div.formSubmitArea { background-color: transparent; line-height: 0; }",o+="#sincloBox #chatTalk li.sinclo_se div.formSubmitArea div.formElement { display: grid; display: -ms-grid; grid-template-columns: 36% max-content 1fr; -ms-grid-columns: 36% max-content 1fr; color: #333; line-height: 0; }",o+="#sincloBox #chatTalk li.sinclo_se div.formSubmitArea div.formElement.withMB { margin-bottom: 7px; }",o+="#sincloBox #chatTalk li.sinclo_se div.formSubmitArea div.formElement span { display: inline-block; }",o+="#sincloBox #chatTalk li.sinclo_se div.formSubmitArea div.formElement span.formLabel { grid-column: 1/2; grid-row: 1/2; -ms-grid-column: 1; -ms-grid-row: 1; }",o+="#sincloBox #chatTalk li.sinclo_se div.formSubmitArea div.formElement span.formLabel span.require { color: #7F0000 }",o+="#sincloBox #chatTalk li.sinclo_se div.formSubmitArea div.formElement span.formLabelSeparator { margin: 0 3px; grid-column: 2/3; grid-row: 1/2; -ms-grid-column: 2; -ms-grid-row: 1; }",o+="#sincloBox #chatTalk li.sinclo_se div.formSubmitArea div.formElement span.formValue { grid-column: 3/4; grid-row: 1/2; -ms-grid-column: 3; -ms-grid-row: 1; }",o+="#sincloBox #chatTalk li.sinclo_se div.inputFormArea {padding: 10px 10px 1px 10px;}",o+="#sincloBox #chatTalk li.sinclo_se div.inputFormArea .inputFormElement {color: #333; display: flex; justify-content: stretch; flex-flow: column nowrap;}",o+="#sincloBox #chatTalk li.sinclo_se div.inputFormArea .inputFormElement input::placeholder {color:#333; opacity: 0.38}",o+="#sincloBox #chatTalk li.sinclo_se div.inputFormArea .inputFormElement input:-ms-input-placeholder {color:#333; opacity: 0.38}",o+="#sincloBox #chatTalk li.sinclo_se div.inputFormArea .inputFormElement input::-webkit-input-placeholder {color:#333; opacity: 0.38}",o+="#sincloBox #chatTalk li.sinclo_se div.inputFormArea .inputFormElement .inputFormLabel {margin-bottom: "+3*common.getRatio()+"px; font-size: 13px;}",o+="#sincloBox #chatTalk li.sinclo_se div.inputFormArea .inputFormElement .inputWrap {display:flex;justify-content:space-between;}",o+="#sincloBox #chatTalk li.sinclo_se div.inputFormArea .inputFormElement .firstName, #sincloBox #chatTalk div.formArea .formElement .lastName {width: 49%;}",o+="#sincloBox #chatTalk li.sinclo_se div.inputFormArea .inputFormElement .lastName, #sincloBox #chatTalk div.formArea .formElement .firstName {margin-left: "+2*common.getRatio()+"px;width: 50%;}",o+="#sincloBox #chatTalk li.sinclo_se.smallSize div.inputFormArea .inputFormElement .lastName {width: 49%;}",o+="#sincloBox #chatTalk li.sinclo_se div.inputFormArea .inputFormElement .phone1 {width: 30%;}",o+="#sincloBox #chatTalk li.sinclo_se div.inputFormArea .inputFormElement .phone2 {  margin-left: "+4*common.getRatio()+"px;  width: 33%; }",o+="#sincloBox #chatTalk li.sinclo_se div.inputFormArea .inputFormElement .phone3 {margin-left: "+4*common.getRatio()+"px;  width: 33%; }",o+="#sincloBox #chatTalk li.sinclo_se.smallSize div.inputFormArea .inputFormElement .phone3 {  margin-left: "+4*common.getRatio()+"px;  width: 32%; }",o+="#sincloBox #chatTalk li.sinclo_se.middleSize div.inputFormArea .inputFormElement .phone3 {  margin-left: "+4*common.getRatio()+"px;  width: 33%; }",o+="#sincloBox #chatTalk li.sinclo_se div.inputFormArea .inputFormElement div.section-mail { display: flex; justify-content: flex-start; align-items: center; }",o+="#sincloBox #chatTalk li.sinclo_se div.inputFormArea .inputFormElement .mail1 { min-width: 68px; flex-basis: 49%; flex-shrink: 2; }",o+="#sincloBox #chatTalk li.sinclo_se div.inputFormArea .inputFormElement .mail2 { max-width: 100%; min-width: 68px; flex-basis: 42%; }",o+="#sincloBox #chatTalk li.sinclo_se div.inputFormArea .inputFormElement .textInput {  width: 100%; height: auto; margin: 0px; border-radius: 0;}",o+="#sincloBox #chatTalk li.sinclo_se div.inputFormArea .inputFormElement .postcode {  max-width: 38%; }",o+="#sincloBox #chatTalk li.sinclo_se div.inputFormArea .inputFormElement .year {  width: auto; }",o+="#sincloBox #chatTalk li.sinclo_se.middleSize div.inputFormArea .inputFormElement .year {  width: auto; }",o+="#sincloBox #chatTalk li.sinclo_se.smallSize div.inputFormArea .inputFormElement .year {  min-width: 65px; }",o+="#sincloBox #chatTalk li.sinclo_se div.inputFormArea .inputFormElement .month {  width: auto; }",o+="#sincloBox #chatTalk li.sinclo_se.middleSize div.inputFormArea .inputFormElement .month {  width: auto; }",o+="#sincloBox #chatTalk li.sinclo_se.smallSize div.inputFormArea .inputFormElement .month { min-width: 46px; }",o+="#sincloBox #chatTalk li.sinclo_se div.inputFormArea .inputFormElement .date {  width: auto; }",o+="#sincloBox #chatTalk li.sinclo_se.middleSize div.inputFormArea .inputFormElement .date {  width: auto; }",o+="#sincloBox #chatTalk li.sinclo_se.smallSize div.inputFormArea .inputFormElement .date {  min-width: 46px; }",o+="#sincloBox #chatTalk li.sinclo_se div.inputFormArea .inputFormElement select {  padding: "+3*common.getRatio()+"px!important; font-size: "+common.getFontSize(13)+"px!important; margin-bottom: 0!important; background: url(none); -webkit-appearance: menulist; }",o+="#sincloBox #chatTalk li.sinclo_se div.inputFormArea .inputFormElement input {  padding: "+5*common.getRatio()+"px; }",o+="#sincloBox #chatTalk li.sinclo_se div.inputFormArea .inputFormElement textarea {  padding: "+5*common.getRatio()+"px;  border-radius: 0; }",o+="#sincloBox #chatTalk li.sinclo_se div.inputFormArea .inputFormOKButtonArea {  margin-top: "+10*common.getRatio()+"px;  margin-bottom: "+10*common.getRatio()+"px;  display: flex;  align-items: center;  justify-content: center; }",o+="#sincloBox #chatTalk li.sinclo_se div.inputFormArea .inputFormOKButtonArea .inputFormOKButton {  width: "+100*common.getRatio()+"px;  height: "+30*common.getRatio()+"px;  cursor: pointer;  display: inline-flex;  justify-content: center;  align-items: center;  border-radius: 12px; }",o+="#sincloBox #chatTalk li.sinclo_re div.cancelReservationArea { margin-top: 10px; }",o+="#sincloBox #chatTalk li.sinclo_re div.cancelReservationArea a { cursor: pointer; text-decoration: underline; }",o+="#sincloBox #chatTalk li.sinclo_re p.sincloButtonWrap { cursor: pointer; background-color: "+g.re.color+"; text-align: center; padding: 10px; margin: 5px 0px;}",o+="#sincloBox #chatTalk li.sinclo_re p.sincloButtonWrap:hover { opacity: 0.8 }",o+="#sincloBox #chatTalk li.sinclo_re p.sincloButtonWrap span.sincloButton { color: "+g.re.backgroundColor+"; font-size: "+g.re.textSize+"px;}",o+="#sincloBox #chatTalk li.sinclo_re.withButton { line-height: 0; }",o+="#sincloBox #chatTalk li.sinclo_re.no-wrap { padding: 10px 0 0 0; display: block; }",o+="#sincloBox #chatTalk li.sinclo_re.noText { padding-top: 0px; }",o+="#sincloBox #chatTalk li.sinclo_re.all-round { border-radius: 12px!important; }",o+="#sincloBox #chatTalk li.sinclo_re.no-wrap span.sinclo-text-line { padding: 0 15px!important; }",o+="#sincloBox #chatTalk li.sinclo_re div.sincloHearingButtons span.sincloHearingButton { display: flex; cursor: pointer; justify-content: center; align-items: center; width: 100%; padding: 12px; text-align:center; }",o+="#sincloBox #chatTalk li.sinclo_re div.sincloHearingButtons span.sincloHearingButton.alignLeft { flex-direction: row!important; text-align: left; justify-content: flex-start; }",o+="#sincloBox #chatTalk li.sinclo_re div.sincloHearingButtons span.sincloHearingButton.alignRight { flex-direction: row!important; text-align: right; justify-content: flex-end; }",o+="#sincloBox #chatTalk li.sinclo_re div.sincloHearingButtons span.sincloHearingButton:active { background-color: #E7E7E7; }",o+="#sincloBox #chatTalk li.sinclo_re div.sincloHearingButtons.sideBySide span.sincloHearingButton:first-child { border-bottom-left-radius: 12px; }",o+="#sincloBox #chatTalk li.sinclo_re div.sincloHearingButtons.sideBySide span.sincloHearingButton:last-child { border-bottom-right-radius: 12px; }",o+="#sincloBox #chatTalk li.sinclo_re div.sincloHearingButtons:not(.sideBySide) span.sincloHearingButton:last-child { border-bottom-left-radius: 12px; border-bottom-right-radius: 12px; }",o+="#sincloBox #chatTalk li.sinclo_re select {cursor: pointer;}",o+="#sincloBox #chatTalk li.sinclo_re div.flatpickr-calendar.disable { pointer-events: none!important; opacity: 0.5!important; }",o+="#sincloBox #chatTalk li.sinclo_se div.flatpickr-calendar.disable { pointer-events: none!important; opacity: 0.5!important; }",o+="#sincloBox #chatTalk li.sinclo_re.diagram_msg button { border: 0; border-radius: 0; }",1===i.widgetInsideBorderNone&&(o+="      #sincloBox section#chatTab sinclo-div:not(#flexBoxWrap) { border-top: none!important;}"),2===e.chatInitShowTextarea&&(o+="    #sincloBox section#chatTab sinclo-div#flexBoxWrap { display: none; }"),o+="      #sincloBox section#chatTab sinclo-div #sincloChatMessage, #sincloBox section#chatTab sinclo-div #miniSincloChatMessage { display: block; height: 100%; min-height: 100%!important; margin: 0; width: 80%; resize: none; font-weight: 400; border-radius: 0; color: "+i.messageBoxTextColor+"!important; background-color: "+i.messageBoxBackgroundColor+"; font-size: "+e.messageBoxTextSize+"px;}",o+="      #sincloBox section#chatTab sinclo-div #sincloChatMessage:disabled, #sincloBox section#chatTab sinclo-div #miniSincloChatMessage:disabled { background-color: "+i.messageBoxBackgroundColor+"; opacity: 1; }",o+="      #sincloBox section#chatTab sinclo-div #sincloChatMessage:focus, #sincloBox section#chatTab sinclo-div #miniSincloChatMessage:focus { outline: none; border-color: "+i.mainColor+"!important }",0===i.messageBoxBorderNone&&(o+="      #sincloBox section#chatTab sinclo-div #sincloChatMessage, #sincloBox section#chatTab sinclo-div #miniSincloChatMessage { border-right-color: "+i.chatSendBtnBackgroundColor+"!important; }",o+="      #sincloBox section#chatTab sinclo-div #sincloChatMessage:focus, #sincloBox section#chatTab sinclo-div #miniSincloChatMessage:focus { border-color: "+i.mainColor+"!important }"),o+="      #sincloBox section#chatTab sinclo-div #sincloChatSendBtn, #sincloBox section#chatTab sinclo-div #miniSincloChatSendBtn { display: flex;justify-content:center; align-items: center; height: 100%; width: 20%; text-decoration: none; border-radius: 0 5px 5px 0; cursor: pointer; margin: 0; text-align: center; background-color: "+i.chatSendBtnBackgroundColor+"; color: "+i.chatSendBtnTextColor+"; font-weight: bold;}",o+="      #sincloBox section#chatTab sinclo-div #sincloChatSendBtn span, #sincloBox section#chatTab sinclo-div #miniSincloChatSendBtn span {color: "+i.chatSendBtnTextColor+"; }",(window.sincloInfo.contract.synclo||window.sincloInfo.contract.hasOwnProperty("document")&&window.sincloInfo.contract.document||scl_check.isset(e.showAccessId)&&1===e.showAccessId)&&(1===e.chatMessageCopy?o+="      #sincloBox section#chatTab #sincloAccessInfo { height: "+n.sincloAccessInfoHeight+"px; text-align: left; padding-left: 0.5em; padding-top: 5px; padding-bottom: 5px; font-size: 0.9em; border-top: 1px solid "+i.widgetInsideBorderColor+"; user-select: none;-moz-user-select: none;-webkit-user-select: none;-ms-user-select: none; }":o+="      #sincloBox section#chatTab #sincloAccessInfo { height: "+n.sincloAccessInfoHeight+"px; text-align: left; padding-left: 0.5em; padding-top: 5px; padding-bottom: 5px; font-size: 0.9em; border-top: 1px solid "+i.widgetInsideBorderColor+" }",1===i.widgetInsideBorderNone&&(o+="      #sincloBox section#chatTab #sincloAccessInfo { border-top: none!important; }"))}if(o+="      #sincloBox section#navigation { position: relative; display: block; top: 0px!important; background: #FFF!important; }",o+="      #sincloBox section#navigation ul { display: table; padding: 0; position: absolute; top: 0; left: 0; }",1===e.chatMessageCopy?o+="      #sincloBox #fotter { text-align: center; color: #A1A1A1!important; background-color: #FFF; margin: 0;border-top: none; user-select: none;-moz-user-select: none;-webkit-user-select: none;-ms-user-select: none;}":o+="      #sincloBox #fotter { text-align: center; color: #A1A1A1!important; background-color: #FFF; margin: 0;border-top: none; }",o+="      #sincloBox section#navigation ul li { position: relative; overflow: hidden; cursor: pointer; color: "+i.otherTextColor+"; text-align: center; display: table-cell; line-height: inherit!important; }",o+="      #sincloBox section#navigation ul li.selected { background-color: "+i.chatTalkBackgroundColor+"; }",o+='      #sincloBox section#navigation ul li::before{ color: #BCBCBC; content: " "; display: inline-block; position: relative; background-size: contain; vertical-align: middle; background-repeat: no-repeat }',o+='      #sincloBox section#navigation ul li.selected::after{ content: " "; position: absolute; bottom: 0px; left: 5px; right: 5px; }',o+='      #sincloBox section#navigation ul li[data-tab="call"]::before{ content: "\\f095"; font-family: SincloFont; font-size: 17px; margin: -5px 7px 0 0; font-weight: bold; }',o+='      #sincloBox section#navigation ul li[data-tab="chat"]::before{ content: "\\f075"; font-family: SincloFont; font-size: 17px; margin: -5px 7px 0 0; transform: scale( 1 , 1.1 ); }',o+="      #sincloBox section#navigation ul li.selected::before{ color: "+i.mainColor+"; }",2!==Number(e.closeButtonSetting)||1!==Number(e.closeButtonModeType)&&3!==Number(e.closeButtonModeType)||(o+="      #sincloBox div#sincloBannerBox #sincloBanner .sinclo-fal { display: inline-block; font-family: SincloFont ; font-style: normal; font-weight: normal; line-height: 1; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; cursor: pointer; }",o+='      #sincloBox div#sincloBannerBox #sincloBanner .sinclo-fal.fa-comment:before { content: "\\f075" }',scl_check.hasCustomBannerImageSetting()||scl_check.hasOriginalImageSetting()?(o+="      #sincloBox div#sincloBannerBox { bottom:0px; right:0px; background-color: transparent; }",o+="      #sincloBox div#sincloBannerBox #sincloBanner.sincloBanner { position: relative; z-index: 1; background-color: transparent; cursor: pointer; }"):(o+="      #sincloBox div#sincloBannerBox { bottom:0px; right:0px; background-color: rgb(255, 255, 255); border-radius: "+e.radiusRatio+"px "+e.radiusRatio+"px "+e.radiusRatio+"px "+e.radiusRatio+"px;}",o+="      #sincloBox div#sincloBannerBox #sincloBanner:hover { opacity:0.75 !important}",o+="      #sincloBox div#sincloBannerBox #sincloBanner.sincloBanner { position: relative; z-index: 1; height: 42px; width : -webkit-fit-content !important; width : -moz-fit-content !important; width : fit-content !important; background-color: "+i.mainColor+"; box-shadow: 0px 0px "+e.boxShadow+"px "+e.boxShadow+"px rgba(0,0,0,0.1); border-radius: "+e.radiusRatio+"px "+e.radiusRatio+"px "+e.radiusRatio+"px "+e.radiusRatio+"px; color: "+i.stringColor+"; margin: auto; filter:alpha(opacity=90); -moz-opacity: 0.9; opacity: 0.9; cursor: pointer; }"),o+="      #sincloBox div#sincloBannerBox #sincloBanner .sincloBannerText{ display: flex; justify-content: center; align-items: center; height: 100%; width: auto!important; margin: 0 5px; }",o+="      #sincloBox div#sincloBannerBox #sincloBanner.sincloBanner i{ color: "+e.stringColor+"; }",o+="      #sincloBox div#sincloBannerBox #sincloBanner.sincloBanner .sinclo-comment{ transform: scale( 1 , 1.4 ); font-size: 17.5px; padding: 0 2px 0 10px; cursor: pointer; }",o+="      #sincloBox div#sincloBannerBox #sincloBanner.sincloBanner .sinclo-comment-notext{ transform: scale( 1 , 1.4 ); font-size: 17.5px; padding: 0 2px 0 13px; cursor: pointer; }",o+="      #sincloBox div#sincloBannerBox #sincloBanner #bannerIcon { width: 24px; height: 24px; opacity: 1; margin: 0px 5px; position: static; }",o+="      #sincloBox div#sincloBannerBox #sincloBanner.sincloBanner .bannertext{ color: "+i.stringColor+"; font-size: 12.5px; cursor: pointer; vertical-align: middle; margin-right: 5px; }",o+="      #sincloBox div#sincloBannerBox #sincloBanner.sincloBanner .notext{ cursor: pointer; }"),o+="      #sincloBox p#fotter.no-hover a:hover { color: #333; }",o+=common.injectCalendarCSS(),o+=common.injectCarouselCss(),o+=common.injectAwesompleteCss(),preventWithdrawalOverlay.isActive()&&(o+=preventWithdrawalOverlay.injectBeforeShowCss(o)),scl_check.objPath(sincloInfo,"custom.widget.header.showOpCallButton")&&sincloInfo.custom.widget.header.showOpCallButton&&(o+=common.injectCallOpButtonCSS(e)),scl_check.smartphone())if(o+="#sincloBox { -webkit-transition: 100ms linear 0ms;  transition: opacity 100ms linear 0ms; }",o+="#sincloBox section#chatTab sinclo-div:not(#flexBoxWrap) { position: relative }",o+="#sincloBox section#chatTab sinclo-chat-alert { position: absolute; background-color: rgba(0,0,0,0.6); box-shadow: 0px 0px 4px 4px rgba(0,0,0,0.1); color: #FFF; text-align: center; }",o+="#sincloBox ul sinclo-typing { padding-bottom: "+30.8*(b=(v=2===e.spMaximizeSizeType?common.getPageWidth():common.getPageWidth()-20)*(1/285))+"px; display: block; }",sinclo.chatApi.sendErrCatchFlg?o+="#sincloBox section#chatTab sinclo-chat-alert { display:block }":o+="#sincloBox section#chatTab sinclo-chat-alert { display:none }",o+="#sincloBox #chatTalk li.sinclo_se div.receiveFileContent div.selectFileArea p.commentarea textarea { font-size: 16px; }",this.isPortrait()){if(2===e.spMaximizeSizeType?o+="#sincloBox { width: "+common.getPageWidth()+"px; right: 0px; left: 0px; }":o+="#sincloBox { width: "+v+"px; }",preventWithdrawalOverlay.isShowOverlayWithMargin()?(o+="#sincloBox div#sincloWidgetBox { box-shadow: 0px 0px "+e.boxShadow*b+"px "+e.boxShadow*b+"px rgba(0,0,0,0.1); border-radius: "+e.radiusRatio*b+"px "+e.radiusRatio*b+"px "+e.radiusRatio*b+"px "+e.radiusRatio*b+"px;}",o+="#sincloBox #fotter { border-radius: 0 0 "+e.radiusRatio*b+"px "+e.radiusRatio*b+"px;}"):o+="#sincloBox div#sincloWidgetBox { box-shadow: 0px 0px "+e.boxShadow*b+"px "+e.boxShadow*b+"px rgba(0,0,0,0.1); border-radius: "+e.radiusRatio*b+"px "+e.radiusRatio*b+"px 0 0;}",o+="#sincloBox div#sincloWidgetBox { box-shadow: 0px 0px "+e.boxShadow*b+"px "+e.boxShadow*b+"px rgba(0,0,0,0.1); border-radius: "+e.radiusRatio*b+"px "+e.radiusRatio*b+"px 0 0;}",o+="#sincloBox * { font-size: "+12*b+"px; }",o+="#sincloBox section { width: "+v+"px }",o+="#sincloBox section#navigation ul { width: "+v+"px }",o+="#sincloBox span#mainImage { top: "+7*b+"px; left: "+8*b+"px; }",o+="#sincloBox sinclo-div#widgetHeader:after { top: "+35*b+"px }",o+="      #sincloBox #mainImage em { position:absolute; }",o+="#sincloBox p#widgetTitle { border-radius: "+e.radiusRatio*b+"px "+e.radiusRatio*b+"px 0 0; border: "+1*b+"px solid "+i.mainColor+"; font-size: "+14*b+"px; padding: "+7*b+"px "+30*b+"px; height: "+32*b+"px;  line-height: 1.3 !important;}",1!==e.widgetSizeType&&(o+="#sincloBox p#widgetTitle { overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}"),o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv.customSize { max-width: "+42*b+"px; min-width: "+42*b+"px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv.customSize .img_wrapper { width: "+40*b+"px; height: "+40*b+"px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv.customSize .img_wrapper img { max-width: "+40*b+"px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv.customSize i { height: "+40*b+"px; width: "+40*b+"px; font-size: "+26*b+"px }",o+="#sincloBox p#widgetTitle #sincloChatUnread { width: "+25*b+"px; height: "+25*b+"px; font-size: "+13*b+"px; border-radius: "+15*b+"px; margin: "+2.5*b+"px "+6*b+"px; padding: "+3*b+"px; }",o+="#sincloBox div#minimizeBtn { display: none; top: "+6*b+"px; right: "+10*b+"px; bottom: "+6*b+"px; width: "+20*b+"px; height: "+20*b+"px; z-index: 2; }",o+="#sincloBox #fw-minimize-btn i {top: "+-1*b+"px; right: "+7*b+"px; font-size: "+26*b+"px;}",o+="#sincloBox #fw-close-btn {top: "+3*b+"px; right: "+5*b+"px;height: "+27*b+"px; width: "+27*b+"px; }",o+="#sincloBox #fw-close-btn i {font-size: "+27*b+"px; line-height: "+1.25*b+"}",Number(e.closeButtonSetting),o+="#sincloBox div#closeBtn { display: none; top: "+7*b+"px; right: "+10*b+"px; bottom: "+6*b+"px; width: "+18*b+"px; height: "+18*b+"px; z-index: 2; }",o+="      #sincloBox span#mainImage i {display: flex; justify-content: center; align-items: center; width: 80px; height: 70px; font-size: calc(43px * ((3 * 15 + 36) / 81)); border: 1px solid; }",o+="      #sincloBox p#widgetTitle { border-radius: "+e.radiusRatio*b+"px "+e.radiusRatio*b+"px 0 0; font-size: "+14*b+"px; padding: "+7*b+"px 0px "+7*b+"px 0px; height: "+32*b+"px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;}",o+="      #sincloBox p#widgetTitle.leftPosition { text-align: left; padding-left: "+70*b+"px;}",o+="      #sincloBox p#widgetTitle.leftPosition.noImage { padding-left: "+15*b+"px;}",o+="      #sincloBox p#widgetTitle.centerPosition { padding-right: "+30*b+"px; padding-left: calc(2.5em + 38px);}",o+="      #sincloBox p#widgetTitle.centerPosition.noImage { padding-left: 0px; padding-right: 0px; }",o+="      #sincloBox p#widgetSubTitle { background-color: "+i.headerBackgroundColor+"; border-color: "+i.widgetBorderColor+"; font-weight: bold; color: "+i.subTitleTextColor+"; border-style: solid; text-align: left; margin: 0; padding: "+7*b+"px 0; border-width: 0 "+1*b+"px 0 "+1*b+"px; padding-left: "+74*b+"px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden; line-height: 1.3 !important;}",o+="      #sincloBox p#widgetSubTitle.leftPosition { padding-left: "+70*b+"px;}",o+="      #sincloBox p#widgetSubTitle.leftPosition.noImage { padding-left: "+15*b+"px;}",o+="      #sincloBox p#widgetSubTitle.centerPosition { text-align: center; padding-right: "+30*b+"px; padding-left: calc(2.5em + 38px * "+b+");}",o+="      #sincloBox p#widgetSubTitle.centerPosition.noImage { padding-left: 0px; padding-right: 0px;}",o+="      #sincloBox p#widgetSubTitle.oneContent { line-height: calc((1em + 9px)*2)!important; padding-bottom: "+3.5*b+"px; padding-top: "+4.5*b+"px; border-bottom: 1px "+i.widgetBorderColor+" solid;}",1===i.widgetInsideBorderNone&&(o+="      #sincloBox p#widgetSubTitle.oneContent{ border:none;}"),o+="      #sincloBox p#widgetDescription.leftPosition { padding-left: "+70*b+"px;}",o+="      #sincloBox p#widgetDescription.leftPosition.noImage { padding-left: "+15*b+"px;}",o+="      #sincloBox p#widgetDescription.centerPosition { text-align: center; padding-right: "+30*b+"px; padding-left: calc(2.5em + 38px * "+b+");}",o+="      #sincloBox p#widgetDescription.centerPosition.noImage { padding-left: 0px; padding-right: 0px;}",o+="      #sincloBox p#widgetDescription.oneContent { line-height: calc((1em + 9px)*2)!important; padding-bottom: "+3.5*b+"px; padding-top: "+4.5*b+"px;}",1!==e.widgetSizeType&&(o+="#sincloBox p#widgetSubTitle { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }"),1===i.widgetBorderNone&&(o+="#sincloBox p#widgetSubTitle { border:none; }"),o+="#sincloBox p#widgetDescription { background-color: "+i.headerBackgroundColor+"; margin: 0; padding-bottom: "+7*b+"px; border-width: 0 "+1*b+"px "+1*b+"px "+1*b+"px; padding-left: "+74*b+"px; text-align: left; border-color: "+i.widgetBorderColor+"; border-style: solid; color: "+i.descriptionTextColor+"; border-bottom-color:"+i.widgetInsideBorderColor+";  line-height: 1.3 !important;}",1!==e.widgetSizeType&&(o+="#sincloBox p#widgetDescription { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }"),1===i.widgetBorderNone&&(o+="#sincloBox p#widgetDescription { border-left:none; border-right:none;}"),o+="#sincloBox section { border: "+1*b+"px solid "+i.widgetBorderColor+"; border-top: none; border-bottom: "+1*b+"px solid "+i.widgetInsideBorderColor+";}",1===i.widgetBorderNone&&(o+="#sincloBox section { border-top: none; border-left:none; border-right:none; }"),1===i.widgetInsideBorderNone&&(o+="#sincloBox p#widgetDescription { border-bottom:none!important;}",o+="#sincloBox section { border-bottom:none!important;}"),o+="#sincloBox p#widgetTitle.notSimple { padding-left: "+70*b+"px; }",o+="#sincloBox p#widgetTitle.noImage { padding-left: "+30*b+"px; }",o+="#sincloBox #mainImage em { top: -"+10*b+"px; right: -"+10*b+"px; width: "+25*b+"px; height: "+20*b+"px; font-size: "+11*b+"px; padding: "+1*b+"px; }",e.spMaximizeSizeType,o+="#sincloBox ul#chatTalk { padding: "+5*b+"px; padding-top:0px; height: "+194*b+"px; background-color: "+i.chatTalkBackgroundColor+" }",o+="#sincloBox ul#chatTalk li { border-radius: "+12*b+"px; margin: "+5*b+"px 0; padding: "+10*b+"px "+10*b+"px; font-size: "+12*b+"px; }",o+="#sincloBox ul#chatTalk li.sinclo_se { font-size: "+12*b+"px; margin-left: "+v/342.5*45+"px;}",o+="#sincloBox ul#chatTalk li.sinclo_re { font-size: "+12*b+"px; margin-right: "+v/342.5*21+"px;}",o+="#sincloBox ul#chatTalk li.sinclo_se span.sinclo-text-line { font-size: "+12*b+"px; }",o+="#sincloBox ul#chatTalk li.sinclo_re span.sinclo-text-line { font-size: "+12*b+"px; }",o+="#sincloBox ul#chatTalk li div.sendFileThumbnailArea { display: table-cell; width: "+64*b+"px; height: "+64*b+"px; border: 1px solid #D9D9D9; }",0===i.seBorderNone&&(o+="#sincloBox ul#chatTalk li.sinclo_se { border: "+1*b+"px solid "+g.se.borderColor+"; }"),0===i.reBorderNone&&(o+="#sincloBox ul#chatTalk li.sinclo_re { border: "+1*b+"px solid "+g.re.borderColor+"; }"),o+="#sincloBox ul#chatTalk li sinclo-radio { margin-top: "+Number(e.btwButtonMargin)*b+"px; display: inline-block; } ",o+="#sincloBox ul#chatTalk li span.sinclo-text-line + sinclo-radio { margin-top: "+Number(e.lineButtonMargin)*b+"px; } ",2===e.chatMessageDesignType&&(o+="#sincloBox ul#chatTalk li { line-height: 1.4; padding: "+10*b+"px "+15*b+"px !important; border-radius: "+12*b+"px !important;}"),o+="#sincloBox ul#chatTalk div.grid_for_icon li.sinclo_re { -ms-grid-column-align: start; -ms-grid-column: "+2*b+"; }",o+="#sincloBox ul#chatTalk div.grid_for_icon li.noneBalloon { -ms-grid-column-align: start; -ms-grid-column: "+2*b+"; }",o+="#sincloBox ul#chatTalk div.grid_for_icon.smallSize li.sinclo_re { margin-left: "+1*b+"px; }",o+="#sincloBox ul#chatTalk div.grid_for_icon.smallSize li.noneBalloon { margin-left: "+1*b+"px; }",o+="#sincloBox ul#chatTalk div.grid_for_icon.middleSize li.sinclo_re { margin-left: "+3*b+"px; }",o+="#sincloBox ul#chatTalk div.grid_for_icon.middleSize li.noneBalloon { margin-left: "+3*b+"px; }",o+="#sincloBox ul#chatTalk div.grid_for_icon.largeSize li.sinclo_re { margin-left: "+5*b+"px; }",o+="#sincloBox ul#chatTalk div.grid_for_icon.largeSize li.noneBalloon { margin-left: "+5*b+"px; }",o+="#sincloBox ul#chatTalk div.grid_for_icon.customSize li.sinclo_re { margin-left: "+5*b+"px; }",o+="#sincloBox ul#chatTalk div.grid_for_icon.customSize li.noneBalloon { margin-left: "+5*b+"px; }",o+="#sincloBox ul#chatTalk div.grid_for_icon .iconDiv i.fa-comment-alt-lines { padding-top: "+4*b+"px; }",o+="#sincloBox ul#chatTalk div.grid_for_icon .iconDiv i.fa-comments-alt { padding-top: "+2*b+"px; }",o+="#sincloBox ul#chatTalk div.grid_for_icon .iconDiv i.fa-phone { padding-top: "+2*b+"px; }",o+="#sincloBox ul#chatTalk div.grid_for_icon .iconDiv i.icon_border { border:"+1*b+"px solid;}",o+="#sincloBox ul#chatTalk div.grid_for_icon .iconDiv.smallSize { max-width: "+30*b+"px; min-width: "+30*b+"px; }",o+="#sincloBox ul#chatTalk div.grid_for_icon .iconDiv.smallSize .img_wrapper { width: "+30*b+"px; height:"+30*b+"px; }",o+="#sincloBox ul#chatTalk div.grid_for_icon .iconDiv.smallSize .img_wrapper img { max-width: "+30*b+"px; }",o+="#sincloBox ul#chatTalk div.grid_for_icon .iconDiv.smallSize i { height: "+30*b+"px; width: "+30*b+"px; font-size: "+20*b+"px }",o+="#sincloBox ul#chatTalk div.grid_for_icon .iconDiv.middleSize { max-width: "+37*b+"px; min-width: "+37*b+"px; }",o+="#sincloBox ul#chatTalk div.grid_for_icon .iconDiv.middleSize .img_wrapper { width: "+35*b+"px; height: "+35*b+"px; }",o+="#sincloBox ul#chatTalk div.grid_for_icon .iconDiv.middleSize .img_wrapper img { max-width: "+35*b+"px; }",o+="#sincloBox ul#chatTalk div.grid_for_icon .iconDiv.middleSize i { height: "+35*b+"px; width: "+35*b+"px; font-size: "+23*b+"px }",o+="#sincloBox ul#chatTalk div.grid_for_icon .iconDiv.largeSize { max-width: "+42*b+"px; min-width: "+42*b+"px; }",o+="#sincloBox ul#chatTalk div.grid_for_icon .iconDiv.largeSize .img_wrapper { width: "+40*b+"px; height: "+40*b+"px; }",o+="#sincloBox ul#chatTalk div.grid_for_icon .iconDiv.largeSize .img_wrapper img { max-width: "+40*b+"px; }",o+="#sincloBox ul#chatTalk div.grid_for_icon .iconDiv.largeSize i { height: "+40*b+"px; width: "+40*b+"px; font-size: "+26*b+"px }",o+="#sincloBox ul#chatTalk li .sinclo-pulldown { margin-top: "+10*b+"px; height:auto; font-size: "+(16<=12*b?12*b:16)+"px;}",o+="#sincloBox ul#chatTalk li button { cursor: pointer; min-height: "+35*b+"px; margin-bottom: "+1*b+"px; padding: "+10*b+"px "+15*b+"px; }",o+=common.injectMobileCalendarCSS(b),o+='#sincloBox ul#chatTalk li sinclo-radio [type="radio"] { margin-right: 0.5em } ',o+="#sincloBox ul#chatTalk li sinclo-radio * { webkit-transform: scale("+1*b+"); transform: scale("+1*b+"); moz-transform: scale("+1*b+"); } ",o+='#sincloBox ul#chatTalk li sinclo-radio [type="radio"] + label { display: inline; padding-left: 1.5em; font-size: '+12*b+"px; } ",o+='#sincloBox ul#chatTalk li sinclo-radio [type="radio"] + label:before { content: ""; display: block; position: absolute; top: '+(11*b/2-5*b)+"px; margin-top: -"+11*b/2+"px; left: "+0*b+"px; width: "+11*b+"px; height: "+11*b+"px; border: 1px solid "+t+"; border-radius: 50%; background-color: #FFF; } ",o+='#sincloBox ul#chatTalk li sinclo-radio [type="radio"]:checked + label:after { content: ""; display: block; position: absolute; top: '+13*b/2+"px; left: "+11*b/4+"px; margin-top: -"+11*b/4+"px; width: "+Math.ceil(11*b/2+1)+"px; height: "+Math.ceil(11*b/2+1)+"px; background: "+i.mainColor+"; border-radius: 50%; } ",o+='#sincloBox ul#chatTalk li [id^="sinclo-radio-button"] sinclo-radio { font-size: '+12*b+"px;}",o+='#sincloBox ul#chatTalk li [id^="sinclo-radio-button"] sinclo-radio [type="radio"] + label { font-size: '+12*b+"px;}",o+='#sincloBox ul#chatTalk li [id^="sinclo-radio-button"] sinclo-radio [type="radio"] + label:before {top: '+(11*b/2-5*b)+"px;  left: 0; width: "+12*b+"px; height: "+12*b+"px; }",o+='#sincloBox ul#chatTalk li [id^="sinclo-radio-button"] sinclo-radio [type="radio"] + label:after {top: '+(19*b/2-3.5*b)+"px;  left: "+(11*b/4+.1*b)+"px; margin-top: "+(0-11*b/4)+"px; width: "+7*b+"px; height: "+7*b+"px; }",o+=" #sincloBox ul#chatTalk li .sinclo-checkbox { font-size: "+12*b+"px;}",o+=" #sincloBox ul#chatTalk li .sinclo-checkbox .checkmark { width: "+13*b+"px; height: "+13*b+"px;}",o+=' #sincloBox ul#chatTalk li .sinclo-checkbox .checkmark:after {content: "";position: absolute;display: none;left: '+3*b+"px;top: "+1*b+"px;width: "+3*b+"px;height: "+5*b+"px;border-width: 0 "+2*b+"px "+2*b+"px 0;-webkit-transform: rotate(45deg);-ms-transform: rotate(45deg);transform: rotate(45deg);}",o+="#sincloBox ul#chatTalk li .sinclo-checkbox.labelStyle { padding-left: "+20*b+"px}",o+="#sincloBox ul#chatTalk li .sinclo-checkbox.buttonStyle .checkmark {top: "+9*b+"px;left: "+8*b+"px; }",o+="#sincloBox ul#chatTalk li .sinclo-checkbox.buttonStyle {padding: "+8*b+"px "+8*b+"px "+8*b+"px "+28*b+"px;}",o+="#sincloBox ul#chatTalk li span.ok-button {width: "+100*b+"px; height: "+30*b+"px; line-height: "+30*b+"px; margin-top: "+10*b+"px; border-radius: "+12*b+"px;}",o+="#sincloBox ul#chatTalk li .slick-dots li button:before {\n          font-size: "+6*b+"px;\n          line-height: "+20*b+"px;\n          width: "+20*b+"px;\n          height: "+20*b+"px;\n        }",o+="#sincloBox ul#chatTalk li.carousel_msg {padding: "+10*b+"px "+40*b+"px;}#sincloBox ul#chatTalk li.insideArrow { padding: "+10*b+"px "+15*b+"px; }#sincloBox ul#chatTalk li.outsideArrow { padding: "+10*b+"px "+40*b+"px; }#sincloBox ul#chatTalk li.noneBalloon { margin-left: 0; }#sincloBox ul#chatTalk li.outsideArrow .sinclo-text-line{ margin-left: -25px; margin-right: -25px; }",o+="#sincloBox ul#chatTalk li span.cName { font-size: "+13*b+"px; margin: 0 0 "+5*b+"px 0; }",0===i.seBorderNone&&(o+="      #sincloBox ul#chatTalk li.sinclo_se:after {border-left: 5px solid "+g.se.borderColor+"; border-bottom: 5px solid "+g.se.borderColor+"; }"),0===i.reBorderNone&&(o+="      #sincloBox ul#chatTalk li.sinclo_re:after {border-right: 5px solid "+g.re.borderColor+"; border-bottom: 5px solid "+g.re.borderColor+"; }"),o+="#sincloBox ul#chatTalk sinclo-chat-receiver #receiveMessage { font-size: "+10*b+"px; }",o+="#sincloBox section#chatTab sinclo-div:not(#flexBoxWrap) { height: "+60*b+"px; padding: "+5*b+"px; }",0===i.widgetInsideBorderNone&&(o+="#sincloBox section#chatTab sinclo-div:not(#flexBoxWrap) { border-top: "+1*b+"px solid "+i.widgetInsideBorderColor+"; }"),o+="#sincloBox section#chatTab #sincloChatMessage, #sincloBox section#chatTab #miniSincloChatMessage { font-size: "+13*b+"px! important; padding: "+5*b+"px;  }",0===i.messageBoxBorderNone?o+="#sincloBox section#chatTab #sincloChatMessage, #sincloBox section#chatTab #miniSincloChatMessage { font-weight: 400; border-radius: "+5*b+"px 0 0 "+5*b+"px!important; border: "+1*b+"px solid "+i.messageBoxBorderColor+"!important; }":o+="#sincloBox section#chatTab #sincloChatMessage, #sincloBox section#chatTab #miniSincloChatMessage { border: none!important; font-weight: 400; border-radius: 0;}",o+="      #sincloBox ul#chatTalk li.sinclo_etc { border: none; text-align: center!important; margin: 0 auto; font-weight: bold; font-size:14px); }",o+="#sincloBox #chatTalk li.sinclo_re.sinclo_form { padding: "+10*b+"px "+15*b+"px "+15*b+"px "+15*b+"px; }",o+="#sincloBox #chatTalk li.sinclo_re div.formArea { padding: "+10*b+"px "+10*b+"px 0 "+10*b+"px; margin-top: "+10*b+"px; }",o+="#sincloBox #chatTalk li.sinclo_re div.formElement.withMB { margin-bottom: "+8*b+"px; }",o+="#sincloBox #chatTalk li.sinclo_re div.formElement label.formLabel { margin-bottom: "+3*b+"px; }",o+="#sincloBox #chatTalk li.sinclo_re div.formElement input.formInput { padding: "+5*b+"px; border: "+1*b+"px solid "+g.re.backgroundColor+"; }",o+="#sincloBox #chatTalk li.sinclo_re div.formArea p.formOKButtonArea { margin-top: "+20*b+"px; margin-bottom: "+20*b+"px; }",o+="#sincloBox #chatTalk li.sinclo_re div.formArea p.formOKButtonArea span.formOKButton { width: "+100*b+"px; height: "+30*b+"px; border-radius: "+12*b+"px; }",o+="#sincloBox #chatTalk li.sinclo_se.sinclo_form { padding: "+15*b+"px; }",o+="#sincloBox #chatTalk li.sinclo_se div.formContentArea { margin: 0; line-height: 0; }",o+="#sincloBox #chatTalk li.sinclo_se div.formArea { padding: "+10*b+"px "+10*b+"px 0 "+10*b+"px; }",o+="#sincloBox #chatTalk li.sinclo_se div.formElement.withMB { margin-bottom: "+8*b+"px; }",o+="#sincloBox #chatTalk li.sinclo_se div.formElement label.formLabel { margin-bottom: "+3*b+"px; }",o+="#sincloBox #chatTalk li.sinclo_se div.formElement input.formInput { padding: "+5*b+"px; border: "+1*b+"px solid "+g.se.backgroundColor+"; }",o+="#sincloBox #chatTalk li.sinclo_se div.formArea p.formOKButtonArea { margin-top: "+20*b+"px; margin-bottom: "+20*b+"px; }",o+="#sincloBox #chatTalk li.sinclo_se div.formArea p.formOKButtonArea span.formOKButton.disabled { opacity: 0.38; }",o+="#sincloBox section#chatTab sinclo-div#miniFlexBoxHeight { height: "+48*b+"px;  }",o+="#sincloBox section#chatTab #sincloChatSendBtn, #sincloBox section#chatTab #miniSincloChatSendBtn { padding:  "+16.5*b+"px 0; border: "+b+"px solid "+i.chatSendBtnBackgroundColor+"; }",o+="#sincloBox section#chatTab a#miniSincloChatSendBtn { padding: "+8*b+"px 0;  }",o+="#sincloBox section#chatTab sinclo-div #sincloChatSendBtn, #sincloBox section#chatTab sinclo-div #miniSincloChatSendBtn { font-size: "+13*b+"px;}",o+="#sincloBox section#chatTab sinclo-chat-alert { left: 10%; right: 10%; bottom: 50%; border-radius: "+5*b+"px; color: #FFF; padding: "+10*b+"px 0; }",o+="#sincloBox section#navigation { border-width: 0 "+1*b+"px; height: "+48*b+"px; }",o+="#sincloBox section#navigation ul { margin: 0 0 0 -"+1*b+"px; height: "+40*b+"px; }",o+="#sincloBox section#navigation ul li { padding: "+10*b+"px 0; border-left: "+1*b+"px solid #E8E7E0; height: "+40*b+"px;  }",o+="#sincloBox section#navigation ul li:last-child { border-right: "+1*b+"px solid "+i.widgetBorderColor+"; }",1===i.widgetBorderNone&&(o+="#sincloBox section#navigation ul li:last-child { border-right:none; }"),o+="#sincloBox section#navigation ul li:not(.selected) { border-bottom: "+1*b+"px solid "+i.widgetInsideBorderColor+"; }",1===i.widgetInsideBorderNone&&(o+="#sincloBox section#navigation ul li:not(.selected) { border-bottom: none!important;}"),o+="#sincloBox section#navigation ul li.selected::after { border-bottom: "+2*b+"px solid "+i.mainColor+"; left: "+5*b+"px; }",o+="#sincloBox #fotter { padding: "+5*b+"px 0; border: "+1*b+"px solid "+i.widgetBorderColor+"; font-size: "+11*b+"px; border-top: none;}",1===i.widgetBorderNone&&(o+="#sincloBox #fotter { border:none; }"),o+="#sincloBox section#navigation ul li::before { margin-right: "+5*b+"px; width: "+18*b+"px; height: "+18*b+"px; }",o+="#sincloBox #chatTalk li.sinclo_re p.sincloButtonWrap { padding: "+10*b+"px; border-radius: "+12*b+"px; margin: "+5*b+"px 0px; }",o+="#sincloBox #chatTalk li.sinclo_re p.sincloButtonWrap:hover { opacity: 0.8 }",o+="#sincloBox #chatTalk li.sinclo_re p.sincloButtonWrap span.sincloButton { font-size: "+12*b+"px;}",2===Number(e.closeButtonSetting)&&(1===Number(e.closeButtonModeType)||3===Number(e.closeButtonModeType))){if(o+="      #sincloBox div#sincloBannerBox { bottom:0px; right:0px; background: initial;}",common.getWidgetSettings().spBannerPosition){var k="0px",T="0px";switch(1===Number(e.spCustomBannerPosition)&&("string"==typeof e.spBannerHorizontalPosition&&-1!==e.spBannerHorizontalPosition.indexOf("px")?k=parseInt(e.spBannerHorizontalPosition)*b+"px":"string"==typeof e.spBannerHorizontal&&(k=e.spBannerHorizontalPosition),"string"==typeof e.spBannerVerticalPositionFromBottom&&-1!==e.spBannerVerticalPositionFromBottom.indexOf("px")?T=parseInt(e.spBannerVerticalPositionFromBottom)*b+"px":"string"==typeof e.spBannerVerticalPositionFromBottom&&(T=e.spBannerVerticalPositionFromBottom)),Number(common.getWidgetSettings().spBannerPosition)){case 1:scl_check.hasCustomBannerImageSetting()||scl_check.hasOriginalImageSetting()?o+="      #sincloBox div#sincloBannerBox div#sincloBanner.sincloBanner { position: fixed; right: "+k+"; bottom: "+T+"; }":o+="      #sincloBox div#sincloBannerBox div#sincloBanner.sincloBanner { position: fixed; right: "+k+"; bottom: "+T+"; height: "+30*b+"px; box-shadow: 0px 0px "+e.boxShadow*b+"px "+e.boxShadow*b+"px rgba(0,0,0,0.1); border-radius: "+e.radiusRatio*b+"px "+e.radiusRatio*b+"px "+e.radiusRatio*b+"px "+e.radiusRatio*b+"px; }",o+="      #sincloBox div#sincloBannerBox div#sincloBanner.sincloBanner .bannertext{ color: "+e.stringColor+"; font-size: "+10*b+"px; vertical-align: middle; margin-right: "+5*b+"px; }",o+="      #sincloBox div#sincloBannerBox div#sincloBanner div#sincloBannerText #bannerIcon { width: "+Math.ceil(21*b)+"px; height: "+Math.ceil(21*b)+"px; opacity: 1; margin: 0px "+5*b+"px; position: static; }";break;case 2:scl_check.hasCustomBannerImageSetting()||scl_check.hasOriginalImageSetting()?o+="      #sincloBox div#sincloBannerBox div#sincloBanner.sincloBanner { position: fixed; left: "+k+"; bottom: "+T+"; }":o+="      #sincloBox div#sincloBannerBox div#sincloBanner.sincloBanner { position: fixed; left: "+k+"; bottom: "+T+"; height: "+30*b+"px; box-shadow: 0px 0px "+e.boxShadow*b+"px "+e.boxShadow*b+"px rgba(0,0,0,0.1); border-radius: "+e.radiusRatio*b+"px "+e.radiusRatio*b+"px "+e.radiusRatio*b+"px "+e.radiusRatio*b+"px; }",o+="      #sincloBox div#sincloBannerBox div#sincloBanner.sincloBanner .bannertext{ color: "+e.stringColor+"; font-size: "+10*b+"px; vertical-align: middle; margin-right: "+5*b+"px; }",o+="      #sincloBox div#sincloBannerBox div#sincloBanner div#sincloBannerText #bannerIcon { width: "+Math.ceil(21*b)+"px; height: "+Math.ceil(21*b)+"px; opacity: 1; margin: 0px "+5*b+"px; position: static; }";break;case 3:o+="      #sincloBox div#sincloBannerBox div#sincloBanner.sincloBanner { position: fixed; right:"+k+"; top: "+(1===Number(e.spCustomBannerPosition)?e.spBannerVerticalPositionFromTop:"50%")+"; transform: translateY(-50%); height: auto; box-shadow: 0px 0px "+e.boxShadow*b+"px "+e.boxShadow*b+"px rgba(0,0,0,0.1); border-radius:"+e.radiusRatio*b+"px 0 0 "+e.radiusRatio*b+"px; }",o+="      #sincloBox div#sincloBannerBox div#sincloBanner.sincloBanner .bannertext { margin-left: 0px; margin-right: 0; color: "+e.stringColor+"; font-size: "+10*b+"px; vertical-align: middle; -webkit-writing-mode: vertical-rl; -ms-writing-mode: tb-rl; writing-mode: vertical-rl; letter-spacing: 1px;}",o+="      #sincloBox div#sincloBannerBox #sincloBanner .sincloBannerText{ flex-flow: column nowrap; margin: "+Math.ceil(10*b)+"px "+Math.ceil(5*b)+"px; }",o+="      #sincloBox div#sincloBannerBox div#sincloBanner div#sincloBannerText #bannerIcon { width: "+Math.ceil(10*b)+"px; height: "+Math.ceil(10*b)+"px; opacity: 1; margin-bottom: 5px; position: static; }";break;case 4:o+="      #sincloBox div#sincloBannerBox div#sincloBanner.sincloBanner { position: fixed; left:"+k+"; top: "+(1===Number(e.spCustomBannerPosition)?e.spBannerVerticalPositionFromTop:"50%")+"; transform: translateY(-50%); height: auto; box-shadow: 0px 0px "+e.boxShadow*b+"px "+e.boxShadow*b+"px rgba(0,0,0,0.1); border-radius:0 "+e.radiusRatio*b+"px "+e.radiusRatio*b+"px 0; }",o+="      #sincloBox div#sincloBannerBox div#sincloBanner.sincloBanner .bannertext { margin-right: 0px; margin-left: 0; color: "+e.stringColor+"; font-size: "+10*b+"px; vertical-align: middle; -webkit-writing-mode: vertical-rl; -ms-writing-mode: tb-rl; writing-mode: vertical-rl; letter-spacing: 1px;}",o+="      #sincloBox div#sincloBannerBox #sincloBanner .sincloBannerText{ flex-flow: column nowrap; margin: "+Math.ceil(10*b)+"px "+Math.ceil(5*b)+"px; }",o+="      #sincloBox div#sincloBannerBox div#sincloBanner div#sincloBannerText #bannerIcon { width: "+Math.ceil(10*b)+"px; height: "+Math.ceil(10*b)+"px; opacity: 1; margin-bottom: 5px; position: static; }";break;default:o+="      #sincloBox div#sincloBannerBox div#sincloBanner.sincloBanner { position: fixed; right: "+5*b+"px; bottom: "+5*b+"px; height: "+30*b+"px; box-shadow: 0px 0px "+e.boxShadow*b+"px "+e.boxShadow*b+"px rgba(0,0,0,0.1); border-radius: "+e.radiusRatio*b+"px "+e.radiusRatio*b+"px "+e.radiusRatio*b+"px "+e.radiusRatio*b+"px; }",o+="      #sincloBox div#sincloBannerBox div#sincloBanner.sincloBanner .bannertext{ color: "+e.stringColor+"; font-size: "+10*b+"px; vertical-align: middle; margin-right: "+5*b+"px; }",o+="      #sincloBox div#sincloBannerBox div#sincloBanner div#sincloBannerText #bannerIcon { width: "+Math.ceil(21*b)+"px; height: "+Math.ceil(21*b)+"px; opacity: 1; margin: 0px "+5*b+"px; position: static; }"}}else 1===Number(common.getWidgetSettings().showPosition)?o+="      #sincloBox div#sincloBannerBox div#sincloBanner.sincloBanner { position: fixed; right: "+5*b+"px; bottom: "+5*b+"px; height: "+30*b+"px; box-shadow: 0px 0px "+e.boxShadow*b+"px "+e.boxShadow*b+"px rgba(0,0,0,0.1); border-radius: "+e.radiusRatio*b+"px "+e.radiusRatio*b+"px "+e.radiusRatio*b+"px "+e.radiusRatio*b+"px; }":o+="      #sincloBox div#sincloBannerBox div#sincloBanner.sincloBanner { position: fixed; left: "+5*b+"px; bottom: "+5*b+"px; height: "+30*b+"px; box-shadow: 0px 0px "+e.boxShadow*b+"px "+e.boxShadow*b+"px rgba(0,0,0,0.1); border-radius: "+e.radiusRatio*b+"px "+e.radiusRatio*b+"px "+e.radiusRatio*b+"px "+e.radiusRatio*b+"px; }";o+="      #sincloBox div#sincloBannerBox div#sincloBanner.sincloBanner .sinclo-comment{ font-size: "+17.5*b+"px; padding: 0 "+2*b+"px 0 "+10*b+"px; }",o+="      #sincloBox div#sincloBannerBox div#sincloBanner.sincloBanner .sinclo-comment-notext{ font-size: "+17.5*b+"px; padding: 0 "+2*b+"px 0 "+13*b+"px; }",o+="      #sincloBox div#sincloBannerBox div#sincloBanner.sincloBanner .notext{ cursor: pointer; }"}}else{var S=window.innerHeight*(document.body.clientWidth/window.innerWidth),I=1/285*S;o+="#sincloBox { left:0; right:0; bottom: 0; }",o+="#sincloBox div#sincloWidgetBox { box-shadow: 0px 0px "+e.boxShadow+"px "+e.boxShadow+"px rgba(0,0,0,0.1);}",o+="#sincloBox * { font-size: 16px }",1===e.chatMessageCopy?o+="#sincloBox p#widgetTitle { border-radius: 0; border-top-width: 0.1em; height: 2em; padding: 0.3em 2em 0; font-size: 1.5em;  user-select: none; -moz-user-select: none; -webkit-user-select: none; -ms-user-select: none; line-height: 1.3 !important;}":o+="#sincloBox p#widgetTitle { border-radius: 0; border-top-width: 0.1em; height: 2em; padding: 0.3em 2em 0; font-size: 1.5em; line-height: 1.3 !important;}",1!==e.widgetSizeType&&(o+="#sincloBox p#widgetTitle { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }"),o+="#sincloBox section { width: 100% }",o+="#sincloBox section#chatTab ul { height: "+(S-6.5*I)+"px }",o+="#sincloBox #fw-minimize-btn i {top: -0.1px; right: 10px; font-size: 2.3em;}",scl_check.android(),o+="#sincloBox div#minimizeBtn { width: 1.5em; height: 1.5em; top: 0.25em; bottom: 0; right: 0.3em; }",o+="#sincloBox section#chatTab sinclo-div #sincloChatSendBtn, #sincloBox section#chatTab sinclo-div #miniSincloChatSendBtn { font-size: "+13*b+"px;}",o+='#sincloBox[data-openflg="true"] p#widgetTitle:after { margin-top: 0.5em; }',o+="#sincloBox #widgetTitle em { width: 2em; height: 2em; font-size: 0.8em; padding: 0.25em; border-radius: 5em; margin: 0.25em; }",o+="#sincloBox ul#chatTalk { padding: 0.3em; padding-top:0px; background-color: "+i.chatTalkBackgroundColor+"}",o+="#sincloBox ul#chatTalk > sinclo-chat > div { padding: 5px 10px; }",o+="#sincloBox ul#chatTalk li { font-size: 1em; border-radius: 0.72em; margin: 0.3em 0; padding: "+b/2*10+"px "+b/2*15+"px; }",o+="#sincloBox ul#chatTalk li div.sendFileThumbnailArea { display: table-cell; width: "+64*b+"px; height: "+64*b+"px; border: 1px solid #D9D9D9; }",o+="#sincloBox ul#chatTalk li.sinclo_se { font-size: 0.8em; margin-left: "+v/342.5*45+"px;}",o+="#sincloBox ul#chatTalk li.sinclo_re { font-size: "+common.getFontSize()+"px; margin-right: "+v/342.5*21+"px;}",o+="#sincloBox ul#chatTalk li.sinclo_se span.sinclo-text-line { font-size: 16px; line-height: 1.5; }",o+="#sincloBox ul#chatTalk li.sinclo_re span.sinclo-text-line { font-size: 16px; line-height: 1.5; }",0===i.seBorderNone&&(o+="#sincloBox ul#chatTalk li.sinclo_se { border: "+1*b+"px solid "+g.se.borderColor+"; }"),0===i.reBorderNone&&(o+="#sincloBox ul#chatTalk li.sinclo_re { border: "+1*b+"px solid "+g.re.borderColor+"; }"),o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv i.fa-comment-alt-lines { padding-top: 4px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv i.fa-comments-alt { padding-top: 2px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv i.fa-phone { padding-top: 2px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv i.icon_border { border:1px solid;}",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv.smallSize { max-width: 72px; min-width: 72px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv.smallSize .img_wrapper { width: 70px; height: 70px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv.smallSize .img_wrapper img { max-width: 70px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv.smallSize i { height: 70px; width: 70px; font-size: 40px }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv.middleSize { max-width: 82px; min-width: 82px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv.middleSize .img_wrapper { width: 80px; height: 80px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv.middleSize .img_wrapper img { max-width: 80px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv.middleSize i { height: 80px; width: 80px; font-size: 50px }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv.largeSize { max-width: 50px; min-width: 50px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv.largeSize .img_wrapper { width: 50px; height: 50px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv.largeSize .img_wrapper img { max-width: 50px; }",o+="      #sincloBox ul#chatTalk div.grid_for_icon .iconDiv.largeSize i { height: 50px; width: 50px; font-size: 30px }",o+="#sincloBox ul#chatTalk li .sinclo-pulldown { padding-left: 8px; margin-top: 16px; height: 40px; font-size: "+common.getFontSize(e.reTextSize)+"px;}",o+="#sincloBox ul#chatTalk li button { cursor: pointer; min-height: 60px; margin-bottom: 4px; padding: 20px 30px; font-size: 16px;}",o+=common.injectMobileCalendarCSS(2.5),o+="#sincloBox ul#chatTalk li.sinclo_etc { border: none; text-align: center!important; margin: 0 auto; font-weight: bold; font-size:14px); }",o+="#sincloBox ul#chatTalk li sinclo-radio { margin: 5px 0 0.25em 0.5em; display: inline-block; } ",o+='#sincloBox ul#chatTalk li [id^="sinclo-radio-button"].buttonStyle sinclo-radio { margin: 0;} ',o+='#sincloBox ul#chatTalk li [id^="sinclo-radio-button"].labelStyle sinclo-radio { margin: 0 0 0 5px;} ',o+='#sincloBox ul#chatTalk li sinclo-radio [type="radio"] { margin-right: 0.5em } ',o+='#sincloBox ul#chatTalk li sinclo-radio [type="radio"], #sincloBox ul#chatTalk li sinclo-radio label { webkit-transform: scale(1.3); transform: scale(1.3); moz-transform: scale(1.3); } ',o+='#sincloBox ul#chatTalk li sinclo-radio [type="radio"] + label { display: inline; padding-left: 30px; font-size: '+common.getFontSize(e.reTextSize)+"px; } ",o+='#sincloBox ul#chatTalk li [id^="sinclo-radio-button"] sinclo-radio [type="radio"] + label {padding: 0 0 0 30px; font-size:'+common.getFontSize(e.reTextSize)+"px !important;} ",o+='#sincloBox ul#chatTalk li sinclo-radio [type="radio"] + label:before { content: ""; display: block; position: absolute; top: -2px; margin-top: -10px; left: -5px; width: 20px; height: 20px; border: 1px solid #333333; border-radius: 50%; } ',o+='#sincloBox ul#chatTalk li sinclo-radio [type="radio"]:checked + label:after { content: ""; display: block; position: absolute; margin-top: -5px; width: 12px; height: 12px; background: '+i.mainColor+"; border-radius: 50%; } ",o+='#sincloBox ul#chatTalk li [id^="sinclo-radio-button"].labelStyle sinclo-radio [type="radio"]:checked + label:after {top: 8px; left: 0px;}',o+="#sincloBox ul#chatTalk li label, #sincloBox ul#chatTalk li span, #sincloBox ul#chatTalk li a { font-size: 1em; }",o+="#sincloBox ul#chatTalk li span.cName { margin: 0 0 0.3em 0 }",o+='#sincloBox ul#chatTalk li [id^="sinclo-radio-button"] sinclo-radio {font-size: 13px;padding-top: 10px!important;padding-bottom: 10px!important;}',o+='#sincloBox ul#chatTalk li [id^="sinclo-radio-button"] sinclo-radio [type="radio"] + label { font-size: 30px; }',o+='#sincloBox ul#chatTalk li [id^="sinclo-radio-button"].buttonStyle sinclo-radio [type="radio"] + label { padding-left: 45px !important;}',o+='#sincloBox ul#chatTalk li [id^="sinclo-radio-button"].buttonStyle sinclo-radio [type="radio"] + label:before {left: 0;}',o+='#sincloBox ul#chatTalk li [id^="sinclo-radio-button"].buttonStyle sinclo-radio [type="radio"] + label:after {top: 8px; left: 5px;}',o+="#sincloBox ul#chatTalk li.diagram_msg button {min-height: 60px !important; padding:20px 30px !important;}",o+="#sincloBox ul#chatTalk li .sinclo-checkbox { font-size: 1em;}",o+="#sincloBox ul#chatTalk li .sinclo-checkbox .checkmark { width: 24px; height: 24px;}",o+='#sincloBox ul#chatTalk li [id^="sinclo-checkbox"] span.ok-button {font-size: 19px}',o+="#sincloBox ul#chatTalk li .sinclo-checkbox .checkmark:after {left: 7px; top: 3px; width: 4px; height: 10px; border-width: 0 5px 5px 0;}",o+="#sincloBox ul#chatTalk li .sinclo-checkbox.labelStyle { padding-left: 48px}",o+="#sincloBox ul#chatTalk li .sinclo-checkbox.labelStyle .checkmark { top: 4px}",o+="#sincloBox ul#chatTalk li .sinclo-checkbox.buttonStyle .checkmark {top: 9px;left: 12px; }",o+="#sincloBox ul#chatTalk li .sinclo-checkbox.buttonStyle {padding: 12px 12px 12px 56px;}",o+="#sincloBox ul#chatTalk li span.ok-button {width: 125px; height: 40px; line-height: 40px; margin-top: 15px; border-radius: 20px;}";o+="#sincloBox ul#chatTalk li.carousel_msg {padding: 25px 100px;}#sincloBox ul#chatTalk li.insideArrow { padding: 25px 37.5px; }#sincloBox ul#chatTalk li.outsideArrow { padding: 25px 100px; }#sincloBox ul#chatTalk li.noneBalloon { margin-left: 0; }",e.chatMessageDesignType,0===i.seBorderNone&&(o+="      #sincloBox ul#chatTalk li.sinclo_se:after {border-left: 5px solid "+g.se.borderColor+"; border-bottom: 5px solid "+g.se.borderColor+"; }"),0===i.reBorderNone&&(o+="      #sincloBox ul#chatTalk li.sinclo_re:after {border-right: 5px solid "+g.re.borderColor+"; border-bottom: 5px solid "+g.re.borderColor+"; }"),o+="#sincloBox ul#chatTalk sinclo-chat-receiver #receiveMessage { font-size: 0.8em; }",o+="#sincloBox section#chatTab sinclo-div:not(#flexBoxWrap) { height: 4em; padding: 0.5em; }",o+=16<I?"#sincloBox #sincloChatMessage, #sincloBox #miniSincloChatMessage { height: 100%;  min-height: 100%!important; border-radius: 5px 0 0 5px!important; font-size: 0.7em font-weight: 400;}":"#sincloBox #sincloChatMessage, #sincloBox #miniSincloChatMessage { height: 100%;  min-height: 100%!important; border-radius: 5px 0 0 5px!important; font-size: 1.5em font-weight: 400;}",scl_check.android()||(o+="#sincloBox #sincloChatMessage, #sincloBox #miniSincloChatMessage {font-size: 17px!important}"),o+="      #sincloBox section#chatTab #sincloChatSendBtn, #sincloBox section#chatTab #miniSincloChatSendBtn { padding: 0.6em 0; border: 1px solid "+i.chatSendBtnBackgroundColor+"; }",o+="      #sincloBox section#chatTab sinclo-chat-alert { left: 10%; right: 10%; bottom: 50%; border-radius: 5px; color: #FFF; text-align: center; padding: 0.25em 0; }",0===i.messageBoxBorderNone?o+="#sincloBox section#chatTab #sincloChatMessage, #sincloBox section#chatTab #miniSincloChatMessage { border-radius: "+5*b+"px 0 0 "+5*b+"px!important; border: "+1*b+"px solid "+i.messageBoxBorderColor+"!important; }":o+="#sincloBox section#chatTab #sincloChatMessage, #sincloBox section#chatTab #miniSincloChatMessage { border: none!important; }",o+="#sincloBox section#navigation ul { width: 100% }",o+="sinclo span#mainImage, sinclo #widgetSubTitle, sinclo #widgetDescription, sinclo #navigation, sinclo #navigation * { display:none!important; height: 0!important }",o+="#sincloBox #fotter { display: none; height: 0!important }",2!==Number(e.closeButtonSetting)||1!==Number(e.closeButtonModeType)&&3!==Number(e.closeButtonModeType)||(b=1.263157894736842,o+="      #sincloBox div#sincloBannerBox { bottom:0px; right:0px; background: initial;}",1===Number(common.getWidgetSettings().showPosition)?o+="      #sincloBox div#sincloBannerBox div#sincloBanner.sincloBanner { position: fixed; right: "+5*b+"px; bottom: "+5*b+"px; height: "+30*b+"px; box-shadow: 0px 0px "+e.boxShadow*b+"px "+e.boxShadow*b+"px rgba(0,0,0,0.1); border-radius: "+e.radiusRatio*b+"px "+e.radiusRatio*b+"px "+e.radiusRatio*b+"px "+e.radiusRatio*b+"px; }":o+="      #sincloBox div#sincloBannerBox div#sincloBanner.sincloBanner { position: fixed; left: "+5*b+"px; bottom: "+5*b+"px; height: "+30*b+"px; box-shadow: 0px 0px "+e.boxShadow*b+"px "+e.boxShadow*b+"px rgba(0,0,0,0.1); border-radius: "+e.radiusRatio*b+"px "+e.radiusRatio*b+"px "+e.radiusRatio*b+"px "+e.radiusRatio*b+"px; }",o+="      #sincloBox div#sincloBannerBox div#sincloBanner.sincloBanner .sinclo-comment{ font-size: "+17.5*b+"px; padding: 0 "+2*b+"px 0 "+10*b+"px; }",o+="      #sincloBox div#sincloBannerBox div#sincloBanner.sincloBanner .sinclo-comment-notext{ font-size: "+17.5*b+"px; padding: 0 "+2*b+"px 0 "+13*b+"px; }",o+="      #sincloBox div#sincloBannerBox div#sincloBanner #bannerIcon { width: "+Math.ceil(21*b)+"px; height: "+Math.ceil(21*b)+"px; opacity: 1; margin: 0px "+5*b+"px; position: static; }",o+="      #sincloBox div#sincloBannerBox div#sincloBanner.sincloBanner .bannertext{ color: "+e.stringColor+"; font-size: "+10*b+"px; vertical-align: middle; margin-right: "+5*b+"px; }",o+="      #sincloBox div#sincloBannerBox div#sincloBanner.sincloBanner .notext{ cursor: pointer; }")}else o+="      #sincloBox { overflow: hidden; box-shadow: 0px 0px "+e.boxShadow+"px "+e.boxShadow+"px rgba(0,0,0,0.1); border-radius: "+e.radiusRatio+"px "+e.radiusRatio+"px 0 0;}",o+="      #sincloBox.onImageBanner { box-shadow: none; border-radius: 0; }",preventWithdrawalOverlay.isShowOverlayWithMargin()?(o+="      #sincloBox div#sincloWidgetBox { width: "+n.boxWidth+"px; border-radius: "+e.radiusRatio+"px "+e.radiusRatio+"px "+e.radiusRatio+"px "+e.radiusRatio+"px; background-color: rgb(255, 255, 255);}",o+="#sincloBox #fotter {border-radius: 0 0 "+e.radiusRatio+"px "+e.radiusRatio+"px;}"):o+="      #sincloBox div#sincloWidgetBox { width: "+n.boxWidth+"px; border-radius: "+e.radiusRatio+"px "+e.radiusRatio+"px 0 0; background-color: rgb(255, 255, 255);}",o+="      #sincloBox * { line-height: 1.4; font-size: "+n.d12font+"px; }",o+="      #sincloBox a:hover { color: "+i.mainColor+"; }",o+="      #sincloBox sinclo-div#widgetHeader:hover { opacity: 0.75; }",o+="      #sincloBox sinclo-div#widgetHeader:after { top: 32px }",o+="      #sincloBox section { width: "+n.boxWidth+"px }",o+="      #sincloBox section#navigation ul { width: "+n.boxWidth+"px }",o+="      #sincloBox span#mainImage { top: 7px; left: 8px }",o+="      #sincloBox span#mainImage i {display: flex; justify-content: center; align-items: center; width: 80px; height: 70px; font-size: calc(43px * ((3 * "+e.headerTextSize+" + 36) / 81)); border: 1px solid; }",o+="      #sincloBox p#widgetTitle { border-radius: "+e.radiusRatio+"px "+e.radiusRatio+"px 0 0; font-size: "+e.headerTextSize+"px; padding: 8px 0px 8px 0px; height: 32px; line-height: "+e.headerTextSize+"px !important; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;}",o+="      #sincloBox p#widgetTitle.leftPosition { text-align: left; padding-left: calc(2.5em + 41px);}",o+="      #sincloBox p#widgetTitle.leftPosition.noImage { padding-left: 15px;}",o+="      #sincloBox p#widgetTitle.centerPosition { padding-right: 25px; padding-left: calc(2.5em + 33px);}",o+="      #sincloBox p#widgetTitle.centerPosition.noImage { padding-left: 0px; padding-right: 0px; }",o+="      #sincloBox p#widgetTitle #sincloChatUnread { width: 25px; height: 25px; font-size: "+(e.headerTextSize-1)+"px; border-radius: 15px; margin: 2.5px 6px; padding: 3px; }",o+="      #sincloBox p#widgetTitle:after { background-position-y: 3px; top: "+n.widgetTitleTop+"px; right: 10px; bottom: 6px; width: 20px; height: 20px; }",o+="      #sincloBox p#widgetSubTitle { background-color: "+i.headerBackgroundColor+"; margin: 0; text-align: left; border-width: 0 1px 0 1px; padding-top: 3px; padding-bottom: 3px; border-color: "+i.widgetBorderColor+"; border-style: solid; font-weight: bold; color: "+i.subTitleTextColor+"; height: auto; line-height:calc(1em + 9px) !important; font-size: "+(Number(e.headerTextSize)-2)+"px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;}",o+="      #sincloBox p#widgetSubTitle.leftPosition { padding-left: calc(2.5em + 46px)}",o+="      #sincloBox p#widgetSubTitle.leftPosition.noImage { padding-left: 15px;}",o+="      #sincloBox p#widgetSubTitle.centerPosition { text-align: center; padding-right: 25px; padding-left: calc(2.5em + 38px);}",o+="      #sincloBox p#widgetSubTitle.centerPosition.noImage { padding-left: 0px; padding-right: 0px;}",o+="      #sincloBox p#widgetSubTitle.oneContent { line-height: calc((1em + 9px)*2)!important; border-bottom: 1px "+i.widgetBorderColor+" solid;}",1===i.widgetInsideBorderNone&&(o+="      #sincloBox p#widgetSubTitle.oneContent{ border:none;}"),o+="      #sincloBox p#widgetDescription.leftPosition { padding-left: calc(2.5em + 46px)}",o+="      #sincloBox p#widgetDescription.leftPosition.noImage { padding-left: 15px;}",o+="      #sincloBox p#widgetDescription.centerPosition { text-align: center; padding-right: 25px; padding-left: calc(2.5em + 38px);}",o+="      #sincloBox p#widgetDescription.centerPosition.noImage { padding-left: 0px; padding-right: 0px;}",o+="      #sincloBox p#widgetDescription.oneContent { line-height: calc((1em + 9px)*2)!important; padding-top: 3px; padding-bottom: 3px;}",1===i.widgetBorderNone&&(o+="#sincloBox p#widgetSubTitle { border:none; }"),o+="      #sincloBox p#widgetDescription { background-color: "+i.headerBackgroundColor+"; margin: 0; padding-bottom: 7px; text-align: left; border-width: 0 1px 1px 1px; border-color: "+i.widgetBorderColor+"; border-style: solid; height: auto; line-height:calc(1em + 2px) !important; color: "+i.descriptionTextColor+"; border-bottom-color:"+i.widgetInsideBorderColor+"; font-size: "+(Number(e.headerTextSize)-2)+"px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;;}",1===i.widgetBorderNone&&(o+="#sincloBox p#widgetDescription { border-left:none; border-right:none;}"),o+="      #sincloBox section { background-color: #FFF; border: 1px solid "+i.widgetBorderColor+"; border-top: none; border-bottom: 1px solid "+i.widgetInsideBorderColor+"; }",1===i.widgetBorderNone&&(o+="      #sincloBox section { border-top: none; border-left:none; border-right:none; }"),1===i.widgetInsideBorderNone&&(o+="#sincloBox p#widgetDescription { border-bottom:none!important;}",o+="      #sincloBox section { border-bottom: none!important; }"),o+="      #sincloBox ul#chatTalk li.sinclo_etc { border: none; text-align: center!important; margin: 0 auto; font-weight: bold; font-size:calc("+e.reTextSize+"px*0.92); }",o+="      #sincloBox section#chatTab sinclo-div #sincloChatSendBtn, #sincloBox section#chatTab sinclo-div #miniSincloChatSendBtn { font-size: "+e.chatSendBtnTextSize+"px;}",window.sincloInfo.contract.chat&&(o+="      #sincloBox #mainImage em { width: 25px; height: 20px; font-size: "+n.d11font+"px; padding: 1px; margin-top: calc("+-80*b+"px* ((3 * "+e.headerTextSize+" + 36) / 81 ))!important}",o+="      #sincloBox #mainImage em { margin-left:calc("+48*b+"px* ((3 * "+e.headerTextSize+" + 36) / 81))!important}",o+="      #sincloBox ul#chatTalk { height: "+n.chatTalkHeight+"px; padding: 0px 5px 0px 5px; background-color: "+i.chatTalkBackgroundColor+" }",o+="      #sincloBox ul#chatTalk li { border-radius: 12px; margin: 10px 0 0 0; padding: 10px 15px; }",0===i.seBorderNone&&(o+="      #sincloBox ul#chatTalk li.sinclo_se { border: 1px solid "+g.se.borderColor+"; }"),0===i.reBorderNone&&(o+="      #sincloBox ul#chatTalk li.sinclo_re { border: 1px solid "+g.re.borderColor+"; }"),o+="      #sincloBox ul#chatTalk li span.cName { font-size: "+Number(e.reTextSize)+"px; margin: 0 0 5px 0 }",o+="      #sincloBox section#chatTab sinclo-div:not(#flexBoxWrap) { height: "+n.classFlexBoxRowHeight+"px!important; padding: 5px }",o+="      #sincloBox section#chatTab sinclo-div#miniFlexBoxHeight { height: 48px!important; padding: 5px }",o+="      #sincloBox section#chatTab sinclo-chat-alert { display: none; position: absolute; background-color: rgba(0,0,0,0.6); box-shadow: 0px 0px 4px 4px rgba(0,0,0,0.1); color: #FFF; text-align: center; cursor: pointer; }",o+="      #sincloBox section#chatTab sinclo-chat-alert { left: 25%; bottom: 50%; width: 50%; height:64px; border-radius: 5px; line-height: 47px; color: #FFF; padding: 10px 0; }",o+="      #sincloBox section#chatTab #sincloChatMessage, #sincloBox section#chatTab #miniSincloChatMessage { color: #333333!important; padding: 5px; height: 100%; min-height: 100%!important; }",0===i.messageBoxBorderNone?o+="      #sincloBox section#chatTab #sincloChatMessage, #sincloBox section#chatTab #miniSincloChatMessage { border: 1px solid "+i.messageBoxBorderColor+"!important; border-radius: 5px 0 0 5px!important; }":o+="      #sincloBox section#chatTab #sincloChatMessage, #sincloBox section#chatTab #miniSincloChatMessage { border: none!important;}",o+="      #sincloBox section#chatTab #sincloChatSendBtn, #sincloBox section#chatTab #miniSincloChatSendBtn { padding: 20px 0; height: 100%; border: 1px solid "+i.chatSendBtnBackgroundColor+"; }",o+="      #sincloBox section#chatTab #miniSincloChatSendBtn { padding: 8px 0; height: 100%; border: 1px solid "+i.chatSendBtnBackgroundColor+"; }"),(window.sincloInfo.contract.synclo||window.sincloInfo.contract.hasOwnProperty("document")&&window.sincloInfo.contract.document)&&(o+="      #sincloBox section#callTab { background-color: "+i.chatTalkBackgroundColor+"!important; }",o+="      #sincloBox section#callTab #telNumber { overflow: hidden; color: "+i.mainColor+"; font-weight: bold; margin: 0 auto; text-align: center; border: none!important; overflow: visible!important; }",o+="      #sincloBox section#callTab #telIcon { color: "+i.mainColor+"; display: block; width: 50px; height: 50px; float: left; background-color: #3EA3DE; border-radius: 25px; padding: 3px }",o+="      #sincloBox section#callTab #telContent { display: block; overflow-y: auto; overflow-x: hidden; height:"+n.telContentHeight+"px; max-height: "+n.telContentHeight+"px }",window.sincloInfo.contract.chat?o+="      #sincloBox section#callTab #telContent .tblBlock {  text-align: center;  margin: 0 auto;  width: 240px;  display: table; align-content: center;  height: 119px!important;  justify-content: center; }":o+="      #sincloBox section#callTab #telContent .tblBlock { text-align: center; margin: 0 auto; width: 240px; display: table; align-content: center; justify-content: center; overflow-x: hidden; overflow-y: auto }",o+="      #sincloBox section#callTab #telContent span { word-wrap: break-word ;word-break: break-all; font-size: "+n.d11font+"px; line-height: 1.5!important; color: #6B6B6B; white-space: pre-wrap; max-height: 119px; display: table-cell; vertical-align: middle; text-align: center }",window.sincloInfo.contract.chat?o+="      #sincloBox section#callTab #accessIdArea { height: 50px; display: block; margin: 20px auto 21px; width: 80%; padding: 7px;  color: #FFF; background-color: rgb(188, 188, 188); font-size: "+n.d25font+"px; font-weight: bold; text-align: center; border-radius: 15px } ":o+="      #sincloBox section#callTab #accessIdArea { height: 50px; display: block; margin: 10px auto; width: 80%; padding: 7px;  color: #FFF; background-color: rgb(188, 188, 188); font-size: "+n.d25font+"px; font-weight: bold; text-align: center; border-radius: 15px } "),o+="      #sincloBox section#navigation { border-width: 0 1px; height: "+n.navigationHeight+"px; }",o+="      #sincloBox section#navigation ul { margin: 0 0 0 -1px; height: "+n.navigationHeight+"px;}",o+="      #sincloBox section#navigation ul li { width: 50%; padding: 10px 0; border-left: 1px solid "+i.widgetBorderColor+"; height: "+n.navigationHeight+"px }",1===i.widgetBorderNone&&(o+="      #sincloBox section#navigation ul li { border-left:none; }"),o+="      #sincloBox section#navigation ul li:last-child { border-right: 1px solid "+i.widgetBorderColor+"; border-left: 1px solid "+i.widgetInsideBorderColor+"; }",1===i.widgetBorderNone&&(o+="      #sincloBox section#navigation ul li:last-child { border-right:none; }"),1===i.widgetInsideBorderNone&&(o+="      #sincloBox section#navigation ul li:last-child { border-left: none!important; }"),o+="      #sincloBox section#navigation ul li:not(.selected) { border-bottom: 1px solid "+i.widgetInsideBorderColor+" }",1===i.widgetInsideBorderNone&&(o+="      #sincloBox section#navigation ul li:not(.selected) { border-bottom: none!important; }"),o+="      #sincloBox section#navigation ul li.selected::after{ border-bottom: 2px solid "+i.mainColor+"; }",o+="      #sincloBox #fotter { height: "+n.fotterHeight+"px; padding: 5px 0; border: 1px solid "+i.widgetBorderColor+"; font-size: "+n.d11font+"px; border-top: none; }",1===i.widgetBorderNone&&(o+="      #sincloBox #fotter { border:none }"),o+="      #sincloBox section#navigation ul li::before{ margin-right: 5px; width: 18px; height: 18px; }";return o+="      #sincloBox section#chatTab sinclo-div textarea#sincloChatMessage{ z-index: initial }",o+="  </style>"},injectCalendarCSS:function(){return'#sincloBox ul#chatTalk li .flatpickr-calendar {\n  background: transparent;\n  opacity: 0;\n  display: none;\n  text-align: center;\n  visibility: hidden;\n  padding: 0;\n  -webkit-animation: none;\n  animation: none;\n  direction: ltr;\n  border: 0;\n  font-size: 14px;\n  line-height: 24px;\n  border-radius: 5px;\n  position: absolute;\n  width: 307.875px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  -ms-touch-action: manipulation;\n  touch-action: manipulation;\n  background: #fff;\n  -webkit-box-shadow: 1px 0 0 #e6e6e6, -1px 0 0 #e6e6e6, 0 1px 0 #e6e6e6, 0 -1px 0 #e6e6e6, 0 3px 13px rgba(0, 0, 0, 0.08);\n  box-shadow: 1px 0 0 #e6e6e6, -1px 0 0 #e6e6e6, 0 1px 0 #e6e6e6, 0 -1px 0 #e6e6e6, 0 3px 13px rgba(0, 0, 0, 0.08);\n}\n#sincloBox ul#chatTalk li .flatpickr-calendar.open,\n#sincloBox ul#chatTalk li .flatpickr-calendar.inline {\n  opacity: 1;\n  max-height: 640px;\n  visibility: visible;\n}\n#sincloBox ul#chatTalk li .flatpickr-calendar.open {\n  display: inline-block;\n  z-index: 99999;\n}\n#sincloBox ul#chatTalk li .flatpickr-calendar.animate.open {\n  -webkit-animation: fpFadeInDown 300ms cubic-bezier(0.23, 1, 0.32, 1);\n  animation: fpFadeInDown 300ms cubic-bezier(0.23, 1, 0.32, 1);\n}\n#sincloBox ul#chatTalk li .flatpickr-calendar.inline {\n  display: block !important;\n  position: relative;\n  top: 2px;\n}\n#sincloBox ul#chatTalk li .flatpickr-calendar.static {\n  position: absolute;\n  top: calc(100% + 2px);\n}\n#sincloBox ul#chatTalk li .flatpickr-calendar.static.open {\n  z-index: 999;\n  display: block;\n}\n#sincloBox ul#chatTalk li .flatpickr-calendar.multiMonth .flatpickr-days .dayContainer:nth-child(n+1) .flatpickr-day.inRange:nth-child(7n+7) {\n  -webkit-box-shadow: none !important;\n  box-shadow: none !important;\n}\n#sincloBox ul#chatTalk li .flatpickr-calendar.multiMonth .flatpickr-days .dayContainer:nth-child(n+2) .flatpickr-day.inRange:nth-child(7n+1) {\n  -webkit-box-shadow: -2px 0 0 #e6e6e6, 5px 0 0 #e6e6e6;\n  box-shadow: -2px 0 0 #e6e6e6, 5px 0 0 #e6e6e6;\n}\n#sincloBox ul#chatTalk li .flatpickr-calendar .hasWeeks .dayContainer,\n#sincloBox ul#chatTalk li .flatpickr-calendar .hasTime .dayContainer {\n  border-bottom: 0;\n  border-bottom-right-radius: 0;\n  border-bottom-left-radius: 0;\n}\n#sincloBox ul#chatTalk li .flatpickr-calendar .hasWeeks .dayContainer {\n  border-left: 0;\n}\n#sincloBox ul#chatTalk li .flatpickr-calendar.showTimeInput.hasTime .flatpickr-time {\n  height: 40px;\n  border-top: 1px solid #e6e6e6;\n}\n#sincloBox ul#chatTalk li .flatpickr-calendar.noCalendar.hasTime .flatpickr-time {\n  height: auto;\n}\n#sincloBox ul#chatTalk li .flatpickr-calendar:before,\n#sincloBox ul#chatTalk li .flatpickr-calendar:after {\n  position: absolute;\n  display: block;\n  pointer-events: none;\n  content: "";\n  height: 0;\n  width: 0;\n  left: 22px;\n}\n#sincloBox ul#chatTalk li .flatpickr-calendar.rightMost:before,\n#sincloBox ul#chatTalk li .flatpickr-calendar.rightMost:after {\n  left: auto;\n  right: 22px;\n}\n#sincloBox ul#chatTalk li .flatpickr-calendar:before {\n  border-width: 5px;\n  margin: 0 -5px;\n}\n#sincloBox ul#chatTalk li .flatpickr-calendar:after {\n  border-width: 4px;\n  margin: 0 -4px;\n}\n#sincloBox ul#chatTalk li .flatpickr-calendar.arrowTop:before,\n#sincloBox ul#chatTalk li .flatpickr-calendar.arrowTop:after {\n  bottom: 100%;\n}\n#sincloBox ul#chatTalk li .flatpickr-calendar.arrowTop:before {\n  border-bottom-color: #e6e6e6;\n}\n#sincloBox ul#chatTalk li .flatpickr-calendar.arrowTop:after {\n  border-bottom-color: #fff;\n}\n#sincloBox ul#chatTalk li .flatpickr-calendar.arrowBottom:before,\n#sincloBox ul#chatTalk li .flatpickr-calendar.arrowBottom:after {\n  top: 100%;\n}\n#sincloBox ul#chatTalk li .flatpickr-calendar.arrowBottom:before {\n  border-top-color: #e6e6e6;\n}\n#sincloBox ul#chatTalk li .flatpickr-calendar.arrowBottom:after {\n  border-top-color: #fff;\n}\n#sincloBox ul#chatTalk li .flatpickr-calendar:focus {\n  outline: 0;\n}\n#sincloBox ul#chatTalk li .flatpickr-wrapper {\n  position: relative;\n  display: inline-block;\n}\n#sincloBox ul#chatTalk li .flatpickr-months {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n}\n#sincloBox ul#chatTalk li .flatpickr-months .flatpickr-month {\n  background: transparent;\n  color: rgba(0, 0, 0, 0.9);\n  fill: rgba(0, 0, 0, 0.9);\n  height: 28px;\n  line-height: 1;\n  text-align: center;\n  position: relative;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  overflow: hidden;\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n}\n#sincloBox ul#chatTalk li .flatpickr-months .flatpickr-prev-month,\n#sincloBox ul#chatTalk li .flatpickr-months .flatpickr-next-month {\n  text-decoration: none;\n  cursor: pointer;\n  position: absolute;\n  top: 0;\n  line-height: 16px;\n  height: 28px;\n  padding: 10px;\n  z-index: 3;\n  color: rgba(0, 0, 0, 0.9);\n  fill: rgba(0, 0, 0, 0.9);\n}\n#sincloBox ul#chatTalk li .flatpickr-months .flatpickr-prev-month.disabled,\n#sincloBox ul#chatTalk li .flatpickr-months .flatpickr-next-month.disabled {\n  display: none;\n}\n#sincloBox ul#chatTalk li .flatpickr-months .flatpickr-prev-month i,\n#sincloBox ul#chatTalk li .flatpickr-months .flatpickr-next-month i {\n  position: relative;\n}\n#sincloBox ul#chatTalk li .flatpickr-months .flatpickr-prev-month.flatpickr-prev-month,\n#sincloBox ul#chatTalk li .flatpickr-months .flatpickr-next-month.flatpickr-prev-month {\n  left: 0;\n}\n#sincloBox ul#chatTalk li .flatpickr-months .flatpickr-prev-month.flatpickr-next-month,\n#sincloBox ul#chatTalk li .flatpickr-months .flatpickr-next-month.flatpickr-next-month {\n  right: 0;\n}\n#sincloBox ul#chatTalk li .flatpickr-months .flatpickr-prev-month:hover,\n#sincloBox ul#chatTalk li .flatpickr-months .flatpickr-next-month:hover {\n  color: #959ea9;\n}\n#sincloBox ul#chatTalk li .flatpickr-months .flatpickr-prev-month:hover svg,\n#sincloBox ul#chatTalk li .flatpickr-months .flatpickr-next-month:hover svg {\n  fill: #f64747;\n}\n#sincloBox ul#chatTalk li .flatpickr-months .flatpickr-prev-month svg,\n#sincloBox ul#chatTalk li .flatpickr-months .flatpickr-next-month svg {\n  width: 14px;\n  height: 14px;\n}\n#sincloBox ul#chatTalk li .flatpickr-months .flatpickr-prev-month svg path,\n#sincloBox ul#chatTalk li .flatpickr-months .flatpickr-next-month svg path {\n  -webkit-transition: fill 0.1s;\n  transition: fill 0.1s;\n  fill: inherit;\n}\n#sincloBox ul#chatTalk li .numInputWrapper {\n  position: relative;\n  height: auto;\n}\n#sincloBox ul#chatTalk li .numInputWrapper input,\n#sincloBox ul#chatTalk li .numInputWrapper span {\n  display: inline-block;\n}\n#sincloBox ul#chatTalk li .numInputWrapper input {\n  width: 100%;\n}\n#sincloBox ul#chatTalk li .numInputWrapper input::-ms-clear {\n  display: none;\n}\n#sincloBox ul#chatTalk li .numInputWrapper span {\n  position: absolute;\n  right: 0;\n  width: 14px;\n  padding: 0 4px 0 2px;\n  height: 50%;\n  line-height: 50%;\n  opacity: 0;\n  cursor: pointer;\n  border: 1px solid rgba(57, 57, 57, 0.15);\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n#sincloBox ul#chatTalk li .numInputWrapper span:hover {\n  background: rgba(0, 0, 0, 0.1);\n}\n#sincloBox ul#chatTalk li .numInputWrapper span:active {\n  background: rgba(0, 0, 0, 0.2);\n}\n#sincloBox ul#chatTalk li .numInputWrapper span:after {\n  display: block;\n  content: "";\n  position: absolute;\n}\n#sincloBox ul#chatTalk li .numInputWrapper span.arrowUp {\n  top: 0;\n  border-bottom: 0;\n}\n#sincloBox ul#chatTalk li .numInputWrapper span.arrowUp:after {\n  border-left: 4px solid transparent;\n  border-right: 4px solid transparent;\n  border-bottom: 4px solid rgba(57, 57, 57, 0.6);\n  top: 26%;\n}\n#sincloBox ul#chatTalk li .numInputWrapper span.arrowDown {\n  top: 50%;\n}\n#sincloBox ul#chatTalk li .numInputWrapper span.arrowDown:after {\n  border-left: 4px solid transparent;\n  border-right: 4px solid transparent;\n  border-top: 4px solid rgba(57, 57, 57, 0.6);\n  top: 40%;\n}\n#sincloBox ul#chatTalk li .numInputWrapper span svg {\n  width: inherit;\n  height: auto;\n}\n#sincloBox ul#chatTalk li .numInputWrapper span svg path {\n  fill: rgba(0, 0, 0, 0.5);\n}\n#sincloBox ul#chatTalk li .numInputWrapper:hover {\n  background: rgba(0, 0, 0, 0.05);\n}\n#sincloBox ul#chatTalk li .numInputWrapper:hover span {\n  opacity: 1;\n}\n#sincloBox ul#chatTalk li .flatpickr-current-month {\n  font-size: 135%;\n  line-height: inherit;\n  font-weight: 300;\n  color: inherit;\n  position: absolute;\n  width: 75%;\n  left: 12.5%;\n  padding: 6.16px 0 0 0;\n  line-height: 1;\n  height: 28px;\n  display: inline-block;\n  text-align: center;\n  -webkit-transform: translate3d(0, 0, 0);\n  transform: translate3d(0, 0, 0);\n}\n#sincloBox ul#chatTalk li .flatpickr-current-month span.cur-month {\n  font-family: inherit;\n  font-weight: 700;\n  color: inherit;\n  display: inline-block;\n  margin-left: 0.5ch;\n  padding: 0;\n}\n#sincloBox ul#chatTalk li .flatpickr-current-month span.cur-month:hover {\n  background: rgba(0, 0, 0, 0.05);\n}\n#sincloBox ul#chatTalk li .flatpickr-current-month .numInputWrapper {\n  width: 6ch;\n  width: 7ch\\0;\n  display: inline-block;\n}\n#sincloBox ul#chatTalk li .flatpickr-current-month .numInputWrapper span.arrowUp:after {\n  border-bottom-color: rgba(0, 0, 0, 0.9);\n}\n#sincloBox ul#chatTalk li .flatpickr-current-month .numInputWrapper span.arrowDown:after {\n  border-top-color: rgba(0, 0, 0, 0.9);\n}\n#sincloBox ul#chatTalk li .flatpickr-current-month input.cur-year {\n  background: transparent;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  color: inherit;\n  cursor: text;\n  padding: 0 0 0 0.5ch;\n  margin: 0;\n  display: inline-block;\n  font-size: inherit;\n  font-family: inherit;\n  font-weight: 300;\n  line-height: inherit;\n  height: auto;\n  border: 0;\n  border-radius: 0;\n  vertical-align: initial;\n}\n#sincloBox ul#chatTalk li .flatpickr-current-month input.cur-year:focus {\n  outline: 0;\n}\n#sincloBox ul#chatTalk li .flatpickr-current-month input.cur-year[disabled],\n#sincloBox ul#chatTalk li .flatpickr-current-month input.cur-year[disabled]:hover {\n  font-size: 100%;\n  color: rgba(0, 0, 0, 0.5);\n  background: transparent;\n  pointer-events: none;\n}\n#sincloBox ul#chatTalk li .flatpickr-weekdays {\n  background: transparent;\n  text-align: center;\n  overflow: hidden;\n  width: 100%;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n  -ms-flex-align: center;\n  align-items: center;\n  height: 28px;\n}\n#sincloBox ul#chatTalk li .flatpickr-weekdays .flatpickr-weekdaycontainer {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n}\n#sincloBox ul#chatTalk li span.flatpickr-weekday {\n  cursor: default;\n  font-size: 90%;\n  background: transparent;\n  color: rgba(0, 0, 0, 0.54);\n  line-height: 1;\n  margin: 0;\n  text-align: center;\n  display: block;\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n  font-weight: bolder;\n}\n#sincloBox ul#chatTalk li .dayContainer,\n#sincloBox ul#chatTalk li .flatpickr-weeks {\n  padding: 1px 0 0 0;\n}\n#sincloBox ul#chatTalk li .flatpickr-days {\n  position: relative;\n  overflow: hidden;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: start;\n  -webkit-align-items: flex-start;\n  -ms-flex-align: start;\n  align-items: flex-start;\n  width: 307.875px;\n}\n#sincloBox ul#chatTalk li .flatpickr-days:focus {\n  outline: 0;\n}\n#sincloBox ul#chatTalk li .dayContainer {\n  padding: 0;\n  outline: 0;\n  text-align: left;\n  width: 307.875px;\n  min-width: 307.875px;\n  max-width: 307.875px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  display: inline-block;\n  display: -ms-flexbox;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex-wrap: wrap;\n  flex-wrap: wrap;\n  -ms-flex-wrap: wrap;\n  -ms-flex-pack: justify;\n  -webkit-justify-content: space-around;\n  justify-content: space-around;\n  -webkit-transform: translate3d(0, 0, 0);\n  transform: translate3d(0, 0, 0);\n  opacity: 1;\n}\n#sincloBox ul#chatTalk li .dayContainer + .dayContainer {\n  -webkit-box-shadow: -1px 0 0 #e6e6e6;\n  box-shadow: -1px 0 0 #e6e6e6;\n}\n#sincloBox ul#chatTalk li .flatpickr-day {\n  background: none;\n  border: 1px solid transparent;\n  border-radius: 150px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  color: #393939;\n  cursor: pointer;\n  font-weight: 400;\n  width: 14.2857143%;\n  -webkit-flex-basis: 14.2857143%;\n  -ms-flex-preferred-size: 14.2857143%;\n  flex-basis: 14.2857143%;\n  max-width: 39px;\n  height: 39px;\n  line-height: 39px;\n  margin: 0;\n  display: inline-block;\n  position: relative;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n  text-align: center;\n}\n#sincloBox ul#chatTalk li .flatpickr-day.inRange,\n#sincloBox ul#chatTalk li .flatpickr-day.prevMonthDay.inRange,\n#sincloBox ul#chatTalk li .flatpickr-day.nextMonthDay.inRange,\n#sincloBox ul#chatTalk li .flatpickr-day.today.inRange,\n#sincloBox ul#chatTalk li .flatpickr-day.prevMonthDay.today.inRange,\n#sincloBox ul#chatTalk li .flatpickr-day.nextMonthDay.today.inRange,\n#sincloBox ul#chatTalk li .flatpickr-day:hover,\n#sincloBox ul#chatTalk li .flatpickr-day.prevMonthDay:hover,\n#sincloBox ul#chatTalk li .flatpickr-day.nextMonthDay:hover,\n#sincloBox ul#chatTalk li .flatpickr-day:focus,\n#sincloBox ul#chatTalk li .flatpickr-day.prevMonthDay:focus,\n#sincloBox ul#chatTalk li .flatpickr-day.nextMonthDay:focus {\n  cursor: pointer;\n  outline: 0;\n  background: #e6e6e6;\n  border-color: #e6e6e6;\n}\n#sincloBox ul#chatTalk li .flatpickr-day.today {\n  border-color: #959ea9;\n}\n#sincloBox ul#chatTalk li .flatpickr-day.today:hover,\n#sincloBox ul#chatTalk li .flatpickr-day.today:focus {\n  border-color: #959ea9;\n  background: #959ea9;\n  color: #fff;\n}\n#sincloBox ul#chatTalk li .flatpickr-day.selected,\n#sincloBox ul#chatTalk li .flatpickr-day.startRange,\n#sincloBox ul#chatTalk li .flatpickr-day.endRange,\n#sincloBox ul#chatTalk li .flatpickr-day.selected.inRange,\n#sincloBox ul#chatTalk li .flatpickr-day.startRange.inRange,\n#sincloBox ul#chatTalk li .flatpickr-day.endRange.inRange,\n#sincloBox ul#chatTalk li .flatpickr-day.selected:focus,\n#sincloBox ul#chatTalk li .flatpickr-day.startRange:focus,\n#sincloBox ul#chatTalk li .flatpickr-day.endRange:focus,\n#sincloBox ul#chatTalk li .flatpickr-day.selected:hover,\n#sincloBox ul#chatTalk li .flatpickr-day.startRange:hover,\n#sincloBox ul#chatTalk li .flatpickr-day.endRange:hover,\n#sincloBox ul#chatTalk li .flatpickr-day.selected.prevMonthDay,\n#sincloBox ul#chatTalk li .flatpickr-day.startRange.prevMonthDay,\n#sincloBox ul#chatTalk li .flatpickr-day.endRange.prevMonthDay,\n#sincloBox ul#chatTalk li .flatpickr-day.selected.nextMonthDay,\n#sincloBox ul#chatTalk li .flatpickr-day.startRange.nextMonthDay,\n#sincloBox ul#chatTalk li .flatpickr-day.endRange.nextMonthDay {\n  -webkit-box-shadow: none;\n  box-shadow: none;\n  color: #fff;\n}\n#sincloBox ul#chatTalk li .flatpickr-day.selected.startRange,\n#sincloBox ul#chatTalk li .flatpickr-day.startRange.startRange,\n#sincloBox ul#chatTalk li .flatpickr-day.endRange.startRange {\n  border-radius: 50px 0 0 50px;\n}\n#sincloBox ul#chatTalk li .flatpickr-day.selected.endRange,\n#sincloBox ul#chatTalk li .flatpickr-day.startRange.endRange,\n#sincloBox ul#chatTalk li .flatpickr-day.endRange.endRange {\n  border-radius: 0 50px 50px 0;\n}\n#sincloBox ul#chatTalk li .flatpickr-day.selected.startRange + .endRange:not(:nth-child(7n+1)),\n#sincloBox ul#chatTalk li .flatpickr-day.startRange.startRange + .endRange:not(:nth-child(7n+1)),\n#sincloBox ul#chatTalk li .flatpickr-day.endRange.startRange + .endRange:not(:nth-child(7n+1)) {\n  -webkit-box-shadow: -10px 0 0 #569ff7;\n  box-shadow: -10px 0 0 #569ff7;\n}\n#sincloBox ul#chatTalk li .flatpickr-day.selected.startRange.endRange,\n#sincloBox ul#chatTalk li .flatpickr-day.startRange.startRange.endRange,\n#sincloBox ul#chatTalk li .flatpickr-day.endRange.startRange.endRange {\n  border-radius: 50px;\n}\n#sincloBox ul#chatTalk li .flatpickr-day.inRange {\n  border-radius: 0;\n  -webkit-box-shadow: -5px 0 0 #e6e6e6, 5px 0 0 #e6e6e6;\n  box-shadow: -5px 0 0 #e6e6e6, 5px 0 0 #e6e6e6;\n}\n#sincloBox ul#chatTalk li .flatpickr-day.disabled,\n#sincloBox ul#chatTalk li .flatpickr-day.disabled:hover,\n#sincloBox ul#chatTalk li .flatpickr-day.prevMonthDay,\n#sincloBox ul#chatTalk li .flatpickr-day.nextMonthDay,\n#sincloBox ul#chatTalk li .flatpickr-day.notAllowed,\n#sincloBox ul#chatTalk li .flatpickr-day.notAllowed.prevMonthDay,\n#sincloBox ul#chatTalk li .flatpickr-day.notAllowed.nextMonthDay {\n  color: rgba(57, 57, 57, 0.3);\n  background: transparent;\n  border-color: transparent;\n  cursor: default;\n}\n#sincloBox ul#chatTalk li .flatpickr-day.disabled,\n#sincloBox ul#chatTalk li .flatpickr-day.disabled:hover {\n  cursor: not-allowed;\n  color: rgba(57, 57, 57, 0.1);\n}\n#sincloBox ul#chatTalk li .flatpickr-day.week.selected {\n  border-radius: 0;\n  -webkit-box-shadow: -5px 0 0 #569ff7, 5px 0 0 #569ff7;\n  box-shadow: -5px 0 0 #569ff7, 5px 0 0 #569ff7;\n}\n#sincloBox ul#chatTalk li .flatpickr-day.hidden {\n  visibility: hidden;\n}\n#sincloBox ul#chatTalk li.sinclo_re .rangeMode .flatpickr-day {\n  margin-top: 1px;\n}\n#sincloBox ul#chatTalk li .flatpickr-weekwrapper {\n  display: inline-block;\n  float: left;\n}\n#sincloBox ul#chatTalk li .flatpickr-weekwrapper .flatpickr-weeks {\n  padding: 0 12px;\n  -webkit-box-shadow: 1px 0 0 #e6e6e6;\n  box-shadow: 1px 0 0 #e6e6e6;\n}\n#sincloBox ul#chatTalk li .flatpickr-weekwrapper .flatpickr-weekday {\n  float: none;\n  width: 100%;\n  line-height: 28px;\n}\n#sincloBox ul#chatTalk li .flatpickr-weekwrapper span.flatpickr-day,\n#sincloBox ul#chatTalk li .flatpickr-weekwrapper span.flatpickr-day:hover {\n  display: block;\n  width: 100%;\n  max-width: none;\n  color: rgba(57, 57, 57, 0.3);\n  background: transparent;\n  cursor: default;\n  border: none;\n}\n#sincloBox ul#chatTalk li .flatpickr-innerContainer {\n  display: block;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  overflow: hidden;\n}\n#sincloBox ul#chatTalk li .flatpickr-rContainer {\n  display: inline-block;\n  padding: 0;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n#sincloBox ul#chatTalk li .flatpickr-time {\n  text-align: center;\n  outline: 0;\n  display: block;\n  height: 0;\n  line-height: 40px;\n  max-height: 40px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  overflow: hidden;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n}\n#sincloBox ul#chatTalk li .flatpickr-time:after {\n  content: "";\n  display: table;\n  clear: both;\n}\n#sincloBox ul#chatTalk li .flatpickr-time .numInputWrapper {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n  width: 40%;\n  height: 40px;\n  float: left;\n}\n#sincloBox ul#chatTalk li .flatpickr-time .numInputWrapper span.arrowUp:after {\n  border-bottom-color: #393939;\n}\n#sincloBox ul#chatTalk li .flatpickr-time .numInputWrapper span.arrowDown:after {\n  border-top-color: #393939;\n}\n#sincloBox ul#chatTalk li .flatpickr-time.hasSeconds .numInputWrapper {\n  width: 26%;\n}\n#sincloBox ul#chatTalk li .flatpickr-time.time24hr .numInputWrapper {\n  width: 49%;\n}\n#sincloBox ul#chatTalk li .flatpickr-time input {\n  background: transparent;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n  border: 0;\n  border-radius: 0;\n  text-align: center;\n  margin: 0;\n  padding: 0;\n  height: inherit;\n  line-height: inherit;\n  color: #393939;\n  font-size: 14px;\n  position: relative;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n#sincloBox ul#chatTalk li .flatpickr-time input.flatpickr-hour {\n  font-weight: bold;\n}\n#sincloBox ul#chatTalk li .flatpickr-time input.flatpickr-minute,\n#sincloBox ul#chatTalk li .flatpickr-time input.flatpickr-second {\n  font-weight: 400;\n}\n#sincloBox ul#chatTalk li .flatpickr-time input:focus {\n  outline: 0;\n  border: 0;\n}\n#sincloBox ul#chatTalk li .flatpickr-time .flatpickr-time-separator,\n#sincloBox ul#chatTalk li .flatpickr-time .flatpickr-am-pm {\n  height: inherit;\n  display: inline-block;\n  float: left;\n  line-height: inherit;\n  color: #393939;\n  font-weight: bold;\n  width: 2%;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  -webkit-align-self: center;\n  -ms-flex-item-align: center;\n  align-self: center;\n}\n#sincloBox ul#chatTalk li .flatpickr-time .flatpickr-am-pm {\n  outline: 0;\n  width: 18%;\n  cursor: pointer;\n  text-align: center;\n  font-weight: 400;\n}\n#sincloBox ul#chatTalk li .flatpickr-time input:hover,\n#sincloBox ul#chatTalk li .flatpickr-time .flatpickr-am-pm:hover,\n#sincloBox ul#chatTalk li .flatpickr-time input:focus,\n#sincloBox ul#chatTalk li .flatpickr-time .flatpickr-am-pm:focus {\n  background: #f3f3f3;\n}\n#sincloBox ul#chatTalk li .flatpickr-input[readonly] {\n  cursor: pointer;\n}\n@-webkit-keyframes fpFadeInDown {\n  from {\n    opacity: 0;\n    -webkit-transform: translate3d(0, -20px, 0);\n    transform: translate3d(0, -20px, 0);\n  }\n  to {\n    opacity: 1;\n    -webkit-transform: translate3d(0, 0, 0);\n    transform: translate3d(0, 0, 0);\n  }\n}\n@keyframes fpFadeInDown {\n  from {\n    opacity: 0;\n    -webkit-transform: translate3d(0, -20px, 0);\n    transform: translate3d(0, -20px, 0);\n  }\n  to {\n    opacity: 1;\n    -webkit-transform: translate3d(0, 0, 0);\n    transform: translate3d(0, 0, 0);\n  }\n}#sincloBox ul#chatTalk li .flatpickr-calendar {\n  width: 210px;\n  height: 252px;\n  border-radius: 0;\n  box-shadow: none;\n}\n\n#sincloBox ul#chatTalk li .flatpickr-calendar .flatpickr-current-month {\n  font-size: 14px;\n  padding-top: 8px;\n}\n\n#sincloBox ul#chatTalk li .flatpickr-calendar .flatpickr-weekdays {\n  width: 206px;\n  height: 24px;\n}\n\n#sincloBox ul#chatTalk li .flatpickr-calendar .flatpickr-weekdaycontainer {\n  padding-top: 4px;\n  padding-right: 2px;\n  height: 21px;\n  white-space: normal;\n}\n\n#sincloBox ul#chatTalk li .flatpickr-calendar .flatpickr-weekdaycontainer .flatpickr-weekday {\n  font-size: 11px;\n  line-height: 10px;\n}\n\n#sincloBox ul#chatTalk li .flatpickr-calendar .dayContainer {\n  max-width: 206px;\n  min-width: 200px;\n}\n\n#sincloBox ul#chatTalk li .flatpickr-calendar .flatpickr-months {\n  height: 32px;\n}\n\n#sincloBox ul#chatTalk li .flatpickr-calendar .flatpickr-months .flatpickr-prev-month {\n  height: 24px;\n  padding: 7px;\n}\n\n#sincloBox ul#chatTalk li .flatpickr-calendar .flatpickr-months .flatpickr-next-month {\n  height: 24px;\n  padding: 7px;\n}\n\n#sincloBox ul#chatTalk li .flatpickr-calendar .flatpickr-months .flatpickr-current-month .numInputWrapper {\n  display: none;\n}\n\n#sincloBox ul#chatTalk li .flatpickr-calendar .flatpickr-months .flatpickr-current-month input.cur-year {\n  display: none;\n}\n\n#sincloBox ul#chatTalk li .flatpickr-calendar .dayContainer .flatpickr-day.disabled {\n  color: rgba(57, 57, 57, 0.18);\n}\n\n#sincloBox ul#chatTalk li .flatpickr-calendar .dayContainer .flatpickr-day {\n  height: 32px;\n  line-height: 32px;\n  border-radius: 0;\n  font-weight: bolder;\n  flex-basis: 29.42px;\n}\n\n#sincloBox ul#chatTalk li .flatpickr-calendar .dayContainer .flatpickr-day.today {\n  border: none;\n}\n\n#sincloBox ul#chatTalk li .flatpickr-calendar .dayContainer span:nth-child(7n+7) {\n  border-right: none;}\n#sincloBox ul#chatTalk li .flatpickr-calendar .dayContainer .flatpickr-day.today:after { content: "";position: absolute;top: 0px;left: 0px;width: 26px;height: 29px;display: inline-block;}\n@media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {\n  #sincloBox ul#chatTalk li .flatpickr-calendar .dayContainer .flatpickr-day {flex-basis: 28.42px;}\n  #sincloBox ul#chatTalk li  .flatpickr-calendar .dayContainer .flatpickr-day.today:after { content: "";position: absolute;top: 0px;left: 0px;width: 27px;height: 29px;display: inline-block;}\n}'},injectMobileCalendarCSS:function(e){common.isPortrait()||(e=1.25);var t="#sincloBox ul#chatTalk li .flatpickr-calendar {\n  font-size: "+14*e+"px;\n  line-height: "+24*e+"px;\n  border-radius: "+5*e+"px;\n  width: "+200*e+"px;\n  -webkit-box-shadow: "+1*e+"px 0 0 #e6e6e6, "+-1*e+"px 0 0 #e6e6e6, 0 "+1*e+"px 0 #e6e6e6, 0 "+-1*e+"px 0 #e6e6e6, 0 "+3*e+"px "+13*e+"px rgba(0, 0, 0, 0.08);\n  box-shadow: "+1*e+"px 0 0 #e6e6e6, "+-1*e+"px 0 0 #e6e6e6, 0 "+1*e+"px 0 #e6e6e6, 0 "+-1*e+"px 0 #e6e6e6, 0 "+3*e+"px "+13*e+"px rgba(0, 0, 0, 0.08);\n}\n#sincloBox ul#chatTalk li .flatpickr-calendar.open,\n#sincloBox ul#chatTalk li .flatpickr-calendar.inline {\n  max-height: "+640*e+"px;\n  height: "+256.8*e+"px;\n}\n#sincloBox ul#chatTalk li .flatpickr-calendar.inline {\n  top: "+2*e+"px;\n}\n#sincloBox ul#chatTalk li .flatpickr-calendar.static {\n  top: calc(100% + "+2*e+"px);\n}\n#sincloBox ul#chatTalk li .flatpickr-calendar.multiMonth .flatpickr-days .dayContainer:nth-child(n+2) .flatpickr-day.inRange:nth-child(7n+1) {\n  -webkit-box-shadow: "+-2*e+"px 0 0 #e6e6e6, "+5*e+"px 0 0 #e6e6e6;\n  box-shadow: "+-2*e+"px 0 0 #e6e6e6, "+5*e+"px 0 0 #e6e6e6;\n}\n#sincloBox ul#chatTalk li .flatpickr-calendar.showTimeInput.hasTime .flatpickr-time {\n  height: "+40*e+"px;\n  border-top: "+1*e+"px solid #e6e6e6;\n}\n#sincloBox ul#chatTalk li .flatpickr-calendar:before,\n#sincloBox ul#chatTalk li .flatpickr-calendar:after {\n  left: "+22*e+"px;\n}\n#sincloBox ul#chatTalk li .flatpickr-calendar.rightMost:before,\n#sincloBox ul#chatTalk li .flatpickr-calendar.rightMost:after {\n  right: "+22*e+"px;\n}\n#sincloBox ul#chatTalk li .flatpickr-calendar:before {\n  border-width: "+5*e+"px;\n  margin: 0 "+-5*e+"px;\n}\n#sincloBox ul#chatTalk li .flatpickr-calendar:after {\n  border-width: "+4*e+"px;\n  margin: 0 "+-4*e+"px;\n}\n#sincloBox ul#chatTalk li .flatpickr-months .flatpickr-month {\n  height: "+28*e+"px;\n  line-height: 1;\n}\n#sincloBox ul#chatTalk li .flatpickr-months .flatpickr-prev-month,\n#sincloBox ul#chatTalk li .flatpickr-months .flatpickr-next-month {\n  top: 0;\n  line-height: "+16*e+"px;\n  height: "+28*e+"px;\n  padding: "+10*e+"px;\n  z-index: 3;\n}\n#sincloBox ul#chatTalk li .flatpickr-months .flatpickr-prev-month.flatpickr-prev-month,\n#sincloBox ul#chatTalk li .flatpickr-months .flatpickr-next-month.flatpickr-prev-month {\n  left: 0;\n}\n#sincloBox ul#chatTalk li .flatpickr-months .flatpickr-prev-month.flatpickr-next-month,\n#sincloBox ul#chatTalk li .flatpickr-months .flatpickr-next-month.flatpickr-next-month {\n  right: 0;\n}\n#sincloBox ul#chatTalk li .flatpickr-months .flatpickr-prev-month svg,\n#sincloBox ul#chatTalk li .flatpickr-months .flatpickr-next-month svg {\n  width: "+14*e+"px;\n  height: "+14*e+"px;\n}\n#sincloBox ul#chatTalk li .numInputWrapper span {\n  right: 0;\n  width: "+14*e+"px;\n  padding: 0 "+2*e+"px 0 "+2*e+"px;\n  border: "+1*e+"px solid rgba(57, 57, 57, 0.15);\n}\n#sincloBox ul#chatTalk li .numInputWrapper span.arrowUp {\n  top: 0;\n  border-bottom: 0;\n}\n#sincloBox ul#chatTalk li .numInputWrapper span.arrowUp:after {\n  border-left: "+4*e+"px solid transparent;\n  border-right: "+4*e+"px solid transparent;\n  border-bottom: "+4*e+"px solid rgba(57, 57, 57, 0.6);\n}\n#sincloBox ul#chatTalk li .numInputWrapper span.arrowDown:after {\n  border-left: "+4*e+"px solid transparent;\n  border-right: "+4*e+"px solid transparent;\n  border-top: "+4*e+"px solid rgba(57, 57, 57, 0.6);\n}\n#sincloBox ul#chatTalk li .flatpickr-current-month {\n  font-size: 135%;\n  font-weight: 300;\n  width: 75%;\n  left: 12.5%;\n  padding: "+6.16*e+"px 0 0 0;\n  line-height: 1;\n  height: "+28*e+"px;\n}\n#sincloBox ul#chatTalk li .flatpickr-current-month span.cur-month {\n  font-weight: 700;\n  margin-left: "+.5*e+"ch;\n  padding: 0;\n}\n#sincloBox ul#chatTalk li .flatpickr-current-month .numInputWrapper {\n  width: "+6*e+"ch;\n  width: "+7*e+"ch\\0;\n}\n#sincloBox ul#chatTalk li .flatpickr-current-month input.cur-year {\n  padding: 0 0 0 "+.5*e+"ch;\n  margin: 0;\n  font-weight: 300;\n  border: 0;\n  border-radius: 0;\n}\n#sincloBox ul#chatTalk li .flatpickr-current-month input.cur-year[disabled],\n#sincloBox ul#chatTalk li .flatpickr-current-month input.cur-year[disabled]:hover {\n  font-size: 100%;\n}\n#sincloBox ul#chatTalk li .flatpickr-weekdays {\n  width: 100%;\n  height: "+28*e+"px;\n}\n#sincloBox ul#chatTalk li span.flatpickr-weekday {\n  font-size: 90%;\n  line-height: 1;\n  margin: 0;\n}\n#sincloBox ul#chatTalk li .dayContainer,\n#sincloBox ul#chatTalk li .flatpickr-weeks {\n  padding: "+1*e+"px 0 0 0;\n}\n#sincloBox ul#chatTalk li .flatpickr-days {\n  width: "+300*e+"px;\n}\n#sincloBox ul#chatTalk li .dayContainer {\n  padding: 0;\n  outline: 0;\n  width: "+307.875*e+"px;\n  min-width: "+307.875*e+"px;\n  max-width: "+307.875*e+"px;\n  -webkit-transform: translate3d(0, 0, 0);\n  transform: translate3d(0, 0, 0);\n}\n#sincloBox ul#chatTalk li .dayContainer + .dayContainer {\n  -webkit-box-shadow: "+-1*e+"px 0 0 #e6e6e6;\n  box-shadow: "+-1*e+"px 0 0 #e6e6e6;\n}\n#sincloBox ul#chatTalk li .flatpickr-day {\n  border: "+1*e+"px solid transparent;\n  border-radius: "+150*e+"px;\n  font-weight: 400;\n  width: 14.2857143%;\n  -webkit-flex-basis: 14.2857143%;\n  -ms-flex-preferred-size: 14.2857143%;\n  flex-basis: 14.2857143%;\n  max-width: "+39*e+"px;\n  height: "+39*e+"px;\n  line-height: "+39*e+"px;\n  margin: 0;\n}\n#sincloBox ul#chatTalk li .flatpickr-day.inRange,\n#sincloBox ul#chatTalk li .flatpickr-day.prevMonthDay.inRange,\n#sincloBox ul#chatTalk li .flatpickr-day.nextMonthDay.inRange,\n#sincloBox ul#chatTalk li .flatpickr-day.today.inRange,\n#sincloBox ul#chatTalk li .flatpickr-day.prevMonthDay.today.inRange,\n#sincloBox ul#chatTalk li .flatpickr-day.nextMonthDay.today.inRange,\n#sincloBox ul#chatTalk li .flatpickr-day:hover,\n#sincloBox ul#chatTalk li .flatpickr-day.prevMonthDay:hover,\n#sincloBox ul#chatTalk li .flatpickr-day.nextMonthDay:hover,\n#sincloBox ul#chatTalk li .flatpickr-day:focus,\n#sincloBox ul#chatTalk li .flatpickr-day.prevMonthDay:focus,\n#sincloBox ul#chatTalk li .flatpickr-day.nextMonthDay:focus {\n  outline: 0;\n}\n#sincloBox ul#chatTalk li .flatpickr-day.selected.startRange,\n#sincloBox ul#chatTalk li .flatpickr-day.startRange.startRange,\n#sincloBox ul#chatTalk li .flatpickr-day.endRange.startRange {\n  border-radius: "+50*e+"px 0 0 "+50*e+"px;\n}\n#sincloBox ul#chatTalk li .flatpickr-day.selected.endRange,\n#sincloBox ul#chatTalk li .flatpickr-day.startRange.endRange,\n#sincloBox ul#chatTalk li .flatpickr-day.endRange.endRange {\n  border-radius: 0 "+50*e+"px "+50*e+"px 0;\n}\n#sincloBox ul#chatTalk li .flatpickr-day.selected.startRange + .endRange:not(:nth-child(7n+1)),\n#sincloBox ul#chatTalk li .flatpickr-day.startRange.startRange + .endRange:not(:nth-child(7n+1)),\n#sincloBox ul#chatTalk li .flatpickr-day.endRange.startRange + .endRange:not(:nth-child(7n+1)) {\n  -webkit-box-shadow: "+-10*e+"px 0 0 #569ff7;\n  box-shadow: "+-10*e+"px 0 0 #569ff7;\n}\n#sincloBox ul#chatTalk li .flatpickr-day.selected.startRange.endRange,\n#sincloBox ul#chatTalk li .flatpickr-day.startRange.startRange.endRange,\n#sincloBox ul#chatTalk li .flatpickr-day.endRange.startRange.endRange {\n  border-radius: "+50*e+"px;\n}\n#sincloBox ul#chatTalk li .flatpickr-day.inRange {\n  border-radius: 0;\n  -webkit-box-shadow: "+-5*e+"px 0 0 #e6e6e6, "+5*e+"px 0 0 #e6e6e6;\n  box-shadow: "+-5*e+"px 0 0 #e6e6e6, "+5*e+"px 0 0 #e6e6e6;\n}\n#sincloBox ul#chatTalk li .flatpickr-day.week.selected {\n  border-radius: 0;\n  -webkit-box-shadow: "+-5*e+"px 0 0 #569ff7, "+-5*e+"px 0 0 #569ff7;\n  box-shadow: "+-5*e+"px 0 0 #569ff7, "+5*e+"px 0 0 #569ff7;\n}\n#sincloBox ul#chatTalk li.sinclo_re .rangeMode .flatpickr-day {\n  margin-top: "+1*e+"px;\n}\n#sincloBox ul#chatTalk li .flatpickr-weekwrapper .flatpickr-weeks {\n  padding: 0 "+12*e+"px;\n  -webkit-box-shadow: "+1*e+"px 0 0 #e6e6e6;\n  box-shadow: "+1*e+"px 0 0 #e6e6e6;\n}\n#sincloBox ul#chatTalk li .flatpickr-weekwrapper .flatpickr-weekday {\n  width: 100%;\n  line-height: "+28*e+"px;\n}\n#sincloBox ul#chatTalk li .flatpickr-weekwrapper span.flatpickr-day,\n#sincloBox ul#chatTalk li .flatpickr-weekwrapper span.flatpickr-day:hover {\n  width: 100%;\n}\n#sincloBox ul#chatTalk li .flatpickr-rContainer {\n  padding: 0;\n}\n#sincloBox ul#chatTalk li .flatpickr-time {\n  outline: 0;\n  height: 0;\n  line-height: "+40*e+"px;\n  max-height: "+40*e+"px;\n}\n#sincloBox ul#chatTalk li .flatpickr-time .numInputWrapper {\n  width: 40%;\n  height: "+40*e+"px;\n}\n#sincloBox ul#chatTalk li .flatpickr-time.hasSeconds .numInputWrapper {\n  width: 26%;\n}\n#sincloBox ul#chatTalk li .flatpickr-time.time24hr .numInputWrapper {\n  width: 49%;\n}\n#sincloBox ul#chatTalk li .flatpickr-time input {\n  border: 0;\n  border-radius: 0;\n  margin: 0;\n  padding: 0;\n  font-size: "+14*e+"px;\n}\n#sincloBox ul#chatTalk li .flatpickr-time input.flatpickr-minute,\n#sincloBox ul#chatTalk li .flatpickr-time input.flatpickr-second {\n  font-weight: 400;\n}\n#sincloBox ul#chatTalk li .flatpickr-time input:focus {\n  outline: 0;\n  border: 0;\n}\n#sincloBox ul#chatTalk li .flatpickr-time .flatpickr-time-separator,\n#sincloBox ul#chatTalk li .flatpickr-time .flatpickr-am-pm {\n  width: 2%;\n}\n#sincloBox ul#chatTalk li .flatpickr-time .flatpickr-am-pm {\n  outline: 0;\n  width: 18%;\n  font-weight: 400;\n}\n@-webkit-keyframes fpFadeInDown {\n  from {\n    opacity: 0;\n    -webkit-transform: translate3d(0, "+-20*e+"px, 0);\n    transform: translate3d(0, "+-20*e+"px, 0);\n  }\n  to {\n    opacity: 1;\n    -webkit-transform: translate3d(0, 0, 0);\n    transform: translate3d(0, 0, 0);\n  }\n}\n@keyframes fpFadeInDown {\n  from {\n    opacity: 0;\n    -webkit-transform: translate3d(0, "+-20*e+"px, 0);\n    transform: translate3d(0, "+-20*e+"px, 0);\n  }\n  to {\n    opacity: 1;\n    -webkit-transform: translate3d(0, 0, 0);\n    transform: translate3d(0, 0, 0);\n  }\n}#sincloBox ul#chatTalk li .flatpickr-calendar {\n  width: "+203*e+"px;\n  height: "+252*e+"px;\n}\n\n#sincloBox ul#chatTalk li .flatpickr-calendar .flatpickr-current-month {\n  font-size: "+10*e+"px;\n  padding-top: "+8*e+"px;\n}\n\n#sincloBox ul#chatTalk li .flatpickr-calendar .flatpickr-weekdays {\n  width: "+199*e+"px;\n  height: "+24*e+"px;\n}\n\n#sincloBox ul#chatTalk li .flatpickr-calendar .flatpickr-weekdaycontainer {\n  padding-top: "+4*e+"px;\n  padding-right: "+2*e+"px;\n  height: "+21*e+"px;\n}\n\n#sincloBox ul#chatTalk li .flatpickr-calendar .flatpickr-weekdaycontainer .flatpickr-weekday {\n  font-size: "+11*e+"px;\n  line-height: "+10*e+"px;\n}\n\n#sincloBox ul#chatTalk li .flatpickr-calendar .dayContainer {\n  max-width: "+199*e+"px;\n  min-width: "+200*e+"px;\n}\n\n#sincloBox ul#chatTalk li .flatpickr-calendar .flatpickr-months {\n  height: "+32*e+"px;\n}\n\n#sincloBox ul#chatTalk li .flatpickr-calendar .flatpickr-months .flatpickr-prev-month {\n  height: "+24*e+"px;\n  padding: "+7*e+"px;\n}\n\n#sincloBox ul#chatTalk li .flatpickr-calendar .flatpickr-months .flatpickr-next-month {\n  height: "+24*e+"px;\n  padding: "+7*e+"px;\n}\n#sincloBox ul#chatTalk li .flatpickr-calendar .dayContainer .flatpickr-day {\n  height: "+32*e+"px;\n  line-height: "+32*e+"px;\n  border-radius: 0;\n  flex-basis: "+27*e+"px;\n}\n\n";return common.isPortrait()?t+='#sincloBox ul#chatTalk li .flatpickr-calendar .dayContainer .flatpickr-day.today:after { content: "";position: absolute;top: 0px;left: -1px;width: '+25.25*e+"px;height: "+29*e+"px;display: inline-block;}\n":t+='#sincloBox ul#chatTalk li .flatpickr-calendar .dayContainer .flatpickr-day.today:after { content: "";position: absolute;top: 0px;left: -2px;width: '+25*e+"px;height: "+28*e+"px;display: inline-block;}\n",t+="@media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {\n  #sincloBox ul#chatTalk li .flatpickr-calendar .dayContainer .flatpickr-day {flex-basis: "+28*e+'px;}\n  #sincloBox ul#chatTalk li  .flatpickr-calendar .dayContainer .flatpickr-day.today:after { content: "";position: absolute;top: 0px;left: 0px;width: '+28*e+"px;height: "+29*e+"px;display: inline-block;}\n}"},injectCarouselCss:function(){return'#sincloBox ul#chatTalk li .slick-slider {\n          position: relative;\n          display: block;\n          box-sizing: border-box;\n          -webkit-user-select: none;\n          -moz-user-select: none;\n          -ms-user-select: none;\n          user-select: none;\n          -webkit-touch-callout: none;\n          -khtml-user-select: none;\n          -ms-touch-action: pan-y;\n          touch-action: pan-y;\n          -webkit-tap-highlight-color: transparent;\n        }\n        #sincloBox ul#chatTalk li .slick-list {\n          position: relative;\n          display: block;\n          overflow: hidden;\n          margin: 0;\n          padding: 0;\n        }\n        #sincloBox ul#chatTalk li .slick-list:focus {\n          outline: none;\n        }\n        #sincloBox ul#chatTalk li .slick-list.dragging {\n          cursor: pointer;\n          cursor: hand;\n        }\n        #sincloBox ul#chatTalk li .slick-slider .slick-track,\n        #sincloBox ul#chatTalk li .slick-slider .slick-list {\n          -webkit-transform: translate3d(0, 0, 0);\n          -moz-transform: translate3d(0, 0, 0);\n          -ms-transform: translate3d(0, 0, 0);\n          -o-transform: translate3d(0, 0, 0);\n          transform: translate3d(0, 0, 0);\n        }\n        #sincloBox ul#chatTalk li .slick-track {\n          position: relative;\n          top: 0;\n          left: 0;\n          display: block;\n          margin-left: auto;\n          margin-right: auto;\n        }\n        #sincloBox ul#chatTalk li .slick-track:before,\n        #sincloBox ul#chatTalk li .slick-track:after {\n          display: table;\n          content: "";\n        }\n        #sincloBox ul#chatTalk li .slick-track:after {\n          clear: both;\n        }\n        #sincloBox ul#chatTalk li .slick-loading .slick-track {\n          visibility: hidden;\n        }\n        #sincloBox ul#chatTalk li .slick-slide {\n          display: none;\n          float: left;\n          height: 100%;\n          min-height: 1px;\n        }\n        #sincloBox ul#chatTalk li [dir=rtl] .slick-slide {\n          float: right;\n        }\n        #sincloBox ul#chatTalk li .slick-slide img {\n          display: block;\n        }\n        #sincloBox ul#chatTalk li .slick-slide.slick-loading img {\n          display: none;\n        }\n        #sincloBox ul#chatTalk li .slick-slide.dragging img {\n          pointer-events: none;\n        }\n        #sincloBox ul#chatTalk li .slick-initialized .slick-slide {\n          display: block;\n        }\n        #sincloBox ul#chatTalk li .slick-loading .slick-slide {\n          visibility: hidden;\n        }\n        #sincloBox ul#chatTalk li .slick-vertical .slick-slide {\n          display: block;\n          height: auto;\n          border: 1px solid transparent;\n        }\n        #sincloBox ul#chatTalk li .slick-arrow.slick-hidden {\n          display: none;\n        }\n        #sincloBox ul#chatTalk li .slick-loading .slick-list {\n          background: #fff url("./ajax-loader.gif") center center no-repeat;\n        }\n        #sincloBox ul#chatTalk li .slick-prev,\n        #sincloBox ul#chatTalk li .slick-next {\n          font-size: 0;\n          line-height: 0;\n          position: absolute;\n          top: 50%;\n          display: block;\n          width: 20px;\n          height: 20px;\n          padding: 0;\n          -webkit-transform: translate(0, -50%);\n          -ms-transform: translate(0, -50%);\n          transform: translate(0, -50%);\n          cursor: pointer;\n          color: transparent;\n          border: none;\n          outline: none;\n          background: transparent;\n        }\n        #sincloBox ul#chatTalk li .slick-prev:hover,\n        #sincloBox ul#chatTalk li .slick-prev:focus,\n        #sincloBox ul#chatTalk li .slick-next:hover,\n        #sincloBox ul#chatTalk li .slick-next:focus {\n          color: transparent;\n          outline: none;\n          background: transparent;\n        }\n        #sincloBox ul#chatTalk li .slick-prev:hover:before,\n        #sincloBox ul#chatTalk li .slick-prev:focus:before,\n        #sincloBox ul#chatTalk li .slick-next:hover:before,\n        #sincloBox ul#chatTalk li .slick-next:focus:before {\n          opacity: 1;\n        }\n        #sincloBox ul#chatTalk li .slick-prev.slick-disabled:before,\n        #sincloBox ul#chatTalk li .slick-next.slick-disabled:before {\n          opacity: 0.25 !important;\n        }\n        #sincloBox ul#chatTalk li .slick-prev:before,\n        #sincloBox ul#chatTalk li .slick-next:before {\n          font-family: "slick";\n          font-size: 20px;\n          line-height: 1;\n          opacity: 0.75;\n          color: white;\n          -webkit-font-smoothing: antialiased;\n          -moz-osx-font-smoothing: grayscale;\n        }\n        #sincloBox ul#chatTalk li .slick-prev {\n          left: -25px;\n          z-index: 999;\n        }\n        #sincloBox ul#chatTalk li [dir=rtl] .slick-prev {\n          right: -25px;\n          left: auto;\n          z-index: 999;\n        }\n        /*#sincloBox ul#chatTalk li .slick-prev:before {*/\n          /*content: "â";*/\n        /*}*/\n        /*#sincloBox ul#chatTalk li [dir=rtl] .slick-prev:before {*/\n          /*content: "â";*/\n        /*}*/\n        #sincloBox ul#chatTalk li .slick-next {\n          right: -25px;\n        }\n        #sincloBox ul#chatTalk li [dir=rtl] .slick-next {\n          right: auto;\n          left: -25px;\n        }\n        /*#sincloBox ul#chatTalk li .slick-next:before {*/\n          /*content: "â";*/\n        /*}*/\n        /*#sincloBox ul#chatTalk li [dir=rtl] .slick-next:before {*/\n          /*content: "â";*/\n        /*}*/\n        #sincloBox ul#chatTalk li .slick-dotted.slick-slider {\n          margin-bottom: 30px;\n        }\n        #sincloBox ul#chatTalk li .slick-dots {\n          position: absolute;\n          bottom: -25px;\n          display: block;\n          width: 100%;\n          padding: 0;\n          margin: 0;\n          list-style: none;\n          text-align: center;\n        }\n        #sincloBox ul#chatTalk li .slick-dots li {\n          position: relative;\n          display: inline-block;\n          width: 20px;\n          height: 20px;\n          margin: 0 5px;\n          padding: 0;\n          cursor: pointer;\n        }\n        #sincloBox ul#chatTalk li .slick-dots li button {\n          font-size: 0;\n          line-height: 0;\n          display: block;\n          width: 20px;\n          height: 20px;\n          padding: 5px;\n          cursor: pointer;\n          color: transparent;\n          border: 0;\n          outline: none;\n          background: transparent;\n        }\n        #sincloBox ul#chatTalk li .slick-dots li button:hover,\n        #sincloBox ul#chatTalk li .slick-dots li button:focus {\n          outline: none;\n        }\n        #sincloBox ul#chatTalk li .slick-dots li button:hover:before,\n        #sincloBox ul#chatTalk li .slick-dots li button:focus:before {\n          opacity: 1;\n        }\n        #sincloBox ul#chatTalk li .slick-dots li button:before {\n          font-family: "slick";\n          font-size: 6px;\n          line-height: 20px;\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 20px;\n          height: 20px;\n          content: "â¢";\n          text-align: center;\n          opacity: 0.25;\n          color: black;\n          -webkit-font-smoothing: antialiased;\n          -moz-osx-font-smoothing: grayscale;\n        }\n        #sincloBox ul#chatTalk li .slick-dots li.slick-active button:before {\n          opacity: 0.75;\n          color: black;\n        }\n\n        #sincloBox ul#chatTalk li .fa-chevron-right:before {\n          content: "\\f054";\n        }\n\n        #sincloBox ul#chatTalk li .fa-chevron-left:before {\n          content: "\\f053";\n        }#sincloBox ul#chatTalk li.carousel_msg {padding: 10px 40px;}#sincloBox ul#chatTalk li.insideArrow { padding: 10px 15px; }#sincloBox ul#chatTalk li.outsideArrow { padding: 10px 40px; }#sincloBox ul#chatTalk li.noneBalloon { margin-left: 0; }#sincloBox ul#chatTalk li.outsideArrow .sinclo-text-line{ margin-left: -25px; margin-right: -25px; }'},injectAwesompleteCss:function(){return'#sincloBox .awesomplete [hidden] {\n    display: none;\n    max-width: 45%;\n}\n\n#sincloBox .awesomplete .visually-hidden {\n    position: absolute;\n    clip: rect(0, 0, 0, 0);\n}\n\n#sincloBox .awesomplete {\n    display: block;\n    position: relative;\n    min-width: 68px;\n    flex-basis: 43%;\n    flex-grow: 1;\n}\n\n#sincloBox .awesomplete > input {\n    display: block;\n}\n\n#sincloBox .awesomplete > ul {\n    position: absolute;\n    left: 0;\n    z-index: 1;\n    min-width: 100%;\n    box-sizing: border-box;\n    list-style: none;\n    padding: 0;\n    margin: 0;\n    background: #fff;\n}\n\n#sincloBox .awesomplete > ul:empty {\n    display: none;\n}\n\n#sincloBox .awesomplete > ul {\nborder-radius: .3em;\nmargin: .2em 0 0;\nbackground: hsla(0,0%,100%,.9);\nbackground: linear-gradient(to bottom right, white, hsla(0,0%,100%,.8));\nborder: 1px solid rgba(0,0,0,.3);\nbox-shadow: .05em .2em .6em rgba(0,0,0,.2);\ntext-shadow: none;\n}\n\n@supports (transform: scale(0)) {\n#sincloBox .awesomplete > ul {\ntransition: .3s cubic-bezier(.4,.2,.5,1.4);\ntransform-origin: 1.43em -.43em;\n}\n\n#sincloBox .awesomplete > ul[hidden],\n#sincloBox .awesomplete > ul:empty {\nopacity: 0;\ntransform: scale(0);\ndisplay: block;\ntransition-timing-function: ease;\n}\n}\n\n/* Pointer */\n#sincloBox .awesomplete > ul:before {\ncontent: "";\nposition: absolute;\ntop: -.43em;\nleft: 1em;\nwidth: 0; height: 0;\npadding: .4em;\nbackground: white;\nborder: inherit;\nborder-right: 0;\nborder-bottom: 0;\n-webkit-transform: rotate(45deg);\ntransform: rotate(45deg);\n}\n\n#sincloBox .awesomplete > ul > li {\nposition: relative;\npadding: .2em .5em;\ncursor: pointer;\n}\n\n#sincloBox .awesomplete > ul > li:hover {\nbackground: hsl(200, 40%, 80%);\ncolor: black;\n}\n\n#sincloBox .awesomplete > ul > li[aria-selected="true"] {\nbackground: hsl(205, 40%, 40%);\ncolor: white;\n}\n\n#sincloBox .awesomplete mark {\nbackground: hsl(65, 100%, 50%);\n}\n\n#sincloBox .awesomplete li:hover mark {\nbackground: hsl(68, 100%, 41%);\n}\n\n#sincloBox .awesomplete li[aria-selected="true"] mark {\nbackground: hsl(86, 100%, 21%);\ncolor: inherit;\n}'},sincloBannerTemplate:function(e){common.getPageWidth();if(scl_check.smartphone())if(common.isPortrait());else;else;var t="";if(t+='  <div id="sincloBanner" class="sincloBanner" onclick="sinclo.operatorInfo.toggle();sinclo.operatorInfo.clickBanner();">',scl_check.hasCustomBannerImageSetting()||scl_check.hasOriginalImageSetting())scl_check.smartphone()?1===Number(e.spCloseButtonModeType)&&scl_check.isset(e.spOriginalImage)?t+='<img src="'+e.spOriginalImage+'" style="display:block; width: 150px; height: 90px" />':t+='<img src="'+window.sincloInfo.custom.widget.bannerImage.sp+'" style="width:150px; height:90px; display:block" />':3===Number(e.closeButtonModeType)&&scl_check.isset(e.pcOriginalImage)?t+='<img src="'+e.pcOriginalImage+'" style="display:block" />':t+='<img src="'+window.sincloInfo.custom.widget.bannerImage.pc+'" style="display:block" />';else{t+='    <div id="sincloBannerText" class="sincloBannerText">',t+='      <svg version="1.1" id="bannerIcon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve">\n<style type="text/css">\n\t.sinclo-st0{fill:'+common.getWidgetSettings().stringColor+'; animation: none;}\n</style>\n<g>\n\t<path class="sinclo-st0" d="M257.135,19.179C103.967,19.179,0,97.273,0,218.763c0,74.744,31.075,134.641,91.108,173.176\n\t\tc4.004,2.572,8.728,2.962,6.955,10.365c-7.16,29.935-19.608,83.276-19.608,83.276c-0.527,2.26,0.321,4.618,2.162,6.03\n\t\tc1.84,1.402,4.334,1.607,6.38,0.507c0,0,87.864-52.066,99.583-58.573c27.333-15.625,50.878-18.654,68.558-18.654\n\t\tC376.619,414.89,512,366.282,512,217.458C512,102.036,418.974,19.179,257.135,19.179z" style="fill: '+common.toRGBCode(common.getWidgetSettings().stringColor)+'; animation: none;"></path>\n</g>\n</svg>';var n="";t+='      <span class="'+(0!==(n=scl_check.smartphone()&&"string"==typeof e.spBannerText?scl_check.escape_html(e.spBannerText):scl_check.escape_html(e.bannertext)).length?"bannertext":"notext")+'">'+n+"</span>"}return t+="    </div>",t+="  </div>"},widgetHeaderTemplate:function(e){var t="";if(window.sincloInfo.custom&&window.sincloInfo.custom.widget&&window.sincloInfo.custom.widget.header&&window.sincloInfo.custom.widget.header.customImage)t+='<sinclo-div id="widgetHeader" class="notSelect" onclick="sinclo.operatorInfo.toggle()">',t+='  <sinclo-div id="titleWrap">',t+='    <sinclo-div id="widgetTitle" style="padding: 10px 0; display:flex; justify-content: center; align-items: center;">',t+='      <img class="sinclo-header-image" src="'+window.sincloInfo.custom.widget.header.customImage.url+'" width="'+window.sincloInfo.custom.widget.header.customImage.width+'" height="'+window.sincloInfo.custom.widget.header.customImage.height+'" style="display: inline-block; width:'+window.sincloInfo.custom.widget.header.customImage.width+"px; height:"+window.sincloInfo.custom.widget.header.customImage.height+'px;" />',t+="    </sinclo-div>",t+="  </sinclo-div>",t+="</sinclo-div>";else{if(1===Number(e.showMainImage)&&""!==e.mainImage){var n=1;scl_check.smartphone()&&(n=(common.getPageWidth()-20)*(1/285)),t+='  <span id="mainImage" onclick="sinclo.operatorInfo.toggle()">',scl_check.smartphone()?null!==e.mainImage.match(/^fa/)?t+='    <i class="sinclo-fal '+e.mainImage+'" style="width:calc('+62*n+"px* ((3 * 14 + 36) / 81))!important; height:calc("+70*n+'px* ((3 * 14 + 36) / 81))!important;" alt="ãã£ããç»å"></i>':t+='    <img src="'+e.mainImage+'" style="width:calc('+62*n+"px* ((3 * 14 + 36) / 81))!important; height:calc("+70*n+'px* ((3 * 14 + 36) / 81))!important; display:block" alt="ãã£ããç»å">':null!==e.mainImage.match(/^fa/)?t+='    <i class="sinclo-fal '+e.mainImage+'" style="width:calc('+62*n+"px* ((3 * "+e.headerTextSize+" + 36) / 81))!important; height:calc("+70*n+"px* ((3 * "+e.headerTextSize+' + 36) / 81))!important;" alt="ãã£ããç»å"></i>':t+='    <img src="'+e.mainImage+'" style="width:calc('+62*n+"px* ((3 * "+e.headerTextSize+" + 36) / 81))!important; height:calc("+70*n+"px* ((3 * "+e.headerTextSize+' + 36) / 81))!important;" display:block" alt="ãã£ããç»å">',t+="  </span>"}t+='    <div id="fw-close-btn" onclick="sinclo.operatorInfo.closeBtn()"><i class="sinclo-fal fa-times"></i></div>',t+='    <div id="fw-minimize-btn" onclick="sinclo.operatorInfo.toggle()"><i class="sinclo-fal fa-minus-square"></i></div>',t+='  <sinclo-div id="widgetHeader" class="notSelect" onclick="sinclo.operatorInfo.toggle()">',t+='  <sinclo-div id="titleWrap">',t+='    <p id="widgetTitle">'+scl_check.escape_html(e.title)+"</p>",t+="  </sinclo-div>",t+="  <sinclo-div>";var i=void 0===e.subTitle&&1===Number(e.showSubtitle)?"":e.subTitle,o=void 0===e.description?"":e.description;1!==Number(e.showMainImage)&&1!==Number(e.showSubtitle)&&1!==Number(e.showDescription)||(1===Number(e.showSubtitle)&&0!==e.subTitle.length?t+='    <p id="widgetSubTitle">'+scl_check.escape_html(i)+"</p>":t+='    <p id="widgetSubTitle">&thinsp;</p>',1===Number(e.showDescription)&&0!==e.description.length?t+='    <p id="widgetDescription">'+scl_check.escape_html(o)+"</p>":t+='    <p id="widgetDescription">&thinsp;</p>'),t+="  </sinclo-div>",t+="  </sinclo-div>"}return t},widgetCallOpTemplate:function(e){var t="",n="ãªãã¬ã¼ã¿å¼ã³åºã";return scl_check.objPath(sincloInfo,"custom.widget.header.opCallButtonLabel")&&(n=sincloInfo.custom.widget.header.opCallButtonLabel),scl_check.objPath(sincloInfo,"custom.widget.header.showOpCallButton")&&userInfo.isInBusinessHours&&(t+='  <section id="navigation">',t+='    <span id="callOperatorButton" onclick="sinclo.chatApi.callOperator()"><span id="callOpButtonIconWrap"><svg id="callOpButtonIcon" x="0px" y="0px" viewBox="0 0 512 512">\n<g>\n\t<path class="st0" d="M437.267,404.936c-12.213-18.384-30.777-28.6-48.256-35.198c-8.769-3.31-17.352-5.722-24.922-7.758\n\t\tc-7.563-2.023-14.169-3.685-18.658-5.279c-6.827-2.386-14.953-6.07-20.828-10.184c-2.948-2.044-5.3-4.194-6.687-6.036l-0.931-1.427\n\t\tc-1.273,0.429-2.499,0.911-3.812,1.293c-3.457,1.025-7.121,1.856-10.913,2.592c0.878,2.452,2.144,4.704,3.638,6.666\n\t\tc2.693,3.504,6.083,6.412,9.768,9.011l-54.132,83.864l-56.905-88.165l-6.914,4.476l63.819,98.877l61.106-94.683\n\t\tc5.923,3.296,12.173,5.976,17.78,7.952c0.965,0.342,2.05,0.65,3.082,0.972l19.074,58.768l-38.642-9.091l-62.399,52.276\n\t\tl-62.398-52.282l-38.642,9.098l20.674-63.685c5.379-2.405,10.706-5.145,15.415-8.428c3.732-2.62,7.128-5.561,9.788-9.165\n\t\tc2.646-3.571,4.589-8.04,4.576-13.017c0-8.006,0-18.015,0-31.729v-2.901l-1.937-2.151c-10.29-11.463-24.225-26.671-29.055-53.716\n\t\tl-0.764-4.321l-4.127-1.474c-2.626-0.938-4.63-1.896-6.378-3.108c-2.58-1.822-4.918-4.308-7.651-9.406\n\t\tc-2.7-5.065-5.561-12.628-8.689-23.609c-1.373-4.81-1.862-8.535-1.862-11.308c0.007-2.432,0.355-4.1,0.804-5.28\n\t\tc12.267,15.362,26.148,18.015,26.148,18.015c102.904-36.586,132.629-98.328,132.629-98.328s3.658,83.864,33.558,103.466v28.473\n\t\tc0,0,0.02,0.107,0.026,0.161c-1.742,1.098-3.658,1.99-6.022,2.867l-3.002,1.072l-0.556,3.135\n\t\tc-4.917,27.622-19.261,43.286-29.551,54.734l-1.407,1.568v2.111c0,2.552,0,4.857,0,7.162c4.027-1.099,7.658-2.452,10.974-4.046\n\t\tv-1.019c9.955-11.061,24.452-28.057,30.1-55.572l1.823-0.891c0.147-1.353,0.254-2.773,0.368-4.167\n\t\tc1.842,2.292,4.502,4.208,7.757,5.561c-0.984,8.83-2.491,16.715-4.542,23.542c-5.808,19.08-15.094,30.563-28.104,38.012\n\t\tc-11.048,6.291-25.311,9.507-42.589,10.344c-2.304-2.753-5.721-4.535-9.593-4.535h-18.29c-6.94,0-12.575,5.627-12.575,12.582\n\t\tc0,6.94,5.634,12.575,12.575,12.575h18.29c4.91,0,9.118-2.841,11.188-6.94c10.94-0.576,21.083-2.078,30.375-4.818\n\t\tc18.565-5.406,33.826-16.279,43.674-33.758c6.773-11.965,11.081-26.824,13.165-44.98c10.88-0.817,19.361-7.041,19.361-14.699\n\t\tv-59.451c0-6.592-6.297-12.112-14.973-14.062c24.513-77.694-38.153-146.645-105.396-149.72c-9.58-9.406-23.408-16.367-43.124-15.73\n\t\tc-27.87,0.898-45.737,22.048-54.078,47.077c-26.356,22.872-40.07,56.302-35.514,94.248c1.608,13.372,4.871,23.904,8.884,32.325\n\t\tc-1.655,1.521-3.222,3.276-4.434,5.554c-1.97,3.671-3.049,8.2-3.042,13.412c0.007,4.516,0.777,9.594,2.445,15.449\n\t\tc4.408,15.355,8.388,25.27,13.54,32.546c2.572,3.61,5.507,6.512,8.696,8.722c1.936,1.347,3.946,2.378,5.976,3.296\n\t\tc2.559,11.845,6.759,21.666,11.469,30c-1.694,25.431-13.847,50.259-45.502,43.928c0,15.964,19.207,27.762,27.85,32.271\n\t\tc-5.494,1.607-12.307,3.356-19.77,5.52c-16.26,4.749-35.534,11.483-51.237,24.862c-7.838,6.686-14.726,15.101-19.569,25.572\n\t\tc-4.857,10.464-7.631,22.906-7.631,37.484c0,3.37,0.147,6.854,0.456,10.472c0.221,2.546,1.186,4.602,2.318,6.297\n\t\tc2.157,3.176,5.018,5.528,8.602,7.946c6.277,4.154,14.973,8.214,26.108,12.2C132.461,501.107,187.631,511.98,256,512\n\t\tc55.544-0.007,102.428-7.216,135.891-16.266c16.742-4.536,30.108-9.507,39.768-14.471c4.837-2.499,8.75-4.971,11.852-7.678\n\t\tc1.554-1.367,2.914-2.801,4.06-4.509c1.125-1.694,2.097-3.751,2.318-6.297c0.308-3.618,0.456-7.116,0.456-10.492\n\t\tC450.365,432.846,445.387,417.162,437.267,404.936z M434.875,460.849l-0.65,0.77c-1.112,1.126-3.356,2.82-6.512,4.616\n\t\tc-11.127,6.425-33.088,14.31-62.566,20.312c-29.524,6.036-66.733,10.358-109.147,10.358c-54.219,0.006-99.95-7.075-131.946-15.744\n\t\tc-15.985-4.314-28.56-9.064-36.807-13.319c-4.106-2.11-7.135-4.126-8.81-5.6c-0.716-0.63-1.118-1.105-1.319-1.38\n\t\tc-0.235-2.968-0.369-5.836-0.369-8.556c0.028-16.93,4.174-29.257,10.586-38.918c9.58-14.437,24.975-23.246,41.054-29.29\n\t\tc8.013-3.014,16.105-5.326,23.535-7.356c7.222-1.976,13.754-3.671,19.268-5.674l-23.046,70.967l48.872-11.496l64.516,54.058\n\t\tl64.516-54.058l48.872,11.496l-21.88-67.376c4.602,1.226,9.566,2.499,14.752,3.999c15.576,4.456,32.767,10.827,45.576,21.888\n\t\tc6.424,5.527,11.804,12.173,15.663,20.534c3.846,8.361,6.21,18.504,6.217,31.206C435.251,455.007,435.11,457.882,434.875,460.849z"></path>\n</g>\n</svg></span><span id="callOpButtonLabel">'+n+"</span></span>",t+="  </section>"),t},injectCallOpButtonCSS:function(e){var t=common.getRatio(),n="";n=void 0!==e.widgetInsideBorderColor&&"none"!==e.widgetInsideBorderColor?"#sincloBox section#navigation { display:flex; align-items: center; top: 0px!important; border-bottom: "+1*t+"px solid "+e.widgetInsideBorderColor+"!important; }":"#sincloBox section#navigation { display:flex; align-items: center; top: 0px!important; }";var i=e.mainColor,o=e.stringColor;scl_check.objPath(sincloInfo,"custom.widget.header.opCallButtonColor")&&(i=sincloInfo.custom.widget.header.opCallButtonColor),scl_check.objPath(sincloInfo,"custom.widget.header.opCallButtonLabelColor")&&(o=sincloInfo.custom.widget.header.opCallButtonLabelColor);var s=o;return scl_check.objPath(sincloInfo,"custom.widget.header.opCallButtonIconColor")&&(s=sincloInfo.custom.widget.header.opCallButtonIconColor),n+"#sincloBox #navigation span#callOperatorButton {width: 100%; background-color: "+i+";margin: 0 "+5*t+"px; display: block;height: "+44*t+"px;border-radius: "+8*t+"px;display: flex;align-items: center;justify-content: center;cursor: pointer;border-bottom: solid 4px #627295;}#sincloBox #navigation span#callOperatorButton:hover {}#sincloBox #navigation span#callOperatorButton:active {transform: translateY(4px);border-bottom: none;}#sincloBox #navigation span#callOperatorButton span#callOpButtonIconWrap {flex-basis: "+36*t+"px;margin-left: "+15*t+"px;display: inline-flex;}#sincloBox #navigation span#callOperatorButton svg#callOpButtonIcon {width: "+32*t+"px;height: "+32*t+"px;}#sincloBox #navigation span#callOperatorButton svg#callOpButtonIcon g path.st0 {fill :"+s+";animation: none;}#sincloBox #navigation span#callOperatorButton span#callOpButtonLabel {text-align: center;font-weight: font-size: 1.1em;margin-left: "+10*t+"px;color: "+o+";}"},widgetTemplate:function(e){var t=this.getSizeType(e.widgetSizeType),n=this.getColorList(e),i="";return window.sincloInfo.contract.chat&&(window.sincloInfo.contract.synclo||window.sincloInfo.contract.hasOwnProperty("document")&&window.sincloInfo.contract.document)&&!scl_check.smartphone()?i+='<section id="callTab">':i+='<section id="callTab" class="flexBox">',i+='    <sinclo-div style="height: 50px;margin: 15px 25px">',i+='    <span style="display: block; width: 50px; height: 50px; float: left; background-color: '+n.mainColor+'; border-radius: 25px; padding: 3px;"><img width="19.5" height="33" src="'+window.sincloInfo.site.files+'/img/call.png" style="width: 19.5px; height: 33px; margin: 6px 12px"></span>',1===Number(e.display_time_flg)?i+='    <pre id="telNumber" style="font-size: '+t.d18font+'px; padding: 5px 0px 0px; height: 30px">'+scl_check.escape_html(e.tel)+"</pre>":i+='    <pre id="telNumber" style="font-size: '+t.d20font+'px; padding: 10px 0px 0px; height: 45px;">'+scl_check.escape_html(e.tel)+"</pre>",1===Number(e.display_time_flg)&&(i+='    <pre style="font-weight: bold; color: '+n.mainColor+'; margin: 0 auto; white-space: pre-line; font-size: 11px; text-align: center; padding: 0 0 5px; height: 20px; border: none!important;  overflow: visible!important;">åä»æéï¼ '+e.time_text+"</pre>"),i+="    </sinclo-div>",i+='    <sinclo-div id="telContent"><sinclo-div class="tblBlock"><span>'+scl_check.escape_html(e.content)+"</span></sinclo-div></sinclo-div>",i+='    <span id="accessIdArea">'+userInfo.accessId+"</span>",i+="</section>"},changeAccessId:function(e){$("#sincloBox #accessIdArea").is(":visible")&&$("#sincloBox #accessIdArea").text(e)},showVideoChatView:function(e,t){var n=document.createElement("iframe");n.width=480,n.height=400;var i={from:e,to:t};n.src=sincloInfo.site.webcam_view+"?h=false&sincloData="+encodeURIComponent(JSON.stringify(i)),document.body.appendChild(n)},chatWidgetTemplate:function(e){var t,n="";scl_check.smartphone();return t=sinclo.chatApi.getPlaceholderMessage(),n+='  <section id="chatTab" class="flexBox">',n+='    <ul id="chatTalk"><sinclo-chat></sinclo-chat><sinclo-typing></sinclo-typing><sinclo-chat-receiver><span id="receiveMessage">ãã¹ãã¡ãã»ã¼ã¸ã§ã</span></sinclo-chat-receiver><sinclo-loading></sinclo-loading></sinclo-loading></ul>',n+="    <sinclo-chat-alert>éä¿¡ãåæ­ããã¾ããã<br>ãã¡ããã¿ããããã¨åæ¥ç¶ãã¾ãã</sinclo-chat-alert>",scl_check.objPath(sincloInfo,"custom.submenu")&&sincloInfo.custom.submenu.enable&&(n+='<sinclo-submenu style="\n    display: flex;\n    width: 100%;\n    height: auto;\n    border-top: 1px solid #E8E7E0;\n    /* border-bottom: 1px solid #E8E7E0; */\n    padding: 7px 7px 7px 18px;\n    font-size: 10px;\n    position: relative;\n    bottom: 0;\n    left: 0;\n    align-items: center;\n    "><a onclick="operationUtil.doFirst()" style="font-size: 13px; cursor:pointer; text-decoration: underline;">'+common.getFirstButtonText()+"</a>",scl_check.isset(sincloInfo.custom.submenu.link)&&(n+='<a href="'+sincloInfo.custom.submenu.link+'" target="'+sincloInfo.custom.submenu.target+'" style="font-size: 11px; cursor:pointer; margin-left: 18px; text-decoration: underline;">FAQã¯ãã¡ã</a>'),n+="</sinclo-submenu>\n"),n+='    <sinclo-div id="flexBoxWrap">',n+='      <sinclo-div class="flexBoxRow" id = "flexBoxHeight">',n+='        <textarea name="sincloChat" id="sincloChatMessage" maxlength="1000" placeholder=" '+t+' "></textarea>',n+='        <a href="javascript:void(0)" id="sincloChatSendBtn" class="notSelect" onclick="sinclo.chatApi.push()">éä¿¡</a>',n+="      </sinclo-div>",n+='      <sinclo-div class="flexBoxRow sinclo-hide" id = "miniFlexBoxHeight">',n+='        <input type="text" name="miniSincloChat" id="miniSincloChatMessage" maxlength="1000" placeholder=" '+t+' "></input>',n+='        <a href="javascript:void(0)" id="miniSincloChatSendBtn" class="notSelect" onclick="sinclo.chatApi.push()">éä¿¡</a>',n+="      </sinclo-div>",n+="    </sinclo-div>",window.sincloInfo.contract.hasOwnProperty("disableAccessId")&&!window.sincloInfo.contract.disableAccessId&&!scl_check.smartphone()&&(window.sincloInfo.contract.synclo||window.sincloInfo.contract.hasOwnProperty("document")&&window.sincloInfo.contract.document||scl_check.isset(e.showAccessId)&&1===e.showAccessId)&&(n+='    <span id="sincloAccessInfo">ã¦ã§ãæ¥å®¢ã³ã¼ãï¼'+userInfo.accessId+"</span>"),n+='    <audio id="sinclo-sound">',n+='      <source src="'+window.sincloInfo.site.files+'/sounds/decision.mp3" type="audio/mp3">',n+="    </audio>",n+="  </section>"},getFirstButtonText:function(){var e="ãã£ãããçµäºãã";return scl_check.objPath(sincloInfo.custom,"submenu.resetLinkText")&&(e=sincloInfo.custom.submenu.resetLinkText),e},judgeShowWidget:function(){window.sincloInfo.widgetDisplay=null,(window.sincloInfo.contract.chat||window.sincloInfo.contract.synclo)&&(window.sincloInfo.widgetDisplay=!0),"display_type"in common.getWidgetSettings()&&1===common.getWidgetSettings().display_type?window.sincloInfo.widgetDisplay=!0:"display_type"in common.getWidgetSettings()&&2===common.getWidgetSettings().display_type?0<Number(window.sincloInfo.activeOperatorCnt)&&(window.sincloInfo.widgetDisplay=!0):"display_type"in common.getWidgetSettings()&&3===common.getWidgetSettings().display_type&&(window.sincloInfo.widgetDisplay=!1),(scl_check.isset(userInfo.connectToken)||scl_check.isset(userInfo.coBrowseConnectToken))&&(window.sincloInfo.widgetDisplay=!1),!preventWithdrawalOverlay.isActive()&&window.sincloInfo.hasOwnProperty("opFlg")&&!1===window.sincloInfo.opFlg&&(window.sincloInfo.widgetDisplay=!1),scl_check.isset(window.sincloInfo.dataset)&&scl_check.isset(window.sincloInfo.dataset.showAlways)&&"1"===window.sincloInfo.dataset.showAlways&&(window.sincloInfo.widgetDisplay=!0),window.sincloInfo.contract.preventWithdrawalSetting&&preventWithdrawalOverlay.isActive()||!scl_check.objPath(window.sincloInfo,"dataset.hide")||"1"!==window.sincloInfo.dataset.hide||(window.sincloInfo.widgetDisplay=!1);var e=window.sincloInfo.widgetDisplay;if(window.sincloInfo.widgetDisplay)switch(common.getWidgetSettings().showTiming){case 1:case 2:case 3:window.sincloInfo.widgetDisplay=!1}return e&&window.sincloInfo.widgetDisplay?window.sincloInfo.widgetDisplay:!(!e||window.sincloInfo.widgetDisplay)||(e?void 0:window.sincloInfo.widgetDisplay)},makeAccessIdTag:function(){if(!scl_check.browser())return!1;if(!("widget"in window.sincloInfo))return!1;if(!this.judgeShowWidget())return!1;common.load.finish();var e=document.getElementById("sincloBox");if(e&&"none"===e.style.display)common.widgetHandler.show();else if(userInfo.accessType!==cnst.access_type.host){var t,n,i=common.createWidget();if(i=preventWithdrawalOverlay.createWidgetOverlay(i),$("body").append(i),emit("syncReady",{widget:window.sincloInfo.widgetDisplay}),e=document.getElementById("sincloBox"),sinclo.widget.condifiton.set(!1,!1),sinclo.operatorInfo.header=document.querySelector("#sincloBox #widgetHeader"),$("#sincloBox .widgetCtrl").click(function(){var e=$("#sincloBox .widgetCtrl.selected"),t=$(this).data("tab");e.removeClass("selected"),$("#sincloBox").height(""),$(this).addClass("selected"),"call"===t?($("#sincloBox #chatTab").removeClass("flexBox"),$("#sincloBox #callTab").addClass("flexBox")):($("#sincloBox #callTab").removeClass("flexBox"),$("#sincloBox #chatTab").addClass("flexBox"),sinclo.chatApi.showUnreadCnt(),sinclo.chatApi.scDown())}),common.widgetHandler._handleResizeEvent(),window.sincloInfo.contract.chat&&scl_check.smartphone())0!==window.orientation?e.setAttribute("data-screen","horizontal"):e.setAttribute("data-screen","vertical"),preventWithdrawalOverlay.isActive()||window.addEventListener("scroll",sinclo.operatorInfo.widgetHide),setInterval(function(){sinclo.operatorInfo.widgetMoving||sinclo.adjustSpWidgetSize()},200),window.addEventListener("orientationchange",function(){"true"===sinclo_storage.l.get("bannerAct")&&$("#sincloBannerBox").hide(),sinclo.operatorInfo.reCreateWidget()}),window.addEventListener("resize",function(e){if(e&&e.stopPropagation(),scl_check.android()||common.isPortrait()||"sincloChatMessage"===document.activeElement.id)return!1;scl_check.smartphone()&&document.body.clientWidth/window.innerWidth<=1&&sinclo.adjustSpWidgetSize(),sinclo.operatorInfo.reCreateWidget()}),void 0!==document.hidden?(t="hidden",n="visibilitychange"):void 0!==document.msHidden?(t="msHidden",n="msvisibilitychange"):void 0!==document.webkitHidden&&(t="webkitHidden",n="webkitvisibilitychange"),document.addEventListener(n,function(e){scl_check.android()&&!document[t]&&window.addEventListener("orientationchange",function(){sinclo.operatorInfo.reCreateWidget()},!1)},!1)}},toRGBAcolor:function(e,t){if(0<=e.indexOf("#")){var n,i,o,s=e.substr(1);o=3===s.length?(n=String(s.substr(0,1))+String(s.substr(0,1)),i=String(s.substr(1,1))+String(s.substr(1,1)),String(s.substr(2))+String(s.substr(2))):(n=String(s.substr(0,2)),i=String(s.substr(2,2)),String(s.substr(4))),e="rgba("+parseInt(n,16)+", "+parseInt(i,16)+", "+parseInt(o,16)+", "+t+")"}return e},reconnectManual:function(){return socket?(socket.disconnected()||socket.close(),socket.open(),!0):(sinclo_storage.s.set("chatAct",!1),location.href=location.href)},widgetHandler:{_currentWindowHeight:$(window).height(),show:function(e){var t=sinclo_storage.l.get("bannerAct");sinclo_storage.s.set("bannerAct",t);var n=sinclo_storage.s.get("closeAct");"true"===t&&($("#sincloBox").css("height",""),sinclo.operatorInfo.onBanner()),"true"===n&&$("#sincloWidgetBox").hide();var i=document.getElementById("sincloBox");if((common.widgetHandler.isShown()||window.sincloInfo.widgetDisplay)&&i&&i.style&&("none"===i.style.display||""===i.style.display)){i.style.display="block",common.abridgementTypehide(),common.widgetHandler.stopToWatchResizeEvent(),common.widgetHandler.beginToWatchResizeEvent(),common.widgetHandler.beginToWatchTabletResize(),sinclo_storage.l.get("textareaOpend")&&"open"!==sinclo_storage.l.get("textareaOpend")?"close"===sinclo_storage.l.get("textareaOpend")&&sinclo.hideTextarea():sinclo.displayTextarea();var o=sinclo.widget.condifiton.get(),s=common.getAbridgementType();common.widgetHandler.saveWidgetShown(),e||preventWithdrawalOverlay.isActive()||"false"!==o||"true"===sinclo_storage.s.get("preWidgetOpened")?(scl_check.smartphone()&&common.getWidgetSettings().hasOwnProperty("spAutoOpenFlg")&&1===Number(common.getWidgetSettings().spAutoOpenFlg)&&"true"!==o||"false"===o&&"true"!==sinclo_storage.s.get("preWidgetOpened")?(s.MinRes?common.abridgementTypehide():common.abridgementTypeShow(),common.whenMinimizedBtnShow(),sinclo.chatApi.unlockPageScroll()):(s.MaxRes?common.abridgementTypehide():common.abridgementTypeShow(),common.whenMaximizedBtnShow(),sinclo.chatApi.lockPageScroll()),scl_check.smartphone()?sinclo.adjustSpWidgetSize():common.widgetHandler._handleResizeEvent()):(sinclo.widget.condifiton.set(!1,!0),sinclo.chatApi.unlockPageScroll(),s.MinRes?common.abridgementTypehide():common.abridgementTypeShow(),"true"!==t&&(i.style.height=sinclo.operatorInfo.header.offsetHeight+"px"),common.whenMinimizedBtnShow(),common.widgetHandler._handleResizeEvent(),(scl_check.smartphone()&&common.getWidgetSettings().hasOwnProperty("spAutoOpenFlg")&&1===Number(common.getWidgetSettings().spAutoOpenFlg)||"true"!==sinclo_storage.s.get("preWidgetOpened"))&&(scl_check.smartphone()||"true"!==sinclo_storage.s.get("preWidgetOpened"))||(sinclo.operatorInfo.ev(),s.MaxRes?common.abridgementTypehide():common.abridgementTypeShow(),common.whenMaximizedBtnShow(),scl_check.smartphone()?sinclo.adjustSpWidgetSize():common.widgetHandler._handleResizeEvent())),"none"===$("#mainImage").css("display")||void 0===$("#mainImage").css("display")?common.indicateSimpleNoImage():"block"!==$("#mainImage").css("display")&&"inline"!==$("#mainImage").css("display")||common.indicateSimpleImage(),common.widgetHandler.saveShownFlg()}scl_check.smartphone()&&!scl_check.android()&&0!==window.orientation&&screen.width!==window.innerHeight&&(common.isPortrait()?($("#sincloBox").css("bottom",screen.width-window.innerHeight+"px"),$("#sincloBanner").css("bottom",screen.width-window.innerHeight+5+"px")):($("#sincloBox").css("bottom","0px"),scl_check.hasCustomBannerImageSetting()||scl_check.hasOriginalImageSetting()?$("#sincloBanner").css("bottom","50px"):$("#sincloBanner").css("bottom","5px"))),scl_check.smartphone()&&scl_check.android()&&0!==window.orientation&&screen.width!==window.innerHeight&&(common.isPortrait()||($("#sincloBox").css("bottom","0px"),scl_check.hasCustomBannerImageSetting()||scl_check.hasOriginalImageSetting()?$("#sincloBanner").css("bottom","50px"):$("#sincloBanner").css("bottom","5px"))),setTimeout(function(){common.widgetHandler._handleResizeEvent()},100),window.sincloInfo.contract.chat&&sinclo.chatApi.scDown()},hide:function(){document.getElementById("sincloBox").style.display="none",sinclo.chatApi.unlockPageScroll()},saveShownFlg:function(){sinclo_storage.s.set("widgetShown","true"),sinclo_storage.s.set("widgetShowTimingType",common.getWidgetSettings().showTiming)},clearShownFlg:function(){sinclo_storage.s.unset("widgetShown"),sinclo_storage.s.unset("widgetShowTimingType")},isShown:function(){return"true"===sinclo_storage.s.get("widgetShown")},getRemainingTimingMsec:function(){var e=0,t=1e3*common.getWidgetSettings().maxShowTimingSite;switch(common.getWidgetSettings().showTiming){case 1:e=this._calcRemainingShowTimingSiteTimeMsec(t);break;case 2:e=1e3*common.getWidgetSettings().maxShowTimingPage}return e},getRemainingMaxTimeMsec:function(e){var t=0,n=1e3*common.getWidgetSettings().maxShowTime;switch(common.getWidgetSettings().showTime){case 1:t=this._calcRemainingShowTimingSiteTimeMsec(n);break;case 4:t=e}return t},resetMessageAreaState:function(){var e=preventWithdrawalOverlay.isActive()?sincloInfo.preventWithdrawalSettings.widget.chatInitShowTextarea:common.getWidgetSettings().chatInitShowTextarea;1===Number(e)?sinclo_storage.l.set("textareaOpend","open"):sinclo_storage.l.set("textareaOpend","close")},_calcRemainingShowTimingSiteTimeMsec:function(e){var t=Number(userInfo.pageTime)-Number(userInfo.time);return t<=e?e-t:0},beginToWatchTabletResize:function(){scl_check.smartphone()||($(window).on("touchstart",function(){}),$(window).on("touchend",function(){}))},beginToWatchResizeEvent:function(){scl_check.smartphone()||($(window).on("resize.change_widget_size",common.widgetHandler._handleResizeEvent),common.widgetHandler._handleResizeEvent())},stopToWatchResizeEvent:function(){scl_check.smartphone()||$(window).off("resize.change_widget_size",common.widgetHandler._handleResizeEvent)},_maximumReverseAnimation:function(){scl_check.smartphone()||$("#sincloWidgetBox").animate({width:"400px"})},saveWidgetShown:function(){preventWithdrawalOverlay.isActive()&&scl_check.isset(sinclo_storage.s.get("preventWidgetShown"))||(window.sincloInfo.contract.enableRealtimeMonitor?emit("sendWidgetShown",{widget:!0,isPreventWithdrawal:preventWithdrawalOverlay.isActive()}):window.sincloInfo.contract.synclo||window.sincloInfo.contract.document?emit("sendWidgetShown",{widget:!0,isPreventWithdrawal:preventWithdrawalOverlay.isActive()}):scl_check.isset(common.widgetHandler.isShown())&&common.widgetHandler.isShown()||$.ajax({headers:{Accept:"text/plain, application/json; charset=utf-8","Content-Type":"application/json; charset=utf-8"},type:"post",url:window.sincloInfo.site.files+"/api/widget/shown",dataType:"json",contentType:"application/json",data:JSON.stringify({siteKey:sincloInfo.site.key,widget:window.sincloInfo.widgetDisplay,userId:userInfo.userId,tabId:userInfo.tabId,sincloSessionId:userInfo.sincloSessionId,isFirstAccess:window.sincloInfo.isFirstAccess,isPreventWithdrawal:preventWithdrawalOverlay.isActive()}),success:function(e){}}),preventWithdrawalOverlay.isActive()&&sinclo_storage.s.set("preventWidgetShown",!0))},_setFooterSize:function(){return scl_check.isset(window.sincloInfo.custom)&&scl_check.isset(window.sincloInfo.custom.widget)&&scl_check.isset(window.sincloInfo.custom.widget.hideFotter)&&window.sincloInfo.custom.widget.hideFotter?0:26},_setInputAreaSize:function(){return $("#flexBoxWrap").is(":visible")?$("#flexBoxWrap").outerHeight():0},_maximumAnimation:function(){if(!scl_check.smartphone()){var e=common.widgetHandler,t=e._setFooterSize(),n=e._setInputAreaSize(),i=$("#widgetHeader").outerHeight()+n+t;$("#sincloAccessInfo").length&&(i+=$("#sincloAccessInfo").outerHeight()),$("sinclo-submenu").length&&(i+=$("sinclo-submenu").outerHeight()),$("#navigation").length&&(i+=$("#navigation").outerHeight()),$("#chatTalk").css("height",$(window).height()-i),$("#sincloWidgetBox").animate({width:common.getPageWidth()+"px"},400)}},_widgetFitForWindow:function(){var e=common.widgetHandler,t=e._setFooterSize(),n=e._setInputAreaSize(),i=$("#widgetHeader").outerHeight()+n+t;$("#sincloAccessInfo").length&&(i+=$("#sincloAccessInfo").outerHeight()),$("sinclo-submenu").length&&(i+=$("sinclo-submenu").outerHeight()),$("#navigation").length&&(i+=$("#navigation").outerHeight()),$("#chatTalk").css("height",$(window).height()-i),preventWithdrawalOverlay.isActive()||!$("#fw-minimize-btn").is(":hidden")?($("#sincloWidgetBox").css("width",common.getPageWidth()+"px"),$("#chatTab").css("width","100%")):$("#sincloWidgetBox").css("width","400px")},_setMaxWidthForCustom:function(){var e=Number(window.innerWidth),t=Number(common.getWidgetSettings().widgetCustomWidth),n=$("#sincloWidgetBox"),i=$("#chatTab");e<t?(n.css("max-width",e-20),i.css("max-width",e-20)):(n.css("max-width",""),i.css("max-width",""))},_handleResizeEvent:function(){if(1<=window.devicePixelRatio?$('#sincloBox ul#chatTalk li sinclo-radio [type="radio"] + label').removeClass("radio-zoom"):$('#sincloBox ul#chatTalk li sinclo-radio [type="radio"] + label').addClass("radio-zoom"),"true"===sinclo_storage.s.get("widgetMaximized")&&$("#sincloBox").css("height","auto"),4!==Number(common.getWidgetSettings().widgetSizeType)||scl_check.smartphone()){5!==Number(common.getWidgetSettings().widgetSizeType)||scl_check.smartphone()||common.widgetHandler._setMaxWidthForCustom();var e=browserInfo.getActiveWindow();cnst.tab_type.open!==e&&cnst.tab_type.disable!==e||(5!==Number(common.getWidgetSettings().widgetSizeType)?common.widgetHandler._setWidgetSizeNormal():common.widgetHandler._setWidgetSizeCustom())}else common.widgetHandler._widgetFitForWindow()},_setWidgetSizeNormal:function(){if(!scl_check.smartphone()){var e=0<$("#chatTab").length,t=$(e?"#chatTalk":"#telContent"),n=e?common.widgetHandler._getMaxChatTalkHeight():common.widgetHandler._getTelContentHeight();t.height(n),$("#sincloWidgetBox").offset({top:$("#sincloBox").offset().top})}},_setWidgetSizeCustom:function(){if(!scl_check.smartphone()){var e=0<$("#chatTab").length,t=$(window).innerHeight(),n=$("#sincloWidgetBox"),i=$(e?"#chatTalk":"#telContent"),o=Number(common.getWidgetSettings().widgetCustomHeight),s=.85*t;s<o&&(o=s);var a=e?common.widgetHandler._getMaxChatTalkHeight():common.widgetHandler._getTelContentHeight();o<=s?(n.height(o),i.height(a)):s<=n.height()?(n.height(s),i.height(a)):a>=i.height()&&(n.height(s),i.height(a)),common.widgetHandler._currentWindowHeight=t,$("#sincloWidgetBox").offset({top:$("#sincloBox").offset().top})}},_getTelContentHeight:function(){var e=0;switch(Number(common.getWidgetSettings().widgetSizeType)){case 1:e=0;break;case 2:e=202;break;case 3:e=280;break;case 5:var t=0;t+=$("#widgetHeader").outerHeight(),$("#fotter").length&&(t+=$("#fotter").outerHeight()),t+=80,$("#accessIdArea").length&&(t+=$("#accessIdArea").outerHeight(!0)),$("sinclo-submenu").length&&(t+=$("sinclo-submenu").outerHeight());var n=.85*$(window).innerHeight(),i=Number(common.getWidgetSettings().widgetCustomHeight);e=n<i?n-t:i-t}return e},_getMaxWidgetHeight:function(){var e=common.widgetHandler._getMessageAreaOffset();switch(Number(common.getWidgetSettings().widgetSizeType)){case 1:return 405-e;case 2:return 496-e;case 3:return 596-e;case 5:return Number(common.getWidgetSettings().widgetCustomHeight)+210-e;default:return 496-e}},_getMinWidgetHeight:function(){var e=common.widgetHandler._getMessageAreaOffset();switch(Number(common.getWidgetSettings().widgetSizeType)){case 1:return 318-e;case 2:return 364-e;case 3:case 5:return 409-e;default:return 364-e}},_getMaxChatTalkHeight:function(){var e=common.widgetHandler._getMessageAreaOffset(!0),t=.85*$(window).innerHeight(),n=0;n+=$("#widgetHeader").outerHeight(),"none"!==$("#flexBoxWrap").css("display")&&(n+=$("#flexBoxWrap").outerHeight()),$("#sincloAccessInfo").length&&(n+=$("#sincloAccessInfo").outerHeight()),$("#navigation").length&&(n+=$("#navigation").outerHeight()),$("sinclo-submenu").length&&(n+=$("sinclo-submenu").outerHeight()),$("#fotter").length&&(n+=$("#fotter").outerHeight());var i=t-n;if(0<$("#chatTab").length)switch(Number(common.getWidgetSettings().widgetSizeType)){case 1:var o=194+e;return t<n+o?i:o;case 2:return t<n+(r=284+e)?i:r;case 3:var s=374+e;return t<n+s?i:s;case 5:var a=Number(common.getWidgetSettings().widgetCustomHeight);return t<a?i:a-n;default:var r;return t<n+(r=284+e)?i:r}else switch(Number(common.getWidgetSettings().widgetSizeType)){case 1:return 125;case 2:return 214.5;case 3:return 305;default:return 284}},_getMinChatTalkHeight:function(){var e=common.widgetHandler._getMessageAreaOffset(!0);if(0<$("#chatTab").length)switch(Number(common.getWidgetSettings().widgetSizeType)){case 1:return 97+e;case 2:return 142+e;case 3:case 5:return 187+e;default:return 142+e}else switch(Number(common.getWidgetSettings().widgetSizeType)){case 1:return 32;case 2:return 76;case 3:return 121;default:return 76}},_getMessageAreaOffset:function(e){var t=0;return e||($("#sincloAccessInfo").is(":visible")||(t+=26.5),$("#sincloWidgetBox #footer").is(":visible")||(t+=26.5),$("#widgetSubTitle").is(":visible")||$("#widgetDescription").is(":visible")||(t+=53)),$("#flexBoxWrap").is(":visible")?$("#flexBoxHeight").is(":visible")?0+t:$("#miniFlexBoxHeight").is(":visible")&&e?27+t:0+t:e?75:0+t},openWidget:function(){sinclo_storage.s.set("closeAct",!1),$("#sincloBox").show().css("height","auto"),$("#sincloWidgetBox").show(),common.whenMaximizedBtnShow(),common.widgetHandler._handleResizeEvent()}},settingLoader:{isDataReceived:!1,get:function(){var e=this.getWidgetSiteKey(),t=sinclo_storage.s.findKeyLike("scl_settings_");if(0<t.length)for(var n=0;n<t.length;n++)""==e?t[n]!=="scl_settings_"+window.sincloInfo.site.key&&sinclo_storage.s.unset(t[n]):t[n]!=="scl_settings_"+window.sincloInfo.site.key+"_"+e&&sinclo_storage.s.unset(t[n]);return""==e?JSON.parse(sinclo_storage.s.get("scl_settings_"+window.sincloInfo.site.key)):JSON.parse(sinclo_storage.s.get("scl_settings_"+window.sincloInfo.site.key+"_"+e))},getWidgetSiteKey:function(){var e="",t=document.querySelector("script[src$='/client/"+sincloInfo.site.key+".js']");return t&&t.getAttribute("data-another-widget-key")&&(e=t.getAttribute("data-another-widget-key")),e}},load:{id:"loadingImg",flg:!1,timer:null,loadingHtml:function(){return"<style type='text/css'>sinclo-loading-div {  background: none;  position: relative;  width: 200px;  height: 200px;}@-webkit-keyframes sinclo-loading-css {  0% {    opacity: 1;    -ms-transform: scale(1.5);    -moz-transform: scale(1.5);    -webkit-transform: scale(1.5);    -o-transform: scale(1.5);    transform: scale(1.5);  }  100% {    opacity: 0.1;    -ms-transform: scale(1);    -moz-transform: scale(1);    -webkit-transform: scale(1);    -o-transform: scale(1);    transform: scale(1);  }}@-webkit-keyframes sinclo-loading-css {  0% {    opacity: 1;    -ms-transform: scale(1.5);    -moz-transform: scale(1.5);    -webkit-transform: scale(1.5);    -o-transform: scale(1.5);    transform: scale(1.5);  }  100% {    opacity: 0.1;    -ms-transform: scale(1);    -moz-transform: scale(1);    -webkit-transform: scale(1);    -o-transform: scale(1);    transform: scale(1);  }}@-moz-keyframes sinclo-loading-css {  0% {    opacity: 1;    -ms-transform: scale(1.5);    -moz-transform: scale(1.5);    -webkit-transform: scale(1.5);    -o-transform: scale(1.5);    transform: scale(1.5);  }  100% {    opacity: 0.1;    -ms-transform: scale(1);    -moz-transform: scale(1);    -webkit-transform: scale(1);    -o-transform: scale(1);    transform: scale(1);  }}@-ms-keyframes sinclo-loading-css {  0% {    opacity: 1;    -ms-transform: scale(1.5);    -moz-transform: scale(1.5);    -webkit-transform: scale(1.5);    -o-transform: scale(1.5);    transform: scale(1.5);  }  100% {    opacity: 0.1;    -ms-transform: scale(1);    -moz-transform: scale(1);    -webkit-transform: scale(1);    -o-transform: scale(1);    transform: scale(1);  }}@-moz-keyframes sinclo-loading-css {  0% {    opacity: 1;    -ms-transform: scale(1.5);    -moz-transform: scale(1.5);    -webkit-transform: scale(1.5);    -o-transform: scale(1.5);    transform: scale(1.5);  }  100% {    opacity: 0.1;    -ms-transform: scale(1);    -moz-transform: scale(1);    -webkit-transform: scale(1);    -o-transform: scale(1);    transform: scale(1);  }}@-webkit-keyframes sinclo-loading-css {  0% {    opacity: 1;    -ms-transform: scale(1.5);    -moz-transform: scale(1.5);    -webkit-transform: scale(1.5);    -o-transform: scale(1.5);    transform: scale(1.5);  }  100% {    opacity: 0.1;    -ms-transform: scale(1);    -moz-transform: scale(1);    -webkit-transform: scale(1);    -o-transform: scale(1);    transform: scale(1);  }}@-o-keyframes sinclo-loading-css {  0% {    opacity: 1;    -ms-transform: scale(1.5);    -moz-transform: scale(1.5);    -webkit-transform: scale(1.5);    -o-transform: scale(1.5);    transform: scale(1.5);  }  100% {    opacity: 0.1;    -ms-transform: scale(1);    -moz-transform: scale(1);    -webkit-transform: scale(1);    -o-transform: scale(1);    transform: scale(1);  }}@keyframes sinclo-loading-css {  0% {    opacity: 1;    -ms-transform: scale(1.5);    -moz-transform: scale(1.5);    -webkit-transform: scale(1.5);    -o-transform: scale(1.5);    transform: scale(1.5);  }  100% {    opacity: 0.1;    -ms-transform: scale(1);    -moz-transform: scale(1);    -webkit-transform: scale(1);    -o-transform: scale(1);    transform: scale(1);  }}.uil-spin-css > sinclo-loading-div {  width: 24px;  height: 24px;  margin-left: 4px;  margin-top: 4px;  position: absolute;}.uil-spin-css > sinclo-loading-div > sinclo-loading-div-child {  width: 100%;  height: 100%;  border-radius: 15px;  background: #b2d251;}.uil-spin-css > sinclo-loading-div:nth-of-type(1) > sinclo-loading-div-child {  -ms-animation: sinclo-loading-css 1s linear infinite;  -moz-animation: sinclo-loading-css 1s linear infinite;  -webkit-animation: sinclo-loading-css 1s linear infinite;  -o-animation: sinclo-loading-css 1s linear infinite;  animation: sinclo-loading-css 1s linear infinite;  -ms-animation-delay: 0s;  -moz-animation-delay: 0s;  -webkit-animation-delay: 0s;  -o-animation-delay: 0s;  animation-delay: 0s;}.uil-spin-css > sinclo-loading-div:nth-of-type(1) {  -ms-transform: translate(84px, 84px) rotate(45deg) translate(70px, 0);  -moz-transform: translate(84px, 84px) rotate(45deg) translate(70px, 0);  -webkit-transform: translate(84px, 84px) rotate(45deg) translate(70px, 0);  -o-transform: translate(84px, 84px) rotate(45deg) translate(70px, 0);  transform: translate(84px, 84px) rotate(45deg) translate(70px, 0);}.uil-spin-css > sinclo-loading-div:nth-of-type(2) > sinclo-loading-div-child {  -ms-animation: sinclo-loading-css 1s linear infinite;  -moz-animation: sinclo-loading-css 1s linear infinite;  -webkit-animation: sinclo-loading-css 1s linear infinite;  -o-animation: sinclo-loading-css 1s linear infinite;  animation: sinclo-loading-css 1s linear infinite;  -ms-animation-delay: 0.12s;  -moz-animation-delay: 0.12s;  -webkit-animation-delay: 0.12s;  -o-animation-delay: 0.12s;  animation-delay: 0.12s;}.uil-spin-css > sinclo-loading-div:nth-of-type(2) {  -ms-transform: translate(84px, 84px) rotate(90deg) translate(70px, 0);  -moz-transform: translate(84px, 84px) rotate(90deg) translate(70px, 0);  -webkit-transform: translate(84px, 84px) rotate(90deg) translate(70px, 0);  -o-transform: translate(84px, 84px) rotate(90deg) translate(70px, 0);  transform: translate(84px, 84px) rotate(90deg) translate(70px, 0);}.uil-spin-css > sinclo-loading-div:nth-of-type(3) > sinclo-loading-div-child {  -ms-animation: sinclo-loading-css 1s linear infinite;  -moz-animation: sinclo-loading-css 1s linear infinite;  -webkit-animation: sinclo-loading-css 1s linear infinite;  -o-animation: sinclo-loading-css 1s linear infinite;  animation: sinclo-loading-css 1s linear infinite;  -ms-animation-delay: 0.25s;  -moz-animation-delay: 0.25s;  -webkit-animation-delay: 0.25s;  -o-animation-delay: 0.25s;  animation-delay: 0.25s;}.uil-spin-css > sinclo-loading-div:nth-of-type(3) {  -ms-transform: translate(84px, 84px) rotate(135deg) translate(70px, 0);  -moz-transform: translate(84px, 84px) rotate(135deg) translate(70px, 0);  -webkit-transform: translate(84px, 84px) rotate(135deg) translate(70px, 0);  -o-transform: translate(84px, 84px) rotate(135deg) translate(70px, 0);  transform: translate(84px, 84px) rotate(135deg) translate(70px, 0);}.uil-spin-css > sinclo-loading-div:nth-of-type(4) > sinclo-loading-div-child {  -ms-animation: sinclo-loading-css 1s linear infinite;  -moz-animation: sinclo-loading-css 1s linear infinite;  -webkit-animation: sinclo-loading-css 1s linear infinite;  -o-animation: sinclo-loading-css 1s linear infinite;  animation: sinclo-loading-css 1s linear infinite;  -ms-animation-delay: 0.37s;  -moz-animation-delay: 0.37s;  -webkit-animation-delay: 0.37s;  -o-animation-delay: 0.37s;  animation-delay: 0.37s;}.uil-spin-css > sinclo-loading-div:nth-of-type(4) {  -ms-transform: translate(84px, 84px) rotate(180deg) translate(70px, 0);  -moz-transform: translate(84px, 84px) rotate(180deg) translate(70px, 0);  -webkit-transform: translate(84px, 84px) rotate(180deg) translate(70px, 0);  -o-transform: translate(84px, 84px) rotate(180deg) translate(70px, 0);  transform: translate(84px, 84px) rotate(180deg) translate(70px, 0);}.uil-spin-css > sinclo-loading-div:nth-of-type(5) > sinclo-loading-div-child {  -ms-animation: sinclo-loading-css 1s linear infinite;  -moz-animation: sinclo-loading-css 1s linear infinite;  -webkit-animation: sinclo-loading-css 1s linear infinite;  -o-animation: sinclo-loading-css 1s linear infinite;  animation: sinclo-loading-css 1s linear infinite;  -ms-animation-delay: 0.5s;  -moz-animation-delay: 0.5s;  -webkit-animation-delay: 0.5s;  -o-animation-delay: 0.5s;  animation-delay: 0.5s;}.uil-spin-css > sinclo-loading-div:nth-of-type(5) {  -ms-transform: translate(84px, 84px) rotate(225deg) translate(70px, 0);  -moz-transform: translate(84px, 84px) rotate(225deg) translate(70px, 0);  -webkit-transform: translate(84px, 84px) rotate(225deg) translate(70px, 0);  -o-transform: translate(84px, 84px) rotate(225deg) translate(70px, 0);  transform: translate(84px, 84px) rotate(225deg) translate(70px, 0);}.uil-spin-css > sinclo-loading-div:nth-of-type(6) > sinclo-loading-div-child {  -ms-animation: sinclo-loading-css 1s linear infinite;  -moz-animation: sinclo-loading-css 1s linear infinite;  -webkit-animation: sinclo-loading-css 1s linear infinite;  -o-animation: sinclo-loading-css 1s linear infinite;  animation: sinclo-loading-css 1s linear infinite;  -ms-animation-delay: 0.62s;  -moz-animation-delay: 0.62s;  -webkit-animation-delay: 0.62s;  -o-animation-delay: 0.62s;  animation-delay: 0.62s;}.uil-spin-css > sinclo-loading-div:nth-of-type(6) {  -ms-transform: translate(84px, 84px) rotate(270deg) translate(70px, 0);  -moz-transform: translate(84px, 84px) rotate(270deg) translate(70px, 0);  -webkit-transform: translate(84px, 84px) rotate(270deg) translate(70px, 0);  -o-transform: translate(84px, 84px) rotate(270deg) translate(70px, 0);  transform: translate(84px, 84px) rotate(270deg) translate(70px, 0);}.uil-spin-css > sinclo-loading-div:nth-of-type(7) > sinclo-loading-div-child {  -ms-animation: sinclo-loading-css 1s linear infinite;  -moz-animation: sinclo-loading-css 1s linear infinite;  -webkit-animation: sinclo-loading-css 1s linear infinite;  -o-animation: sinclo-loading-css 1s linear infinite;  animation: sinclo-loading-css 1s linear infinite;  -ms-animation-delay: 0.75s;  -moz-animation-delay: 0.75s;  -webkit-animation-delay: 0.75s;  -o-animation-delay: 0.75s;  animation-delay: 0.75s;}.uil-spin-css > sinclo-loading-div:nth-of-type(7) {  -ms-transform: translate(84px, 84px) rotate(315deg) translate(70px, 0);  -moz-transform: translate(84px, 84px) rotate(315deg) translate(70px, 0);  -webkit-transform: translate(84px, 84px) rotate(315deg) translate(70px, 0);  -o-transform: translate(84px, 84px) rotate(315deg) translate(70px, 0);  transform: translate(84px, 84px) rotate(315deg) translate(70px, 0);}.uil-spin-css > sinclo-loading-div:nth-of-type(8) > sinclo-loading-div-child {  -ms-animation: sinclo-loading-css 1s linear infinite;  -moz-animation: sinclo-loading-css 1s linear infinite;  -webkit-animation: sinclo-loading-css 1s linear infinite;  -o-animation: sinclo-loading-css 1s linear infinite;  animation: sinclo-loading-css 1s linear infinite;  -ms-animation-delay: 0.87s;  -moz-animation-delay: 0.87s;  -webkit-animation-delay: 0.87s;  -o-animation-delay: 0.87s;  animation-delay: 0.87s;}.uil-spin-css > sinclo-loading-div:nth-of-type(8) {  -ms-transform: translate(84px, 84px) rotate(360deg) translate(70px, 0);  -moz-transform: translate(84px, 84px) rotate(360deg) translate(70px, 0);  -webkit-transform: translate(84px, 84px) rotate(360deg) translate(70px, 0);  -o-transform: translate(84px, 84px) rotate(360deg) translate(70px, 0);  transform: translate(84px, 84px) rotate(360deg) translate(70px, 0);}sinclo-loading-area, sinclo-loading-div, sinclo-loading-div-child {    display: block;}sinclo-loading-area {  position: absolute;  top: 50%;  left: 50%;  width: 150px;  height: 150px;  margin-left: -75px;  margin-top: -75px;}.uil-spin-css > sinclo-loading-span {  font-family: 'ã¡ã¤ãªãª','ï¼­ï¼³ ï¼°ææ',ç´°ææä½,serif;  position: absolute;  top: 50%;  left: 0;  right: 0;  color: #b2d251;  font-size: 17px;  text-align: center;  font-weight: bold;  margin-top: -0.5em;}</style><sinclo-loading-area>  <sinclo-loading-div class='uil-spin-css' style='-webkit-transform:scale(0.8)'>    <sinclo-loading-div><sinclo-loading-div-child></sinclo-loading-div-child></sinclo-loading-div>    <sinclo-loading-div><sinclo-loading-div-child></sinclo-loading-div-child></sinclo-loading-div>    <sinclo-loading-div><sinclo-loading-div-child></sinclo-loading-div-child></sinclo-loading-div>    <sinclo-loading-div><sinclo-loading-div-child></sinclo-loading-div-child></sinclo-loading-div>    <sinclo-loading-div><sinclo-loading-div-child></sinclo-loading-div-child></sinclo-loading-div>    <sinclo-loading-div><sinclo-loading-div-child></sinclo-loading-div-child></sinclo-loading-div>    <sinclo-loading-div><sinclo-loading-div-child></sinclo-loading-div-child></sinclo-loading-div>    <sinclo-loading-div><sinclo-loading-div-child></sinclo-loading-div-child></sinclo-loading-div>    <sinclo-loading-span>Loading...</sinclo-loading-span>  </sinclo-loading-div></sinclo-loading-area>"},start:function(){window.clearTimeout(this.timer);var e=document.createElement("div");e.id=this.id,e.style.cssText="position: fixed; top: 0; left: 0; bottom: 0; right: 0; background-color: rgba(68,68,68,0.7); z-index: 99999";var t=this.loadingHtml();e.innerHTML=t,document.body.appendChild(e),this.flg=!0,this.timer=window.setTimeout(function(){common.load.finish()},5e3)},finish:function(){if(window.clearTimeout(this.timer),document.getElementById(this.id)){var e=document.getElementById(this.id);e.parentNode.removeChild(e),document.getElementById(this.id)&&this.finish()}}},chatBotTypingDelayTimer:null,firstTimeChatBotTyping:!0,chatBotTypingCall:function(e){var t=$.Deferred();return common.chatBotTypingDelayTimer&&e.messageType!==sinclo.chatApi.messageType.sorry?t.resolve():common.chatBotTypingDelayTimer=setTimeout(function(){common.chatBotTyping(e).then(function(){t.resolve()}),common.chatBotTypingDelayTimer=null},850),t.promise()},chatBotTypingTimerClear:function(){clearTimeout(common.chatBotTypingDelayTimer),common.chatBotTypingDelayTimer=null},chatBotTyping:function(e){var t=$.Deferred();if(0<$(".botNowDiv").length)return t.resolve(),t.promise();if(null==e)return t.resolve(),t.promise();if(!e.forceWaitAnimation)if(e.messageType===sinclo.chatApi.messageType.customer){if(!e.matchAutoSpeech)return t.resolve(),t.promise();if(e.isScenarioMessage)return t.resolve(),t.promise()}else{if(e.messageType===sinclo.chatApi.messageType.autoSpeech||e.messageType===sinclo.chatApi.messageType.auto||e.messageType===sinclo.chatApi.messageType.company||e.messageType===sinclo.chatApi.messageType.end||e.messageType===sinclo.chatApi.messageType.notification||e.messageType===sinclo.chatApi.messageType.start||e.messageType===sinclo.chatApi.messageType.cogmo.message||e.messageType===sinclo.chatApi.messageType.cogmo.feedback)return t.resolve(),t.promise();if(e.messageType===sinclo.chatApi.messageType.scenario.message.text||e.messageType===sinclo.chatApi.messageType.scenario.message.hearing||e.messageType===sinclo.chatApi.messageType.scenario.message.radio||e.messageType===sinclo.chatApi.messageType.scenario.message.pulldown||e.messageType===sinclo.chatApi.messageType.scenario.message.calendar||e.messageType===sinclo.chatApi.messageType.scenario.message.carousel||e.messageType===sinclo.chatApi.messageType.scenario.message.buttonUI||e.messageType===sinclo.chatApi.messageType.scenario.message.checkbox||e.messageType===sinclo.chatApi.messageType.scenario.message.selection||e.messageType===sinclo.chatApi.messageType.scenario.message.buttonUI||e.messageType===sinclo.chatApi.messageType.scenario.message.checkbox||e.messageType===sinclo.chatApi.messageType.scenario.message.button)return t.resolve(),t.promise();if(e.messageType===sinclo.chatApi.messageType.scenario.message.receiveFile||e.messageType===sinclo.chatApi.messageType.scenario.customer.sendFile||e.messageType===sinclo.chatApi.messageType.operatorReceiveFile){if(!sinclo.scenarioApi.isProcessing())return t.resolve(),t.promise()}else if(e.messageType!==sinclo.chatApi.messageType.sorry&&e.messageType!==sinclo.diagramApi.messageType.message.text&&e.messageType!==sinclo.diagramApi.messageType.message.branch&&!sinclo.scenarioApi.isProcessing())return t.resolve(),t.promise()}var n=common.getWidgetSettings(),i=(common.getSizeType(n.widgetSizeType),n.reTextSize),o=1.4*i+20,s=2*o,a=.172*s,r=.8*i,c=(n.widgetSizeType,""),l=common.getPageWidth(),d=scl_check.smartphone()?l*(1/285):1;scl_check.smartphone()&&!common.isPortrait()&&(d=1.5),c+="<div class='botNowDiv'>",!scl_check.smartphone()&&1===n.widgetSizeType&&$("#chatTalk").get(0).offsetHeight<$("#chatTalk").get(0).scrollHeight?(c+="<li class='effect_left_wait botDotOnlyTyping'>",c+="  <div class='reload_only_dot_left'></div>",c+="  <div class='reload_only_dot_center'></div>",c+="  <div class='reload_only_dot_right'></div>"):(scl_check.smartphone()||3===n.widgetSizeType||4===n.widgetSizeType||5===n.widgetSizeType?c+="<li class='effect_left_wait botNowTypingLarge'>":2===n.widgetSizeType?c+="<li class='effect_left_wait botNowTypingMedium'>":1===n.widgetSizeType&&(c+="<li class='effect_left_wait botNowTypingSmall'>"),c+="    <div class='reload_dot_left'></div>",c+="    <div class='reload_dot_center'></div>",c+="    <div class='reload_dot_right'></div>"),c+="  </li>",c+="</div>";var p="";return p+="#sincloBox ul#chatTalk div[class^='reload']{",p+="  min-width:"+r*d+"px;width:"+r*d+"px;min-height:"+r*d+"px;height:"+r*d+"px;border-radius:100%;",p+="}",p+="#sincloBox ul#chatTalk div[class^='reload_dot']{",common.getWidgetSettings().isSendMessagePositionLeft?p+="  background-color:"+n.seTextColor+";":p+="  background-color:"+n.reTextColor+";",p+="}","#FFFFFF"==n.mainColor?(p+="#sincloBox ul#chatTalk div[class^='reload_only_dot']{",common.getWidgetSettings().isSendMessagePositionLeft?p+="  background-color:"+n.seBackgroundColor+";":p+="  background-color:"+n.reBackgroundColor+";"):(p+="#sincloBox ul#chatTalk div[class^='reload_only_dot']{",p+="  background-color:"+n.mainColor+";"),p+="}",p+="#sincloBox ul#chatTalk div.botNowDiv > li > div[class$='left']{",p+="  animation:dotScale 1.0s ease-in-out -0.32s infinite both",p+="}",p+="#sincloBox ul#chatTalk div.botNowDiv li > div[class$='center']{",p+="  animation:dotScale 1.0s ease-in-out -0.16s infinite both",p+="}",p+="#sincloBox ul#chatTalk div.botNowDiv li > div[class$='right']{",p+="  animation:dotScale 1.0s ease-in-out 0s infinite both",p+="}",1===n.chatMessageWithAnimation?common.getWidgetSettings().isSendMessagePositionLeft?(p+="#sincloBox ul#chatTalk div.botNowDiv { text-align: right; }",p+="#sincloBox ul#chatTalk :not(.grid_for_icon) > .botNowDiv > li.effect_left_wait { -webkit-animation-name:rightEffect; animation-name:rightEffect; -webkit-animation-duration:0.5s; animation-duration:0.5s; -webkit-animation-iteration-count:1; animation-iteration-count:1; -webkit-animation-fill-mode:both; animation-fill-mode:both; -webkit-transform-origin:left bottom; transform-origin:left bottom; opacity:0;}"):(p+="#sincloBox ul#chatTalk div.botNowDiv { text-align: left; }",p+="#sincloBox ul#chatTalk :not(.grid_for_icon) > .botNowDiv > li.effect_left_wait { -webkit-animation-name:leftEffect; animation-name:leftEffect; -webkit-animation-duration:0.5s; animation-duration:0.5s; -webkit-animation-iteration-count:1; animation-iteration-count:1; -webkit-animation-fill-mode:both; animation-fill-mode:both; -webkit-transform-origin:left bottom; transform-origin:left bottom; opacity:0;}"):common.getWidgetSettings().isSendMessagePositionLeft?(p+="#sincloBox ul#chatTalk div.botNowDiv { text-align: right; }",p+="#sincloBox ul#chatTalk :not(.grid_for_icon) > .botNowDiv > li.effect_left_wait { -webkit-animation-name:noneRightEffect; animation-name:noneRightEffect; -webkit-animation-duration:1ms; animation-duration:1ms; -webkit-animation-iteration-count:1; animation-iteration-count:1; -webkit-animation-fill-mode:both; animation-fill-mode:both; opacity:0;}"):(p+="#sincloBox ul#chatTalk div.botNowDiv { text-align: left; }",p+="#sincloBox ul#chatTalk :not(.grid_for_icon) > .botNowDiv > li.effect_left_wait { -webkit-animation-name:noneLeftEffect; animation-name:noneLeftEffect; -webkit-animation-duration:1ms; animation-duration:1ms; -webkit-animation-iteration-count:1; animation-iteration-count:1; -webkit-animation-fill-mode:both; animation-fill-mode:both; opacity:0;}"),p+="#sincloBox ul#chatTalk li[class*='botNowTyping']{",p+="  display:inline-flex;justify-content:space-around;align-items:center;border-radius:"+12*d+"px!important;",p+="  width:"+s*d+"px;padding:0 "+a*d+"px;margin-left: "+10*d+"px;",common.getWidgetSettings().isSendMessagePositionLeft?p+="  background-color:"+n.seBackgroundColor+";":p+="  background-color:"+n.reBackgroundColor+";",p+="}",p+="#sincloBox ul#chatTalk li.botNowTypingSmall{",p+="  height:"+(o-8)*d+"px;",p+="}",p+="#sincloBox ul#chatTalk li.botNowTypingMedium{",p+="  height:"+(o-8)*d+"px;",p+="}",p+="#sincloBox ul#chatTalk li.botNowTypingLarge{",p+="  height:"+o*d+"px;",p+="}",p+="#sincloBox ul#chatTalk li.botDotOnlyTyping{",p+="  display:flex;justify-content:space-around;align-items:center;border-radius:12px!important;",p+="  width:"+s*d+"px;height:"+(o-21)*d+"px;;padding:0 "+a*d+"px;margin-left: "+10*d+"px;",p+="  background-color:"+n.chatTalkBackgroundColor+";",p+="}",p+="@keyframes dotScale{",p+="   0%,100%{transform: scale(0.4);opacity:0.3}",p+="  30%,70%{opacity:0.7}",p+="  50%{transform: scale(1);opacity:1.0}",p+="}",common.firstTimeChatBotTyping&&($("#sincloBox > style").append(p),common.firstTimeChatBotTyping=!1),$("sinclo-chat").append(c),setTimeout(function(){t.resolve()},500),t.promise()},chatBotTypingRemove:function(){0!=$(".botNowDiv").length&&$("div.botNowDiv").remove()},reloadWidget:function(){var e=common.getWidgetSettings(),t=common.getSizeType(e.widgetSizeType);if(scl_check.smartphone())var n=2===common.getWidgetSettings().spMaximizeSizeType?common.getPageWidth():common.getPageWidth()-20;else n=parseInt(t.boxWidth);var i=$("#chatTalk").outerHeight()+$("#flexBoxHeight").outerHeight(),o=29*Number(e.widgetSizeType)+61;var s="";s+="#sincloBox .reloadCover div[class^='reload_dot']{",s+="  width:18px;height:18px;border-radius:100%;",e.mainColor==e.chatTalkBackgroundColor?common.getWidgetSettings().isSendMessagePositionLeft?s+="  background-color:"+e.seBackgroundColor+";":s+="  background-color:"+e.reBackgroundColor+";":s+="  background-color:"+e.mainColor+";",s+="}",s+="#sincloBox .reloadCover div[class$='left']{",s+="  animation:dotScale 1.4s ease-in-out -0.32s infinite both",s+="}",s+="#sincloBox .reloadCover div[class$='center']{",s+="  animation:dotScale 1.4s ease-in-out -0.16s infinite both",s+="}",s+="#sincloBox .reloadCover div[class$='right']{",s+="  animation:dotScale 1.4s ease-in-out 0s infinite both",s+="}",s+="#sincloBox div.reloadCover{",s+="  position:absolute;z-index:1000;display:flex;justify-content:space-around;align-items:center;",s+="  background-color:"+e.chatTalkBackgroundColor+";",s+="  width:"+n+"px;height:"+i+"px;padding:0 "+o+"px;",s+="}",s+="@keyframes dotScale{",s+="   0%,80%,100%{transform: scale(0);}",s+="  40%{transform: scale(1);}",s+="}",$("#sincloBox > style").append(s),$("#chatTab").prepend("<div class='reloadCover'>  <div class='reload_dot_left'></div>  <div class='reload_dot_center'></div>  <div class='reload_dot_right'></div></div>")},reloadWidgetRemove:function(){$("div.reloadCover").remove()},waitDelayTimer:function(){return 20},wait:function(e){var t=$.Deferred();return setTimeout(function(){t.resolve()},Number(e)),t.promise()},getPageWidth:function(){return"5ef46aede0275"===sincloInfo.site.key||"5bee370e8c632"===sincloInfo.site.key||"61b1439f4e725"===sincloInfo.site.key||"60e6c88677961"===sincloInfo.site.key||"62a6bc13d476b"===sincloInfo.site.key||"66d022010aa66"===sincloInfo.site.key?$(window).width():$(window).width()<$(document).width()?$(document).width():$(window).width()},getRatio:function(){var e=1;scl_check.smartphone()&&(e=common.isPortrait()?common.getPageWidth()*(1/285):2.5);return e},getFontSize:function(e){return scl_check.smartphone()?common.isPortrait()&&16<=e*common.getRatio()?e*common.getRatio():16:e},stringReplaceProcessForGA:function(e){var t=e.indexOf('"')+1,n=e.indexOf('"',t);return e=(e=(e=e.slice(t,n)).replace("mailto:","")).replace("tel:","")},callGA:function(t,n,i){"function"==typeof gtag?gtag("event",t,{event_category:"MediaTalk",event_label:n,value:i}):"function"!=typeof gtag&&"function"!=typeof ga&&"object"==typeof dataLayer&&"function"==typeof dataLayer.push?dataLayer.push({event:t,event_category:"MediaTalk",event_label:n,value:i}):"function"==typeof ga&&(ga(function(){var e=ga.getAll()[0];e.send("event","MediaTalk",t,n,i)}),ga("send","event","MediaTalk",t,n,i))},hasGA:function(){return"function"==typeof ga||"function"==typeof gtag||"object"==typeof dataLayer&&"function"==typeof dataLayer.push},handleInit:function(){common.tabMessenger.subscribe(),common.tabMessenger.subscribeWSConnect(function(){socket&&!socket.isConnected()&&(common.tabMessenger.isSubscribeConnecting=!0,socket.connect().then(function(){return sinclo.executeConnectSuccess(window.userInfo.connectSuccessData,window.userInfo.accessInfoData)}).then(sinclo.setHistoryId))});var e=null;if(document.getElementById("sincloBox")&&userInfo.accessType===Number(cnst.access_type.guest)&&window.sincloInfo.contract.enableRealtimeMonitor){var t=userInfo.getSendList();if(t.widget=window.sincloInfo.widgetDisplay,userInfo&&userInfo.fromBFCacheContract)emit("connectSuccess",{confirm:userInfo.fromBFCache=!1,reconnect:!0,widget:window.sincloInfo.widgetDisplay},function(e){emit("customerInfo",t)});else emit("connectSuccess",{confirm:!(sinclo.trigger.flg=!0),reconnect:!0,tmpAutoMessages:sinclo.chatApi.autoMessages.get(!0),tmpDiagramMessages:sinclo.chatApi.diagramMessages.get(!0),widget:window.sincloInfo.widgetDisplay},function(e){emit("customerInfo",t)});common.widgetHandler.show()}else sinclo.trigger.flg=!1,window.sincloInfo.contract.enableRealtimeMonitor?sinclo.connect():window.sincloInfo.contract.synclo||window.sincloInfo.contract.document?socket.connect().then(sinclo.connect).then(sinclo.accessInfo).then(function(e){return sinclo.executeConnectSuccess(e,window.sincloInfo.accessInfoData)}).then(function(e){sinclo.setHistoryId(e)}):common.tabMessenger.ping().then(function(){return scl_check.objPath(sincloInfo,"custom.allowUniqueActiveTag")&&sincloInfo.custom.allowUniqueActiveTag?$.Deferred().resolve().promise():sinclo.connect().then(function(e){var t=common.jParse(e);return t.sincloSessionIdIsNew=!1,sinclo.accessInfo(JSON.stringify(t))})},function(){return sinclo.connect().then(function(e){var t=common.jParse(e),n=scl_check.isset(common.settingLoader.get());return t.sincloSessionIdIsNew&&(t.sincloSessionIdIsNew=!(!common.settingLoader.isDataReceived&&n)),sinclo.accessInfo(JSON.stringify(t))})}).then(function(e){window.userInfo.connectSuccessData=e,scl_check.isset(e.sincloSessionIdIsNew)&&!e.sincloSessionIdIsNew&&socket.isOnceConnected()?socket.connect().then(function(){return sinclo.executeConnectSuccess(window.userInfo.connectSuccessData,window.userInfo.accessInfoData)}).then(sinclo.setHistoryId):sinclo.setHistoryId(JSON.stringify({siteKey:window.sincloInfo.site.key,userIdType:userInfo.userIdType,userId:userInfo.userId,tabId:userInfo.tabId,sincloSessionId:userInfo.sincloSessionId,token:common.token,accessId:userInfo.accessId,chat:{historyId:null,messages:sinclo.chatApi.store.get()},url:f_url(browserInfo.href),connectToken:userInfo.connectToken,customerInfo:userInfo.customerInfo,customerInfoSettings:userInfo.customerInfoSettings,confirm:!1,widget:window.sincloInfo.widgetDisplay,prevList:userInfo.prev,userAgent:userInfo.newUserAgent?userInfo.newUserAgent:userInfo.userAgent,time:userInfo.time?userInfo.time:(new Date).getTime(),ipAddress:userInfo.getIp(),referrer:userInfo.referrer,status:browserInfo.getActiveWindow(),title:common.title(),historyId:null,stayLogsId:null,orgName:null,lbcCode:null}))});if(userInfo.accessType===Number(cnst.access_type.host)||"true"===String(userInfo.gFrame))return!1;var n=browserInfo.getActiveWindow();e&&clearInterval(e),e=setInterval(function(){var e=sinclo_storage.s.get("chatAct");if(window.sincloInfo.contract.enableRealtimeMonitor||Boolean(e)){var t=browserInfo.getActiveWindow();null!==document.getElementById("sincloBox")&&n!==t&&emit("sendTabInfo",{status:n=t,widget:window.sincloInfo.widgetDisplay})}},700),preventWithdrawalOverlay.preventBrowserMoveEvent().then(function(){return preventWithdrawalOverlay.resetChatState(),sinclo.operatorInfo.reCreateWidget()}).then(function(){preventWithdrawalOverlay.show();var e=preventWithdrawalOverlay.isShowModal()?350:0;setTimeout(function(){common.widgetHandler.show(),sinclo.operatorInfo.ev(!0),common.widgetHandler.saveWidgetShown(),sinclo.chatApi.init(),sinclo.trigger.init()},e)})},getWidgetSettings:function(){return preventWithdrawalOverlay.isActive()?preventWithdrawalOverlay.makeWidgetSetting(sincloInfo.preventWithdrawalSettings.widget):sincloInfo.widget},getTimestamp:function(){var t=$.Deferred();return $.ajax({type:"get",url:window.sincloInfo.site.files+"/api/util/timestamp",cache:!1,dataType:"json",success:function(e){t.resolve(e.t)}}),t.promise()},createUUID:function(){for(var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".split(""),t=0,n=e.length;t<n;t++)switch(e[t]){case"x":e[t]=Math.floor(16*Math.random()).toString(16);break;case"y":e[t]=(Math.floor(4*Math.random())+8).toString(16)}return e.join("")}}),sinclo_storage={s:{get:function(e){return sessionStorage.getItem(e)},set:function(e,t){sessionStorage.setItem(e,t)},unset:function(e){sessionStorage.removeItem(e)},findKeyLike:function(e){for(var t=[],n=sessionStorage.length,i=0;i<n;i++)0<=sessionStorage.key(i).indexOf(e)&&t.push(sessionStorage.key(i));return t}},l:{get:function(e){return localStorage.getItem(e)},set:function(e,t){localStorage.setItem(e,t)},unset:function(e){localStorage.removeItem(e)},findKeyLike:function(e){for(var t=[],n=localStorage.length,i=0;i<n;i++)0<=localStorage.key(i).indexOf(e)&&t.push(localStorage.key(i));return t}},c:{prefix:"___",get:function(e){for(var t=document.cookie.split(";"),n="",i=0;i<t.length;i++){var o=t[i].split("=");o[0].trim()===this.prefix+e&&(n=decodeURIComponent(o[1]))}return n},set:function(e,t){document.cookie=this.prefix+e+"="+encodeURIComponent(t)+"; path=/"},unset:function(e){localStorage.removeItem(e)}}},scl_check={browser:function(){var e=!1;window.localStorage&&window.sessionStorage&&(scl_check.isset(common.tmpParams)||scl_check.isset(sinclo_storage.s.get("params"))||(e=!0));var t=navigator.userAgent.toLowerCase();return!window.sincloInfo.contract.chat&&this.smartphone()&&(e=!1),0<t.indexOf("bot")&&(e=!1),t.match(/msie\ [1-9]\./g)&&(e=!1),e},smartphone:function(){var e=navigator.userAgent.toLowerCase();return 0<e.indexOf("iphone")||0<e.indexOf("ipod")||0<e.indexOf("android")&&0<e.indexOf("mobile")||0<=e.indexOf("pocketalice")},ios:function(){var e=navigator.userAgent;return 0<=e.indexOf("iOS")||0<=e.indexOf("iPhone")||0<=e.indexOf("iPad")||0<=navigator.userAgent.indexOf("iPod")},android:function(){return 0<navigator.userAgent.toLowerCase().indexOf("android")},getDevice:function(){var e=navigator.userAgent.toLowerCase();return 0<e.indexOf("iphone")||0<e.indexOf("ipod")||0<e.indexOf("android")&&0<e.indexOf("mobile")?"smartphone":0<e.indexOf("ipad")||0<e.indexOf("android")?"tablet":"pc"},isset:function(e){if(null===e||""===e||void 0===e||"null"===String(e)||"undefined"===String(e))return!1;if("object"!=typeof e)return!0;Object.keys(e);return 0!==Object.keys(e).length},objPath:function(e,t){var n=t.split(".");for(var i in n){var o=n[i];return!!e.hasOwnProperty(o)&&(!(1<n.length)||scl_check.objPath(e[o],n.splice(1).join(".")))}},isJSON:function(arg){if(arg="function"==typeof arg?arg():arg,!isNaN(Number(arg))||"string"!=typeof arg)return!1;try{return arg=JSON?JSON.parse(arg):eval("("+arg+")"),!0}catch(e){return!1}},isIE:function(){var e=window.navigator.userAgent;return-1<e.indexOf("MSIE")||-1<e.indexOf("Trident/")},hasCustomBannerImageSetting:function(){return scl_check.isset(window.sincloInfo.custom)&&scl_check.isset(window.sincloInfo.custom.widget)&&scl_check.isset(window.sincloInfo.custom.widget.bannerImage)&&(!scl_check.smartphone()&&scl_check.isset(window.sincloInfo.custom.widget.bannerImage.pc)||scl_check.smartphone()&&scl_check.isset(window.sincloInfo.custom.widget.bannerImage.sp))},hasOriginalImageSetting:function(){return!scl_check.smartphone()&&3===Number(common.getWidgetSettings().closeButtonModeType)&&scl_check.isset(common.getWidgetSettings().pcOriginalImage)||scl_check.smartphone()&&scl_check.isset(common.getWidgetSettings().spCloseButtonModeType)&&1===Number(common.getWidgetSettings().spCloseButtonModeType)&&scl_check.isset(common.getWidgetSettings().spOriginalImage)},escape_html:function(e){if("string"!=typeof e)return e;var t=e.replace(/(<br>|<br \/>)/gi,"\n");return t=t.replace(/[&'`"<>]/g,function(e){return{"&":"&amp;","'":"&#x27;","`":"&#x60;",'"':"&quot;","<":"&lt;",">":"&gt;"}[e]})},firstUrl:function(){return!!location.href.match("/sincloData=/")},ref:function(){var e=new RegExp("^http(s)?://([A-z]+.)?"+location.hostname+"/");return document.referrer.match(e)},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},getSessionAvailableState:function(){var t=$.Deferred();return $.ajax({headers:{Accept:"text/plain, application/json; charset=utf-8","Content-Type":"application/json; charset=utf-8"},type:"post",url:window.sincloInfo.site.files+"/api/session/check",dataType:"json",contentType:"application/json",data:JSON.stringify({siteKey:sincloInfo.site.key,tabId:userInfo.tabId,sincloSessionId:userInfo.sincloSessionId}),success:function(e){userInfo.tabIdIsActive=e.tabId,userInfo.sincloSessionIdIsActive=e.sincloSessionId,common.tabMessenger.ping().then(function(){scl_check.objPath(sincloInfo,"custom.allowUniqueActiveTag")&&sincloInfo.custom.allowUniqueActiveTag||t.resolve(!0)},function(){t.resolve(!1)})}}),t.promise()},includes:function(e,i){var o=!1;return e.forEach(function(e,t,n){e!==i||(o=!0)}),o},widget:{maximized:function(){var e=sinclo_storage.s.get("widgetMaximized");return scl_check.isset(e)&&"true"===e}}},userInfo={accessType:cnst.access_type.guest,connectToken:"",tabId:null,userId:null,userIdType:1,accessId:null,ipAddress:null,pageTime:null,gFrame:!1,firstConnection:!1,processReconnect:!1,searchKeyword:null,userAgent:window.navigator.userAgent,customVariables:{},customerInfo:{},customerInfoSettings:{},accessInfoData:{},connectSuccessData:{},reAccess:!1,noResetStrage:!1,init:function(){var t=$.Deferred(),n=sinclo.chatApi.displayedChatFlg;if("true"===sinclo_storage.s.get("sinclo_navigating_away")){sinclo_storage.s.unset("sinclo_navigating_away");var e=sinclo_storage.s.get("tabId"),i=sinclo_storage.c.get("sincloSessionId");if(scl_check.isset(e)&&scl_check.isset(i))return this._processInit(),userInfo.processReconnect=!0,socket.connect().then(function(){t.resolve()}).catch(function(e){t.reject(e)}),t.promise()}return this._processInit(),scl_check.getSessionAvailableState().then(function(e){scl_check.isset(userInfo.getTabId())?(sinclo.chatApi.operatorFileReceiver.on(),userInfo.tabIdIsActive?socket.connect().then(function(){t.resolve()}):e?userInfo.sincloSessionIdIsActive?(userInfo.processReconnect=n,socket.connect().then(function(){t.resolve()})):(userInfo.processReconnect=n,socket.isOnceConnected()?socket.connect().then(function(){t.resolve()}):t.resolve()):(userInfo.processReconnect=n,socket.isOnceConnected()?socket.connect().then(function(){t.resolve()}):(userInfo.reAccess=!1,t.resolve()))):e?userInfo.sincloSessionIdIsActive?(userInfo.processReconnect=n,userInfo.noResetStrage=!0,socket.connect().then(function(){t.resolve()})):(userInfo.processReconnect=n,socket.isOnceConnected()?(userInfo.noResetStrage=!0,socket.connect().then(function(){t.resolve()})):t.resolve()):(sincloInfo.contract.enableRealtimeMonitor||socket.isConnected()||(socket.clearOnceConnectedFlg(),userInfo.reAccess=!0),t.resolve())}),t.promise()},_processInit:function(){if(common.token_add(),this.globalSet(),this.setPrevpage(socket.isOnceConnected()),common.getParams(),userInfo.setCustomVariables(),scl_check.isset(sinclo_storage.s.get("params")))common.setParams();else if(Number(common.tmpParams.type)===Number(cnst.access_type.host))userInfo.userId=common.tmpParams.userId,userInfo.setTabId(),common.tmpParams.tabId=userInfo.tabId,common.saveParams();else{var e=this.getCode(cnst.info_type.referrer);if(userInfo.referrer=sinclo_storage.s.get(e),scl_check.isset(userInfo.referrer)){var t=userInfo.referrer.match(/[?&](kw|MT|name|p|q|qt|query|search|word)=([^&]+)/);userInfo.searchKeyword=scl_check.isset(t)&&3===t.length?t[2]:null}}if(Number(common.params.type)===Number(cnst.access_type.host))userInfo.accessType=cnst.access_type.host,userInfo.sendTabId=common.params.sendTabId,userInfo.tabId=common.params.tabId,userInfo.setConnect(common.params.connectToken),emit("connectSuccess",{confirm:!1});else{if(common.tmpParams.hasOwnProperty("gFrame")&&!scl_check.isset(sinclo_storage.s.get("gFrame"))){var n=userInfo.getCode(cnst.info_type.gFrame);sinclo_storage.s.set(n,common.tmpParams.gFrame);var i=userInfo.getCode(cnst.info_type.connect);sinclo_storage.s.set(i,common.tmpParams.connectToken);var o=userInfo.getCode(cnst.info_type.tab);sinclo_storage.s.set(o,common.tmpParams.tabId);var s=userInfo.getCode(cnst.info_type.parentId);sinclo_storage.s.set(s,common.tmpParams.parentId)}scl_check.isset(sinclo_storage.s.get("gFrame"))&&scl_check.isset(sinclo_storage.s.get("parentId"))&&(userInfo.gFrame=sinclo_storage.s.get("gFrame"),userInfo.tabId=sinclo_storage.s.get("tabId"),userInfo.connectToken=sinclo_storage.s.get("connectToken"),userInfo.sendTabId=sinclo_storage.s.get("sendTabId"),userInfo.parentId=sinclo_storage.s.get("parentId"),emit("startSyncToFrame",{parentId:userInfo.parentId,tabId:userInfo.tabId})),scl_check.isset(sinclo_storage.s.get("coBrowseConnectToken"))&&(userInfo.coBrowseConnectToken=sinclo_storage.s.get("coBrowseConnectToken"))}},syncInfo:{code:"syncInfo",set:function(){sinclo_storage.s.set(this.code,JSON.stringify({sendTabId:userInfo.sendTabId}))},get:function(){var e=common.jParse(sinclo_storage.s.get(this.code));scl_check.isset(e)&&scl_check.isset(e.sendTabId)&&(userInfo.sendTabId=e.sendTabId)},unset:function(){sinclo_storage.s.unset(this.code),delete userInfo.sendTabId,userInfo.unsetConnect()}},getCode:function(e){switch(e){case cnst.info_type.user:return"userId";case cnst.info_type.access:return"accessId";case cnst.info_type.ip:return"ipAddress";case cnst.info_type.time:return"time";case cnst.info_type.referrer:return"referrer";case cnst.info_type.connect:return"connectToken";case cnst.info_type.tab:return"tabId";case cnst.info_type.prev:return"prev";case cnst.info_type.staycount:return"stayCount";case cnst.info_type.gFrame:return"gFrame";case cnst.info_type.sendTabId:return"sendTabId";case cnst.info_type.parentId:return"parentId";case cnst.info_type.sincloSessionId:return"sincloSessionId";case cnst.info_type.oldUserId:return"_scl_oldUserId"}},set:function(e,t,n){var i=this.getCode(e);void 0===n?e===cnst.info_type.user?sinclo_storage.l.set(cnst.prefix+i,t):sinclo_storage.l.set(i,t):"sincloSessionId"===n?sinclo_storage.c.set(i,t):sinclo_storage.s.set(i,t),userInfo[i]=t},get:function(e){var t=this.getCode(e);return scl_check.isset(sinclo_storage.l.get(t))?e===cnst.info_type.user?sinclo_storage.l.get(cnst.prefix+t):sinclo_storage.l.get(t):scl_check.isset(sinclo_storage.s.get(t))?sinclo_storage.s.get(t):scl_check.isset(sinclo_storage.c.get(t))?sinclo_storage.c.get(t):void 0},unset:function(e){var t=this.getCode(e);userInfo[t]=null,scl_check.isset(sinclo_storage.l.get(t))&&sinclo_storage.l.unset(t),scl_check.isset(sinclo_storage.s.unset(t))&&sinclo_storage.s.unset(t)},globalSet:function(){var e=Object.keys(cnst.info_type);for(var t in e){var n=this.getCode(cnst.info_type[e[t]]);if(scl_check.isset(sinclo_storage.l.get(n)))if("userId"===n){var i=sinclo_storage.l.get(n);isNaN(i)||16!==i.length&&17!==i.length?userInfo[n]=null:(sinclo_storage.l.set(cnst.prefix+n,i),sinclo_storage.l.unset(n),userInfo[n]=sinclo_storage.l.get(cnst.prefix+n))}else userInfo[n]=sinclo_storage.l.get(n);else scl_check.isset(sinclo_storage.s.get(n))?userInfo[n]=sinclo_storage.s.get(n):scl_check.isset(sinclo_storage.c.get(n))&&(userInfo[n]=sinclo_storage.c.get(n))}n=this.getCode(cnst.info_type.user),scl_check.isset(sinclo_storage.l.get(cnst.prefix+n))&&(userInfo[n]=sinclo_storage.l.get(cnst.prefix+n))},strageReset:function(){var e=[cnst.info_type.access,cnst.info_type.ip,cnst.info_type.time,cnst.info_type.referrer,cnst.info_type.connect,cnst.info_type.tab,cnst.info_type.prev,cnst.info_type.gFrame,cnst.info_type.parentId];for(var t in e)userInfo.unset(e[t]);!1===userInfo.noResetStrage&&(localStorage.forNotHavingConnectionMessageStack="[]")},getUserId:function(){return this.get(cnst.info_type.user)},getTabId:function(){return this.get(cnst.info_type.tab)},getAccessId:function(){return this.get(cnst.info_type.access)},getIp:function(){return this.get(cnst.info_type.ip)},getTime:function(){return this.get(cnst.info_type.time)},getConnect:function(){return this.get(cnst.info_type.connect)},getStayCount:function(){var e=this.getCode(cnst.info_type.staycount);return Number(sinclo_storage.l.get(e))},setStayCount:function(){var e=this.getCode(cnst.info_type.staycount),t=Number(sinclo_storage.l.get(e))+1;sinclo_storage.l.set(e,t)},setReferrer:function(){var e=this.getCode(cnst.info_type.referrer);null===userInfo.referrer&&scl_check.isset(document.referrer)&&(sinclo_storage.s.set(e,document.referrer),userInfo.referrer=document.referrer)},setPrevpage:function(e){var t=this.getCode(cnst.info_type.prev);userInfo.prev=common.jParse(sinclo_storage.s.get(t)),scl_check.isset(userInfo.prev)||(userInfo.prev=[]),0!==userInfo.prev.length&&location.href===userInfo.prev[userInfo.prev.length-1].url||(0<userInfo.prev.length&&(browserInfo.referrer=userInfo.prev[userInfo.prev.length-1].url),userInfo.prev.push({url:location.href,title:common.title(),accessTime:sincloInfo.accessTime}),sinclo_storage.s.set(t,JSON.stringify(userInfo.prev)))},writePrevToLocalStorage:function(){var e=this.getCode(cnst.info_type.prev),t=[];return sinclo_storage.l.set("pageTransition",!1),void 0!==userInfo.oldSincloSessionId?(t=common.jParse(sinclo_storage.s.get(e)),sinclo_storage.l.set(e,JSON.stringify(t)),sinclo_storage.l.set("pageTransition",!0)):(t=common.jParse(sinclo_storage.l.get(e)),scl_check.isset(t)||(t=[]),0!==t.length&&location.href===t[t.length-1].url||(t.push({url:location.href,title:common.title()}),sinclo_storage.l.set(e,JSON.stringify(t)),sinclo_storage.l.set("pageTransition",!0))),t},setConnect:function(e){this.set(cnst.info_type.connect,e,!0)},setTabId:function(){var e=userInfo.userId+"_"+common.makeToken();this.set(cnst.info_type.tab,e,!0)},changeTabId:function(e){this.set(cnst.info_type.tab,e,!0)},unsetAccessId:function(){return this.unset(cnst.info_type.access)},unsetConnect:function(){return this.unset(cnst.info_type.connect)},getSendList:function(){var e=this.getCode(cnst.info_type.prev),t=common.jParse(sinclo_storage.l.get(e));return{ipAddress:this.getIp(),time:this.getTime(),prev:t||this.prev,stayCount:this.getStayCount(),referrer:this.referrer,userAgent:userInfo.newUserAgent?userInfo.newUserAgent:userInfo.userAgent,chatCnt:$(".sinclo_se").length,chatUnread:{id:null,cnt:0},service:scl_check.browser(),widget:window.sincloInfo.widgetDisplay,customerInfoSettings:window.userInfo.customerInfoSettings}},setCustomVariables:function(){if(scl_check.isset(sincloInfo.customVariables)&&0<sincloInfo.customVariables.length&&scl_check.isset(sincloInfo.customerInfoSettings)&&0<sincloInfo.customerInfoSettings.length)try{for(var e=0;e<sincloInfo.customerInfoSettings.length;e++)if(scl_check.isset(sincloInfo.customerInfoSettings[e].attribute_value)){var t=userInfo._getText($(sincloInfo.customerInfoSettings[e].attribute_value));scl_check.isset(t)&&(userInfo.customerInfo[sincloInfo.customerInfoSettings[e].item_name]=t.trim())}}catch(e){}else if(scl_check.isset(sincloInfo.customVariables)&&0<sincloInfo.customVariables.length)try{for(e=0;e<sincloInfo.customVariables.length;e++){t=userInfo._getText($(sincloInfo.customVariables[e].attribute_value));if(scl_check.isset(t)&&(userInfo.customVariables[sincloInfo.customVariables[e].item_name]=t.trim(),userInfo.customerInfo[sincloInfo.customVariables[e].item_name]=t.trim()),sincloInfo.customVariables[e].ref_master_id_flg)if(scl_check.isset(t)){var n=t.trim();userInfo.set(cnst.info_type.oldUserId,userInfo.userId),userInfo.set(cnst.info_type.user,n),userInfo.userId=n,userInfo.getMasterInfo(n).then(function(e){alert(e)})}else{var i=userInfo.get(cnst.info_type.oldUserId);userInfo.set(cnst.info_type.user,i),userInfo.userId=i}}}catch(e){}},execGetMasterInfo:function(){var i=$.Deferred();if(0<sincloInfo.customVariables.length){for(var e=0;e<sincloInfo.customVariables.length;e++)if(sincloInfo.customVariables[e].ref_master_id_flg){var t=userInfo._getText($(sincloInfo.customVariables[e].attribute_value));if(scl_check.isset(t)){var n=t.trim();return scl_check.isset(userInfo.get(cnst.info_type.oldUserId))||userInfo.set(cnst.info_type.oldUserId,n),userInfo.set(cnst.info_type.user,n),userInfo.userId=n,userInfo.userIdType=2,userInfo.getMasterInfo(n).then(function(e){if(0<Object.keys(e).length)for(var t=Object.keys(e),n=0;n<sincloInfo.customerInfoSettings.length;n++)scl_check.isset(sincloInfo.customerInfoSettings[n].membership_headers_order)&&(userInfo.customerInfo[sincloInfo.customerInfoSettings[n].item_name]=e[t[Number(sincloInfo.customerInfoSettings[n].membership_headers_order)-1]]);userInfo.strageReset(),i.resolve()}),i.promise()}var o=userInfo.get(cnst.info_type.oldUserId);return scl_check.isset(o)&&(userInfo.strageReset(),userInfo.set(cnst.info_type.user,o),userInfo.userId=o,userInfo.userIdType=1),i.resolve(),i.promise()}i.resolve()}else i.resolve();return i.promise()},getMasterInfo:function(e){var i=$.Deferred();return $.ajax({url:sincloInfo.site.socket+"/api/membership/latest",type:"GET",data:{siteKey:sincloInfo.site.key,membershipId:e},cache:!1,contentType:!1,dataType:"json"}).done(function(e,t,n){i.resolve(e)}).fail(function(e,t,n){i.reject()}),i.promise()},_getText:function(e){return""!==e.text()?e.text():""!==e.val()?e.val():""},getCustomerInfoById:function(e){var t="";if(scl_check.isset(sincloInfo.customerInfoSettings))for(var n=0;n<sincloInfo.customerInfoSettings.length;n++)if(Number(e)===Number(sincloInfo.customerInfoSettings[n].id)){var i=sincloInfo.customerInfoSettings[n].item_name;if(scl_check.isset(this.customerInfo[i])){t=this.customerInfo[i];break}}return t}},browserInfo={connectFlg:!1,referrer:"",href:location.href,prevList:[],scrollSize:function(){var e=document.body.scrollHeight;if(scl_check.smartphone()&&!scl_check.android()){var t=document.documentElement.style.overflow,n=document.documentElement.style.height;document.documentElement.style.overflow="visible",document.documentElement.style.height="auto",e=document.body.scrollHeight,document.documentElement.style.overflow=t,document.documentElement.style.height=n}return{x:document.body.scrollWidth-window.innerWidth,y:e-window.innerHeight}},sc:function(){return document.body.scrollTop>document.documentElement.scrollTop||document.body.scrollLeft>document.documentElement.scrollLeft?document.body:document.documentElement},resetPrevList:function(){var e=[];e.push(this.href),this.prevList=e,sinclo_storage.s.set("prevList",JSON.stringify(this.prevList))},setPrevList:function(){var e=[];scl_check.isset(sinclo_storage.s.get("prevList"))&&(e=JSON.parse(sinclo_storage.s.get("prevList"))),e.push(this.href),this.prevList=e,sinclo_storage.s.set("prevList",JSON.stringify(this.prevList))},windowScroll:function(){var e=browserInfo.sc(),t=browserInfo.scrollSize(),n=e.scrollLeft/t.x,i=e.scrollTop/t.y;return{x:isNaN(n)?0:n,y:isNaN(i)?0:i}},windowScreen:function(){return userInfo.accessType!==cnst.access_type.host?{height:window.parent.screen.height,width:window.parent.screen.width}:{height:null,width:null}},windowSize:function(){return{height:window.innerHeight,width:window.innerWidth}},interval:Math.floor(1e3/60*10),set:{scroll:function(e){var t=browserInfo.scrollSize();document.body.scrollLeft=t.x*e.x,document.body.scrollTop=t.y*e.y,document.documentElement.scrollLeft=t.x*e.x,document.documentElement.scrollTop=t.y*e.y}},getActiveWindow:function(){var e,t,n=document.hasFocus(),i=!1,o=sinclo_storage.l.get("bannerAct"),s=sinclo_storage.s.get("closeAct");if(document.getElementById("sincloBox")){t=document.getElementById("sincloBox");var a=sinclo.widget.condifiton.get();"true"===String(a)&&(i=!0)}return n?(sinclo.chatApi.clearInactiveTimeout(),e=i?cnst.tab_type.open:cnst.tab_type.close,(!t||t&&"block"!==t.style.display)&&(e=cnst.tab_type.none),"true"===o&&(e=cnst.tab_type.none),"true"===s&&(e=cnst.tab_type.none)):(e=cnst.tab_type.disable,sinclo.chatApi.startInactiveTimeout()),e}},syncEvent={resizeTimer:!1,evList:[{type:"mousemove",timer:null,ev:function(e){if(e&&e.stopPropagation(),this.timer)return!1;this.timer=setTimeout(function(){this.timer=null,emit("syncBrowserInfoFrame",{accessType:userInfo.accessType,mousePoint:{x:e.clientX,y:e.clientY}})},10)}},{type:"scroll",ev:function(e){return e&&e.stopPropagation(),void 0!==socket&&(("body"!==syncEvent.receiveEvInfo.nodeName||"scroll"!==syncEvent.receiveEvInfo.type)&&void emit("syncScrollInfo",{accessType:userInfo.accessType,mousePoint:{x:e.clientX,y:e.clientY},scrollPosition:browserInfo.windowScroll()}))}},{type:"hashchange",ev:function(e){if(e&&e.stopPropagation(),void 0===socket)return!1;browserInfo.href=location.href,emit("reqUrlChecker",{})}}],pcResize:function(e){e&&e.stopPropagation(),!1!==syncEvent.resizeTimer&&clearTimeout(syncEvent.resizeTimer),syncEvent.resizeTimer=setTimeout(function(){emit("syncBrowserInfoFrame",{accessType:userInfo.accessType,windowSize:browserInfo.windowSize(),mousePoint:{x:e.clientX,y:e.clientY},scrollPosition:browserInfo.windowScroll()})},browserInfo.interval)},tabletResize:function(e){e&&e.stopPropagation();var t={width:window.innerWidth,height:window.innerHeight},n=browserInfo.windowScroll();emit("syncBrowserInfoFrame",{accessType:userInfo.accessType,windowSize:t,scrollPosition:n})},ctrlEventListener:function(e,t){var n,i=!1;for(var o in e?(n=window.addEventListener,window.addEventListener||(n=window.attachEvent,i=!0)):(n=window.removeEventListener,window.removeEventListener||(n=window.detachEvent,i=!0)),t){n(i?"on"+String(t[Number(o)].type):String(t[Number(o)].type),t[Number(o)].ev)}},ctrlElmEventListener:function(e,t,n,i){var o,s=!0;e?window.addEventListener&&(s=!1):window.removeEventListener&&(s=!1),o=s?"on"+String(n):n;for(var a=0;a<t.length;a++)e&&s?t[a].attachEvent(o,i,!1):e&&!s?t[a].addEventListener(o,i,!1):!e&&s?t[a].detachEvent(o,i,!1):e||s||t[a].removeEventListener(o,i,!1)},changeCall:function(e){var t=e.target.nodeName.toLowerCase(),n=!1,i=$(String(t)).index(this);return("input"===t||"textarea"===t||"select"===t)&&("radio"!==e.target.type&&"checkbox"!==e.target.type||(n=e.target.checked),(t!==String(syncEvent.receiveEvInfo.nodeName)||Number(i)!==Number(syncEvent.receiveEvInfo.idx))&&void emit("syncChangeEv",{tabId:userInfo.tabId,userId:userInfo.userId,accessType:userInfo.accessType,nodeName:t,type:e.type,nodeType:e.target.type,checked:n,idx:i,value:this.value}))},focusCall:function(e){this.addEventListener("keyup",syncEvent.changeCall,!1),this.addEventListener("change",syncEvent.changeCall,!1)},resizeCall:function(e,t){return t?Number(userInfo.accessType)===Number(cnst.access_type.guest)&&void((-1!=e.indexOf("windows")&&-1!=e.indexOf("touch")||-1!=e.indexOf("ipad")||-1!=e.indexOf("android")&&-1==e.indexOf("mobile")||-1!=e.indexOf("firefox")&&-1!=e.indexOf("tablet")||-1!=e.indexOf("kindle")||-1!=e.indexOf("silk")||-1!=e.indexOf("playbook"))&&"orientationchange"in window?window.addEventListener("orientationchange",syncEvent.tabletResize,!1):window.addEventListener("resize",syncEvent.pcResize,!1)):(window.removeEventListener("resize",syncEvent.pcResize),window.removeEventListener("orientationchange",syncEvent.tabletResize),!1)},elmScrollCallTimers:{},elmScrollCall:function(e){e.stopPropagation();var t=e.target.nodeName.toLowerCase(),n=$(String(t)).index(this);if(t===String(syncEvent.receiveEvInfo.nodeName)&&Number(n)===Number(syncEvent.receiveEvInfo.idx))return!1;var i=document.getElementsByTagName(t)[Number(n)],o=i.scrollHeight-i.clientHeight,s=i.scrollWidth-i.clientWidth;scl_check.isset(syncEvent.elmScrollCallTimers[t+"_"+n])&&clearTimeout(syncEvent.elmScrollCallTimers[t+"_"+n]),syncEvent.elmScrollCallTimers[t+"_"+n]=setTimeout(function(){emit("syncChangeEv",{tabId:userInfo.tabId,userId:userInfo.userId,accessType:userInfo.accessType,nodeName:t,type:e.type,idx:n,value:{topRatio:i.scrollTop/o,leftRatio:i.scrollLeft/s}})},1e3)},receiveEvInfo:{nodeName:null,type:null},change:function(e){if(!e){var t=document.getElementById("cursorImg");t&&t.parentNode.removeChild(t),common.cursorTag=void 0}var n;this.ctrlEventListener(e,syncEvent.evList),this.resizeCall(window.navigator.userAgent.toLowerCase(),e),n=document.getElementsByTagName("input"),this.ctrlElmEventListener(e,n,"focus",syncEvent.focusCall),this.ctrlElmEventListener(e,n,"change",syncEvent.changeCall),n=document.getElementsByTagName("textarea"),this.ctrlElmEventListener(e,n,"focus",syncEvent.focusCall);var i,o,s=document.getElementsByTagName("textarea")[0];void 0!==s&&s.addEventListener("mousemove",function(e){e&&e.stopPropagation(),i&&o&&(i!==this.style.height||this.style.width),i=this.style.height,o=this.style.width},!1);n=document.getElementsByTagName("select"),this.ctrlElmEventListener(e,n,"change",syncEvent.changeCall);var a,r,c=[];for(r in n=document.getElementsByTagName("ul"))a=n[r].clientHeight,0<n[r].scrollHeight-a&&c.push(n[r]);for(r in n=document.getElementsByTagName("textarea"))a=n[r].clientHeight,0<n[r].scrollHeight-a&&c.push(n[r]);for(r in n=document.getElementsByTagName("div"))a=n[r].clientHeight,0<n[r].scrollHeight-a&&c.push(n[r]);for(r in n=document.getElementsByTagName("dl"))a=n[r].clientHeight,0<n[r].scrollHeight-a&&c.push(n[r]);this.ctrlElmEventListener(e,c,"scroll",syncEvent.elmScrollCall),"form"in window.sincloInfo.dataset&&window.sincloInfo.dataset.form&&$(document).submit(function(e){if(userInfo.accessType===cnst.access_type.host)return e.preventDefault(),e.stopPropagation(),!1;emit("requestSyncStopForSubmit",{message:"ãå®¢æ§ãsubmitãã¿ã³ãã¯ãªãã¯ãã¾ããã®ã§ã\nç»é¢å±æãçµäºãã¾ãã"})})},start:function(e){syncEvent.change(!0)},stop:function(e){syncEvent.change(!1)}},popup={const:{action:{alert:1,confirm:2}},getCss:function(){return'<div id="sincloPopup" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 99999999999999;">  <style>    #sincloPopupFrame {        border: 0.15em solid #ABABAB;        width: 30em;        opacity: 0;        background-color: #EDEDED;        color: #3C3C3C;        margin: auto;        position: absolute;        top: 0;        left: 0;        right: 0;        bottom: 0;        box-shadow: 0 35px 42px rgba(141, 141, 141, 0.8);        border-radius: 5px;        box-sizing: border-box;    }    #sincloPopBar {        height: 1.85em;        background: linear-gradient(#EDEDED, #D2D2D2);        border-bottom: 0.15em solid #989898;        border-radius: 5px 5px 0 0;    }    #sincloLogo {        padding: 1em;    }    #sincloMessage {        padding-right: 1em;    }    sinclo-h3 {        font-weight: bold;        display: block;        font-size: 1.2em;        height: auto;        line-height: initial;        word-break: break-word;        word-wrap: break-word;        width: 17em;        margin: 0.4em 0;    }    sinclo-div {        display: block;    }    sinclo-content {        display: block;        font-size: 0.9em;        margin: 0.5em 0;        line-height: 2em;    }    #sincloPopMain {        display: -ms-flexbox; display: -webkit-flex; display: flex;        min-height: calc(60px + 2em);    }    sinclo-div#sincloPopMain sinclo-div {        vertical-align: top;    }    #sincloPopAct {        width: 100%;        height: 2em;        text-align: center;        padding: 0.5em 0;        box-sizing: content-box;    }    #sincloPopAct sinclo-a {        background-color: #FFF;        padding: 5px 10px;        text-decoration: none;        border-radius: 5px;        border: 1px solid #959595;        margin: 10px;        font-size: 1em;        box-shadow: 0 0 2px rgba(75, 75, 75, 0.3);        font-weight: bold;    }    #sincloPopAct sinclo-a:hover {        cursor: pointer;    }    #sincloPopAct sinclo-a:hover,  #sincloPopAct sinclo-a:focus {        outline: none;    }    #sincloPopAct sinclo-a#sincloPopupOk {       background: linear-gradient(to top, #D5FAFF, #80BEEA, #D5FAFF);    }    #sincloPopAct sinclo-a#sincloPopupNg {       background-color: #FFF    }    #sincloPopAct sinclo-a#sincloPopupNg:hover, #sincloPopAct sinclo-a#sincloPopupNg:focus {       background-color: ##DCDCDC    }  </style>'},getAction:function(e){var t="";return e===popup.const.action.confirm?(t+='      <sinclo-a href="javascript:void(0)" id="sincloPopupOk" onclick="popup.ok()">è¨±å¯ãã</sinclo-a>',t+='      <sinclo-a href="javascript:void(0)" id="sincloPopupNg" onclick="popup.no()">è¨±å¯ããªã</sinclo-a>'):t+='      <sinclo-a href="javascript:void(0)" id="sincloPopupOk" onclick="popup.ok()">éãã</sinclo-a>',t},set:function(e,t,n){!1===scl_check.isset(n)&&(n=popup.const.action.confirm),popup.remove();var i="";i+=this.getCss(),i+='  <sinclo-div id="sincloPopupFrame">',i+='    <sinclo-div id="sincloPopBar">',i+="    </sinclo-div>",i+='    <sinclo-div id="sincloPopMain">',i+='      <sinclo-div id="sincloLogo"><img src="'+sincloInfo.site.files+'/img/mark.png" width="60" height="60"></sinclo-div>',i+='      <sinclo-div id="sincloMessage">',i+="          <sinclo-h3>"+e+":</sinclo-h3><sinclo-content>"+t+"</sinclo-content>",i+="      </sinclo-div>",i+="    </sinclo-div>",i+='    <sinclo-div id="sincloPopAct">',i+=this.getAction(n),i+="    </sinclo-div>",i+="  </sinclo-div>",i+="</sinclo-div>",$("body").append(i);var o=0;$("#sincloPopupFrame > sinclo-div").each(function(e){o+=this.offsetHeight}),$("#sincloPopupFrame").height(o).css("opacity",1)},remove:function(){var e=document.getElementById("sincloPopup");e&&e.parentNode.removeChild(e)},ok:function(){return!0},no:function(){this.remove()}},vcPopup={dragging:!1,set:function(e,t){vcPopup.remove();var n="",i={from:e,to:t},o=sincloInfo.site.webcam_view+"?h=false&sincloData="+encodeURIComponent(JSON.stringify(i));n+="  <style>",n+="    #sincloVcPopupFrame {",n+="        border: 0.15em solid #ABABAB;",n+="        width: 27em;",n+="        opacity: 0;",n+="        background-color: #EDEDED;",n+="        color: #3C3C3C;",n+="        margin: auto;",n+="        position: absolute;",n+="        top: 0;",n+="        left: 0;",n+="        box-shadow: 0 35px 42px rgba(141, 141, 141, 0.8);",n+="        border-radius: 5px;",n+="        box-sizing: border-box;",n+="    }",n+="    #sincloVcPopBar {",n+="        height: 2.45em;",n+="        background: linear-gradient(#EDEDED, #D2D2D2);",n+="        border-bottom: 0.15em solid #989898;",n+="        border-radius: 5px 5px 0 0;",n+="    }",n+="    #sincloVcLogo {",n+="        padding: 0.5em 1em;",n+="    }",n+="    #sincloVcMessage {",n+="        padding-right: 1em;",n+="    }",n+="    sinclo-h3 {",n+="        font-weight: bold;",n+="        display: block;",n+="        font-size: 1.2em;",n+="        height: 1.2em;",n+="        margin: 0.4em 0;",n+="    }",n+="    sinclo-div {",n+="        display: block;",n+="    }",n+="    sinclo-content {",n+="        display: block;",n+="        font-size: 0.9em;",n+="        margin: 0.5em 0;",n+="        line-height: 2em;",n+="    }",n+="    #sincloVcPopMain {",n+="        display: table;",n+="    }",n+="    sinclo-div#sincloVcPopMain sinclo-div {",n+="        display: table-cell;",n+="        vertical-align: top;",n+="    }",n+="    #sincloVcPopAct {",n+="        width: 100%;",n+="        height: 2em;",n+="        text-align: center;",n+="        padding: 0.5em 0;",n+="        box-sizing: content-box;",n+="    }",n+="    #sincloVcPopAct sinclo-a {",n+="        background-color: #FFF;",n+="        padding: 5px 10px;",n+="        text-decoration: none;",n+="        border-radius: 5px;",n+="        border: 1px solid #959595;",n+="        margin: 10px;",n+="        font-size: 1em;",n+="        box-shadow: 0 0 2px rgba(75, 75, 75, 0.3);",n+="        font-weight: bold;",n+="    }",n+="    #sincloVcPopAct sinclo-a:hover {",n+="        cursor: pointer;",n+="    }",n+="    #sincloVcPopAct sinclo-a:hover,  #sincloVcPopAct sinclo-a:focus {",n+="        outline: none;",n+="    }",n+="    #sincloVcPopAct sinclo-a#sincloPopupOk {",n+="       background: linear-gradient(to top, #D5FAFF, #80BEEA, #D5FAFF);",n+="    }",n+="    #sincloVcPopAct sinclo-a#sincloPopupNg {",n+="       background-color: #FFF",n+="    }",n+="    #sincloVcPopAct sinclo-a#sincloPopupNg:hover, #sincloVcPopAct sinclo-a#sincloPopupNg:focus {",n+="       background-color: ##DCDCDC",n+="    }",n+="  </style>",n+='  <sinclo-div id="sincloVcPopupFrame">',n+='    <sinclo-div id="sincloVcPopBar">',n+='      <sinclo-div id="sincloVcLogo"><img src="'+sincloInfo.site.files+'/img/mark.png" width="18" height="18"></sinclo-div>',n+="    </sinclo-div>",n+='    <sinclo-div id="sincloVcPopMain">',n+='      <sinclo-div id="sincloVcMessage">',n+='          <iframe id="sincloVcView" src="'+o+'" width="320" height="240"/>',n+="      </sinclo-div>",n+="    </sinclo-div>",n+="  </sinclo-div>",$("body").append(n);var s=0;$("#sincloVcPopupFrame > sinclo-div").each(function(e){s+=this.offsetHeight}),$("#sincloVcPopupFrame").height(s).css("opacity",1),$("#sincloVcPopupFrame *").on("mousedown",vcPopup.dragOn),$("#sincloVcPopupFrame *").on("mouseup",vcPopup.dragOff),$("#sincloVcPopupFrame *").on("mousemove",vcPopup.drag)},remove:function(){var e=document.getElementById("sincloVcPopup");e&&e.parentNode.removeChild(e)},ok:function(){return!0},no:function(){this.remove()},startDragX:0,startDragY:0,dragOn:function(e){e&&e.stopPropagation(),vcPopup.dragging=!0,vcPopup.startDragX=e.screenX,vcPopup.startDragY=e.screenY},dragOff:function(e){e&&e.stopPropagation(),vcPopup.dragging=!1},drag:function(e){if(e&&e.stopPropagation(),vcPopup.dragging){e.stopPropagation();var t=e.screenX-vcPopup.startDragX,n=e.screenY-vcPopup.startDragY;return $("#sincloVcPopupFrame").css({top:$("#sincloVcPopupFrame").offset().top+n,left:$("#sincloVcPopupFrame").offset().left+t}),vcPopup.startDragX=e.screenX,vcPopup.startDragY=e.screenY,!1}}},uploadFileSelectorModal={dragging:!1,set:function(e,t){var n="";n+="  <style>",n+="    #sincloVcPopupFrame {",n+="        border: 0.15em solid #ABABAB;",n+="        width: 27em;",n+="        opacity: 0;",n+="        background-color: #EDEDED;",n+="        color: #3C3C3C;",n+="        margin: auto;",n+="        position: absolute;",n+="        top: 0;",n+="        left: 0;",n+="        box-shadow: 0 35px 42px rgba(141, 141, 141, 0.8);",n+="        border-radius: 5px;",n+="        box-sizing: border-box;",n+="    }",n+="    #sincloVcPopBar {",n+="        height: 2.45em;",n+="        background: linear-gradient(#EDEDED, #D2D2D2);",n+="        border-bottom: 0.15em solid #989898;",n+="        border-radius: 5px 5px 0 0;",n+="    }",n+="    #sincloVcLogo {",n+="        padding: 0.5em 1em;",n+="    }",n+="    #sincloVcMessage {",n+="        padding-right: 1em;",n+="    }",n+="    sinclo-h3 {",n+="        font-weight: bold;",n+="        display: block;",n+="        font-size: 1.2em;",n+="        height: 1.2em;",n+="        margin: 0.4em 0;",n+="    }",n+="    sinclo-div {",n+="        display: block;",n+="    }",n+="    sinclo-content {",n+="        display: block;",n+="        font-size: 0.9em;",n+="        margin: 0.5em 0;",n+="        line-height: 2em;",n+="    }",n+="    #sincloVcPopMain {",n+="        display: table;",n+="    }",n+="    sinclo-div#sincloVcPopMain sinclo-div {",n+="        display: table-cell;",n+="        vertical-align: top;",n+="    }",n+="    #sincloVcPopAct {",n+="        width: 100%;",n+="        height: 2em;",n+="        text-align: center;",n+="        padding: 0.5em 0;",n+="        box-sizing: content-box;",n+="    }",n+="    #sincloVcPopAct sinclo-a {",n+="        background-color: #FFF;",n+="        padding: 5px 10px;",n+="        text-decoration: none;",n+="        border-radius: 5px;",n+="        border: 1px solid #959595;",n+="        margin: 10px;",n+="        font-size: 1em;",n+="        box-shadow: 0 0 2px rgba(75, 75, 75, 0.3);",n+="        font-weight: bold;",n+="    }",n+="    #sincloVcPopAct sinclo-a:hover {",n+="        cursor: pointer;",n+="    }",n+="    #sincloVcPopAct sinclo-a:hover,  #sincloVcPopAct sinclo-a:focus {",n+="        outline: none;",n+="    }",n+="    #sincloVcPopAct sinclo-a#sincloPopupOk {",n+="       background: linear-gradient(to top, #D5FAFF, #80BEEA, #D5FAFF);",n+="    }",n+="    #sincloVcPopAct sinclo-a#sincloPopupNg {",n+="       background-color: #FFF",n+="    }",n+="    #sincloVcPopAct sinclo-a#sincloPopupNg:hover, #sincloVcPopAct sinclo-a#sincloPopupNg:focus {",n+="       background-color: ##DCDCDC",n+="    }",n+="  </style>",n+='  <sinclo-div id="sincloVcPopupFrame">',n+='    <sinclo-div id="sincloVcPopBar">',n+='      <sinclo-div id="sincloVcLogo"><img src="'+sincloInfo.site.files+'/img/mark.png" width="18" height="18"></sinclo-div>',n+="    </sinclo-div>",n+='    <sinclo-div id="sincloVcPopMain">',n+='      <sinclo-div id="sincloVcMessage">',n+='          <iframe id="sincloVcView" src="'+url+'" width="320" height="240"/>',n+="      </sinclo-div>",n+="    </sinclo-div>",n+="  </sinclo-div>",$("body").append(n);var i=0;$("#sincloVcPopupFrame > sinclo-div").each(function(e){i+=this.offsetHeight}),$("#sincloVcPopupFrame").height(i).css("opacity",1),$("#sincloVcPopupFrame *").on("mousedown",vcPopup.dragOn),$("#sincloVcPopupFrame *").on("mouseup",vcPopup.dragOff),$("#sincloVcPopupFrame *").on("mousemove",vcPopup.drag)},remove:function(){var e=document.getElementById("sincloVcPopup");e&&e.parentNode.removeChild(e)},ok:function(){return!0},no:function(){this.remove()}},preventWithdrawalOverlay={isTriggered:!1,isEventTriggered:!1,isShown:!1,isEnabled:function(){return scl_check.isset(window.sincloInfo.preventWithdrawalSettings)&&this._isMatchConditions()},isActive:function(){return this.isEnabled()&&this.isShown},isDisplayable:function(){return!scl_check.smartphone()||scl_check.smartphone()&&2!==window.sincloInfo.preventWithdrawalSettings.widget.spShowFlg},isShowModal:function(){return this.isEnabled()&&(!scl_check.smartphone()&&3===Number(sincloInfo.preventWithdrawalSettings.widget.showPosition)||scl_check.smartphone()&&2!==Number(sincloInfo.preventWithdrawalSettings.widget.spMaximizeSizeType))},isShowOverlayWithMargin:function(){return preventWithdrawalOverlay.isActive()&&3===Number(common.getWidgetSettings().showPosition)&&(!scl_check.smartphone()||scl_check.smartphone()&&1===Number(common.getWidgetSettings().spMaximizeSizeType))},resetChatState:function(){preventWithdrawalOverlay.isActive()&&(sinclo_storage.s.set("closeAct",!1),sinclo_storage.s.set("bannerAct",!1),sinclo_storage.l.set("closeAct",!1),sinclo_storage.l.set("bannerAct",!1),sinclo_storage.s.unset("widgetShown"),common.widgetHandler.resetMessageAreaState(),sinclo.scenarioApi.isProcessing()&&(sinclo.scenarioApi._hearing._endValidInputWatcher(),sinclo.scenarioApi._unWaitingInput(),sinclo.scenarioApi.reset()))},createWidgetOverlay:function(e){return this.isActive()&&this.isShowModal()?'<div class="sinclo-overlay hidden">'+e+"</div>":e},injectBeforeShowCss:function(e){return this.isShowModal()?e+"\n@keyframes fadeIn {    0% {opacity: 0}    100% {opacity: 1}}@-webkit-keyframes fadeIn {    0% {opacity: 0}    100% {opacity: 1}}@keyframes fadeOut {    0% {opacity: 1}    100% {opacity: 0}}@-webkit-keyframes fadeOut {    0% {opacity: 1}    100% {opacity: 0}}#sincloBox {position: static!important;}body .sinclo-overlay {width: 100%;\nheight: 100%;\nbackground-color: #000000BB;\nbackground: rgba(0, 0, 0, 0.73);\nposition: fixed;\ntop: 0;\nleft: 0;\nz-index: 999999;justify-content: center;align-items: center;animation: fadeIn 0.3s ease 0s 1 normal;-webkit-animation: fadeIn 0.3s ease 0s 1 normal;}body .sinclo-overlay.show {display: flex;}body .sinclo-overlay.hidden {display: none;animation: fadeOut 0.3s ease 0s 1 normal;-webkit-animation: fadeOut 0.3s ease 0s 1 normal;}":""},injectAfterShowCss:function(){this.isShowModal()&&$("body").prepend('<style id="sinclo-overlay-custom-style">html, body {overflow: hidden;}</style>')},deleteAfterShowCss:function(){$("#sinclo-overlay-custom-style").remove()},makeWidgetSetting:function(e){return e.displayType=1,e.display_type=1,e.displayStyleType=1,e.showTiming=4,e.showTime=5,e.spScrollViewSetting=0,e},show:function(){this.isDisplayable()&&(this.injectAfterShowCss(),$(".sinclo-overlay").removeClass("hidden"),$(".sinclo-overlay").addClass("show"))},hide:function(){$(".sinclo-overlay").removeClass("show"),$(".sinclo-overlay").addClass("hidden"),this.deleteAfterShowCss()},preventBrowserMoveEvent:function(){var o=this,s=$.Deferred(),i=o.HistoryManager;return this.isEnabled()&&this.isDisplayable()&&(i.isState(i.constant.current)||(i.push(i.constant.tmp),i.push(i.constant.tmp+"2"),i.replace(i.constant.back),i.push(i.constant.current)),$(window).on("blur popstate",function(e){if(i.isState(i.constant.back)){var t="",n="";if(n=null!=e.srcElement&&null!=e.srcElement.activeElement?(t=e.srcElement.activeElement.tagName,e.srcElement.activeElement.getAttribute("type")):(t=e.currentTarget.document.activeElement.tagName,e.currentTarget.document.activeElement.getAttribute("type")),null!=t&&(t=t.toLowerCase()),null!=n&&(n=n.toLowerCase()),o.isTriggered||o.isEventTriggered||("input"===t||"button"===t)&&("submit"===n||"button"===n||"image"===n||"reset"===n))return;return o.isTriggered=!0,o.isEventTriggered=!0,o.isShown=!0,window.sincloInfo.widgetDisplay=!0,void s.resolve()}if(i.isState(i.constant.tmp))return o.isEventTriggered=!0,history.back(),void history.back();o.isEventTriggered=!0}),$(window).on("beforeunload",function(e){var t="",n="";if(n=null!=e.srcElement&&null!=e.srcElement.activeElement?(t=e.srcElement.activeElement.tagName,e.srcElement.activeElement.getAttribute("type")):(t=e.currentTarget.document.activeElement.tagName,e.currentTarget.document.activeElement.getAttribute("type")),null!=t&&(t=t.toLowerCase()),null!=n&&(n=n.toLowerCase()),!o.isTriggered&&"a"!==t&&("input"!==t&&"button"!==t||"submit"!==n&&"button"!==n&&"image"!==n&&"reset"!==n)){o.isTriggered=o.isEventTriggered=o.isShown=window.sincloInfo.widgetDisplay=!0;var i="ç§»åãã¦ãããããã§ããï¼";return e.returnValue=i,s.resolve(),i}})),s.promise()},_isMatchConditions:function(){var n=!1;try{if(!scl_check.objPath(window.sincloInfo,"preventWithdrawalSettings.trigger.conditions"))throw new Error("è¨­å®ãå­å¨ãã¾ãã");var e=window.sincloInfo.preventWithdrawalSettings.trigger.conditions;sinclo.trigger.judge.page(e,function(e,t){e||null===t||(n=!0)})}catch(e){n=!1}return n},HistoryManager:{constant:{current:"s-current",back:"s-back",tmp:"s-tmp"},replace:function(e){history.replaceState(e,null,location.href)},push:function(e){history.pushState(e,null,location.href)},state:function(){return history.state},isState:function(e){return history.state===e}}};var showTimer=null,focusTargetType=["text","search","tel","url","email","number","password","datetime"];sinclo_storage.s.set("closeActFocusPage",!1);var init=function(){window.addEventListener("load",function(){if("orientation"in window){var e=window.innerWidth<window.innerHeight,t=window.orientation%180==0;common.defaultOrientation=e&&t||!(e||t)}},!1),scl_check.smartphone()&&!preventWithdrawalOverlay.isActive()&&$("textarea:not(#sincloChatMessage), input:not(#miniSincloChatMessage)").on("DOMFocusIn",function(e){event.target&&("textarea"===event.target.nodeName.toLowerCase()||0<=focusTargetType.indexOf(e.target.type))&&(showTimer&&(clearTimeout(showTimer),showTimer=null),common.widgetHandler.hide(),sinclo_storage.s.set("closeActFocusPage",!0))}).on("DOMFocusOut",function(e){showTimer=showTimer||setTimeout(function(){if(sinclo_storage.s.set("closeActFocusPage",!1),common.widgetHandler.show(),"false"===String(sinclo.widget.condifiton.get())&&"false"===String(sinclo_storage.s.get("bannerAct"))){var e=sinclo.operatorInfo.header.offsetHeight;$(sincloBox).css("height",e+"px")}},100)}),sinclo_storage.s.unset("preWidgetOpened"),common.getWidgetSettings().showTiming!==Number(sinclo_storage.s.get("widgetShowTimingType"))&&common.widgetHandler.clearShownFlg(),2===common.getWidgetSettings().showTiming&&common.widgetHandler.clearShownFlg(),socket=new WSConnector,window.sincloInfo.contract.enableRealtimeMonitor?socket.connect().then(function(){common.handleInit()}):common.handleInit(),socket.on("reconnect",function(){scl_check.getSessionAvailableState().then(function(e){$("sinclo-chat-alert").css("display","none"),sessionStorage.getItem("accessId")&&!e&&$("sinclo-chat").empty()}),setTimeout(function(){sinclo.connect().then(sinclo.accessInfo).then(function(e){return socket.onceConnected(),sinclo.executeConnectSuccess(e,window.sincloInfo.accessInfoData)}).then(function(e){return sinclo.setHistoryId(e)}).then(function(){common.tabMessenger.notifyConnecting=!0})},1e3)}),socket.on("changeTabId",function(e){var t=common.jParse(e);userInfo.tabId=t.newTabId,userInfo.changeTabId(t.newTabId)}),socket.on("retConnectedForSync",function(e){sinclo.retConnectedForSync(e)}),socket.on("accessInfo",function(e){var t=sinclo.accessInfo(e);sinclo.executeConnectSuccess(t,window.userInfo.accessInfoData)}),socket.on("syncUserInfo",function(e){sinclo.syncUserInfo(e)}),socket.on("setHistoryId",function(e){sinclo.setHistoryId(e)}),socket.on("getAccessInfo",function(e){sinclo.getAccessInfo(e)}),socket.on("confirmCustomerInfo",function(e){sinclo.confirmCustomerInfo(e)}),socket.on("getWindowInfo",function(e){var t=common.jParse(e);sinclo.getWindowInfo(t)}),socket.on("cancelSharingApplication",function(e){var t=common.jParse(e);sinclo.cancelSharingApplication(t)}),socket.on("startCoBrowseOpen",function(e){var t=common.jParse(e);sinclo.startCoBrowseOpen(t)}),socket.on("assistAgentIsReady",function(e){var t=common.jParse(e);sinclo.assistAgentIsReady(t)}),socket.on("startWindowSync",function(e){var t=common.jParse(e);sinclo.startWindowSync(t)}),socket.on("windowSyncInfo",function(e){sinclo.windowSyncInfo(e)}),socket.on("syncStart",function(e){sinclo.syncStart(e)}),socket.on("syncElement",function(e){sinclo.syncElement(e)}),socket.on("syncEvStart",function(e){sinclo.syncEvStart(e)}),socket.on("syncResponce",function(e){sinclo.syncResponce(e)}),socket.on("syncResponceEv",function(e){sinclo.syncResponceEv(e)}),socket.on("syncBrowserCtrl",function(e){sinclo.syncBrowserCtrl(e)}),socket.on("syncContinue",function(e){sinclo.syncContinue(e)}),socket.on("setInitInfo",function(e){sinclo.setInitInfo(e)}),socket.on("resUrlChecker",function(e){sinclo.resUrlChecker(e)}),socket.on("receiveOtherTabURL",function(e){window.focus(),sinclo.resUrlChecker(e)}),socket.on("syncScenarioDataResult",function(e){JSON.parse(e).tabId!==userInfo.tabId?setTimeout(function(){sinclo.scenarioApi.syncScenarioData.checkDetail(e)},500):sinclo.scenarioApi.syncScenarioData.checkDetail(e)}),socket.on("chatStartResult",function(e){sinclo.chatStartResult(e)}),socket.on("chatEndResult",function(e){sinclo.chatEndResult(e)}),socket.on("chatMessageData",function(e){sinclo.chatMessageData(e)}),socket.on("sendReqAutoChatMessages",function(e){sinclo.sendReqAutoChatMessages(e)}),socket.on("sendAutoChatMessage",function(e){sinclo.sendAutoChatMessage(e)}),socket.on("resAutoChatMessage",function(e){sinclo.resAutoChatMessage(e)}),socket.on("resScenarioMessage",function(e){sinclo.resScenarioMessage(e)}),socket.on("resChatClear",function(e){sinclo.resChatClear(e)}),socket.on("sendChatResult",function(e){sinclo.sendChatResult(e)}),socket.on("clickLink",function(e){sinclo.clickLink(e)}),socket.on("resGetScenario",function(e){sinclo.chatApi.execScenario(e)}),socket.on("resGetChatDiagram",function(e){sinclo.chatApi.execDiagram(e)}),socket.on("resDiagramMessage",function(e){sinclo.resDiagramMessage(e)}),socket.on("receiveTypeCond",function(e){sinclo.chatApi.createTypingMessage(e)}),socket.on("receiveFileCond",function(e){var t=common.jParse(e);"loadingForCompany"!==String(t.status)&&"stopLoadingForCompany"!==String(t.status)||sinclo.chatApi.createFileUploadingMessage(e)}),socket.on("retReadFromCustomer",function(e){sinclo.chatApi.retReadFromCustomer(e)}),socket.on("confirmVideochatStart",function(e){var t=common.jParse(e);sinclo.confirmVideochatStart(t)}),socket.on("docShareConnect",function(e){var t=common.jParse(e);sinclo.docShareConnect(t)}),socket.on("docDisconnect",function(){sinclo.docDisconnect()}),socket.on("syncStop",function(e){sinclo.syncStop(e)}),socket.on("stopCoBrowse",function(e){sinclo.stopCoBrowse(e)}),socket.on("sincloReconnect",function(e){socket.disconnect(),socket.connect()}),socket.on("disconnect",function(e){sinclo.chatApi.inactiveCloseFlg||document.getElementById("sincloBox")&&(common.widgetHandler.hide(),window.sincloInfo.contract.chat&&document.getElementsByTagName("sinclo-chat")[0]&&(sinclo.chatApi.displayedChatFlg=1<=document.getElementsByTagName("sinclo-chat")[0].children.length,sinclo.chatApi.clearChatMessages()),common.tabMessenger.clearFlg());popup.remove()}),socket.on("checkExists",function(e){emit("resCheckExists",common.jParse(e))}),socket.on("setInquiryNumber",function(e){var t=common.jParse(e);sinclo_storage.s.set("scenario_"+t.scenarioId+"_inquiry_number",t.mailInquiryNumber)}),socket.on("setCvUniqueId",function(e){sinclo_storage.s.set("cv_unique_id",e)})};$.ajaxSetup({cache:!1}),scl_check.isset(sinclo_storage.s.get("params"))?(common.params=common.jParse(sinclo_storage.s.get("params")),userInfo.accessType=common.params.type):(common.getParams(),Number(common.tmpParams.type)===Number(cnst.access_type.host)&&(userInfo.accessType=cnst.access_type.host));var widgetSitekey="",myTag=document.querySelector("script[src$='/client/"+sincloInfo.site.key+".js']");myTag&&myTag.getAttribute("data-another-widget-key")&&(widgetSitekey=myTag.getAttribute("data-another-widget-key"));var keys=sinclo_storage.s.findKeyLike("scl_settings_");if(0<keys.length)for(var i=0;i<keys.length;i++)""==widgetSitekey?keys[i]!=="scl_settings_"+window.sincloInfo.site.key&&sinclo_storage.s.unset(keys[i]):keys[i]!=="scl_settings_"+window.sincloInfo.site.key+"_"+widgetSitekey&&sinclo_storage.s.unset(keys[i]);if(""==widgetSitekey)var settings=JSON.parse(sinclo_storage.s.get("scl_settings_"+window.sincloInfo.site.key));else var settings=JSON.parse(sinclo_storage.s.get("scl_settings_"+window.sincloInfo.site.key+"_"+widgetSitekey));scl_check.isset(settings)?$.ajax({type:"get",url:window.sincloInfo.site.files+"/api/util/timestamp",cache:!1,dataType:"json",success:function(e){window.sincloInfo.accessTime=e.t,window.sincloInfo.widget=settings.widget,window.sincloInfo.messages=settings.messages,window.sincloInfo.contract=settings.contract,window.sincloInfo.chat=settings.chat,window.sincloInfo.customVariables=scl_check.isset(settings.customVariables)?settings.customVariables:scl_check.isset(settings.customVariable)?settings.customVariable:[],window.sincloInfo.cvUniqueSettings=settings.cvUniqueSettings,window.sincloInfo.mailInquiryNumberSettings=settings.mailInquiryNumberSettings,window.sincloInfo.customerInfoSettings=settings.customerInfoSettings,window.sincloInfo.cvUniqueSettings=settings.cvUniqueSettings,window.sincloInfo.mailInquiryNumberSettings=settings.mailInquiryNumberSettings,window.sincloInfo.isFirstAccess=!scl_check.isset(settings),window.sincloInfo.preventWithdrawalSettings=settings.preventWithdrawalSettings}}):$.ajax({type:"get",url:window.sincloInfo.site.files+"/settings/",cache:!1,data:{sitekey:window.sincloInfo.site.key,widgetSitekey:widgetSitekey,accessType:userInfo.accessType},dataType:"json",success:function(e){try{if("true"===String(e.status)){if(scl_check.smartphone()&&e.widget.hasOwnProperty("spShowFlg")&&2===Number(e.widget.spShowFlg))return clearTimeout(timer),!1;if(window.sincloInfo.widget=e.widget,window.sincloInfo.messages=e.messages,window.sincloInfo.contract=e.contract,window.sincloInfo.chat=e.chat,window.sincloInfo.customVariables=scl_check.isset(e.customVariables)?e.customVariables:scl_check.isset(e.customVariable)?e.customVariable:[],window.sincloInfo.cvUniqueSettings=e.cvUniqueSettings,window.sincloInfo.mailInquiryNumberSettings=e.mailInquiryNumberSettings,window.sincloInfo.customerInfoSettings=e.customerInfoSettings,window.sincloInfo.cvUniqueSettings=e.cvUniqueSettings,window.sincloInfo.mailInquiryNumberSettings=e.mailInquiryNumberSettings,window.sincloInfo.isFirstAccess=!scl_check.isset(settings),""==widgetSitekey?sinclo_storage.s.set("scl_settings_"+window.sincloInfo.site.key,JSON.stringify(e)):sinclo_storage.s.set("scl_settings_"+window.sincloInfo.site.key+"_"+widgetSitekey,JSON.stringify(e)),window.sincloInfo.accessTime=e.accessTime,window.sincloInfo.preventWithdrawalSettings=e.preventWithdrawalSettings,common.settingLoader.isDataReceived=!0,common.widgetHandler.clearShownFlg(),sinclo_storage.l.unset("widetOpen"),!scl_check.isset(e.messages))throw new Error("ããªã¬ã¼è¨­å®ã®è¨­å®åæ°ã0ã§ãã");var t=localStorage.forNotHavingConnectionMessageStack;if(void 0!==t){for(var n=JSON.parse(t),i=[],o=0;o<n.length;o++)n[o].siteKey===window.sincloInfo.site.key&&i.push(n[o]);localStorage.forNotHavingConnectionMessageStack=JSON.stringify(i)}}else clearTimeout(timer)}catch(e){}},error:function(e,t,n){$("#XMLHttpRequest").html("XMLHttpRequest : "+e.status),$("#textStatus").html("textStatus : "+t),$("#errorThrown").html("errorThrown : "+n.message)}});var timer=window.setInterval(function(){""!==io&&scl_check.isset(sinclo)&&scl_check.isset(sinclo.trigger)&&void 0!==window.sincloInfo.contract&&(window.clearInterval(timer),init())},200)}(sincloJquery);var myTag=document.querySelector("script[src$='/client/"+sincloInfo.site.key+".js']");myTag&&myTag.getAttribute("data-hide")&&(sincloInfo.dataset.hide=myTag.getAttribute("data-hide")),myTag&&myTag.getAttribute("data-form")&&(sincloInfo.dataset.form=myTag.getAttribute("data-form")),myTag&&myTag.getAttribute("data-show-always")&&(sincloInfo.dataset.showAlways=myTag.getAttribute("data-show-always")),function(jquery){var $=jquery,oldOpUser;sinclo={widget:{condifiton:{get:function(){var e=document.getElementById("sincloBox");return null!==sinclo_storage.s.get("widgetMaximized")&&e.getAttribute("data-openflg")!==sinclo_storage.s.get("widgetMaximized")?(e.setAttribute("data-openflg",sinclo_storage.s.get("widgetMaximized")),sinclo_storage.s.get("widgetMaximized")):e.getAttribute("data-openflg")},set:function(e,t){document.getElementById("sincloBox").setAttribute("data-openflg",e),!t&&null!==sinclo_storage.l.get("widgetMaximized")||(sinclo_storage.l.set("widgetMaximized",e),sinclo_storage.s.set("widgetMaximized",e))}}},sorryMsgTimer:null,syncTimeout:"",scrollPosition:"",forCallingTimerArray:[],operatorInfo:{header:null,toggle:function(){var e=sinclo_storage.s.get("widgetMaximized");this.ev();var t=sinclo.widget.condifiton.get();if("true"===sinclo_storage.s.get("bannerAct")&&(t=!0),scl_check.smartphone()&&("true"==e?($("body").css({"z-index":"","background-image":"","background-repeat:":"",position:"",top:"",left:"",right:"",bottom:"","background-size":""}),$(window).scrollTop(this.scrollPosition)):(this.scrollPosition=$(window).scrollTop(),$("body").css({"z-index":"-1","background-image":"url("+window.sincloInfo.site.files+"/img/touka.png)","background-repeat:":"no-repeat",position:"fixed",top:"-"+this.scrollPosition+"px",left:"0",right:"0",bottom:"0","background-size":"cover"}))),"true"===String(t)&&common.hasGA()&&common.callGA("clickMaximize",location.href,1),!scl_check.smartphone()&&"false"===String(t)&&common.hasGA()||scl_check.smartphone()&&"false"===String(t)&&common.hasGA()&&3!==Number(common.getWidgetSettings().spWidgetViewPattern)){common.callGA("clickMinimize",location.href,1);var n=new Date,i=("0"+(n.getMonth()+1)).slice(-2),o=("0"+n.getDate()).slice(-2),s=("0"+n.getHours()).slice(-2);emit("addClickMinimizeCounts",{siteKey:sincloInfo.site.key,year:n.getFullYear(),month:i,day:o,hour:s})}},widgetMoving:!1,ev:function(e){if(common.widgetHandler.isShown()){sinclo.operatorInfo.widgetMoving=!0;var t=0,n=(document.getElementById("sincloBox"),sinclo.widget.condifiton.get()),i=$("#sincloBox"),o=sinclo_storage.s.get("bannerAct"),s=sinclo_storage.s.get("closeAct");if("true"!==o&&"true"!==s){var a=common.getAbridgementType();if("false"===String(n)){if(common.whenMaximizedBtnShow(),a.MaxRes?common.abridgementTypehide():common.abridgementTypeShow(),"close"==sinclo_storage.l.get("textareaOpend"))sinclo.hideTextarea(),4===Number(common.getWidgetSettings().widgetSizeType)&&common.widgetHandler._maximumAnimation();else{if(sinclo.scenarioApi.isProcessing()&&"2"===sinclo.scenarioApi._getCurrentScenario().actionType&&!1===sinclo.scenarioApi._getCurrentScenario().hearings[sinclo.scenarioApi._hearing._getCurrentSeq()].required){var r=-1===["1","2"].indexOf(sinclo.scenarioApi._getCurrentScenario().hearings[sinclo.scenarioApi._hearing._getCurrentSeq()].uiType);sinclo.displayTextarea(!0,r)}else sinclo.displayTextarea();4===Number(common.getWidgetSettings().widgetSizeType)&&common.widgetHandler._maximumAnimation()}if(sinclo.widget.condifiton.set(!0,!0),scl_check.smartphone()&&window.sincloInfo.contract.chat&&0!==window.orientation)t=window.innerHeight*(document.body.clientWidth/window.innerWidth),scl_check.android()||(t=window.innerHeight);else{var c=Number(common.getWidgetSettings().widgetSizeType);4!==c&&5!==c?common.widgetHandler._setWidgetSizeNormal():4!==c&&5===c&&common.widgetHandler._setWidgetSizeCustom();var l=.85*$(window).innerHeight(),d=browserInfo.getActiveWindow(),p=0;if(p+=$("#sincloWidgetBox #widgetHeader").outerHeight(!0),$("#sincloWidgetBox").children().is("#navigation")?(p+=$("#sincloWidgetBox > #navigation").outerHeight(!0),p+=$("#sincloWidgetBox #chatTab").outerHeight(!0)):p+=$("#sincloWidgetBox [id$='Tab']").outerHeight(!0),$("#sincloWidgetBox > #fotter").length&&(p+=$("#sincloWidgetBox > #fotter").outerHeight(!0)),cnst.tab_type.open!==d&&cnst.tab_type.disable!==d)t=p;else{if(5===c){var u=Number(common.getWidgetSettings().widgetCustomHeight);t=u<l?u:l}else t=4!==c?p<l?p:l:p;"5f7ab54ae9eab"!==window.sincloInfo.site.key&&"63071b96ebc2c"!==window.sincloInfo.site.key||(t+=1===c&&t<377?75:0,t+=2===c&&t<469?77:0,t+=3===c&&t<559?77:0)}}window.sincloInfo.contract.chat&&(sinclo.chatApi.showUnreadCnt(),sinclo.chatApi.scDown()),"none"===$("#mainImage").css("display")||void 0===$("#mainImage").css("display")?common.indicateSimpleNoImage():"block"!==$("#mainImage").css("display")&&"inline"!==$("#mainImage").css("display")||common.indicateSimpleImage(),sinclo.chatApi.lockPageScroll()}else{if(preventWithdrawalOverlay.isActive())return $("#fw-minimize-btn").hide(),void $("#fw-close-btn").show().off("click").on("click",function(){preventWithdrawalOverlay.hide()});common.whenMinimizedBtnShow(),a.MinRes?common.abridgementTypehide():common.abridgementTypeShow(),"none"===$("#mainImage").css("display")||void 0===$("#mainImage").css("display")?common.indicateSimpleNoImage():"block"!==$("#mainImage").css("display")&&"inline"!==$("#mainImage").css("display")||common.indicateSimpleImage(),t=this.header.offsetHeight,4===Number(common.getWidgetSettings().widgetSizeType)&&common.widgetHandler._maximumReverseAnimation(),sinclo.widget.condifiton.set(!1,!0),sinclo.chatApi.unlockPageScroll()}scl_check.smartphone()&&3===Number(common.getWidgetSettings().spWidgetViewPattern)&&$("#fw-minimize-btn").is(":hidden")&&2===Number(common.getWidgetSettings().closeButtonSetting)&&1===Number(common.getWidgetSettings().closeButtonModeType)||$("#fw-minimize-btn").is(":hidden")&&(scl_check.hasCustomBannerImageSetting()||scl_check.hasOriginalImageSetting())?(scl_check.smartphone()&&"false"===String(n)?(i.css("height",""),sinclo.adjustSpWidgetVerticalSizeAnimation()):i.css("height",t+"px"),1!==Number(common.getWidgetSettings().closeButtonSetting)&&2!==Number(common.getWidgetSettings().closeButtonModeType)&&sinclo.operatorInfo.closeBtn()):($("#sincloWidgetBox").offset({top:$("#sincloBox").offset().top}),e?scl_check.smartphone()&&"false"===String(n)?(i.css("height",""),sinclo.adjustSpWidgetVerticalSizeAnimation()):i.css("height",t+"px"):scl_check.smartphone()&&"false"===String(n)?(i.css("height",""),sinclo.adjustSpWidgetVerticalSizeAnimation()):i.animate({height:t+"px"},"first",null,function(){sinclo.operatorInfo.widgetMoving=!1}))}else"true"!==s&&($("#sincloBox").css("height",""),sinclo.operatorInfo.bannerBottomLeftRight())}},closeBtn:function(){if(common.hasGA()){common.callGA("clickClose",location.href,1);var e=new Date,t=("0"+(e.getMonth()+1)).slice(-2),n=("0"+e.getDate()).slice(-2),i=("0"+e.getHours()).slice(-2);emit("addClickCloseCounts",{siteKey:sincloInfo.site.key,year:e.getFullYear(),month:t,day:n,hour:i})}2!==Number(common.getWidgetSettings().closeButtonSetting)||1!==Number(common.getWidgetSettings().closeButtonModeType)&&3!==Number(common.getWidgetSettings().closeButtonModeType)?(preventWithdrawalOverlay.isActive()||sinclo_storage.s.set("closeAct",!0),common.widgetHandler.hide()):sinclo.operatorInfo.onBanner(),preventWithdrawalOverlay.isActive()&&preventWithdrawalOverlay.hide()},bannerBottomLeftRight:function(){if(!scl_check.smartphone()){var e=scl_check.objPath(window.sincloInfo,"custom.widget.bannerHorizontalPosition")?window.sincloInfo.custom.widget.bannerHorizontalPosition:1===Number(sincloInfo.widget.closeButtonSettingPosition)?sincloInfo.widget.closeButtonSettingPositionHorizontal+"px":"20px",t=scl_check.objPath(window.sincloInfo,"custom.widget.bannerVerticalPosition")?window.sincloInfo.custom.widget.bannerVerticalPosition:1===Number(sincloInfo.widget.closeButtonSettingPosition)?sincloInfo.widget.closeButtonSettingPositionVertical+"px":"20px",n=e;switch($("#sincloBox").css("bottom",t),Number(common.getWidgetSettings().showPosition)){case 1:$("#sincloBox").css("right",n);break;case 2:$("#sincloBox").css("left",n)}}},onBanner:function(){2!==Number(common.getWidgetSettings().closeButtonSetting)||1!==Number(common.getWidgetSettings().closeButtonModeType)&&3!==Number(common.getWidgetSettings().closeButtonModeType)||($("#sincloWidgetBox").hide(),$("#sincloBox").css("outline","none"),$("#sincloBox").css("height",""),sinclo.operatorInfo.bannerBottomLeftRight(),sinclo_storage.l.set("bannerAct",!0),sinclo_storage.s.set("bannerAct",!0),(scl_check.hasCustomBannerImageSetting()||scl_check.hasOriginalImageSetting())&&$("#sincloBox").addClass("onImageBanner"),$("#sincloBannerBox").show())},clickBanner:function(e,t){if(t&&"true"===sinclo.widget.condifiton.get())return;var n=document.getElementById("sincloBox");if(sinclo_storage.l.set("bannerAct",!1),sinclo_storage.s.set("bannerAct",!1),$("#sincloWidgetBox").show(),$("#sincloBannerBox").hide(),(scl_check.hasCustomBannerImageSetting()||scl_check.hasOriginalImageSetting())&&$("#sincloBox").removeClass("onImageBanner"),$("#sincloBox").css("bottom","0"),scl_check.smartphone())$("#sincloBox").css("right",""),$("#sincloBox").css("left",""),sinclo.adjustSpWidgetSize();else{var i="10px",o="0px";switch(scl_check.smartphone()||(o=4===Number(common.getWidgetSettings().widgetSizeType)?i="0px":(i=scl_check.objPath(window.sincloInfo,"custom.widget.horizontalPosition")?window.sincloInfo.custom.widget.horizontalPosition:1===Number(sincloInfo.widget.showCustomWidgetPosition)?sincloInfo.widget.customWidgetPosHorizontal+"px":"10px",scl_check.objPath(window.sincloInfo,"custom.widget.verticalPosition")?window.sincloInfo.custom.widget.verticalPosition:1===Number(sincloInfo.widget.showCustomWidgetPosition)?sincloInfo.widget.customWidgetPosVertical+"px":"0px")),common.widgetHandler._handleResizeEvent(),Number(common.getWidgetSettings().showPosition)){case 1:$("#sincloBox").css({right:i,bottom:o});break;case 2:$("#sincloBox").css({left:i,bottom:o})}}common.whenMinimizedBtnShow(),n.style.height=sinclo.operatorInfo.header.offsetHeight+"px",e||sinclo.operatorInfo.ev()},widgetHideTimer:null,nowScrollTimer:null,oldScroll:window.scrollY,widgetHide:function(e){if(!$(".inputFormArea").children().has(":focus").length){var t=sinclo.widget.condifiton.get();if("true"!==String(t)){sinclo.operatorInfo.widgetHideTimer&&(clearTimeout(sinclo.operatorInfo.widgetHideTimer),sinclo.operatorInfo.widgetHideTimer=null),sinclo.operatorInfo.nowScrollTimer&&(clearTimeout(sinclo.operatorInfo.nowScrollTimer),sinclo.operatorInfo.nowScrollTimer=null),e&&e.stopPropagation();var n=document.getElementById("sincloBox");if(!n)return!1;if(scl_check.android()&&"true"===sinclo_storage.s.get("closeAct"))return!1;if(scl_check.smartphone()&&"true"===String(sinclo_storage.s.get("closeActFocusPage")))return!1;var i=document.getElementById("widgetTitle").clientHeight;0===i&&(i=10),browserInfo.scrollSize().y-i<window.scrollY&&0!==window.scrollY&&document.body.scrollHeight!==window.scrollHeight&&"false"===String(t)&&4!==common.getWidgetSettings().widgetSizeType?void 0===common.getWidgetSettings().spBannerPosition||3!==Number(common.getWidgetSettings().spBannerPosition)&&4!==Number(common.getWidgetSettings().spBannerPosition)?n.style.opacity=0:n.style.opacity=1:void 0!==common.getWidgetSettings().spScrollViewSetting&&1===Number(common.getWidgetSettings().spScrollViewSetting)&&"false"===sinclo_storage.l.get("widgetMaximized")?(sinclo.operatorInfo.oldScroll!==window.scrollY&&(n.style.opacity=0),sinclo.operatorInfo.nowScrollTimer=setTimeout(function(){n.style.opacity=1;var e=$(n).height();$(n).height(e-1),$(n).height(e)},400)):n.style.opacity=1,sinclo.operatorInfo.oldScroll=window.scrollY,sinclo.operatorInfo.widgetHideTimer=setTimeout(function(){0===Number(n.style.opacity)?n.style.display="none":common.widgetHandler.show()},400)}}},reCreateWidgetMessage:"",reCreateWidgetTimer:null,reCreateWidget:function(e,t){var i=$.Deferred();if(e&&e.stopPropagation(),scl_check.isset(e)&&!scl_check.smartphone())return!1;sinclo.operatorInfo.reCreateWidgetTimer&&clearTimeout(sinclo.operatorInfo.reCreateWidgetTimer);var n=document.getElementById("sincloBox"),o=0===window.orientation?"vertical":"horizontal";if("sincloChatMessage"===document.activeElement.id&&o===n.getAttribute("data-screen"))return setTimeout(function(){sinclo.operatorInfo.reCreateWidget()},500),!1;var s="false";$("#sincloBox").length?s=sinclo.widget.condifiton.get():preventWithdrawalOverlay.isActive()&&(s="true"),n&&(n.style.display="none");var a=scl_check.isset(t)&&t?0:500;return sinclo.operatorInfo.reCreateWidgetTimer=setTimeout(function(){var e=common.createWidget();e=preventWithdrawalOverlay.createWidgetOverlay(e);$("sinclo-chat").children();sinclo.operatorInfo.reCreateWidgetMessage=$("#sincloChatMessage").length?document.getElementById("sincloChatMessage").value:null,$("#sincloBox").remove(),$("body").append(e),preventWithdrawalOverlay.isActive()&&common.widgetHandler.show(),preventWithdrawalOverlay.isActive()||(socket.isActive()?emit("getChatMessage",{showName:common.getWidgetSettings().showName}):sinclo.chatMessageData(JSON.stringify({siteKey:sincloInfo.site.key,token:common.token,userId:userInfo.userId,tabId:userInfo.tabId,chat:{messages:[]},sincloSessionId:userInfo.sincloSessionId})));var t=document.getElementById("sincloBox");if(preventWithdrawalOverlay.isActive()||(document.getElementById("sincloChatMessage").value=sinclo.operatorInfo.reCreateWidgetMessage),sinclo.operatorInfo.header=document.getElementById("widgetHeader"),sinclo.widget.condifiton.set(s,!0),common.widgetHandler.show(!0),sinclo.chatApi.targetTextarea=document.getElementById("chatTalk"),sinclo.chatApi.showUnreadCnt(),"true"===String(s)){if(sinclo.widget.condifiton.set(!0,!0),"close"==sinclo_storage.l.get("textareaOpend")?sinclo.hideTextarea():sinclo.displayTextarea(),0!==window.orientation)t.style.height=document.documentElement.clientHeight+"px";else{var n=$("#sincloBox #widgetHeader").outerHeight(!0);n+=$("#sincloBox #chatTab").outerHeight(!0),t.style.height=n}scl_check.smartphone()&&sinclo.chatApi.lockPageScroll()}else{"true"!==sinclo_storage.l.get("bannerAct")&&(sinclo.widget.condifiton.set(!1,!0),t.style.height=sinclo.operatorInfo.header.offsetHeight+"px"),scl_check.smartphone()&&sinclo.chatApi.unlockPageScroll()}t.setAttribute("data-screen",o),sinclo.chatApi.showUnreadCnt(),sinclo.chatApi.scDown(),common.widgetHandler._handleResizeEvent(),i.resolve()},a),2<=document.querySelectorAll("#sincloBox").length&&($("[id]").each(function(){"sincloBox"===this.id&&$('[id="'+this.id+'"]').remove()}),sinclo.operatorInfo.reCreateWidget()),i.promise()}},setForNotHavingConnectionMessageStack:function(n){common.getTimestamp().then(function(e){n.tabFlg=null,void 0===localStorage.forNotHavingConnectionMessageStack&&(localStorage.forNotHavingConnectionMessageStack="[]"),scl_check.isset(n.isWSConnected)||(n.isWSConnected=sinclo.chatApi.saveFlg),n.created=new Date(e);var t=JSON.parse(localStorage.forNotHavingConnectionMessageStack);t.push(n),localStorage.forNotHavingConnectionMessageStack=JSON.stringify(t)})},executeForNotHavingConnectionMessageStack:function(){"[]"!==localStorage.forNotHavingConnectionMessageStack&&void 0!==localStorage.forNotHavingConnectionMessageStack&&($.each(JSON.parse(localStorage.forNotHavingConnectionMessageStack),function(e,t){if(t.scenarioId){var n={messages:[t],siteKey:sincloInfo.site.key,userId:userInfo.userId,tabId:userInfo.tabId,sincloSessionId:userInfo.sincloSessionId};socket.emit("storeScenarioMessage",JSON.stringify(n),function(){})}else if(t.message.did){n={message:[t],siteKey:sincloInfo.site.key,userId:userInfo.userId,tabId:userInfo.tabId,sincloSessionId:userInfo.sincloSessionId};socket.emit("storeDiagramMessage",JSON.stringify(n),function(){})}else t.chatId&&emit("sendAutoChat",{messageList:[t]});997===t.messageType&&(emit("sendChat",{historyId:sinclo.chatApi.historyId,stayLogsId:sinclo.chatApi.stayLogsId,chatMessage:"ãã£ããã¯ãªã¢",mUserId:null,messageType:997,messageRequestFlg:0,isAutoSpeech:!1,notifyToCompany:!1,isScenarioMessage:!1,created:t.created}),setTimeout(function(){emit("chatReset",{siteKey:sincloInfo.site.key,userId:userInfo.userId,historyId:sinclo.chatApi.historyId,tabId:userInfo.tabId,created:t.created,saveFlg:!0})},500))}),localStorage.forNotHavingConnectionMessageStack="[]",sinclo.chatApi.saveFlg=!0,sinclo.chatApi.autoMessages.unset()),sinclo.chatApi.store.unset()},connect:function(){return sincloInfo.contract.useMembershipMaster?userInfo.execGetMasterInfo().then(sinclo._processConnect):sinclo._processConnect()},_processConnect:function(){var n=$.Deferred(),i=userInfo.getIp();return scl_check.isset(userInfo.getTabId())||(userInfo.unset(cnst.info_type.referrer),userInfo.setReferrer()),userInfo.init().then(function(){userInfo.processReconnect||scl_check.isset(userInfo.getTabId())||(userInfo.firstConnection=!0,window.opener=null,userInfo.strageReset(),userInfo.setReferrer(),userInfo.gFrame=!1);var e={referrer:userInfo.referrer,time:userInfo.getTime(),firstConnection:userInfo.firstConnection,userAgent:userInfo.newUserAgent?userInfo.newUserAgent:userInfo.userAgent,service:scl_check.browser(),prevList:userInfo.prevList};if(!window.sincloInfo.contract.chat||!window.sincloInfo.contract.enableRealtimeMonitor||userInfo.gFrame&&Number(userInfo.accessType)===Number(cnst.access_type.guest)||sinclo.chatApi.observeType.emit(!1,""),scl_check.isset(userInfo.connectToken)){if(common.load.start(),Number(userInfo.accessType)===Number(cnst.access_type.guest)&&(e.connectToken=userInfo.connectToken,userInfo.syncInfo.get(),common.judgeShowWidget(),emit("connectSuccess",{prevList:userInfo.prevList,prev:userInfo.prev},function(e){emit("customerInfo",userInfo.getSendList())}),emit("connectedForSync",{}),!window.sincloInfo.contract.chat||userInfo.gFrame&&Number(userInfo.accessType)===Number(cnst.access_type.guest)||common.makeAccessIdTag()),scl_check.isset(common.tmpParams)&&Number(userInfo.accessType)===Number(cnst.access_type.host)&&(browserInfo.resetPrevList(),emit("requestSyncStart",{accessType:common.params.type})),emit("reqUrlChecker",{reconnectFlg:browserInfo.connectFlg}),browserInfo.connectFlg=!0,browserInfo.setPrevList(),!scl_check.isset(common.tmpParams)){emit("connectContinue",{connectToken:userInfo.connectToken,accessType:common.params.type,receiverID:userInfo.vc_receiverID});var t=common.getVcInfo();void 0!==t&&vcPopup.set(t.toTabId,t.receiverID),window.clearTimeout(sinclo.syncTimeout),sinclo.syncTimeout=window.setTimeout(function(){emit("requestSyncStop",e),userInfo.syncInfo.unset()},5e3)}return!1}"undefined"!=typeof AssistSDK&&(laUtil.initSDKCallbacks(),sinclo_storage.l.get("assist-localstorage-config")&&!sinclo_storage.s.get("assist-session-config")&&sinclo_storage.l.unset("assist-localstorage-config")),browserInfo.connectFlg=!0,scl_check.isset(userInfo.accessId)&&(e.accessId=userInfo.accessId),scl_check.isset(sinclo_storage.s.get("inactiveTimeout"))&&"true"===sinclo_storage.s.get("inactiveTimeout")&&(e.inactiveReconnect=!0,sinclo_storage.s.set("inactiveTimeout",!1)),userInfo.sincloSessionIdIsActive||scl_check.isset(i)||(e.forceFirstConnect=!0),userInfo.processReconnect&&(sinclo.chatApi.historyId=sinclo_storage.l.get("_scl_history_id"),sinclo.chatApi.stayLogsId=sinclo_storage.l.get("_scl_stay_logs_id"),scl_check.isset(sinclo.chatApi.historyId)&&(e.historyId=sinclo.chatApi.historyId),scl_check.isset(sinclo.chatApi.stayLogsId)&&(e.stayLogsId=sinclo.chatApi.stayLogsId),scl_check.isset(userInfo.getTabId())||(userInfo.setTabId(),e.tabId=userInfo.getTabId()),e.reconnect=!0,e.firstConnection=!1,e.forceFirstConnect=!1,e.inactiveReconnect=!1),window.sincloInfo.contract.enableRealtimeMonitor||socket.isActive()?emit("connected",{type:"user",data:e,anotherWidgetKey:common.settingLoader.getWidgetSiteKey()}):sinclo.callApiAuth(e).then(function(e){var i=JSON.parse(e);scl_check.isset(i.customerInfo)&&Object.keys(i.customerInfo).forEach(function(e,t,n){scl_check.isset(userInfo.customerInfo[e])||(userInfo.customerInfo[e]=i.customerInfo[e])}),n.resolve(e)})}),n.promise()},retConnectedForSync:function(e){var t=common.jParse(e);"pagetime"in t&&(userInfo.pageTime=t.pagetime),t.hasOwnProperty("activeOperatorCnt")&&(window.sincloInfo.activeOperatorCnt=t.activeOperatorCnt),t.hasOwnProperty("opFlg")&&(window.sincloInfo.opFlg=t.opFlg)},accessInfo:function(e){var i=common.jParse(e);if(i.token!==common.token)return!1;if(i.hasOwnProperty("activeOperatorCnt")&&(window.sincloInfo.activeOperatorCnt=i.activeOperatorCnt),i.hasOwnProperty("opFlg")&&(window.sincloInfo.opFlg=i.opFlg),i.hasOwnProperty("pagetime")&&(userInfo.pageTime=i.pagetime),scl_check.isset(i.isInBusinessHours)&&(userInfo.isInBusinessHours=i.isInBusinessHours),scl_check.isset(i.accessId)&&!scl_check.isset(i.connectToken)&&(userInfo.set(cnst.info_type.access,i.accessId,!0),sinclo.executeMakeWidget(),common.changeAccessId(i.accessId)),i.firstConnection&&(i.sincloSessionIdIsNew&&!socket.isConnected()&&socket.clearOnceConnectedFlg(),!scl_check.isset(userInfo.userId)&&scl_check.isset(i.userId)&&userInfo.set(cnst.info_type.user,i.userId),userInfo.accessType===Number(cnst.access_type.guest)&&(userInfo.set(cnst.info_type.ip,i.ipAddress),userInfo.set(cnst.info_type.time,i.time,!0)),userInfo.setTabId()),i.sincloSessionIdIsNew)userInfo.setStayCount(),scl_check.isIE()&&null!==sinclo_storage.s.get("Waiting_on_IE")&&sinclo_storage.s.unset("Waiting_on_IE"),sinclo_storage.l.unset("widgetOpen"),sinclo_storage.l.unset("widgetMaximized");else{var t=sinclo_storage.l.get("widgetOpen"),n=sinclo_storage.l.get("widgetMaximized");sinclo_storage.s.set("widgetOpen",t),sinclo_storage.s.set("widgetMaximized",n)}if(i.sincloSessionIdIsNew||!scl_check.isset(userInfo.sincloSessionId)&&scl_check.isset(i.sincloSessionId)){i.sincloSessionIdIsNew,userInfo.oldSincloSessionId=userInfo.sincloSessionId?userInfo.sincloSessionId:"",userInfo.set(cnst.info_type.sincloSessionId,i.sincloSessionId,"sincloSessionId");var o=(new Date).getTime();scl_check.isset(i.time)&&(o=i.time),userInfo.accessTime=o,userInfo.time=o,userInfo.set(cnst.info_type.time,userInfo.time,!0),sinclo.trigger.flg=!1,common.widgetHandler.resetMessageAreaState(),sinclo.chatApi.saveFlg=!1,sinclo_storage.s.unset("forNotHavingConnectionMessageStack"),sinclo_storage.l.set("leaveFlg","false"),sinclo_storage.l.unset("amsg"),sinclo_storage.l.unset(sinclo.scenarioApi._lKey.storedVariableKeys),sinclo_storage.s.unset("_scl_d_msg"),sinclo_storage.s.unset("chatAct"),sinclo_storage.s.unset("chatEmit"),sinclo_storage.l.unset("bannerAct"),sinclo_storage.l.unset("callChatMessage"),sinclo_storage.l.unset("lastActTriggerId"),sinclo_storage.l.unset("lastActTriggerScenarioId"),sinclo_storage.l.unset("lastActTriggerDiagramId"),sinclo_storage.l.unset("triggeredAutoSpeech"),sinclo_storage.s.unset("requestFlg"),sinclo_storage.s.unset("autoChatFlg"),sinclo.chatApi.store.unset(),sinclo.scenarioApi.reset(),sinclo.diagramApi.common.reset(),userInfo.setPrevpage(!0)}sinclo.trigger.flg=!1,i.prev=userInfo.writePrevToLocalStorage(),i.stayCount=userInfo.getStayCount();var s={confirm:!1,widget:window.sincloInfo.widgetDisplay,prevList:userInfo.prev,userAgent:userInfo.newUserAgent?userInfo.newUserAgent:userInfo.userAgent,time:userInfo.time,ipAddress:userInfo.getIp(),referrer:userInfo.referrer,sincloSessionIdIsNew:i.sincloSessionIdIsNew};if(i.inactiveReconnect){var a=sinclo.chatApi.autoMessages.get(!0);s.tmpAutoMessages=a}scl_check.isset(i.customerInfo)&&Object.keys(i.customerInfo).forEach(function(e,t,n){scl_check.isset(userInfo.customerInfo[e])||(userInfo.customerInfo[e]=i.customerInfo[e])}),operationUtil._triggerCustomEventOnDocument("sinclo:connected");var r=userInfo.getSendList();return i.prev=r.prev,i.prevList=r.prev,window.userInfo.accessInfoData=i,s},executeConnectSuccess:function(e,n){var i=$.Deferred();return window.sincloInfo.contract.enableRealtimeMonitor||socket.isActive()?(e.historyId=sinclo_storage.l.get("_scl_history_id"),e.stayLogsId=sinclo_storage.l.get("_scl_stay_logs_id"),e.isPreventWithdrawal=preventWithdrawalOverlay.isActive(),sinclo_client_log.client_log("executeConnectSuccess.emit(connectSuccess)",e),emit("connectSuccess",e,function(e){if(!1===(userInfo.gFrame&&Number(userInfo.accessType)===Number(cnst.access_type.guest))){var t=userInfo.getSendList();n.prev||(n.prev=t.prev),n.prevList||(n.prevList=t.prev),sinclo_client_log.client_log("executeConnectSuccess.emit(customerInfo)",n),emit("customerInfo",n),i.resolve(JSON.stringify(n))}})):sinclo.callApiInfo().then(function(e){i.resolve(e)}),i.promise()},executeMakeWidget:function(){var e=function(){void 0===window.sincloInfo.widget?setTimeout(e,500):common.makeAccessIdTag()};e()},callApiAuth:function(e){var t=$.Deferred();return $.ajax({headers:{Accept:"text/plain, application/json; charset=utf-8","Content-Type":"application/json; charset=utf-8"},type:"post",url:window.sincloInfo.site.files+"/api/auth/customer",dataType:"json",contentType:"application/json",data:JSON.stringify({siteKey:sincloInfo.site.key,type:"user",userIdType:userInfo.userIdType,userId:userInfo.userId,tabId:userInfo.tabId,sincloSessionId:userInfo.sincloSessionId,token:common.token,isFirstAccess:window.sincloInfo.isFirstAccess,data:e,anotherWidgetKey:common.settingLoader.getWidgetSiteKey(),reAccess:userInfo.reAccess}),success:function(e){t.resolve(JSON.stringify(e))}}),t.promise()},callApiInfo:function(){var t=$.Deferred();return $.ajax({headers:{Accept:"text/plain, application/json; charset=utf-8","Content-Type":"application/json; charset=utf-8"},type:"post",url:window.sincloInfo.site.files+"/api/auth/info",dataType:"json",contentType:"application/json",data:JSON.stringify({confirm:!1,status:browserInfo.getActiveWindow(),title:common.title(),url:f_url(browserInfo.href),widget:window.sincloInfo.widgetDisplay,prevList:userInfo.prev,userAgent:userInfo.newUserAgent?userInfo.newUserAgent:userInfo.userAgent,time:userInfo.time,accessId:userInfo.accessId,ipAddress:userInfo.getIp(),referrer:userInfo.referrer,siteKey:sincloInfo.site.key,socketId:socket.getId(),userIdType:userInfo.userIdType,userId:userInfo.userId,tabId:userInfo.tabId,historyId:sinclo.chatApi.historyId,stayLogsId:sinclo.chatApi.stayLogsId,sincloSessionId:userInfo.sincloSessionId,token:common.token,customVariables:userInfo.customVariables,customerInfoSettings:userInfo.customerInfoSettings,customerInfo:userInfo.customerInfo}),success:function(e){t.resolve(JSON.stringify(e))}}),t.promise()},setHistoryId:function(e){var t,n=common.jParse(e),i=$.Deferred();return scl_check.isset(n.stayLogsId)&&(sinclo.chatApi.stayLogsId=n.stayLogsId),scl_check.isset(n.historyId)&&(sinclo.chatApi.historyId=n.historyId),null!==document.getElementById("sincloBox")&&(t=window.setInterval(function(){4!==common.getWidgetSettings().showTiming||window.sincloInfo.widgetDisplay&&!sinclo.trigger.flg?(window.clearInterval(t),n.tabId===userInfo.tabId&&function(){document.getElementById("sincloBox");common.reloadWidget(),!window.sincloInfo.contract.enableRealtimeMonitor&&!socket.isActive()&&!sinclo.trigger.flg&&!scl_check.isset(n.historyId)&&!scl_check.isset(n.stayLogsId)&&preventWithdrawalOverlay.isActive()||window.sincloInfo.contract.enableRealtimeMonitor&&preventWithdrawalOverlay.isActive()||(scl_check.isset(sinclo_storage.s.get("syncInfo"))||scl_check.isset(sinclo_storage.s.get("coBrowseConnectToken")))&&-1!==location.href.indexOf("ScriptSettings/testpage")?(scl_check.isset(sinclo.operatorInfo.widgetHideTimer)&&clearTimeout(sinclo.operatorInfo.widgetHideTimer),sinclo.operatorInfo.widgetHide()):(scl_check.isset(sinclo.operatorInfo.widgetHideTimer)&&clearTimeout(sinclo.operatorInfo.widgetHideTimer),common.widgetHandler.show()),preventWithdrawalOverlay.isActive()||sinclo.chatApi.widgetOpen(),window.sincloInfo.contract.chat&&(sinclo.chatApi.init(),window.sincloInfo.contract.enableRealtimeMonitor||socket.isActive()||!n.chat||sinclo.chatMessageData(JSON.stringify({siteKey:n.siteKey,token:n.token,chat:n.chat,tabId:n.tabId,sincloSessionId:n.sincloSessionId}))),i.resolve()}()):window.sincloInfo.widgetDisplay&&sinclo.trigger.flg&&!sinclo.chatApi.inactiveCloseFlg&&(window.clearInterval(t),window.sincloInfo.contract.chat&&!window.sincloInfo.contract.enableRealtimeMonitor&&null!==n.chat&&void 0!==n.chat&&0<Object.keys(n.chat.messages).length&&sinclo.chatMessageData(JSON.stringify({siteKey:n.siteKey,token:n.token,chat:n.chat,tabId:n.tabId,sincloSessionId:n.sincloSessionId})),i.resolve())},500),i.promise())},getAccessInfo:function(e){var t=common.jParse(e);if(userInfo.accessType!==Number(cnst.access_type.guest))return!1;var n=userInfo.getSendList();n.receiveAccessInfoToken=t.token,n.widget=window.sincloInfo.widgetDisplay,n.stayCount=userInfo.getStayCount(),emit("sendAccessInfo",n)},confirmCustomerInfo:function(e){var t=common.jParse(e);if(userInfo.tabId!==t.tabId)return!1;if(userInfo.accessType!==cnst.access_type.guest)return!1;var n=userInfo.getSendList();n.receiveAccessInfoToken=t.token,n.stayCount=userInfo.getStayCount(),emit("customerInfo",n)},createShareWindow:function(i){if(i.tabId!==userInfo.tabId)return!1;if(userInfo.accessType!==Number(cnst.access_type.guest))return!1;var e=location.host+"ã®åå®¹",t=location.host+"ãé²è¦§ãã¼ã¸ã¸ã®ã¢ã¯ã»ã¹ãæ±ãã¦ãã¾ãã<br>è¨±å¯ãã¾ãã";popup.ok=function(){browserInfo.resetPrevList(),userInfo.setConnect(i.connectToken);var e=browserInfo.windowSize(),t={data:{url:location.href,userId:userInfo.userId,tabId:userInfo.tabId,connectToken:i.connectToken},site:window.sincloInfo.site},n=window.sincloInfo.site.files+"/frame/"+encodeURIComponent(JSON.stringify(t));window.open(n,"_blank","width="+e.width+", height="+e.height+", resizable=no,scrollbars=yes,status=no")},popup.set(e,t)},cancelSharingApplication:function(e){popup.remove()},getWindowInfo:function(t){if(t.tabId!==userInfo.tabId)return!1;if(userInfo.accessType!==Number(cnst.access_type.guest))return!1;var e=scl_check.objPath(window.sincloInfo,"custom.shareBrowse.begin.headerMessage")?window.sincloInfo.custom.shareBrowse.begin.headerMessage:location.host+"ã®åå®¹",n=scl_check.objPath(window.sincloInfo,"custom.shareBrowse.begin.content")?window.sincloInfo.custom.shareBrowse.begin.content:location.host+"ãé²è¦§ãã¼ã¸ã¸ã®ã¢ã¯ã»ã¹ãæ±ãã¦ãã¾ãã<br>è¨±å¯ãã¾ãã";popup.ok=function(){var e=document.getElementById("sincloBox");e&&(e.style.display="none"),userInfo.connectToken=t.connectToken,browserInfo.resetPrevList(),userInfo.setConnect(t.connectToken),emit("sendWindowInfo",{userId:userInfo.userId,tabId:userInfo.tabId,connectToken:userInfo.connectToken,screen:browserInfo.windowScreen(),windowSize:browserInfo.windowSize(),scrollPosition:browserInfo.windowScroll()}),this.remove()},popup.no=function(){emit("sharingRejection",t),this.remove()},popup.set(e,n)},startWindowSync:function(n){if(userInfo.accessType!==Number(cnst.access_type.guest))return!1;var e=scl_check.objPath(window.sincloInfo,"custom.shareBrowse.begin.headerMessage")?window.sincloInfo.custom.shareBrowse.begin.headerMessage:location.host+"ã®åå®¹",t=scl_check.objPath(window.sincloInfo,"custom.shareBrowse.begin.content")?window.sincloInfo.custom.shareBrowse.begin.content:location.host+"ãé²è¦§ãã¼ã¸ã¸ã®ã¢ã¯ã»ã¹ãæ±ãã¦ãã¾ãã<br>è¨±å¯ãã¾ãã";popup.ok=function(){userInfo.connectToken=n.connectToken,browserInfo.resetPrevList();var e={site:window.sincloInfo.site,data:{userId:userInfo.userId,tabId:userInfo.tabId,url:location.href,screen:browserInfo.windowScreen(),connectToken:userInfo.connectToken}},t=window.sincloInfo.site.files.replace("https://","http://")+"/frame/"+encodeURIComponent(JSON.stringify(e));window.open(t,"sinclo","width="+screen.availWidth*(2/3)+",height="+screen.availHeight*(2/3)+",dialog=no,toolbar=no,location=no,status=no,menubar=no,directories=no,resizable=no,scrollbars=no"),this.remove()},popup.set(e,t)},startCoBrowseOpen:function(t){if(userInfo.accessType!==Number(cnst.access_type.guest))return!1;var e=scl_check.objPath(window.sincloInfo,"custom.shareCoBrowse.begin.headerMessage")?window.sincloInfo.custom.shareCoBrowse.begin.headerMessage:location.host+"ã®åå®¹",n=scl_check.objPath(window.sincloInfo,"custom.shareCoBrowse.begin.content")?window.sincloInfo.custom.shareCoBrowse.begin.content:location.host+"ãé²è¦§ãã¼ã¸ã¸ã®ã¢ã¯ã»ã¹ãæ±ãã¦ãã¾ãã<br>è¨±å¯ãã¾ãã";popup.ok=function(){var e=document.getElementById("sincloBox");e&&(e.style.display="none"),userInfo.coBrowseConnectToken=t.coBrowseConnectToken,sinclo_storage.s.set("coBrowseConnectToken",t.coBrowseConnectToken),emit("beginToCoBrowse",{userId:userInfo.userId,tabId:userInfo.tabId,coBrowseConnectToken:userInfo.coBrowseConnectToken}),this.remove()},popup.no=function(){emit("sharingRejection",t),this.remove()},popup.set(e,n)},assistAgentIsReady:function(e){var t=e.responderId,n=this;laUtil.setOnAgentLeftCallback(function(){if(!scl_check.isset(userInfo.coBrowseConnectToken))return!1;sinclo_storage.s.unset("coBrowseConnectToken"),document.getElementById("sincloBox")||(common.makeAccessIdTag(),window.sincloInfo.contract.chat&&sinclo.chatApi.init());var e=scl_check.objPath(window.sincloInfo,"custom.shareCoBrowse.end.headerMessage")?window.sincloInfo.custom.shareCoBrowse.end.headerMessage:location.host+"ã®åå®¹",t=scl_check.objPath(window.sincloInfo,"custom.shareCoBrowse.end.content")?window.sincloInfo.custom.shareCoBrowse.end.content:location.host+"ã¨ã®ç»é¢å±æãçµäºãã¾ãã";popup.ok=function(){laUtil.disconnect(),this.remove()},popup.set(e,t,popup.const.action.alert);var n=setInterval(function(){if(!1===window.sincloInfo.widgetDisplay)return clearInterval(n),laUtil.disconnect(),!1;var e=document.getElementById("sincloBox");e&&(window.sincloInfo.contract.chat||window.sincloInfo.contract.synclo||window.sincloInfo.contract.hasOwnProperty("document")&&window.sincloInfo.contract.document)&&(common.widgetHandler.show(),e.style.height=sinclo.operatorInfo.header.offsetHeight+"px",sinclo.widget.condifiton.set(!1,!0),clearInterval(n))},500)}),laUtil.initAndStart(t).then(function(){var e=laUtil.shortcode;null!=e&&""!==e&&emit("readyToCoBrowse",{userId:userInfo.userId,tabId:userInfo.tabId,responderId:t,url:location.href,coBrowseConnectToken:userInfo.coBrowseConnectToken,shortcode:laUtil.shortcode})}).fail(function(e){n.coBrowseErrorProcess()})},coBrowseErrorProcess:function(){emit("coBrowseFailed",{userId:userInfo.userId,tabId:userInfo.tabId,connectToken:userInfo.coBrowseConnectToken});var e=location.host+"ã®åå®¹";popup.ok=function(){laUtil.disconnect(),this.remove()},popup.set(e,"æ¥ç¶æã«ã¨ã©ã¼ãçºçãã¾ããã<br>ååº¦ãè©¦ããã ããã",popup.const.action.alert)},windowSyncInfo:function(e){var t=common.jParse(e);browserInfo.set.scroll(t.scrollPosition)},syncStart:function(e){var t=common.jParse(e);if(Number(userInfo.accessType)===Number(cnst.access_type.host))return window.clearTimeout(sinclo.syncTimeout),!1;var n=document.getElementById("sincloBox");n&&(!window.sincloInfo.contract.chat||userInfo.gFrame&&Number(userInfo.accessType)===Number(cnst.access_type.guest))&&(n.style.display="none"),userInfo.gFrame&&Number(userInfo.accessType)===Number(cnst.access_type.guest)||common.load.start(),scl_check.isset(userInfo.sendTabId)?userInfo.syncInfo.get():(userInfo.sendTabId=t.tabId,userInfo.syncInfo.set());var i=[];$("input").each(function(){i.push(this.value)});var o=[];$('input[type="checkbox"]').each(function(){o.push(this.checked)});var s=[];$('input[type="radio"]').each(function(){s.push(this.checked)});var a=[];$("textarea").each(function(){a.push(this.value)});var r=[];if($("select").each(function(){r.push(this.value)}),emit("getSyncInfo",{userId:userInfo.userId,connectToken:userInfo.connectToken,inputInfo:i,checkboxInfo:o,radioInfo:s,textareaInfo:a,selectInfo:r,scrollPosition:browserInfo.windowScroll()}),"true"===String(userInfo.gFrame))return!1;emit("sendTabInfo",{status:browserInfo.getActiveWindow(),widget:window.sincloInfo.widgetDisplay})},syncElement:function(e){var n=common.jParse(e),t=browserInfo.scrollSize();window.clearTimeout(sinclo.syncTimeout),$("html, body").animate({scrollLeft:t.x*n.scrollPosition.x,scrollTop:t.y*n.scrollPosition.y},{duration:"first",easing:"swing",complete:function(){var e,t;for(e in n.inputInfo)t=Number(e),$("input").eq(t).val(n.inputInfo[t]);for(e in n.checkboxInfo)t=Number(e),$('input[type="checkbox"]').eq(t).prop("checked",n.checkboxInfo[t]);for(e in n.radioInfo)t=Number(e),$('input[type="radio"]').eq(t).prop("checked",n.radioInfo[t]);for(e in n.textareaInfo)t=Number(e),$("textarea").eq(t).val(n.textareaInfo[t]);for(e in n.selectInfo)t=Number(e),$("select").eq(t).val(n.selectInfo[t]);emit("syncCompleate",{userId:userInfo.userId,accessType:userInfo.accessType})}})},syncEvStart:function(e){var t=common.jParse(e);if(t.to!==userInfo.tabId&&t.tabId!==userInfo.tabId)return!1;syncEvent.start(!0),window.clearTimeout(sinclo.syncTimeout),common.load.finish()},receiveScTimer:!1,syncResponce:function(e){var t=common.jParse(e),n=common.cursorTag;return(!scl_check.isset(t.to)||t.to===userInfo.tabId)&&(Number(t.accessType)!==Number(userInfo.accessType)&&(document.getElementById("cursorImg")?scl_check.isset(t.scrollPosition)&&(syncEvent.receiveEvInfo.type="scroll",syncEvent.receiveEvInfo.nodeName="body",this.receiveScTimer&&clearTimeout(this.receiveScTimer),browserInfo.set.scroll(t.scrollPosition),this.receiveScTimer=setTimeout(function(){syncEvent.receiveEvInfo={nodeName:null,type:null}},browserInfo.interval)):($("body").append('<div id="cursorImg" style="position:fixed; top:'+t.mousePoint.x+"; left:"+t.mousePoint.y+'; z-index:999999"><img width="50px" src="'+window.sincloInfo.site.files+'/img/pointer.png"></div>'),n=common.cursorTag=document.getElementById("cursorImg")),void(scl_check.isset(t.mousePoint)&&(n.style.left=t.mousePoint.x+"px",n.style.top=t.mousePoint.y+"px"))))},syncResponceEv:function(e){var t,n=common.jParse(e);if(n.to!==userInfo.tabId)return!1;if(n.accessType===userInfo.accessType)return!1;switch(t=$(String(n.nodeName)).eq(Number(n.idx)),syncEvent.receiveEvInfo.type=n.type,syncEvent.receiveEvInfo.nodeName=String(n.nodeName),syncEvent.receiveEvInfo.idx=Number(n.idx),n.type){case"change":"radio"!==String(n.nodeType)&&"checkbox"!==String(n.nodeType)||t.prop("checked",n.checked),t.val(n.value);break;case"keyup":t.val(n.value);break;case"scroll":if(0<(t=$(n.nodeName).eq(Number(n.idx))).length){var i=t[0].scrollHeight-t[0].clientHeight,o=t[0].scrollWidth-t[0].clientWidth;t.stop(!1,!1).scrollTop(i*Number(n.value.topRatio)),t.stop(!1,!1).scrollLeft(o*Number(n.value.leftRatio))}}syncEvent.receiveEvInfo={nodeName:null,type:null}},syncBrowserCtrl:function(e){var t=JSON.parse(e);return userInfo.accessType===Number(cnst.access_type.guest)&&(!!t.state&&void(0<Number(t.state)?history.forward():Number(t.state)<0&&history.back()))},syncContinue:function(e){var t=JSON.parse(e);return t.connectToken===userInfo.connectToken&&(t.to===userInfo.tabId&&void emit("requestSyncStart",t))},resUrlChecker:function(e){var t=JSON.parse(e);t.url!==browserInfo.href?location.href=t.url:emit("requestSyncStart",{accessType:common.params.type})},setChatIdWidthOperatorId:function(e){var t={},n=sinclo_storage.l.get("currentChatOperator"),i=sinclo_storage.l.get("answeringChatIdList");null!=i&&null!=n&&(t=JSON.parse(i)),t[e.chatId]=n,sinclo_storage.l.set("answeringChatIdList",JSON.stringify(t))},setOperatorInfoForIcon:function(e){var t={},n=sinclo_storage.l.get("operatorIconList");null!=n&&(t=JSON.parse(n)),t[e.userId]=e.profileIcon,sinclo_storage.l.set("operatorIconList",JSON.stringify(t)),sinclo_storage.l.set("currentChatOperator",e.userId)},unsetOperatorInfoForIcon:function(){sinclo_storage.l.unset("currentChatOperator")},chatStartResult:function(e){var t,n=JSON.parse(e);switch(this.chatApi.online=!0,sinclo_storage.s.set("chatAct",!0),sinclo_storage.s.set("operatorEntered",!0),sinclo_storage.l.set("leaveFlg","false"),sinclo_storage.l.set("callChatMessage",!1),$.each(this.forCallingTimerArray,function(e,t){clearTimeout(t)}),this.forCallingTimerArray=[],this.setOperatorInfoForIcon(n),3===Number(common.getWidgetSettings().operatorIconType)&&(common.getWidgetSettings().operatorIcon=n.profileIcon),sinclo.displayTextarea(),sinclo_storage.l.set("textareaOpend","open"),sinclo.scenarioApi.isProcessing()&&sinclo.chatApi.hideMiniMessageArea(),common.getWidgetSettings().showName){case 1:t=n.receptionName?(sinclo.chatApi.opUser=n.receptionName,sinclo.chatApi.opUserName=n.receptionName,n.receptionName):(sinclo.chatApi.opUser=n.userName,sinclo.chatApi.opUserName=n.userName,n.userName);break;case 2:sinclo.chatApi.opUserName=n.userName,t=""}!1===scl_check.isset(t)&&(t="ãªãã¬ã¼ã¿ã¼"),scl_check.escape_html(t),t!=oldOpUser&&sinclo.chatApi.createNotifyMessage(t+"ãå¥å®¤ãã¾ãã"),oldOpUser=t,sinclo.chatApi.disableAllButtons(),window.sincloInfo.contract.chat&&"true"===sinclo_storage.s.get("mannedRequestFlg")&&common.hasGA()&&n.tabId===userInfo.tabId&&common.callGA("manualChat",sinclo.chatApi.opUserName,1),sinclo.chatApi.operatorFileReceiver.on()},chatEndResult:function(e){JSON.parse(e);this.chatApi.online=!1,sinclo_storage.s.set("operatorEntered",!1),sinclo_storage.s.set("chatAct",!1),sinclo_storage.l.set("leaveFlg","true"),sinclo_storage.s.set("initialNotification","true"),this.unsetOperatorInfoForIcon(),sinclo.scenarioApi.isProcessing()&&sinclo.scenarioApi.isScenarioLFDisabled()&&sinclo.chatApi.showMiniMessageArea();var t=sinclo.chatApi.opUser;if(!1===scl_check.isset(t)&&(t="ãªãã¬ã¼ã¿ã¼"),scl_check.escape_html(t),sinclo.chatApi.createNotifyMessage(t+"ãéå®¤ãã¾ãã"),sessionStorage.removeItem("chatEmit"),oldOpUser="",sinclo.chatApi.enableAllButtons(),sinclo.scenarioApi.isProcessing()||sinclo.scenarioApi._hearing._disableAllHearingMessageInput(),$(".sinclo_re:not(.hearing_msg) input[name^='sinclo-radio']:not(.end-disabled,.previous-selectable-button)").prop("disabled",!1).removeClass("onetime-disabled").parent().css({opacity:"","pointer-events":""}),window.sincloInfo.contract.useCogmoAttendApi){var n={cn:"sinclo_re",message:window.sincloInfo.messages[0].activity.message,chatId:window.sincloInfo.messages[0].id,isBot:!0};sinclo.chatApi.createMessageUnread(n)}},chatMessageData:function(e){var n=JSON.parse(e);if(n.token!==common.token)return!1;scl_check.isset(n.chat)&&scl_check.isset(n.chat.historyId)&&(this.chatApi.historyId=n.chat.historyId),0===Object.keys(n.chat.messages).length&&0<sinclo.chatApi.store.get().length&&(n.chat.messages=sinclo.chatApi.store.get()),scl_check.isset(sinclo_storage.s.get("chatEmit"))&&"true"===sinclo_storage.s.get("chatEmit")&&(sinclo.chatApi.saveFlg=!0);var t="object"==typeof n.chat.messages?Object.keys(n.chat.messages):[],i=null,o=!0,s=0,a=!1,r=!1;for(var c in n.chat.messages){if(!n.chat.messages.hasOwnProperty(c))break;var l,d=n.chat.messages[c];if(1===Number(d.messageType)&&(r=!(sinclo.chatApi.saveFlg=!0)),Number(d.messageType)<=390){var p="sinclo_re",u=!1;switch(Number(d.messageType)){case 1:case 13:case 14:case 30:p="sinclo_se";break;case 12:case 36:p=sinclo.scenarioApi._hearing.disableRestoreMessage(d.chatId)?"sinclo_se":"cancelable sinclo_se",u=!0;break;case 33:case 34:case 35:case 37:case 38:case 39:case 43:case 44:case 47:case 48:case 50:case 51:case 53:case 54:p="sinclo_se",u=!0;break;case 90:p="sinclo_se skip_input",u=!0;break;case 300:case 302:p="sinclo_re diagram_msg";break;case 301:p="sinclo_se diagram_msg"}if(0===Number(d.messageReadFlg)&&d.messageType===sinclo.chatApi.messageType.company&&this.chatApi.unread++,3===Number(d.messageType)&&"chatId"in d&&scl_check.isset(window.sincloInfo.messages)){for(var g=!1,h=0;h<window.sincloInfo.messages.length;h++)if(Number(window.sincloInfo.messages[h].id)===Number(d.chatId)){var m=window.sincloInfo.messages[h].activity.conditions,f=!1;if(Object.keys(m).forEach(function(e,t,n){7===Number(e)&&(f=!0)}),f)continue;this.chatApi.autoMessages.push(d.chatId,{chatId:d.chatId,message:d.message,created:d.created,applied:!!d.applied&&d.applied}),g=!0;break}if(!g&&d.id!==d.chatId){window.sinclo.chatApi.autoMessages.delete(d.chatId);continue}}if(3===Number(d.messageType)||4===Number(d.messageType)||7===Number(d.messageType)||21===Number(d.messageType)||22===Number(d.messageType)||23===Number(d.messageType)||27===Number(d.messageType)||41===Number(d.messageType)||42===Number(d.messageType)||46===Number(d.messageType)||45===Number(d.messageType)||55===Number(d.messageType)||81===Number(d.messageType)||82===Number(d.messageType)||300===Number(d.messageType)||302===Number(d.messageType))l=scl_check.isset(common.getWidgetSettings().showAutomessageName)&&2===common.getWidgetSettings().showAutomessageName?"":common.getWidgetSettings().subTitle,22===Number(d.messageType)||41===Number(d.messageType)||42===Number(d.messageType)||46===Number(d.messageType)||45===Number(d.messageType)||55===Number(d.messageType)?p="hearing_msg "+p:s=0;else if(Number(d.messageType)===sinclo.chatApi.messageType.company)switch(p="sinclo_re",common.getWidgetSettings().showOpName){case 1:l=sinclo.chatApi.opUserName;break;case 2:l=common.getWidgetSettings().subTitle;break;case 3:l="";break;default:l=1===common.getWidgetSettings().showName?sinclo.chatApi.opUserName:common.getWidgetSettings().subTitle}if(!sinclo.scenarioApi.isProcessing()||scl_check.isset(sinclo_storage.s.get("operatorEntered"))&&"false"!==sinclo_storage.s.get("operatorEntered")||!d.showTextarea||"1"!==d.showTextarea?!sinclo.scenarioApi.isProcessing()||scl_check.isset(sinclo_storage.s.get("operatorEntered"))&&"false"!==sinclo_storage.s.get("operatorEntered")||!d.showTextarea||"2"!==d.showTextarea||sinclo.hideTextarea():sinclo.displayTextarea(),0<=c.indexOf("_")&&"applied"in d&&d.applied)continue;if(sinclo.scenarioApi.isProcessing())try{a||0!==s?0===s&&8!==Number(d.messageType)&&sinclo.scenarioApi._hearing._disableAllHearingMessageInput():a=!0}catch(e){}finally{a&&8!==Number(d.messageType)&&sinclo.scenarioApi.isProcessing()&&sinclo.scenarioApi._hearing.isHearingMode()&&0===Number(sinclo.scenarioApi._hearing._getCurrentSeq())&&sinclo.scenarioApi._hearing._disableAllHearingMessageInput()}if(6===Number(d.messageType)||27===Number(d.messageType))if(1===d.deleteFlg){var v={message:d.message,name:l,chatId:d.chatId,cn:p,isHearingAnswer:u,answerCount:s};this.chatApi.createMessage(v,20<Number(d.messageType)&&Number(d.messageType)<29||40<Number(d.messageType)&&Number(d.messageType)<56)}else this.chatApi.createSendFileMessage(JSON.parse(d.message),l);else{if(8===Number(d.messageType))continue;if(19===Number(d.messageType)||190===Number(d.messageType))if(scl_check.isJSON(d.message)){var b=JSON.parse(d.message);this.chatApi.createSentFileMessage(b.comment,b.downloadUrl,b.extension)}else{v={message:d.message,name:l,chatId:d.chatId,cn:"sinclo_se",isHearingAnswer:u,answerCount:s};this.chatApi.createMessage(v,20<Number(d.messageType)&&Number(d.messageType)<29||40<Number(d.messageType)&&Number(d.messageType)<56||Number(190===d.messageType))}else if(40===Number(d.messageType)){if(!sinclo.scenarioApi.isProcessing()||Object.keys(n.chat.messages).indexOf(c)!==Object.keys(n.chat.messages).length-1)continue;var y=JSON.parse(d.message);sinclo.chatApi.createForm(!0,y.target,y.message,sinclo.scenarioApi._bulkHearing.handleFormOK),sinclo.displayTextarea(d)}else if(31===Number(d.messageType)||32===Number(d.messageType))this.chatApi.createFormFromLog(JSON.parse(d.message));else if(81===Number(d.messageType))-1!==d.message.indexOf("search-title")&&(r=!0),this.chatApi.createCogmoAttendBotMessage("sinclo_re",d.message,l,!1,r),sinclo.chatApi.disableCogmoButtons(),sinclo.chatApi.addStyleCogmoSearchButtons();else if(82===Number(d.messageType))this.chatApi.createCogmoAttendBotMessage("sinclo_re",d.message,l,!0),sinclo.chatApi.disableCogmoButtons(),sinclo.chatApi.addStyleCogmoSearchButtons();else if(41===Number(d.messageType)){var x=JSON.parse(d.message);this.chatApi.addPulldown("hearing_msg sinclo_re",x.message,l,x.settings),sinclo.scenarioApi._hearing.disableRestoreMessage(d.chatId)&&sinclo.scenarioApi._hearing._disableAllHearingMessageInput()}else if(42===Number(d.messageType)){var _=JSON.parse(d.message);this.chatApi.addCalendar("hearing_msg sinclo_re",_.message,_.settings,void 0,_.cancelReservation,_.cancelMessage),sinclo.scenarioApi._hearing.disableRestoreMessage(d.chatId)&&sinclo.scenarioApi._hearing._disableAllHearingMessageInput()}else if(46===Number(d.messageType)){_=JSON.parse(d.message);this.chatApi.addButton("hearing_msg sinclo_re",_.message,_.settings),sinclo.scenarioApi._hearing.disableRestoreMessage(d.chatId)&&sinclo.scenarioApi._hearing._disableAllHearingMessageInput()}else if(45===Number(d.messageType)){var w=JSON.parse(d.message);this.chatApi.addCarousel("",w.message,w.settings),sinclo.scenarioApi._hearing.disableRestoreMessage(d.chatId)&&sinclo.scenarioApi._hearing._disableAllHearingMessageInput()}else if(49===Number(d.messageType)){var k=JSON.parse(d.message);this.chatApi.addButtonUI("hearing_msg sinclo_re",k.message,k.settings),sinclo.scenarioApi._hearing.disableRestoreMessage(d.chatId)&&sinclo.scenarioApi._hearing._disableAllHearingMessageInput()}else if(52===Number(d.messageType)){var T=JSON.parse(d.message);this.chatApi.addCheckbox("hearing_msg sinclo_re",T.message,T.settings),sinclo.scenarioApi._hearing.disableRestoreMessage(d.chatId)&&sinclo.scenarioApi._hearing._disableAllHearingMessageInput()}else if(55===Number(d.messageType)){var S=JSON.parse(d.message);this.chatApi.addRadioButton("hearing_msg sinclo_re",S.message,S.settings),sinclo.scenarioApi._hearing.disableRestoreMessage(d.chatId)&&sinclo.scenarioApi._hearing._disableAllHearingMessageInput()}else if(57===Number(d.messageType)){v={message:d.message,name:l,chatId:d.chatId,cn:"sinclo_se",isHearingAnswer:u,answerCount:s};this.chatApi.createMessage(v,20<Number(d.messageType)&&Number(d.messageType)<29||40<Number(d.messageType)&&Number(d.messageType)<56)}else if(scl_check.includes([sinclo.scenarioApi._inputForm.messageType.answer,sinclo.scenarioApi._changeAddress.messageType.answer],Number(d.messageType))){y=JSON.parse(d.message);if(sinclo.chatApi.addScenarioInputForm(y),scl_check.isset(y.answer)){var I=0;Object.keys(n.chat.messages).some(function(e,t){if(-1===e.indexOf("_"))return e===c||void I++}),sinclo.chatApi.disableAllInputForm(y,I)}}else if(300===Number(d.messageType)){var A=scl_check.isJSON(d.message)?JSON.parse(d.message):d.message,C={diagramId:A.did,sourceNodeId:A.nid,attrs:{actionParam:{btnType:A.type}}};sinclo.diagramApi.branch.showMessage(C,A.message,A.selectionMap,A.labels,A.customizeDesign)}else if(302===Number(d.messageType)){var B=scl_check.isJSON(d.message)?JSON.parse(d.message):d.message;sinclo.diagramApi.speakText.showMessageProcess(B.message)}else if(303!==Number(d.messageType)){if(1==d.noticeFlg&&1==o&&1==sincloInfo.chat.settings.in_flg){var N=new Date,D=new Date(sinclo_storage.s.get("notificationTime")),M=(N.getTime()-D.getTime())/1e3;for(y=sincloInfo.chat.settings.initial_notification_message?JSON.parse(sincloInfo.chat.settings.initial_notification_message):{},h=0;h<Object.keys(y).length;h++)sinclo_storage.s.get("callingMessageSeconds")<y[h].seconds&&function(t){var e=setTimeout(function(){if("true"!==sinclo_storage.s.get("operatorEntered")&&""!==y[t].message&&"true"===sinclo_storage.l.get("callChatMessage")){l=2===common.getWidgetSettings().showAutomessageName?"":common.getWidgetSettings().subTitle;var e={message:y[t].message,name:l,chatId:0,cn:"sinclo_re",isHearingAnswer:u,answerCount:s,isBot:!0};sinclo.chatApi.createMessageUnread(e),sinclo.chatApi.scDown(),emit("sendInitialNotificationChat",{messageList:e={siteKey:n.siteKey,tabId:n.tabId,sincloSessionId:n.sincloSessionId,chatMessage:y[t].message,messageType:sinclo.chatApi.messageType.notification,messageDistinction:d.messageDistinction,mUserId:d.userId,userId:d.visitorsId}})}sinclo_storage.s.set("callingMessageSeconds",y[t].seconds)},1e3*(y[t].seconds-M));sinclo.forCallingTimerArray.push(e),o=!1}(h)}var F=2===Number(d.messageType),E=3<=Number(d.messageType)&&Number(d.messageType)<=9||20<Number(d.messageType)&&Number(d.messageType)<29||40<=Number(d.messageType)&&Number(d.messageType)<50;if(22==d.messageType&&scl_check.isJSON(d.message)){var O=JSON.parse(d.message),P=O.settings;switch(O=O.message,Number(P.confirmRadioStyle)){case 1:sinclo.chatApi.addRadioButton(p,O,P),sinclo.scenarioApi.isProcessing()||sinclo.scenarioApi._hearing._disableAllHearingMessageInput();break;case 2:sinclo.chatApi.addButtonUI(p,O,P),sinclo.scenarioApi.isProcessing()||sinclo.scenarioApi._hearing._disableAllHearingMessageInput()}d.message="[]"}else this.chatApi.createMessage({cn:p,message:d.message,name:l,chatId:d.chatId,isOp:F,isBot:E,isHearingAnswer:sinclo.scenarioApi._hearing.isHearingAnswer(d),answerCount:sinclo.scenarioApi._hearing.isHearingAnswer(d)?s:0},20<Number(d.messageType)&&Number(d.messageType)<29)}}if(22!==Number(d.messageType)&&23!==Number(d.messageType)||!d.message.match(/\[\]/)||null!==i){if(41===Number(d.messageType)||45===Number(d.messageType)||49===Number(d.messageType)||52===Number(d.messageType)||55===Number(d.messageType))i=$("sinclo-chat").find("div.sinclo-scenario-msg:last");else if(null!==i){if(0<i.find('[type="radio"]').length){i.find('[type="radio"], select option').attr("name");var W=i.find("label"),H="";W.each(function(e,t){t.innerText.trim()===d.message&&(H=$(t).attr("for"))}),""!==H&&$("#"+H).prop("checked",!0)}else if(0<i.find("select").length)i.find("select").val(d.message);else if(0<i.find(".carousel-container").length)i.find(".hearing_msg").each(function(e,t){$(this).find('[id^="slide_sinclo-carousel"]').prop("disabled",!0).css("opacity",.5),$(this).find('[id^="slide_sinclo-carousel"]').prop("disabled",!0).css("opacity",.5)});else if(0<i.find(".sinclo-button-ui").length)i.find(".sinclo-button-ui").each(function(e,t){$(this).text()===d.message&&$(this).addClass("selected")});else if(0<i.find(".sinclo-checkbox").length){var j=JSON.parse(d.message);j.message.split(j.separator).forEach(function(n){i.find(".sinclo-checkbox").each(function(e,t){$(this).text()===n&&$(this).find('[type="checkbox"]').prop("checked",!0)})})}i=null}}else i=$("sinclo-chat").find("div:last-child");if(u&&void 0!==sinclo.scenarioApi.get("s_targetChatId"))for(h=0;h<sinclo.scenarioApi.get("s_targetChatId").length;h++)d.chatId===sinclo.scenarioApi.get("s_targetChatId")[h]&&s++;this.chatApi.scDown()}else{var R="";switch("userName"in n.chat.messages[c]&&(sinclo.chatApi.opUser=n.chat.messages[c].userName),common.getWidgetSettings().showName){case 1:R=d.receptionName?(sinclo.chatApi.opUser=d.receptionName,sinclo.chatApi.opUserName=d.receptionName,d.receptionName):(sinclo.chatApi.opUser=d.userName,sinclo.chatApi.opUserName=d.userName,d.userName);break;case 2:sinclo.chatApi.opUserName=sinclo.chatApi.opUser,R=sinclo.chatApi.opUser=""}""===R&&(R="ãªãã¬ã¼ã¿ã¼"),scl_check.escape_html(R),Number(d.messageType)===sinclo.chatApi.messageType.start&&(this.chatApi.online=!0,this.chatApi.createNotifyMessage(R+"ãå¥å®¤ãã¾ãã"),sinclo.chatApi.disableAllButtons()),Number(d.messageType)===sinclo.chatApi.messageType.end&&(this.chatApi.online=!1,this.chatApi.createNotifyMessage(R+"ãéå®¤ãã¾ãã"),sinclo.chatApi.opUser="",sinclo.chatApi.enableAllButtons(),sinclo.scenarioApi.isProcessing()||sinclo.scenarioApi._hearing._disableAllHearingMessageInput(),$(".sinclo_re:not(.hearing_msg) input[name^='sinclo-radio']:not(.end-disabled,.previous-selectable-button)").prop("disabled",!1).removeClass("onetime-disabled").parent().css({opacity:"","pointer-events":""}))}}3===Number(common.getWidgetSettings().showTiming)&&0<Object.keys(window.sinclo.chatApi.autoMessages.get(!0)).length&&(common.widgetHandler.saveShownFlg(),window.sincloInfo.widgetDisplay=!0,common.widgetHandler.show(),"close"==sinclo_storage.l.get("textareaOpend")?sinclo.hideTextarea():sinclo.displayTextarea());if(this.chatApi.online||sinclo.trigger.flg||preventWithdrawalOverlay.isActive()||sinclo.trigger.init(),sinclo.scenarioApi.isProcessing())if(!t||$.isArray(t)&&0===t.length){var z=sinclo.scenarioApi.get(sinclo.scenarioApi._lKey.scenarioId),L=sinclo.scenarioApi.get(sinclo.scenarioApi._lKey.scenarios);sinclo.scenarioApi.reset(),sinclo.scenarioApi.init(z,L),sinclo.scenarioApi.begin(z,L,!1)}else sinclo.scenarioApi.init(null,null),sinclo.scenarioApi.begin(null,null,!1);var q=sinclo.chatApi.operatorFileReceiver;q.isWaiting()&&q.doSendFileAction(),("true"===sinclo_storage.s.get("nextNodeKey")||sinclo.diagramApi.sinclo_storage.isWaitingProcess()&&scl_check.isset(sinclo.chatApi.historyId)&&scl_check.isset(n.chat.messages))&&(sinclo.diagramApi.sinclo_storage.isWaitingProcess(),sinclo.diagramApi.executor.execute(),sessionStorage.removeItem("nextNodeKey")),sinclo.chatApi.showUnreadCnt(),sinclo.chatApi.handleBrowserZoom()},isScenarioCustomerMessage:function(e){return e.messageType===sinclo.chatApi.messageType.scenario.customer.radio||e.messageType===sinclo.chatApi.messageType.scenario.customer.pulldown||e.messageType===sinclo.chatApi.messageType.scenario.customer.calendar||e.messageType===sinclo.chatApi.messageType.scenario.customer.carousel||e.messageType===sinclo.chatApi.messageType.scenario.customer.button||e.messageType===sinclo.chatApi.messageType.scenario.customer.buttonUI||e.messageType===sinclo.chatApi.messageType.scenario.customer.checkbox||e.messageType===sinclo.chatApi.messageType.scenario.customer.reInputRadio||e.messageType===sinclo.chatApi.messageType.scenario.customer.reInputPulldown||e.messageType===sinclo.chatApi.messageType.scenario.customer.reInputCarousel||e.messageType===sinclo.chatApi.messageType.scenario.customer.reInputCalendar||e.messageType===sinclo.chatApi.messageType.scenario.customer.reInputButtonUI||e.messageType===sinclo.chatApi.messageType.scenario.customer.reInputCheckbox||e.messageType===sinclo.chatApi.messageType.scenario.customer.reInputButton||e.messageType===sinclo.scenarioApi._inputForm.messageType.answer},isScenarioMessage:function(e){return e.messageType===sinclo.chatApi.messageType.scenario.message.text||e.messageType===sinclo.chatApi.messageType.scenario.message.hearing||e.messageType===sinclo.chatApi.messageType.scenario.message.radio||e.messageType===sinclo.chatApi.messageType.scenario.message.radio||e.messageType===sinclo.chatApi.messageType.scenario.message.pulldown||e.messageType===sinclo.chatApi.messageType.scenario.message.calendar||e.messageType===sinclo.chatApi.messageType.scenario.message.carousel||e.messageType===sinclo.chatApi.messageType.scenario.message.button||e.messageType===sinclo.chatApi.messageType.scenario.message.buttonUI||e.messageType===sinclo.chatApi.messageType.scenario.message.checkbox||e.messageType===sinclo.chatApi.messageType.scenario.message.buttonUI||e.messageType===sinclo.chatApi.messageType.scenario.message.checkbox||e.messageType===sinclo.chatApi.messageType.scenario.message.selection||e.messageType===sinclo.chatApi.messageType.scenario.message.receiveFile},sendChatResult:function(e){var n=JSON.parse(e);if(sinclo.scenarioApi.isProcessing()&&8!==n.messageType){var t=sinclo.scenarioApi.get("s_targetChatId");void 0===t&&(t=[]),n.messageType!==sinclo.chatApi.messageType.linkClick&&(t.push(n.chatId),sinclo.scenarioApi.set("s_targetChatId",t))}common.chatBotTypingRemove();var i=sinclo.chatApi.isBotMessage(n.messageType);if(n.sincloSessionId!==userInfo.sincloSessionId&&n.tabId!==userInfo.tabId)return!1;var o,s=document.getElementById("sincloChatMessage"),a="";if(n.ret){if(n.messageType!==sinclo.chatApi.messageType.customer||"true"===sinclo_storage.s.get("chatAct")||n.matchAutoSpeech||sinclo_storage.s.set("chatAct",!0),n.messageType===sinclo.chatApi.messageType.customer&&"true"!==sinclo_storage.s.get("chatEmit")&&sinclo_storage.s.set("chatEmit",!0),null!==sinclo.chatApi.sendErrCatchTimer&&clearTimeout(sinclo.chatApi.sendErrCatchTimer),n.messageType===sinclo.chatApi.messageType.company)switch(this.setChatIdWidthOperatorId(n),o="sinclo_re",sinclo.chatApi.call(),common.getWidgetSettings().showOpName){case 1:a=sinclo.chatApi.opUserName;break;case 2:a=common.getWidgetSettings().subTitle;break;case 3:a="";break;default:a=1===common.getWidgetSettings().showName?sinclo.chatApi.opUserName:common.getWidgetSettings().subTitle}else n.messageType===sinclo.chatApi.messageType.scenario.customer.hearing||n.messageType===sinclo.chatApi.messageType.scenario.customer.reInputText?sinclo.scenarioApi._hearing._disableGrantCancelAbleFlg?(o="sinclo_se",sinclo.scenarioApi._hearing._disableGrantCancelAbleFlg=!1):(o="cancelable sinclo_se",s.value=""):n.messageType===sinclo.chatApi.messageType.scenario.customer.hearingConfirm?(o="sinclo_se",s.value=""):this.isScenarioCustomerMessage(n)?(o="sinclo_se",s.value=""):n.messageType===sinclo.chatApi.messageType.customer||n.messageType===sinclo.chatApi.messageType.scenario.customer.selection||n.messageType===sinclo.chatApi.messageType.scenario.customer.answerBulkHearing?(o="sinclo_se",s.value=""):n.messageType===sinclo.chatApi.messageType.cogmo.message||n.messageType===sinclo.chatApi.messageType.cogmo.feedback?(o="sinclo_re",a=2===common.getWidgetSettings().showAutomessageName?"":common.getWidgetSettings().subTitle,s.value=""):n.messageType===sinclo.chatApi.messageType.scenario.customer.skipHearing?o="sinclo_se skip_input":n.messageType===sinclo.chatApi.messageType.diagram.customer.branch&&(o="sinclo_se diagram_msg");if(n.messageType===sinclo.chatApi.messageType.auto||n.messageType===sinclo.chatApi.messageType.autoSpeech||this.isScenarioMessage(n)||n.messageType===sinclo.chatApi.messageType.diagram.message.branch||n.messageType===sinclo.chatApi.messageType.diagram.message.text){if(n.messageType!==sinclo.chatApi.messageType.auto&&"true"===sinclo_storage.s.get("requestFlg")&&"true"===sinclo_storage.s.get("autoChatFlg")&&(common.hasGA()&&common.callGA("autoChat",location.href,1),sinclo_storage.s.set("autoChatFlg",!1)),n.tabId===userInfo.tabId){if(scl_check.smartphone()&&sinclo.scenarioApi.isProcessing()){var r=document.getElementById("miniSincloChatMessage"),c=document.getElementById("sincloChatMessage");c&&(c.disabled=!1),r&&(r.disabled=!1)}return sinclo.scenarioApi._bulkHearing.isInMode()||n.messageType===sinclo.diagramApi.messageType.message.branch||n.messageType===sinclo.diagramApi.messageType.message.text||common.chatBotTypingCall(n),!1}if(n.messageType===sinclo.chatApi.messageType.autoSpeech)o="sinclo_re",a=2===common.getWidgetSettings().showAutomessageName?"":common.getWidgetSettings().subTitle;else{if(n.messageType===sinclo.chatApi.messageType.scenario.message.text||n.messageType===sinclo.chatApi.messageType.scenario.message.hearing||n.messageType===sinclo.chatApi.messageType.scenario.message.selection||n.messageType===sinclo.chatApi.messageType.auto&&sinclo.scenarioApi._reservation.isState(sinclo.scenarioApi._reservation._state.confirm)){if(o="sinclo_re",n.messageType!==sinclo.chatApi.messageType.scenario.message.hearing&&n.messageType!==sinclo.chatApi.messageType.scenario.message.selection||(o+=" hearing_msg"),a=2===common.getWidgetSettings().showAutomessageName?"":common.getWidgetSettings().subTitle,sinclo.scenarioApi._hearing._isConfirming()?(sinclo.scenarioApi._hearing._endInputProcess(),sinclo.scenarioApi._hearing._showConfirmMessage(!0)):sinclo.scenarioApi._reservation.isState(sinclo.scenarioApi._reservation._state.confirm)&&(scl_check.isset(sinclo.scenarioApi._reservation._parent)&&(sinclo.scenarioApi._reservation._parent=sinclo.scenarioApi),sinclo.scenarioApi._reservation._process()),n.messageType===sinclo.chatApi.messageType.scenario.message.hearing)try{if(v=JSON.parse(n.chatMessage),Object.hasOwn(v.settings,"radioStyle"))return 1==v.settings.radioStyle?sinclo.chatApi.addRadioButton(o,v.message,v.settings):2==v.settings.radioStyle&&sinclo.chatApi.addButtonUI(o,v.message,v.settings),sinclo.chatApi.scDown(),!1}catch(e){}return sinclo.chatApi.createMessage({cn:o,message:n.chatMessage,name:a,chatId:n.chatId,isBot:i},!0),sinclo.chatApi.scDown(),!1}if(n.messageType===sinclo.chatApi.messageType.scenario.message.pulldown){o="sinclo_re",a=2===common.getWidgetSettings().showAutomessageName?"":common.getWidgetSettings().subTitle,sinclo.scenarioApi._reservation.isState(sinclo.scenarioApi._reservation._state.timeDetail)&&(scl_check.isset(sinclo.scenarioApi._hearing._parent)&&sinclo.scenarioApi._hearing._init(sinclo.scenarioApi),scl_check.isset(sinclo.scenarioApi._reservation._parent)&&sinclo.scenarioApi._reservation._init(sinclo.scenarioApi),sinclo.scenarioApi._reservation._process(!0));var l=JSON.parse(n.chatMessage);return this.chatApi.addPulldown("hearing_msg sinclo_re",l.message,a,l.settings),sinclo.chatApi.scDown(),!1}if(n.messageType===sinclo.chatApi.messageType.scenario.message.calendar){o="sinclo_re",a=2===common.getWidgetSettings().showAutomessageName?"":common.getWidgetSettings().subTitle;var d=!1,p="";sinclo.scenarioApi._reservation.isState(sinclo.scenarioApi._reservation._state.date)&&(sinclo.scenarioApi._hearing._init(sinclo.scenarioApi),sinclo.scenarioApi._reservation._init(sinclo.scenarioApi),sinclo.scenarioApi._reservation._process(!0),d=sinclo.scenarioApi._reservation.isCanCancelReservation(),p=sinclo.scenarioApi._reservation._getCancelMessage());var u=JSON.parse(n.chatMessage);return this.chatApi.addCalendar("hearing_msg sinclo_re",u.message,u.settings,void 0,d,p),sinclo.chatApi.scDown(),!1}if(n.messageType===sinclo.chatApi.messageType.scenario.message.carousel){o="sinclo_re",a=2===common.getWidgetSettings().showAutomessageName?"":common.getWidgetSettings().subTitle,sinclo.scenarioApi._reservation.isState(sinclo.scenarioApi._reservation._state.staff)&&(sinclo.scenarioApi._hearing._init(sinclo.scenarioApi),sinclo.scenarioApi._reservation._init(sinclo.scenarioApi),sinclo.scenarioApi._reservation._process(!0));var g=JSON.parse(n.chatMessage);return this.chatApi.addCarousel("",g.message,g.settings),sinclo.chatApi.scDown(),!1}if(n.messageType===sinclo.chatApi.messageType.scenario.message.button){o="sinclo_re",a=2===common.getWidgetSettings().showAutomessageName?"":common.getWidgetSettings().subTitle;var h=JSON.parse(n.chatMessage);return this.chatApi.addButton("hearing_msg sinclo_re",h.message,h.settings),sinclo.chatApi.scDown(),!1}}if(n.messageType===sinclo.chatApi.messageType.scenario.message.buttonUI){o="sinclo_re",a=2===common.getWidgetSettings().showAutomessageName?"":common.getWidgetSettings().subTitle,sinclo.scenarioApi._reservation.isState(sinclo.scenarioApi._reservation._state.timeSummary)&&(sinclo.scenarioApi._hearing._init(sinclo.scenarioApi),sinclo.scenarioApi._reservation._init(sinclo.scenarioApi),sinclo.scenarioApi._reservation._process(!0));h=JSON.parse(n.chatMessage);return this.chatApi.addButtonUI("hearing_msg sinclo_re",h.message,h.settings),sinclo.chatApi.scDown(),!1}if(n.messageType===sinclo.chatApi.messageType.scenario.message.checkbox){o="sinclo_re",a=2===common.getWidgetSettings().showAutomessageName?"":common.getWidgetSettings().subTitle;var m=JSON.parse(n.chatMessage);return this.chatApi.addCheckbox("hearing_msg sinclo_re",m.message,m.settings),sinclo.chatApi.scDown(),!1}if(n.messageType===sinclo.chatApi.messageType.scenario.message.radio){o="sinclo_re",a=2===common.getWidgetSettings().showAutomessageName?"":common.getWidgetSettings().subTitle;var f=JSON.parse(n.chatMessage);return this.chatApi.addRadioButton("hearing_msg sinclo_re",f.message,f.settings),sinclo.chatApi.scDown(),!1}if(n.messageType===sinclo.chatApi.messageType.scenario.message.receiveFile)return this.chatApi.createSendFileMessage(JSON.parse(n.chatMessage),common.getWidgetSettings().subTitle),this.chatApi.scDown(),!1;if(n.shownMessage||n.messageType!==sinclo.chatApi.messageType.diagram.message.branch){if(n.shownMessage||n.messageType!==sinclo.chatApi.messageType.diagram.message.text)return!1;var v=scl_check.isJSON(n.chatMessage)?JSON.parse(n.chatMessage).message:n.chatMessage.message;return sinclo.diagramApi.speakText.showMessageProcess(v),!1}var b=scl_check.isJSON(n.chatMessage)?JSON.parse(n.chatMessage):chat.message,y={diagramId:b.did,sourceNodeId:b.nid,attrs:{actionParam:{btnType:b.type}}};return sinclo.diagramApi.branch.showMessage(y,b.message,b.selectionMap,b.labels,b.customizeDesign),!1}if(n.messageType===sinclo.chatApi.messageType.diagram.customer.branch&&n.tabId!==userInfo.tabId&&sinclo.chatApi.disableAllButtonsSlightly(),n.messageType===sinclo.chatApi.messageType.sendFile||n.messageType===sinclo.chatApi.messageType.scenario.message.receiveFile)return sinclo.chatApi.call(),this.chatApi.createSendFileMessage(JSON.parse(n.chatMessage),common.getWidgetSettings().subTitle),this.chatApi.scDown(),!1;if(n.messageType===sinclo.chatApi.messageType.scenario.customer.sendFile||n.messageType===sinclo.chatApi.messageType.operatorReceiveFile){if(common.chatBotTypingCall(n),scl_check.isJSON(n.chatMessage)){var x=JSON.parse(n.chatMessage);if(this.chatApi.createSentFileMessage(x.comment,x.downloadUrl,x.extension),n.tabId!==userInfo.tabId){$("#sincloBox sinclo-chat li.recv_file_left");0<$("#sincloBox sinclo-chat li.recv_file_left").length&&$("#sincloBox sinclo-chat li.recv_file_left").parent().remove()}}else o="sinclo_se",this.chatApi.createMessage({cn:o,message:n.chatMessage,name:"",chatId:n.chatId,isBot:i});return this.chatApi.scDown(),!1}if(n.messageType===sinclo.chatApi.messageType.scenario.customer.reservation)return common.chatBotTypingCall(n),o="sinclo_se",this.chatApi.createMessage({cn:o,message:n.chatMessage,name:"",chatId:n.chatId,isBot:i}),this.chatApi.scDown(),!1;if(n.messageType===sinclo.chatApi.messageType.scenario.message.returnBulkHearing){var _=JSON.parse(n.chatMessage);return common.chatBotTypingRemove(),sinclo.scenarioApi.isProcessing()&&sinclo.chatApi.createForm(!0,_.target,_.message,sinclo.scenarioApi._bulkHearing.handleFormOK),!1}if(n.messageType===sinclo.chatApi.messageType.scenario.customer.noModBulkHearing||n.messageType===sinclo.chatApi.messageType.scenario.customer.modifyBulkHearing)return this.chatApi.createFormFromLog(JSON.parse(n.chatMessage)),this.chatApi.scDown(),setTimeout(function(){common.chatBotTyping(n)},800),n.tabId!==userInfo.tabId&&$("ul#chatTalk li.sinclo_re.sinclo_form:last-of-type").remove(),!1;if(scl_check.includes([sinclo.scenarioApi._inputForm.messageType.answer,sinclo.scenarioApi._changeAddress.messageType.answer],n.messageType))return common.chatBotTypingCall(n),sinclo.chatApi.saveFlg||n.tabId!==userInfo.tabId?n.tabId!==userInfo.tabId&&(sinclo.chatApi.autoMessages.unset(),sinclo.chatApi.saveFlg=!0,sinclo.scenarioApi._reservation.isInMode()||sinclo.chatApi.disableAllInputForm(JSON.parse(n.chatMessage),$("#chatTalk li").length-1)):sinclo.executeForNotHavingConnectionMessageStack(),!1;if(n.messageType===sinclo.chatApi.messageType.cogmo.message||n.messageType===sinclo.chatApi.messageType.cogmo.feedback){var w={cn:o,message:n.message,name:a,chatId:n.chatId,isSearchMsg:n.isSearchMsg};return this.chatApi.createMessageUnread(w,!1,!0,n.isFeedbackMsg,n.isSearchMsg),n.isSearchMsg?this.chatApi.scDownCogmoSearch():this.chatApi.scDown(),!1}if(n.chatMessage.did&&n.chatMessage.nextNodeId){if("callOperator"===n.chatMessage.nextNodeId&&!0===n.notification&&n.tabId===userInfo.tabId){sinclo_storage.s.set("notificationTime",n.created),sinclo_storage.l.set("callChatMessage",!0);_=sincloInfo.chat.settings.initial_notification_message?JSON.parse(sincloInfo.chat.settings.initial_notification_message):{};for(var k=0;k<Object.keys(_).length;k++)!function(t){var e=setTimeout(function(){if("true"!==sinclo_storage.s.get("operatorEntered")&&""!==_[t].message){var e="";e=2===common.getWidgetSettings().showAutomessageName?"":common.getWidgetSettings().subTitle,sinclo.chatApi.createMessageUnread({cn:"sinclo_re",message:_[t].message,name:e,chatId:n.chatId,isBot:!0}),sinclo.chatApi.scDown(),emit("sendInitialNotificationChat",{messageList:{siteKey:n.siteKey,tabId:n.tabId,sincloSessionId:n.sincloSessionId,chatMessage:_[t].message,messageType:sinclo.chatApi.messageType.notification,messageDistinction:n.messageDistinction,chatId:n.chatId,mUserId:n.mUserId,userId:n.userId}})}sinclo_storage.s.set("callingMessageSeconds",_[t].seconds)},1e3*_[t].seconds);sinclo.forCallingTimerArray.push(e)}(k);return!1}var T=n.chatMessage.nextNodeId;return"callOperator"!==n.chatMessage.nextNodeId&&sinclo.chatApi.createMessageUnread({cn:o,message:n.chatMessage.message,name:a,chatId:n.chatId},!1,!1,!1),sinclo.chatApi.scDown(n),scl_check.isset(n.chatMessage.did)&&"manual"!==n.chatMessage.did&&n.tabId===userInfo.tabId&&(sinclo.diagramApi.executor.setDiagramId(n.chatMessage.did),sinclo.diagramApi.executor.setNext(n.chatMessage.did,T),sinclo.diagramApi.executor.execute()),sinclo.chatApi.saveFlg||n.tabId!==userInfo.tabId?n.tabId!==userInfo.tabId&&(sinclo.chatApi.autoMessages.unset(),sinclo.chatApi.saveFlg=!0):sinclo.executeForNotHavingConnectionMessageStack(),!1}if(n.messageType===sinclo.chatApi.messageType.sorry&&(o="sinclo_re",a=2===common.getWidgetSettings().showAutomessageName?"":common.getWidgetSettings().subTitle,sinclo.sorryMsgTimer&&clearTimeout(sinclo.sorryMsgTimer),common.chatBotTypingCall(n),sinclo.sorryMsgTimer=setTimeout(function(){return o="sinclo_re",sinclo.chatApi.call(),sinclo.chatApi.createMessage({cn:o,message:n.chatMessage,name:a,chatId:n.chatId,isBot:!0}),sinclo.chatApi.isShowChatReceiver()&&Number(n.messageType)===sinclo.chatApi.messageType.company?sinclo.chatApi.notify(n.chatMessage):sinclo.chatApi.scDown(),window.sincloInfo.contract.chat&&"true"!==sinclo_storage.s.get("sorryMessageFlg")&&("true"!==sinclo_storage.s.get("mannedRequestFlg")&&sinclo_storage.s.set("mannedRequestFlg",!0),sinclo_storage.s.set("sorryMessageFlg",!0),common.hasGA()&&n.tabId===userInfo.tabId&&common.callGA("sorryMsg",location.href,1)),sinclo.sorryMsgTimer=null,!1},3e3)),!0===n.notification&&n.tabId===userInfo.tabId){sinclo_storage.s.set("notificationTime",n.created),sinclo_storage.l.set("callChatMessage",!0);for(_=sincloInfo.chat.settings.initial_notification_message?JSON.parse(sincloInfo.chat.settings.initial_notification_message):{},k=0;k<Object.keys(_).length;k++)!function(t){var e=setTimeout(function(){if("true"!==sinclo_storage.s.get("operatorEntered")&&""!==_[t].message){var e="";e=2===common.getWidgetSettings().showAutomessageName?"":common.getWidgetSettings().subTitle,sinclo.chatApi.createMessageUnread({cn:"sinclo_re",message:_[t].message,name:e,chatId:n.chatId,isBot:!0}),sinclo.chatApi.scDown(),emit("sendInitialNotificationChat",{messageList:{siteKey:n.siteKey,tabId:n.tabId,sincloSessionId:n.sincloSessionId,chatMessage:_[t].message,messageType:sinclo.chatApi.messageType.notification,messageDistinction:n.messageDistinction,chatId:n.chatId,mUserId:n.mUserId,userId:n.userId}})}sinclo_storage.s.set("callingMessageSeconds",_[t].seconds)},1e3*_[t].seconds);sinclo.forCallingTimerArray.push(e)}(k)}if(n.messageType==sinclo.chatApi.messageType.notification)return!1;if(!n.hideMessage&&n.messageType!=sinclo.chatApi.messageType.sorry&&n.messageType!=sinclo.chatApi.messageType.linkClick&&n.messageType!=sinclo.chatApi.messageType.chatClear){i=sinclo.chatApi.isBotMessage(n.messageType);var S=2===Number(n.messageType);this.chatApi.createMessageUnread({cn:o,message:n.chatMessage,name:a,chatId:n.chatId,isBot:i,isOp:S,isHearingAnswer:sinclo.scenarioApi._hearing.isHearingAnswer(n),answerCount:sinclo.scenarioApi._hearing.isHearingAnswer(n)?sinclo.scenarioApi._hearing._getPrevSeqNum():0}),n.messageType==sinclo.chatApi.messageType.scenario.customer.answerBulkHearing&&common.chatBotTypingCall(n)}this.chatApi.isShowChatReceiver()&&Number(n.messageType)===sinclo.chatApi.messageType.company?this.chatApi.notify(n.chatMessage):n.tabId===userInfo.tabId&&n.messageType!=sinclo.chatApi.messageType.linkClick&&this.chatApi.scDown(),sinclo.chatApi.saveFlg||n.tabId!==userInfo.tabId?n.tabId!==userInfo.tabId&&(sinclo.chatApi.autoMessages.unset(),sinclo.chatApi.saveFlg=!0):sinclo.executeForNotHavingConnectionMessageStack()}else alert("ã¡ãã»ã¼ã¸ã®éä¿¡ã«å¤±æãã¾ããã");1==n.opFlg&&0==n.matchAutoSpeech&&(sinclo.displayTextarea(),sinclo_storage.l.set("textareaOpend","open"),sinclo_storage.s.set("initialNotification","false"),"true"!==sinclo_storage.s.get("mannedRequestFlg")&&sinclo_storage.s.set("mannedRequestFlg",!0)),sinclo.chatApi.operatorFileReceiver.isWaiting()&&sinclo.chatApi.operatorFileReceiver.moveDown()},sendReqAutoChatMessages:function(e){var t=common.jParse(e);emit("sendAutoChatMessages",{messages:sinclo.chatApi.autoMessages.getByArray(),scenarios:sinclo.scenarioApi.getStoredMessage(),sendTo:t.sendTo,chatToken:t.chatToken,isMonitorDetailOpened:t.isMonitorDetailOpened});var n="";window.sincloInfo.widgetDisplay&&(n=document.getElementById("sincloChatMessage").value),sinclo.chatApi.observeType.emit(sinclo.chatApi.observeType.status,n)},resAutoChatMessage:function(e){var t,n=JSON.parse(e);if(n.sincloSessionId!==userInfo.sincloSessionId&&n.tabId!==userInfo.tabId||n.tabId===userInfo.tabId)return!1;t=2===common.getWidgetSettings().showAutomessageName?"":common.getWidgetSettings().subTitle;var i={cn:"sinclo_re",message:n.message,name:t,chatId:n.chatId,isBot:!0};sinclo.chatApi.createMessage(i),this.chatApi.scDown(),sinclo.chatApi.autoMessages.push(n.chatId,n)},resScenarioMessage:function(e){var t=JSON.parse(e);if(t.sincloSessionId!==userInfo.sincloSessionId&&t.tabId!==userInfo.tabId)return!1;document.getElementById("sincloChatMessage");var n,i="";if(t.messageType===sinclo.chatApi.messageType.auto||t.messageType===sinclo.chatApi.messageType.autoSpeech||t.messageType===sinclo.chatApi.messageType.scenario.message.text||t.messageType===sinclo.chatApi.messageType.scenario.message.hearing||t.messageType===sinclo.chatApi.messageType.scenario.message.pulldown||t.messageType===sinclo.chatApi.messageType.scenario.message.calendar||t.messageType===sinclo.chatApi.messageType.scenario.message.button||t.messageType===sinclo.chatApi.messageType.scenario.message.buttonUI||t.messageType===sinclo.chatApi.messageType.scenario.message.checkbox||t.messageType===sinclo.chatApi.messageType.scenario.message.selection||t.messageType===sinclo.chatApi.messageType.scenario.message.receiveFile||t.messageType===sinclo.chatApi.messageType.scenario.message.radio||t.messageType===sinclo.chatApi.messageType.scenario.message.carousel){if(t.tabId===userInfo.tabId)return common.chatBotTypingCall(t),this.chatApi.scDown(),!1;n="sinclo_re"}if(t.messageType===sinclo.chatApi.messageType.scenario.message.pulldown){n="sinclo_re",i=2===common.getWidgetSettings().showAutomessageName?"":common.getWidgetSettings().subTitle;var o=JSON.parse(t.message);return this.chatApi.addPulldown("hearing_msg sinclo_re",o.message,i,o.settings),sinclo.chatApi.scDown(),!1}if(t.messageType===sinclo.chatApi.messageType.scenario.message.calendar){var s=JSON.parse(t.message);return this.chatApi.addCalendar("hearing_msg sinclo_re",s.message,s.settings),sinclo.chatApi.scDown(),!1}if(t.messageType===sinclo.chatApi.messageType.scenario.message.carousel){var a=JSON.parse(t.message);return this.chatApi.addCarousel("",a.message,a.settings),sinclo.chatApi.scDown(),!1}if(t.messageType===sinclo.chatApi.messageType.scenario.message.button)return this.chatApi.addButton("hearing_msg sinclo_re",JSON.parse(t.message).message,JSON.parse(t.message).settings),this.chatApi.scDown(),!1;if(t.messageType===sinclo.chatApi.messageType.scenario.message.radio)return this.chatApi.addRadioButton("hearing_msg sinclo_re",JSON.parse(t.message).message,JSON.parse(t.message).settings),this.chatApi.scDown(),!1;if(t.messageType===sinclo.chatApi.messageType.scenario.message.buttonUI)return this.chatApi.addButtonUI("hearing_msg sinclo_re",JSON.parse(t.message).message,JSON.parse(t.message).settings),this.chatApi.scDown(),!1;if(t.messageType===sinclo.chatApi.messageType.scenario.message.checkbox)return this.chatApi.addCheckbox("hearing_msg sinclo_re",JSON.parse(t.message).message,JSON.parse(t.message).settings),this.chatApi.scDown(),!1;if(t.messageType===sinclo.chatApi.messageType.scenario.message.radio)return this.chatApi.addRadioButton("hearing_msg sinclo_re",JSON.parse(t.message).message,JSON.parse(t.message).settings),this.chatApi.scDown(),!1;if(t.messageType===sinclo.chatApi.messageType.scenario.message.receiveFile)return this.chatApi.createSendFileMessage(JSON.parse(t.message),common.getWidgetSettings().subTitle),this.chatApi.scDown(),!1;i=common.getWidgetSettings().subTitle;2===Number(common.getWidgetSettings().showAutomessageName)&&(i=""),this.chatApi.createMessageUnread({cn:n,message:t.message,name:i,chatId:t.chatId,isBot:!0}),this.chatApi.isShowChatReceiver()&&Number(t.messageType)===sinclo.chatApi.messageType.company?this.chatApi.notify(t.chatMessage):this.chatApi.scDown()},resDiagramMessage:function(e){var t=JSON.parse(e);if(sinclo.chatApi.diagramMessages.push(t.nodeId,t),t.sincloSessionId!==userInfo.sincloSessionId&&t.tabId!==userInfo.tabId||t.tabId===userInfo.tabId)return!1;if(t.messageType===sinclo.chatApi.messageType.diagram.message.branch){var n=t.message,i={diagramId:n.did,sourceNodeId:n.nid,attrs:{actionParam:{btnType:n.type}}};sinclo.diagramApi.branch.showMessage(i,n.message,n.selectionMap,n.labels,n.customizeDesign)}else if(t.messageType===sinclo.chatApi.messageType.diagram.message.text){var o=t.message.message;sinclo.diagramApi.speakText.showMessageProcess(o)}},resChatClear:function(e){var t=JSON.parse(e);if(t.sincloSessionId!==userInfo.sincloSessionId&&t.tabId!==userInfo.tabId||t.tabId===userInfo.tabId)return!1;sinclo.scenarioApi._cancel(),sinclo.diagramApi.executor._cancel(),$("#sincloBox ul#chatTalk div").remove()},confirmVideochatStart:function(e){return e.toTabId===userInfo.tabId&&(userInfo.accessType===Number(cnst.access_type.guest)&&(userInfo.vc_receiverID=e.receiverID,userInfo.vc_toTabId=e.toTabId,void common.setVcInfo({receiverID:e.receiverID,toTabId:e.toTabId})))},docShareConnect:function(i){sessionStorage.removeItem("doc");var e=scl_check.objPath(window.sincloInfo,"custom.shareDocument.begin.headerMessage")?window.sincloInfo.custom.shareDocument.begin.headerMessage:location.host+"ã®åå®¹",t=scl_check.objPath(window.sincloInfo,"custom.shareDocument.begin.content")?window.sincloInfo.custom.shareDocument.begin.content:location.host+"ãè³æå±æãæ±ãã¦ãã¾ãã<br>è¨±å¯ãã¾ãã";popup.ok=function(){var e=browserInfo.windowSize(),t={data:i,site:window.sincloInfo.site},n=window.sincloInfo.site.files+"/docFrame/"+encodeURIComponent(JSON.stringify(t));window.open(n,"_blank","width="+e.width+", height="+e.height+", resizable=yes,scrollbars=yes,status=no"),emit("docShare",{id:i.id,responderId:i.responderId,userId:userInfo.userId,tabId:userInfo.tabId,connectToken:userInfo.connectToken,screen:browserInfo.windowScreen(),windowSize:browserInfo.windowSize(),scrollPosition:browserInfo.windowScroll()}),this.remove()},popup.no=function(){emit("docShareCancel",i),this.remove()},popup.set(e,t)},docDisconnect:function(){var e=scl_check.objPath(window.sincloInfo,"custom.shareDocument.end.headerMessage")?window.sincloInfo.custom.shareDocument.end.headerMessage:location.host+"ã®åå®¹",t=scl_check.objPath(window.sincloInfo,"custom.shareDocument.end.content")?window.sincloInfo.custom.shareDocument.end.content:location.host+"ã¨ã®è³æå±æãçµäºãã¾ãã";popup.ok=function(){this.remove()},popup.set(e,t,popup.const.action.alert)},syncStop:function(e){common.jParse(e);if(syncEvent.stop(!1),userInfo.gFrame&&Number(userInfo.accessType)===Number(cnst.access_type.guest))return window.parent.close(),!1;if(!scl_check.isset(userInfo.connectToken))return!1;window.clearTimeout(sinclo.syncTimeout),userInfo.syncInfo.unset(),document.getElementById("sincloBox")||(common.makeAccessIdTag(),window.sincloInfo.contract.chat&&sinclo.chatApi.init());var t=scl_check.objPath(window.sincloInfo,"custom.shareCoBrowse.end.headerMessage")?window.sincloInfo.custom.shareBrowse.end.headerMessage:location.host+"ã®åå®¹",n=scl_check.objPath(window.sincloInfo,"custom.shareCoBrowse.end.content")?window.sincloInfo.custom.shareBrowse.end.content:location.host+"ã¨ã®ç»é¢å±æãçµäºãã¾ãã";popup.ok=function(){this.remove()},popup.set(t,n,popup.const.action.alert);var i=setInterval(function(){if(!1===window.sincloInfo.widgetDisplay)return clearInterval(i),!1;var e=document.getElementById("sincloBox");e&&(window.sincloInfo.contract.chat||window.sincloInfo.contract.synclo||window.sincloInfo.contract.hasOwnProperty("document")&&window.sincloInfo.contract.document)&&(common.widgetHandler.show(),e.style.height=sinclo.operatorInfo.header.offsetHeight+"px",sinclo.widget.condifiton.set(!1,!0),clearInterval(i))},500)},stopCoBrowse:function(e){common.jParse(e);if(userInfo.gFrame&&Number(userInfo.accessType)===Number(cnst.access_type.guest))return window.parent.close(),!1;if(!scl_check.isset(userInfo.coBrowseConnectToken))return!1;sinclo_storage.s.unset("coBrowseConnectToken"),userInfo.coBrowseConnectToken="",document.getElementById("sincloBox")||(common.makeAccessIdTag(),window.sincloInfo.contract.chat&&sinclo.chatApi.init());var t=scl_check.objPath(window.sincloInfo,"custom.shareCoBrowse.end.headerMessage")?window.sincloInfo.custom.shareCoBrowse.end.headerMessage:location.host+"ã®åå®¹",n=scl_check.objPath(window.sincloInfo,"custom.shareCoBrowse.end.content")?window.sincloInfo.custom.shareCoBrowse.end.content:location.host+"ã¨ã®ç»é¢å±æãçµäºãã¾ãã";popup.ok=function(){laUtil.disconnect(),this.remove()},popup.set(t,n,popup.const.action.alert),laUtil.disconnect();var i=setInterval(function(){if(!1===window.sincloInfo.widgetDisplay)return clearInterval(i),laUtil.disconnect(),!1;var e=document.getElementById("sincloBox");e&&(window.sincloInfo.contract.chat||window.sincloInfo.contract.synclo||window.sincloInfo.contract.hasOwnProperty("document")&&window.sincloInfo.contract.document)&&(common.widgetHandler.show(),e.style.height=sinclo.operatorInfo.header.offsetHeight+"px",sinclo.widget.condifiton.set(!1,!0),clearInterval(i))},500)},displayTextareaDelayTimer:null,hideTextareaDelayTimer:null,firstCallDisplayTextarea:!0,firstCallHideTextarea:!0,textareaTimerController:function(){var e=900;return 1===common.getWidgetSettings().chatMessageWithAnimation&&(e=1105),sinclo.displayTextareaDelayTimer&&(clearTimeout(sinclo.displayTextareaDelayTimer),sinclo.displayTextareaDelayTimer=null),sinclo.hideTextareaDelayTimer&&(clearTimeout(sinclo.hideTextareaDelayTimer),sinclo.hideTextareaDelayTimer=null),e},_skipLabelHandler:function(e){void 0===e?(""!==$("#sincloChatMessage").val()&&$("#sincloChatSendBtn").text("éä¿¡"),""!==$("#miniSincloChatMessage").val()&&$("#miniSincloChatSendBtn").text("éä¿¡")):0<e.target.value.length?e.target.nextElementSibling.text="éä¿¡":e.target.nextElementSibling.text="ã¹ã­ãã"},displayTextarea:function(e,t){if(document.hasFocus()){var n={type:1,skippable:e,disabled:t};sinclo.scenarioApi.syncScenarioData.sendDetail("handleTextArea",n)}if(document.getElementById("flexBoxWrap"))if(scl_check.objPath(window.sincloInfo,"custom.widget.forceHideMessageArea")&&window.sincloInfo.custom.widget.forceHideMessageArea)sinclo.hideTextarea();else{e&&sinclo.scenarioApi.isProcessing()?($("#sincloChatSendBtn").text("ã¹ã­ãã"),$("#miniSincloChatSendBtn").text("ã¹ã­ãã"),$("#sincloChatMessage").on("input",sinclo._skipLabelHandler),$("#miniSincloChatMessage").on("input",sinclo._skipLabelHandler),t?($("#sincloChatMessage").prop("disabled",!0).css("background-color","#DDD"),$("#miniSincloChatMessage").prop("disabled",!0).css("background-color","#DDD")):($("#sincloChatMessage").prop("disabled",!1).css("background-color",common.getWidgetSettings().messageBoxBackgroundColor),$("#miniSincloChatMessage").prop("disabled",!1).css("background-color",common.getWidgetSettings().messageBoxBackgroundColor))):($("#sincloChatSendBtn").text("éä¿¡"),$("#miniSincloChatSendBtn").text("éä¿¡"),$("#sincloChatMessage").off("input",sinclo._skipLabelHandler),$("#miniSincloChatMessage").off("input",sinclo._skipLabelHandler),$("#sincloChatMessage").prop("disabled",!1).css("background-color",common.getWidgetSettings().messageBoxBackgroundColor),$("#miniSincloChatMessage").prop("disabled",!1).css("background-color",common.getWidgetSettings().messageBoxBackgroundColor));var i=sinclo.textareaTimerController();sinclo.displayTextareaDelayTimer=setTimeout(function(){$(window).off("resize",sinclo.displayTextarea).off("resize",sinclo.hideTextarea).on("resize",sinclo.displayTextarea),$("#flexBoxWrap").css("display","block"),scl_check.smartphone()||(common.widgetHandler._handleResizeEvent(),$("#sincloWidgetBox").offset({top:$("#sincloBox").offset().top})),scl_check.smartphone()&&sinclo.adjustSpWidgetSize(),sinclo.chatApi.scDownImmediate()},i),sinclo.firstCallDisplayTextarea&&scl_check.smartphone()&&($("#flexBoxWrap").css("display","block"),sinclo.adjustSpWidgetSize(),sinclo.chatApi.scDownImmediate()),sinclo.firstCallDisplayTextarea=!1,sinclo._skipLabelHandler()}},hideTextarea:function(){if(document.hasFocus()){sinclo.scenarioApi.syncScenarioData.sendDetail("handleTextArea",{type:2})}if(document.getElementById("flexBoxWrap")){var e=sinclo.textareaTimerController();sinclo.hideTextareaDelayTimer=setTimeout(function(){if($(window).off("resize",sinclo.displayTextarea).off("resize",sinclo.hideTextarea).on("resize",sinclo.hideTextarea),!scl_check.smartphone()&&$("#sincloWidgetBox").is(":visible")&&$("#flexBoxWrap").is(":visible")){var e=$("#miniFlexBoxHeight").is(":visible"),t=$("#miniFlexBoxHeight").hasClass("sinclo-hide");$("#flexBoxWrap").css("display","none"),!sinclo.scenarioApi.isProcessing()||!e&&t?document.getElementById("chatTalk").style.height=chatTalk.clientHeight+75+"px":document.getElementById("chatTalk").style.height=chatTalk.clientHeight+48+"px"}scl_check.smartphone()&&($("#flexBoxWrap").css("display","none"),sinclo.adjustSpWidgetSize())},e),sinclo.firstCallHideTextarea&&scl_check.smartphone()&&($("#flexBoxWrap").css("display","none"),sinclo.adjustSpWidgetSize()),sinclo.firstCallHideTextarea=!1}},calcSpWidgetHeight:function(){var e=0;e+=$("#sincloBox #widgetDescription").length?$("#sincloBox #widgetDescription").outerHeight():0,e+=$("#sincloBox #widgetSubTitle").length?$("#sincloBox #widgetSubTitle").outerHeight():0,e+=$("#sincloBox #widgetTitle").length?$("#sincloBox #widgetTitle").outerHeight():0;var t=0,n=$("#sincloBox #fotter").length?$("#sincloBox #fotter").outerHeight():0,i=$("#sincloBox sinclo-submenu").length?$("#sincloBox sinclo-submenu").outerHeight():0;return 1===common.getWidgetSettings().spHeaderLightFlg&&(e=$("#sincloBox #widgetTitle").outerHeight()),t=$("#flexBoxWrap").is(":visible")?window.innerHeight-(e+$("#flexBoxWrap").outerHeight()+n+i):window.innerHeight-(e+n+i),0!==$("#sincloWidgetBox > #navigation").length&&(t-=$("#sincloWidgetBox > #navigation").outerHeight()),t},getSendBtnHeight:function(){return parseFloat(window.getComputedStyle(document.getElementById("sincloChatSendBtn")).height)},calcSpWidgetBottom:function(e){if(scl_check.ios()&&common.isPortrait()&&$(window).height()>$(window).width()){var t=document.getElementById("fotter"),n=window.getComputedStyle(t),i=parseFloat(n.paddingTop),o=parseFloat(n.paddingBottom),s=document.getElementById("flexBoxWrap"),a=window.getComputedStyle(s),r=parseFloat(a.paddingBottom),c=sinclo.getSendBtnHeight()/3;e?(t.style.paddingTop=i<c/3?i+c/3+"px":i+"px",t.style.paddingBottom=o<c/3?o+c/3+"px":o+"px",s.style.paddingBottom=r<c/2?r+c/2+"px":r+"px",sinclo.adjustSpWidgetVerticalSize()):(t.style.paddingTop=c/3<=i?i-c/3+"px":i+"px",t.style.paddingBottom=c/3<=o?o-c/3+"px":o+"px",s.style.paddingBottom=c/2<=r?r-c/2+"px":r+"px")}},adjustSpWidgetVerticalSize:function(){var e=common.getPageWidth(),t=e*(1/285);if(2===common.getWidgetSettings().spMaximizeSizeType){var n=sinclo.calcSpWidgetHeight();$("#chatTalk").outerHeight(n),$("#sincloBox ul sinclo-typing").css("padding-bottom",.1604*n+"px"),"true"===sinclo_storage.l.get("widgetMaximized")&&$("#sincloBox").height("100%")}else{var i=194*(t=(e=common.getPageWidth()-20)*(1/285))+60*t;$("#flexBoxWrap").is(":visible")&&(i-=$("#flexBoxWrap").outerHeight()),$("#chatTalk").height(i+"px"),$("#sincloBox ul sinclo-typing").css("padding-bottom",194*t*.1604+"px")}},adjustSpWidgetVerticalSizeAnimation:function(){if(2===common.getWidgetSettings().spMaximizeSizeType){var e=sinclo.calcSpWidgetHeight();$("#chatTalk").outerHeight(e),$("#sincloBox ul sinclo-typing").css("padding-bottom",.1604*e+"px"),"true"===sinclo_storage.l.get("widgetMaximized")&&$("#sincloBox").animate({height:"100%"},"first")}else{$("#chatTalk").css("height","0px");var t=1/285*(common.getPageWidth()-20),n=194*t+60*t;$("#flexBoxWrap").is(":visible")&&(n-=$("#flexBoxWrap").outerHeight()),$("#chatTalk").animate({height:n+"px"},"first"),$("#sincloBox ul sinclo-typing").css("padding-bottom",194*t*.1604+"px")}},adjustSpWidgetSize:function(){if(scl_check.smartphone()){var e=document.body.clientWidth/window.innerWidth;if($("#flexBoxWrap").is(":visible")){if(sinclo.chatApi.spFocusFlg)return;if(1<e||e<.95){if(2===common.getWidgetSettings().spMaximizeSizeType&&"true"===sinclo_storage.l.get("widgetMaximized")){$("#sincloBox").animate({height:"100%"},"first");var t=sinclo.calcSpWidgetHeight();$("#chatTalk").outerHeight(t)}return}if(common.isPortrait()&&$(window).height()>$(window).width())sinclo.adjustSpWidgetVerticalSize();else{var n=$("#widgetHeader").height()+$("#flexBoxWrap").height(),i=$("sinclo-submenu").length?$("sinclo-submenu").outerHeight():0,o=window.innerHeight-(n+i);document.getElementById("chatTalk").style.height=o+"px"}}else if($("#flexBoxWrap").css("display","none"),common.isPortrait()&&$(window).height()>$(window).width())sinclo.adjustSpWidgetVerticalSize();else{$("#flexBoxWrap").css("display","none"),"true"===sinclo_storage.l.get("widgetMaximized")&&$("#sincloBox").height("100%");var s=window.innerHeight;s-=$("#widgetTitle").length?$("#widgetTitle").outerHeight():0,s-=$("#widgetSubTitle").length?$("#widgetSubTitle").outerHeight():0,s-=$("#widgetDescription").length?$("#widgetDescription").outerHeight():0,s-=$("sinclo-submenu").length?$("sinclo-submenu").outerHeight():0,s+=$("#fotter").length?$("#fotter").outerHeight():0,$("#chatTalk").css("height",s),scl_check.widget.maximized()&&$("#sincloBox").height()!==window.innerHeight?$("#sincloWidgetBox").css("top",$("#sincloBox").height()-window.innerHeight+"px"):$("#sincloWidgetBox").css("top","0px")}}},syncApi:{init:function(e){e===cnst.sync_type.outer?sinclo.syncApi.func=sinclo.syncApi._func.outer:sinclo.syncApi.func=sinclo.syncApi._func.inner},func:{formSync:null,mouseSync:null,scrollSync:null,resizeSync:null,pageSync:null},_func:{inner:{formSync:{send:function(){},receive:function(){}},mouseSync:{send:function(){},receive:function(){}},scrollSync:{send:function(){},receive:function(){}},resizeSync:{send:function(){},receive:function(){}},pageSync:{send:function(){},receive:function(){}}},outer:{formSync:{send:function(){},receive:function(){}},mouseSync:{send:function(){},receive:function(){}}}}},chatApi:{saveFlg:!1,spFocusFlg:!1,online:!1,historyId:null,stayLogsId:null,unread:0,opUser:"",opUserName:"",continueClickThresholdMSec:5e3,bodyPosition:"",bodyScrollPosition:0,displayedChatFlg:!1,clickBranchCount:0,isFirstDiagramSelected:!1,messageType:{customer:1,company:2,auto:3,sorry:4,autoSpeech:5,sendFile:6,notification:7,linkClick:8,operatorReceiveFile:190,chatClear:997,start:998,end:999,scenario:{customer:{hearing:12,selection:13,hearingConfirm:14,sendFile:19,answerBulkHearing:30,noModBulkHearing:31,modifyBulkHearing:32,radio:33,pulldown:34,calendar:35,reInputText:36,reInputRadio:37,reInputPulldown:38,reInputCalendar:39,carousel:43,reInputCarousel:44,button:47,reInputButton:48,buttonUI:50,reInputButtonUI:51,checkbox:53,reInputCheckbox:54,reservation:57,skipHearing:90},message:{text:21,hearing:22,selection:23,receiveFile:27,returnBulkHearing:40,pulldown:41,calendar:42,carousel:45,button:46,buttonUI:49,checkbox:52,radio:55}},cogmo:{message:81,feedback:82},diagram:{customer:{branch:301,operator:303},message:{branch:300,text:302}}},mailDomainList:["384.jp","across.or.jp","actv.ne.jp","aitai.ne.jp","akari.ne.jp","alpha-net.ne.jp","anc-tv.ne.jp","a-net.ne.jp","aol.jp","asahinet.jp","asahi-net.or.jp","au.com","au-hikari.ne.jp","auone.jp","auone-net.jp","bai.ne.jp","banban.ne.jp","baynet.ne.jp","bb-east.ne.jp","bbexcite.jp","bbiq.jp","bb-west.ne.jp","biglobe.jp","biglobe.ne.jp","broada.jp","b-star.jp","bunbun.ne.jp","c.vodafone.ne.jp","c3-net.ne.jp","canvas.ne.jp","catv296.ne.jp","ccn4.aitai.ne.jp","ccnw.ne.jp","chukai.ne.jp","clovernet.ne.jp","cna.ne.jp","cnc.jp","cncm.ne.jp","commufa.jp","csf.ne.jp","ctb.ne.jp","ctt.ne.jp","cyberhome.ne.jp","docomo.ne.jp","d.vodafone.ne.jp","dion.ne.jp","disney.ne.jp","dream.com","dream.jp","dti.ne.jp","dti2.ne.jp","ezweb.ne.jp","e23.jp","e-catv.ne.jp","email.ne.jp","e-mansion.com","emnet.ne.jp","em-net.ne.jp","emobile.ne.jp","enjoy.ne.jp","eonet.ne.jp","excite.co.jp","fctv.ne.jp","fiberbit.net","gate01.com","gmail.com","gmobb.jp","gol.com","goo.jp","gyao.ne.jp","h.vodafone.ne.jp","h555.net","hb.tp1.jp","highway.ne.jp","hi-ho.ne.jp","hinocatv.ne.jp","hokkai.net","hokkaidou.me","home.ne.jp","hotmail.co.jp","hotmail.com","i.softbank.jp","iam.ne.jp","icloud.com","icn-tv.ne.jp","iij.ad.jp","iij4u.or.jp","iijmio-mail.jp","ii-okinawa.ne.jp","i-ml.com","inabapyonpyon.net","infoseek.jp","infoweb.ne.jp","ingz.co.jp","inter7.jp","interq.or.jp","ipone.ne.jp","isao.net","itscom.net","iwamicatv.jp","janis.or.jp","jcnnet.jp","jcom.home.ne.jp","jrjr.jp","jrnet.ne.jp","jway.ne.jp","k.vodafone.ne.jp","kamakuranet.ne.jp","kanto.me","katch.ne.jp","kbn.ne.jp","kcn.jp","kcn-tv.ne.jp","kinet-tv.ne.jp","kitty.jp","kiwi.ne.jp","koalanet.ne.jp","kojima.net","kualnet.jp","leo-net.jp","live.jp","livedoor.com","mail.goo.ne.jp","mbn.or.jp","m-cn.ne.jp","mctv.ne.jp","mediatti.net","megaegg.ne.jp","mesh.ne.jp","migliore.co.jp","miobox.jp","miomio.jp","mopera.net","n.vodafone.ne.jp","nava21.ne.jp","ncn-t.net","ncv.ne.jp","next.ne.jp","nexyzbb.ne.jp","nifty.com","nifty.jp","nifty.ne.jp","nirai.ne.jp","nns.ne.jp","ocn.ne.jp","odn.ne.jp","ogaki-tv.ne.jp","omn.ne.jp","oninet.ne.jp","only.ne.jp","ont.ne.jp","osaka-u.ac.jp","outlook.com","outlook.jp","pbc.ne.jp","pdx.ne.jp","pikara.ne.jp","plala.or.jp","point.ne.jp","pri.nir.jp","q.vodafone.ne.jp","qit.ne.jp","r.vodafone.ne.jp","reset.jp","rim.or.jp","rimnet.ne.jp","softbank.ne.jp","s.vodafone.ne.jp","sakura.ne.jp","sannet.ne.jp","scmg.co.jp","scmg.ne.jp","scn.tv","sec-i.co.jp","seikyou.ne.jp","sl-d51.jp","smoug.net","so-net.ne.jp","sonoda-sports.com","speednet.ne.jp","spinnet.jp","t.vodafone.ne.jp","takauji.or.jp","tamatele.ne.jp","tcat.ne.jp","tcnet.ne.jp","t-com.ne.jp","tees.jp","tees.ne.jp","thn.ne.jp","tigers-net.com","tiki.ne.jp","tlp.ne.jp","tnc.ne.jp","t-net.ne.jp","tokai.or.jp","tora.zzn.com","tst.ne.jp","ttcn.ne.jp","tv-naruto.ne.jp","tvs12.jp","u-netsurf.jp","urban.ne.jp","vodafone.ne.jp","wakwak.com","warabi.ne.jp","watv.ne.jp","wcm.ne.jp","wcv.jp","x-il.jp","yahoo.co.jp","yahoo.com","ybb.ne.jp","yomogi.jp","youngpostman.net","zaq.jp","zaq.ne.jp","zero.jp","zoho.com","ztv.ne.jp"],clickRadioMessages:{},autoMessages:{push:function(e,t){var n=this.get(!0);return this.exists(e)?!("created"in n[e])&&(n[e]=t,sinclo_storage.l.set("amsg",JSON.stringify(n)),!0):(n[e]=t,sinclo_storage.l.set("amsg",JSON.stringify(n)),!0)},get:function(i){var e=sinclo_storage.l.get("amsg"),o={};if(e){var s=JSON.parse(e);Object.keys(s).forEach(function(e,t,n){!i&&s[e].applied||(o[e]=s[e])})}return o},getByArray:function(i){var e=sinclo_storage.l.get("amsg"),o=[];if(e){var s=JSON.parse(e);Object.keys(s).forEach(function(e,t,n){(i||s[e].message&&!s[e].applied)&&o.push(s[e])})}return o},exists:function(e){var t=this.get(!0);return e in t},unset:function(){var i=this.get(!0);Object.keys(i).forEach(function(e,t,n){i[e].applied=!0}),sinclo_storage.l.set("amsg",JSON.stringify(i))},delete:function(e){var t=this.get(!0);delete t[e],sinclo_storage.l.set("amsg",JSON.stringify(t))}},diagramMessages:{push:function(e,t){var n=this.get(!0);return this.exists(e)?!("created"in n[e])&&(n[e]=t,sinclo_storage.l.set("amsg",JSON.stringify(n)),!0):(n[e]=t,sinclo_storage.s.set("_scl_d_msg",JSON.stringify(n)),!0)},get:function(i){var e=sinclo_storage.s.get("_scl_d_msg"),o={};if(e){var s=JSON.parse(e);Object.keys(s).forEach(function(e,t,n){!i&&s[e].applied||(o[e]=s[e])})}return o},getByArray:function(i){var e=sinclo_storage.s.get("_scl_d_msg"),o=[];if(e){var s=JSON.parse(e);Object.keys(s).forEach(function(e,t,n){!i&&s[e].applied||o.push(s[e])})}return o},exists:function(e){var t=this.get(!0);return e in t},unset:function(){var i=this.get(!0);Object.keys(i).forEach(function(e,t,n){i[e].applied=!0}),sinclo_storage.s.set("_scl_d_msg",JSON.stringify(i))},delete:function(e){var t=this.get(!0);delete t[e],sinclo_storage.s.set("_scl_d_msg",JSON.stringify(t))}},init:function(){this.initEvent();var e=sinclo_storage.l.get("textareaOpend");null!=e?("close"==e?sinclo.hideTextarea():sinclo.displayTextarea(),preventWithdrawalOverlay.isActive()||!(sincloInfo.contract.enableRealtimeMonitor||sincloInfo.contract.chat&&sincloInfo.contract.synclo)&&common.tabMessenger.isNotifyConnecting()||emit("getChatMessage",{showName:common.getWidgetSettings().showName}),common.reloadWidgetRemove()):operationUtil.doFirst()},initEvent:function(){window.sincloInfo.contract.chat&&("chatTrigger"in window.sincloInfo.widget&&2===common.getWidgetSettings().chatTrigger||($("#sincloChatMessage").on("keyup keypress",function(e){e&&e.stopImmediatePropagation()}),sinclo.chatApi.addKeyDownEventToSendChat(),$(document).on("keydown keyup keypress","#sincloChatMessage,#miniSincloChatMessage",function(e){e&&e.stopImmediatePropagation()})),$(document).on("focus","#sincloChatMessage,#miniSincloChatMessage",function(e){e&&e.stopPropagation(),sinclo.chatApi.observeType.start(),scl_check.smartphone()&&(sinclo.chatApi.spFocusFlg=!0,setTimeout(function(){sinclo.adjustSpWidgetSize()},100),scl_check.ios()&&sinclo.calcSpWidgetBottom(sinclo.chatApi.spFocusFlg))})),this.sound=document.getElementById("sinclo-sound"),this.sound&&(this.sound.volume=.3),$(document).off("click","input[name^='sinclo-radio']"),$(document).off("change","[name^='sinclo-pulldown']"),$(document).off("change","[name^='sinclo-datepicker']"),$(document).on("change","[name^='sinclo-pulldown']",function(e){return(!scl_check.isset(sinclo_storage.s.get("operatorEntered"))||"true"!==sinclo_storage.s.get("operatorEntered"))&&(!sinclo.chatApi.isDisabledSlightly(this)&&(sinclo.scenarioApi._reservation.isInMode()?sinclo.chatApi._disableAllSelectableUI():sinclo.chatApi.disableAllButtonsSlightly(),e&&e.stopPropagation(),void(""!==e.target.value&&(sinclo.scenarioApi._hearing._needCancel(e.target)?sinclo.scenarioApi._hearing._handleCancel(e).then(function(){sinclo.scenarioApi.set(sinclo.scenarioApi._lKey.sendCustomerMessageType,38),sinclo.chatApi.send(e.target.value.trim())}):sinclo.chatApi.send(e.target.value.trim())))))}),$(document).on("change","[name^='sinclo-datepicker']",function(e){if(scl_check.isset(sinclo_storage.s.get("operatorEntered"))&&"true"===sinclo_storage.s.get("operatorEntered"))return!1;if(sinclo.chatApi.isDisabledSlightly(this))return!1;if(sinclo.scenarioApi._reservation.isInMode()?sinclo.chatApi._disableAllSelectableUI():sinclo.chatApi.disableAllButtonsSlightly(),e&&e.stopPropagation(),sinclo.scenarioApi._hearing._needCancel(e.target.parentNode)){var t=e.target;return e.target=e.target.parentNode.parentNode,void sinclo.scenarioApi._hearing._handleCancel(e).then(function(){sinclo.scenarioApi.set(sinclo.scenarioApi._lKey.sendCustomerMessageType,39),e.target=t,sinclo.chatApi.send(e.target.value.trim())})}sinclo.chatApi.send(e.target.value.trim())}),$(document).on("click",'[id^="slide_sinclo-carousel"]',function(e){if(scl_check.isset(sinclo_storage.s.get("operatorEntered"))&&"true"===sinclo_storage.s.get("operatorEntered"))return!1;if(sinclo.chatApi.isDisabledSlightly(this))return!1;if(sinclo.scenarioApi._reservation.isInMode()||sinclo.chatApi.disableAllButtonsSlightly(),e&&e.stopPropagation(),sinclo.scenarioApi._hearing._needCancel($(e.target).closest(".carousel-container"))){var t=$(this);sinclo.scenarioApi._hearing._handleCarouselCancel(e.target.closest(".carousel-container")).then(function(){sinclo.scenarioApi.set(sinclo.scenarioApi._lKey.sendCustomerMessageType,44),sinclo.chatApi.send(t.attr("data-answer").trim())})}else sinclo.chatApi.send($(this).attr("data-answer").trim())}),$(document).on("click",".sincloHearingButton",function(e){if(scl_check.isset(sinclo_storage.s.get("operatorEntered"))&&"true"===sinclo_storage.s.get("operatorEntered"))return!1;if(sinclo.chatApi.isDisabledSlightly(this)||$(e.target).hasClass("disabled"))return!1;sinclo.scenarioApi._reservation.isInMode()||sinclo.chatApi.disableAllButtonsSlightly(),e.stopPropagation();var t=$(this).text();$(this).parents("div.sincloHearingButtons").find("span.sincloHearingButton").removeClass("selected"),$(this).addClass("selected"),sinclo.scenarioApi._hearing._needCancel(e.target)?sinclo.scenarioApi._hearing._handleButtonCancel(e).then(function(){sinclo.scenarioApi.set(sinclo.scenarioApi._lKey.sendCustomerMessageType,48),sinclo.chatApi.send(t.trim())}):sinclo.chatApi.send(t.trim())}),$(document).on("click",".sinclo-button-ui:not(.diagram-ui)",function(e){if(scl_check.isset(sinclo_storage.s.get("operatorEntered"))&&"true"===sinclo_storage.s.get("operatorEntered"))return!1;if(sinclo.chatApi.isDisabledSlightly(this)||$(e.target).hasClass("disabled")||$(e.target).hasClass("none"))return!1;sinclo.scenarioApi._reservation.isInMode()?sinclo.chatApi._disableAllSelectableUI():sinclo.chatApi.disableAllButtonsSlightly(),e.stopPropagation();var t=$(this).text();$(this).parent("div").find(".sinclo-button-ui").removeClass("selected"),$(this).addClass("selected"),sinclo.scenarioApi._hearing._needCancel(e.target)?sinclo.scenarioApi._hearing._handleButtonCancel(e).then(function(){sinclo.scenarioApi.set(sinclo.scenarioApi._lKey.sendCustomerMessageType,51),sinclo.chatApi.send(t.trim())}):sinclo.chatApi.send(t.trim())}),$(document).on("click",".checkbox-submit-btn",function(e){if(scl_check.isset(sinclo_storage.s.get("operatorEntered"))&&"true"===sinclo_storage.s.get("operatorEntered"))return!1;if(sinclo.chatApi.isDisabledSlightly(this)||$(e.target).hasClass("disabled"))return!1;sinclo.scenarioApi._reservation.isInMode()||sinclo.chatApi.disableAllButtonsSlightly(),e.stopPropagation();var t=[];$(this).parent("div").find("input:checked").each(function(e){t.push($(this).val())});var n=",";switch(Number($(this).parents("div").attr("data-separator"))){case 1:n=",";break;case 2:n="/";break;case 3:n="|";break;default:n=","}t=t.join(n),$(this).prop("disabled",!0).css("opacity",.5),sinclo.scenarioApi._hearing._needCancel(e.target)&&(sinclo.scenarioApi._hearing._handleButtonCancel(e),sinclo.scenarioApi.set(sinclo.scenarioApi._lKey.sendCustomerMessageType,54)),sinclo.chatApi.send(JSON.stringify({message:t,separator:n}))}),$(document).on("change","[name^='sinclo-checkbox']",function(e){if(scl_check.isset(sinclo_storage.s.get("operatorEntered"))&&"true"===sinclo_storage.s.get("operatorEntered"))return!1;0<$(this).parent().parent().find("input:checked").length?$(this).parent().parent().find(".checkbox-submit-btn").prop("disabled",!1).css("opacity",1):$(this).parent().parent().find(".checkbox-submit-btn").prop("disabled",!0).css("opacity",.5)}),$(document).on("focus","#sincloChatMessage,#miniSincloChatMessage",function(e){e&&e.stopPropagation(),sinclo.chatApi.clearPlaceholderMessage(),scl_check.smartphone()&&(sinclo.chatApi.bodyScrollPosition={x:window.scrollX,y:window.scrollY},scl_check.android()&&2===common.getWidgetSettings().spMaximizeSizeType?(sinclo.chatApi.bodyPosition=$("#sincloBox section#chatTab #flexBoxWrap").css("position"),$("#sincloBox section#chatTab #flexBoxWrap").css("position","fixed"),$("#sincloBox section#chatTab #flexBoxWrap").css("bottom","0px"),$("#sincloBox section#chatTab #flexBoxWrap").css("width","100%")):sinclo.chatApi.bodyPosition=document.body.style.position,$(document).one("touchstart",function(e){$(document).trigger("blur")}))}).on("blur","#sincloChatMessage,#miniSincloChatMessage",function(e){e&&e.stopPropagation(),sinclo.chatApi.setPlaceholderMessage(sinclo.chatApi.getPlaceholderMessage()),scl_check.smartphone()&&(window.scrollTo(sinclo.chatApi.bodyScrollPosition.x,sinclo.chatApi.bodyScrollPosition.y),scl_check.android()&&2===common.getWidgetSettings().spMaximizeSizeType?($("#sincloBox section#chatTab #flexBoxWrap").css("position","static"),$("#sincloBox section#chatTab #flexBoxWrap").css("bottom",""),$("#sincloBox section#chatTab #flexBoxWrap").css("width","auto")):document.body.style.position=sinclo.chatApi.bodyPosition,setTimeout(function(){sinclo.adjustSpWidgetSize()},1e3),sinclo.chatApi.spFocusFlg=!1,scl_check.ios()&&sinclo.calcSpWidgetBottom(sinclo.chatApi.spFocusFlg))}).on("click","input[name^='sinclo-radio']",function(e){if(scl_check.isset(sinclo_storage.s.get("operatorEntered"))&&"true"===sinclo_storage.s.get("operatorEntered")&&!$(this).hasClass("send-operator"))return!1;if(sinclo.chatApi.isDisabledSlightly(this))return!1;sinclo.scenarioApi._reservation.isInMode()?sinclo.chatApi._disableAllSelectableUI():sinclo.chatApi.disableAllButtonsSlightly();sinclo.scenarioApi._hearing;e&&e.stopPropagation();var t=e.target.value.trim();if(sinclo.chatApi.clickRadioMessages[$(this).attr("name")]=t,$(e.target).data("nextNid"))return t={message:e.target.value.trim(),did:$(e.target).data("did"),sourceNodeId:$(e.target).data("nid"),nextNodeId:$(e.target).data("nextNid")},sinclo.diagramApi.executor.setDiagramId($(e.target).data("did")),void sinclo.chatApi.send(t);if(sinclo.scenarioApi.isProcessing()&&sinclo.scenarioApi.isWaitingInput()&&sinclo.scenarioApi._selection.isSelectionMode()){var n=$(this).attr("name");$("input[name="+n+'][type="radio"]').prop("disabled",!0).parent().css("opacity",.5)}else if(sinclo.scenarioApi.isProcessing()&&sinclo.scenarioApi.isWaitingInput()&&!sinclo.scenarioApi._reservation.isInMode()&&sinclo.scenarioApi._hearing._needCancel(e.target.parentNode)&&(!scl_check.isset(sinclo_storage.s.get("operatorEntered"))||"false"===sinclo_storage.s.get("operatorEntered")))return void sinclo.scenarioApi._hearing._handleButtonCancel(e).then(function(){sinclo.scenarioApi.set(sinclo.scenarioApi._lKey.sendCustomerMessageType,sinclo.chatApi.messageType.scenario.customer.reInputRadio),sinclo.scenarioApi._hearing._forceRadioTypeFlg=!0,sinclo.chatApi.send(t)});if(common.getWidgetSettings().hasOwnProperty("chatRadioBehavior")&&2===common.getWidgetSettings().chatRadioBehavior)if("close"==sinclo_storage.l.get("textareaOpend"))sinclo.chatApi.send(e.target.value.trim());else{t=document.getElementById("sincloChatMessage");scl_check.isset(t.value)&&(t.value+="\n"),t.value+=e.target.value.trim()}else sinclo.chatApi.send(t)}),$("input[name^='sinclo-radio']").each(function(e){if(sinclo.scenarioApi.isProcessing()||0===$(this).parents(".sinclo-scenario-msg").length)$(this).prop("disabled",!1);else{var t=!1;$(this).parents("li.sinclo_re").find(".sinclo-chat-radio").each(function(e){$(this).is(":checked")&&(t=!0)}),t?$(this).prop("disabled",!0).parent().css("opacity",.5):$(this).prop("disabled",!1)}})},removeAllEvent:function(){window.sincloInfo.contract.chat&&("chatTrigger"in window.sincloInfo.widget&&2===common.getWidgetSettings().chatTrigger||($("#sincloChatMessage,#miniSincloChatMessage").off("keyup keypress"),$("#sincloChatMessage,#miniSincloChatMessage").off("keydown"),$(document).off("keydown keyup keypress","#sincloChatMessage,#miniSincloChatMessage")),$(document).off("focus","#sincloChatMessage,#miniSincloChatMessage")),this.sound=document.getElementById("sinclo-sound"),this.sound&&(this.sound.volume=.3),$(document).off("click","input[name^='sinclo-radio']"),$(document).off("focus","#sincloChatMessage,#miniSincloChatMessage").off("blur","#sincloChatMessage,#miniSincloChatMessage").off("click","input[name^='sinclo-radio']"),$("input[name^='sinclo-radio']").prop("disabled",!0)},disableAllButtonsSlightly:function(){sinclo.chatApi._disableAllSelectableUI(),setTimeout(sinclo.chatApi._handleAllDisableSelectableUI,sinclo.chatApi.continueClickThresholdMSec)},isDisabledSlightly:function(e){return $(e).hasClass("onetime-disabled")},_disableAllSelectableUI:function(){var e="onetime-disabled";$("input[name^='sinclo-radio']").prop("disabled",!0).addClass(e).parent().css("opacity",.75),$("#sincloChatMessage,#miniSincloChatMessage").addClass(e),$("[name^='sinclo-pulldown']").addClass(e).parent().css("opacity",.75),$("[name^='sinclo-datepicker']").addClass(e).parent().css("opacity",.75),$('[id^="slide_sinclo-carousel"]').addClass(e).parent().css("opacity",.75),$(".sincloHearingButton").addClass(e).parent().css("opacity",.75),$(".sinclo-button-ui").addClass(e).parent().css("opacity",.75),$(".sinclo-checkbox").addClass(e).parent().css({opacity:.5,"pointer-events":"none"}),$(".checkbox-submit-btn").addClass(e).parent().css("opacity",.5),$(".inputFormOKButton").addClass(e).css("opacity",.5),$("#sincloBox .cancelReservationArea a").addClass(e).css({opacity:.5,"pointer-events":"none"})},_handleAllDisableSelectableUI:function(){var e="onetime-disabled";$("input[name^='sinclo-radio']:not(.end-disabled,.previous-selectable-button)").prop("disabled",!1).removeClass(e).parent().css({opacity:"","pointer-events":""}),$("#sincloChatMessage,#miniSincloChatMessage").removeClass(e),$("[name^='sinclo-pulldown']:not(.end-disabled)").removeClass(e).parent().css("opacity",""),$("[name^='sinclo-datepicker']:not(.end-disabled)").removeClass(e).parent().css({opacity:"","pointer-events":""}),$('[id^="slide_sinclo-carousel"]:not(.end-disabled)').removeClass(e).parent().css({opacity:"","pointer-events":""}),$(".sincloHearingButton:not(.end-disabled)").removeClass(e).parent().css({opacity:"","pointer-events":""}),$(".sinclo-button-ui:not(.end-disabled,.previous-selectable-button)").removeClass(e).parent().css({opacity:"","pointer-events":""}),$(".sinclo-checkbox:not(.end-disabled)").removeClass(e).parent().css({opacity:"","pointer-events":""}),$(".checkbox-submit-btn:not(.end-disabled)").removeClass(e).parent().css({opacity:"","pointer-events":""}),$("#sincloBox .cancelReservationArea a:not(.end-disabled)").removeClass(e).css({opacity:"","pointer-events":""}),sinclo.diagramApi.callScenario.checkCallScenario()&&$("li.diagram_msg").find("input[name^='sinclo-radio'], .sinclo-button-ui").prop("disabled",!0).parent().css("opacity","0.5")},clearAllDisableSelectableTimer:null,clearAllDisableSelectableUIClass:function(e){var t=$.Deferred();return scl_check.isset(sinclo.chatApi.clearAllDisableSelectableTimer)&&(clearTimeout(sinclo.chatApi.clearAllDisableSelectableTimer),sinclo.chatApi.clearAllDisableSelectableTimer=null),sinclo.chatApi.clearAllDisableSelectableTimer=setTimeout(function(){sinclo.chatApi._handleAllDisableSelectableUI(),t.resolve()},1e3*(e+5.5)),t.promise()},disableAllButtons:function(){$("#sincloBox ul#chatTalk li.sinclo_re").each(function(e,t){$(this).find('input[type="radio"]').addClass("end-disabled").prop("disabled",!0).parent().css("opacity",.5),$(this).find('select[name^="sinclo-pulldown"]').addClass("end-disabled").prop("disabled",!0).css("opacity",.5),$(this).find(".flatpickr-calendar").addClass("disable"),$(this).find(".sincloHearingButton").addClass("end-disabled").prop("disabled",!0).prop("disabled",!0).css("background-color","#DADADA"),$(this).find(".sinclo-button-ui").addClass("end-disabled").prop("disabled",!0).prop("disabled",!0).css("background-color","#DADADA"),$(this).find(".sinclo-checkbox").addClass("end-disabled").prop("disabled",!0).css("opacity",.5),$(this).find(".checkbox-submit-btn").addClass("end-disabled").prop("disabled",!0).css("opacity",.5),$(this).find('input[name^="sinclo-checkbox"]').addClass("end-disabled").prop("disabled",!0).css("opacity",.5)}),$("#sincloBox ul#chatTalk li.hearing_msg").each(function(e,t){$(this).find('[id^="slide_sinclo-carousel"]').addClass("end-disabled").prop("disabled",!0).css("opacity",.5),$(this).find('[id^="slide_sinclo-carousel"]').addClass("end-disabled").prop("disabled",!0).css("opacity",.5)}),$("#sincloBox ul#chatTalk li.sinclo_se.cancelable").each(function(e,t){$(this).removeClass("cancelable").addClass("end-disabled"),$(this).off("click",self._handleCancel)}),$("#sincloBox ul#chatTalk li.sinclo_se .inputFormOKButton").addClass("end-disabled").prop("disabled",!0).css("pointer-events","none").css("opacity",.5),$("#sincloBox ul#chatTalk li.sinclo_re .formOKButton").addClass("end-disabled").prop("disabled",!0).css("pointer-events","none").css("opacity",.5),$("#sincloBox ul#chatTalk li.sinclo_re .receiveFileContent").addClass("end-disabled").css("pointer-events","none").css("opacity",.5),$("#sincloBox ul#chatTalk li.sinclo_se .cancel-file-button").addClass("end-disabled").css("pointer-events","none").css("opacity",.5),$("#sincloBox ul#chatTalk li.sinclo_se .send-file-button").addClass("end-disabled").css("pointer-events","none").css("opacity",.5),$("#sincloBox ul#chatTalk li.sinclo_re .sendFileContent").addClass("end-disabled").prop("disabled",!0).css("pointer-events","none").css("opacity",.5)},enableAllButtons:function(){$("#sincloBox ul#chatTalk li.sinclo_re").each(function(e,t){$(this).find('input[type="radio"]').removeClass("end-disabled").prop("disabled",!1).parent().css("opacity",1),$(this).find('select[name^="sinclo-pulldown"]').removeClass("end-disabled").prop("disabled",!1).css("opacity",1),$(this).find(".flatpickr-calendar").removeClass("disable"),$(this).find(".sincloHearingButton").removeClass("end-disabled").prop("disabled",!1).prop("disabled",!1).css("background-color","#DADADA"),$(this).find(".sinclo-button-ui").removeClass("end-disabled").prop("disabled",!1).prop("disabled",!1).css("background-color","#DADADA"),$(this).find(".sinclo-checkbox").removeClass("end-disabled").prop("disabled",!1).css("opacity",1),$(this).find(".checkbox-submit-btn").removeClass("end-disabled").prop("disabled",!1).css("opacity",1),$(this).find('input[name^="sinclo-checkbox"]').removeClass("end-disabled").prop("disabled",!1).css("opacity",1)}),$("#sincloBox ul#chatTalk li.hearing_msg").each(function(e,t){$(this).find('[id^="slide_sinclo-carousel"]').removeClass("end-disabled").prop("disabled",!1).css("opacity",1),$(this).find('[id^="slide_sinclo-carousel"]').removeClass("end-disabled").prop("disabled",!1).css("opacity",1)}),$("#sincloBox ul#chatTalk li.sinclo_se.cancelable").each(function(e,t){$(this).addClass("cancelable").removeClass("end-disabled"),$(this).off("click",self._handleCancel)}),$("#sincloBox ul#chatTalk li.sinclo_se .inputFormOKButton").removeClass("end-disabled").prop("disabled",!1).css("pointer-events","auto").css("opacity",1),$("#sincloBox ul#chatTalk li.sinclo_re .formOKButton").removeClass("end-disabled").prop("disabled",!1).css("pointer-events","auto").css("opacity",1),$("#sincloBox ul#chatTalk li.sinclo_re .receiveFileContent").removeClass("end-disabled").css("pointer-events","auto").css("opacity",1),$("#sincloBox ul#chatTalk li.sinclo_se .cancel-file-button").removeClass("end-disabled").css("pointer-events","auto").css("opacity",1),$("#sincloBox ul#chatTalk li.sinclo_se .send-file-button").removeClass("end-disabled").css("pointer-events","auto").css("opacity",1),$("#sincloBox ul#chatTalk li.sinclo_re .sendFileContent").removeClass("end-disabled").prop("disabled",!1).css("pointer-events","auto").css("opacity",1)},disableCogmoButtons:function(){$("#sincloBox #chatTalk div:not(:last-child) li.sinclo_re p.sincloButtonWrap").removeAttr("onclick"),$("#sincloBox #chatTalk div:not(:last-child) li.sinclo_re p.sincloButtonWrap").addClass("cogmo-disabled").css("pointer-events","none").css("background-color","#E7E7E7"),$("#sincloBox #chatTalk div:not(:last-child) li.sinclo_re p.sincloButtonWrap .sincloButton").css("pointer-events","none").css("color","#333333")},addStyleCogmoSearchButtons:function(){$("#sincloBox #chatTalk li.sinclo_re p.sincloButtonWrap.searchButton:not(.cogmo-disabled)").css("background-color","#E22D2D"),$("#sincloBox #chatTalk li.sinclo_re p.sincloButtonWrap.searchButton:not(.cogmo-disabled) .sincloButton").css("color","#FFFFFF")},showMiniMessageArea:function(){if((!scl_check.objPath(window.sincloInfo,"custom.widget.forceHideMessageArea")||!window.sincloInfo.custom.widget.forceHideMessageArea)&&(!scl_check.isset(sinclo_storage.s.get("operatorEntered"))||"false"===sinclo_storage.s.get("operatorEntered"))&&sinclo.scenarioApi.isProcessing()&&sinclo.scenarioApi._hearing.isHearingMode())if($("#flexBoxHeight").addClass("sinclo-hide"),$("#miniFlexBoxHeight").removeClass("sinclo-hide"),sinclo.scenarioApi.setPlaceholderMessage("ã¡ãã»ã¼ã¸ãå¥åãã¦ä¸ãã"),$("#miniSincloChatMessage").attr("type",sinclo.scenarioApi.getInputType()),scl_check.smartphone())sinclo.adjustSpWidgetSize();else{common.widgetHandler._handleResizeEvent();document.getElementById("chatTalk");$("#miniSincloChatMessage, #sincloChatMessage").is(":focus")&&$("#miniSincloChatMessage").focus(),$("#sincloWidgetBox").offset({top:$("#sincloBox").offset().top})}},forceHideMiniMessageArea:!1,hideMiniMessageArea:function(){if((!scl_check.objPath(window.sincloInfo,"custom.widget.forceHideMessageArea")||!window.sincloInfo.custom.widget.forceHideMessageArea)&&(sinclo.scenarioApi.isProcessing()&&sinclo.scenarioApi._hearing.isHearingMode()||this.forceHideMiniMessageArea))if($("#flexBoxHeight").removeClass("sinclo-hide"),$("#miniFlexBoxHeight").addClass("sinclo-hide"),$("#miniSincloChatMessage").attr("type","text"),this.forceHideMiniMessageArea=!1,scl_check.smartphone())sinclo.adjustSpWidgetSize();else{common.widgetHandler._handleResizeEvent();document.getElementById("chatTalk");$("#miniSincloChatMessage, #sincloChatMessage").is(":focus")&&$("#sincloChatMessage").focus(),$("#sincloWidgetBox").offset({top:$("#sincloBox").offset().top})}},addKeyDownEventToSendChat:function(){sinclo.scenarioApi.isProcessing()&&sinclo.scenarioApi.isWaitingInput()&&sinclo.scenarioApi._hearing.isHearingMode()&&sinclo.scenarioApi._hearing.isLFModeDisabled();$("#sincloChatMessage,#miniSincloChatMessage").off("keydown",sinclo.chatApi.handleKeyDown),$("#sincloChatMessage,#miniSincloChatMessage").on("keydown",sinclo.chatApi.handleKeyDown)},removeKeyDownEventToSendChat:function(){"chatTrigger"in window.sincloInfo.widget&&2===common.getWidgetSettings().chatTrigger||$("#sincloChatMessage,#miniSincloChatMessage").off("keydown",sinclo.chatApi.handleKeyDown)},handleKeyDown:function(e){var t=sinclo.scenarioApi.isProcessing()&&sinclo.scenarioApi.isWaitingInput()&&sinclo.scenarioApi._hearing.isHearingMode(),n=t&&sinclo.scenarioApi._hearing.isLFModeDisabled(),i=sinclo.scenarioApi._bulkHearing.isInMode()||t&&!sinclo.scenarioApi._hearing.isLFModeDisabled();n?(e&&e.stopImmediatePropagation(),(e.which&&13===e.which||e.keyCode&&13===e.keyCode)&&sinclo.chatApi.push()):i?(e&&e.stopImmediatePropagation(),(e.which&&13===e.which||e.keyCode&&13===e.keyCode)&&e.shiftKey&&sinclo.chatApi.push()):(e&&e.stopImmediatePropagation(),(e.which&&13===e.which||e.keyCode&&13===e.keyCode)&&(e.shiftKey||e.ctrlKey||sinclo.chatApi.push()))},getPlaceholderMessage:function(){var e="ã¡ãã»ã¼ã¸ãå¥åãã¦ãã ãã";return sinclo.scenarioApi.isProcessing()&&""!==sinclo.scenarioApi.getPlaceholderMessage()?e=sinclo.scenarioApi.getPlaceholderMessage():"chatTrigger"in window.sincloInfo.widget&&2===common.getWidgetSettings().chatTrigger||(scl_check.smartphone()?e+="ï¼æ¹è¡ã§éä¿¡ï¼":e+="\nï¼Shift+Enterã§æ¹è¡/Enterã§éä¿¡ï¼"),e},setPlaceholderMessage:function(e){var t=document.getElementById("sincloChatMessage");t&&(t.placeholder=e);var n=document.getElementById("miniSincloChatMessage");n&&(n.placeholder=e)},clearPlaceholderMessage:function(){var e=document.getElementById("sincloChatMessage");e&&(e.placeholder="");var t=document.getElementById("miniSincloChatMessage");t&&(t.placeholder="")},targetTextarea:null,lockPageScroll:function(){},unlockPageScroll:function(){},lockPageScrollHandler:function(e){$(e.target).parents("#chatTalk").get(0)===sinclo.chatApi.targetTextarea&&0!==sinclo.chatApi.targetTextarea.scrollTop&&sinclo.chatApi.targetTextarea.scrollTop+sinclo.chatApi.targetTextarea.clientHeight<sinclo.chatApi.targetTextarea.scrollHeight?e.stopPropagation():e.cancelable&&!scl_check.android()&&e.preventDefault()},unlockPageScrollHandler:function(e){0===sinclo.chatApi.targetTextarea.scrollTop?sinclo.chatApi.targetTextarea.scrollTop=1:sinclo.chatApi.targetTextarea.scrollTop+sinclo.chatApi.targetTextarea.clientHeight===sinclo.chatApi.targetTextarea.scrollHeight&&(sinclo.chatApi.targetTextarea.scrollTop=sinclo.chatApi.targetTextarea.scrollTop-1)},widgetOpen:function(){this.beforeWidgetOpen();var e=sinclo_storage.s.get("widgetOpen");if(!("showTime"in window.sincloInfo.widget&&"maxShowTime"in window.sincloInfo.widget&&null!==String(common.getWidgetSettings().maxShowTime).match(/^[0-9]{1,4}$/)))return!1;var t=String(common.getWidgetSettings().showTime),n=String(common.getWidgetSettings().displayStyleType),i=1e3*Number(common.getWidgetSettings().maxShowTime);if(!scl_check.smartphone()||1!==Number(common.getWidgetSettings().spAutoOpenFlg)||3!==Number(common.getWidgetSettings().spWidgetViewPattern)){switch(n){case"1":if(!e){var o=sinclo.widget.condifiton.get();"false"===String(o)&&(scl_check.smartphone()&&common.getWidgetSettings().hasOwnProperty("spAutoOpenFlg")&&1===Number(common.getWidgetSettings().spAutoOpenFlg)||(sinclo_storage.l.set("widgetOpen",!0),sinclo_storage.s.set("widgetOpen",!0),sinclo.widget.condifiton.set(!0,!1),common.widgetHandler.isShown()||sinclo_storage.s.set("preWidgetOpened",!0),sinclo.operatorInfo.ev()))}break;case"2":(scl_check.smartphone()&&3===Number(common.getWidgetSettings().spWidgetViewPattern)||scl_check.hasCustomBannerImageSetting()||scl_check.hasOriginalImageSetting())&&(sinclo_storage.l.get("bannerAct")||sinclo.operatorInfo.onBanner());break;case"3":sinclo_storage.l.get("bannerAct")||sinclo.operatorInfo.onBanner()}return"5"!==t&&(("1"!==t||"true"!==String(e))&&void window.setTimeout(function(){var e=sinclo.widget.condifiton.get();"false"===String(e)&&(sinclo_storage.l.set("widgetOpen",!0),sinclo_storage.s.set("widgetOpen",!0),common.widgetHandler.isShown()||sinclo_storage.s.set("preWidgetOpened",!0),"true"===sinclo_storage.l.get("bannerAct")&&sinclo.operatorInfo.clickBanner(!0),scl_check.smartphone()&&common.getWidgetSettings().hasOwnProperty("spAutoOpenFlg")&&1===Number(common.getWidgetSettings().spAutoOpenFlg)||sinclo.operatorInfo.ev())},common.widgetHandler.getRemainingMaxTimeMsec(i)))}sinclo_storage.l.get("bannerAct")||sinclo.operatorInfo.onBanner()},beforeWidgetOpen:function(){1!==common.getWidgetSettings().showTiming&&2!==common.getWidgetSettings().showTiming||window.setTimeout(function(){window.sincloInfo.widgetDisplay=!0,common.widgetHandler.show(),"close"==sinclo_storage.l.get("textareaOpend")?sinclo.hideTextarea():sinclo.displayTextarea()},common.widgetHandler.getRemainingTimingMsec())},createNotifyMessage:function(e){var t=document.getElementsByTagName("sinclo-chat")[0],n=document.createElement("div"),i=document.createElement("li");n.appendChild(i),t.appendChild(n),i.className="sinclo_etc",i.innerHTML="ï¼ "+scl_check.escape_html(e)+" ï¼",this.scDown()},createTypingTimer:null,createTypingMessage:function(e){function t(e){var t=(e.length+4)/2;r.style.marginLeft="-"+t+"em"}var n=JSON.parse(e),i=sinclo.chatApi.opUser,o=document.getElementsByTagName("sinclo-typing")[0],s=document.getElementById("sinclo_typeing_message"),a=document.createElement("li"),r=document.createElement("span");if(!1===n.status)return s&&s.parentNode.removeChild(s),clearInterval(this.createTypingTimer),!1;if(!1===scl_check.isset(i)&&(i="ãªãã¬ã¼ã¿ã¼"),i=scl_check.escape_html(i),s||(a.appendChild(r),o.appendChild(a),a.id="sinclo_typeing_message",r.textContent=i+"ãå¥åä¸­",t(i)),this.createTypingTimer=setInterval(function(){t(i),r.textContent.length>i.length+6?r.textContent=i+"ãå¥åä¸­":r.textContent+="."},500),!this.isShowChatReceiver()){var c=document.getElementById("chatTalk");$("#sincloBox #chatTalk").animate({scrollTop:c.scrollHeight-c.clientHeight},300)}},createFileUploadingMessage:function(e){var t=JSON.parse(e),n=document.getElementsByTagName("sinclo-typing")[0],i=document.getElementById("sinclo_loading_file_message"),o=document.createElement("li"),s=document.createElement("span");if("stopLoadingForCompany"===t.status)return i&&i.parentNode.removeChild(i),clearInterval(this.createLoadingTimer),!1;if(i||(o.appendChild(s),n.appendChild(o),o.id="sinclo_loading_file_message",s.textContent="ãªãã¬ã¼ã¿ã¼ããã¡ã¤ã«ãã¢ããã­ã¼ãä¸­"),this.createLoadingTimer=setInterval(function(){21<s.textContent.length?s.textContent="ãªãã¬ã¼ã¿ã¼ããã¡ã¤ã«ãã¢ããã­ã¼ãä¸­":s.textContent+="."},500),!this.isShowChatReceiver()){var a=document.getElementById("chatTalk");$("#sincloBox #chatTalk").animate({scrollTop:a.scrollHeight-a.clientHeight},300)}},createAnchorTag:{_regList:{imgTagReg:RegExp(/<img ([\s\S]*?)>/),linkReg:RegExp(/(http(s)?:\/\/[\w\-\.\/\?\+\=\&\;\,\#\:\%\!\(\)\<\>\"\u3000-\u30FE\u4E00-\u9FA0\uFF01-\uFFE3]+)/),linkTabReg:RegExp(/<a ([\s\S]*?)>([\s\S]*?)<\/a>/),linkButtonTabReg:RegExp(/<a ([\s\S]*?)style=([\s\S]*?)>([\s\S]*?)<\/a>/),mailLinkReg:RegExp(/(mailto:[\w\-\.\/\?\=\&\;\,\#\:\%\!\(\)\<\>\"\u3000-\u30FE\u4E00-\u9FA0\uFF01-\uFFE3]+)/),telLinkReg:RegExp(/(tel:[0-9]{9,})/),telnoTagReg:RegExp(/&lt;telno&gt;([\s\S]*?)&lt;\/telno&gt;/),urlTagReg:RegExp(/href="([\s\S]*?)"([\s\S]*?)/)},_linkWithoutText:function(e,t,n,i,o){var s=t[0],a=n.match(this._regList.imgTagReg);if(null==a){var r=(l='<a href="'+s+'" target="_blank">'+s+"</a>").match(this._regList.linkTabReg),c=r[1].replace(/ /g,"$nbsp;");l=l.replace(r[1],r[1]+" onclick=sclLink('"+scl_check.escape_html(r[2])+"','"+c+"','"+e+"',event)"),i=i.replace(s,l)}else{var l;i=l="<div style='display:inline-block;width:100%;vertical-align:bottom;'><img "+a[1]+" class = "+o+"></div>"}return i},_linkText:function(e,t,n,i,o,s){if(null!==t){var a=n[0],r=i.match(this._regList.imgTagReg);if(null==r){var c=i.match(this._regList.linkButtonTabReg);if(null!==c)var l=c[1].replace(/ /g,"$nbsp;");else l=n[1].replace(/ /g,"$nbsp;");if(l=l.replace(/\"/g,""),"clickTelno"===e){var d=t[0].replace(/[^0-9^\.]/g,"");a=scl_check.smartphone()?a.replace(n[1],n[1]+" class='sincloTelConversion' onclick=\"sclLink('"+scl_check.escape_html(n[2])+"','"+l+"','"+e+"',event);sinclo.api.callTelCV('"+d+"');\""):"<span class='link'>"+n[2]+"</span>"}else a=a.replace(n[1],n[1]+" onclick=sclLink('"+scl_check.escape_html(n[2].replace(/ /g,"$nbsp;"))+"','"+l+"','"+e+"',event)")}else{l=(l=n[1].replace(r[0],"")).replace(/ /g,"$nbsp;");var p="<div style='display:inline-block;width:100%;vertical-align:bottom;'><img "+r[1]+" class = "+s+"></div>",u=(a=a.replace(r[0],p)).match(this._regList.urlTagReg);if("clickTelno"===e){d=t[0].replace(/[^0-9^\.]/g,"");a=scl_check.smartphone()?a.replace(n[1],n[1]+"class='sincloTelConversion' onclick=sclLink('"+u[1]+"','"+l+"','"+e+"',event);sinclo.api.callTelCV('"+d+"')"):a.replace(a,p)}else a=a.replace(n[1],n[1]+" onclick=sclLink('"+u[1]+"','"+l+"','"+e+"',event)")}}else a="<span class='link'>"+n[2]+"</span>";return i.replace(n[0],a)}},iconSource:null,_searchChatIdWithIcon:function(e){var t=sinclo_storage.l.get("answeringChatIdList");null!=t&&(t=JSON.parse(t))[e]&&sinclo.chatApi._setIconSource(t[e])},_setIconSource:function(e){var t=sinclo_storage.l.get("operatorIconList");null!=t&&((t=JSON.parse(t))[e]?sinclo.chatApi.iconSource=t[e]:sinclo.chatApi.iconSource="fa-user sinclo-fal normal")},_addClassToIconDiv:function(e){return e.classList.add("grid_for_icon"),e.classList.add(sinclo.chatApi._addWidgetSizeClassName()),e.classList.add("effect_left"),e},_editDivForIconSetting:function(e,t,n,i){var o="",s=sinclo.chatApi;preventWithdrawalOverlay.isActive()?sincloInfo.preventWithdrawalSettings.widget:sincloInfo.widget;if(1===Number(common.getWidgetSettings().showChatbotIcon)&&t){o=common.getWidgetSettings().chatbotIcon;var a=s._createIconDiv(o);e.appendChild(a),e=s._addClassToIconDiv(e)}else if(1===Number(common.getWidgetSettings().showOperatorIcon)&&n){o=3===Number(common.getWidgetSettings().operatorIconType)?(s._searchChatIdWithIcon(i),s.iconSource):common.getWidgetSettings().operatorIcon;var r=s._createIconDiv(o);e.appendChild(r),e=s._addClassToIconDiv(e)}return s.iconSource=null,e},_createIconDiv:function(e){var t,n=document.createElement("div");switch(n.classList.add("iconDiv"),sinclo.chatApi._checkIconType(e)){case"fontIcon":t=sinclo.chatApi._createFontIcon(e);break;case"imageIcon":var i=document.createElement("div");i.classList.add("img_wrapper"),t=sinclo.chatApi._createImageIcon(e),i.appendChild(t),t=i}return n.classList.add(sinclo.chatApi._addWidgetSizeClassName()),n.classList.add("effect_left"),n.appendChild(t),n},_checkIconType:function(e){return null!==e.match(/^fa/)?"fontIcon":"imageIcon"},_isMainColorWhite:function(){return"#FFFFFF"===common.getWidgetSettings().mainColor},_createFontIcon:function(e){for(var t=document.createElement("i"),n=e.split(" "),i=0;i<n.length;i++)t.classList.add("sinclo-fal"),t.classList.add(n[i]);return sinclo.chatApi._isMainColorWhite()&&t.classList.add("icon_border"),t},_createImageIcon:function(e){var t=document.createElement("img");return t.src=e,t},_addWidgetSizeClassName:function(){switch(Number(common.getWidgetSettings().widgetSizeType)){case 1:return"smallSize";case 2:return"middleSize";case 3:case 4:return"largeSize";case 5:return"customSize";default:return}},createMessage:function(e,t){common.chatBotTypingTimerClear(),common.chatBotTypingRemove();var n=document.getElementsByTagName("sinclo-chat")[0],i=document.createElement("div"),o=document.createElement("li");-1===e.cn.indexOf("sinclo_se")&&(i=sinclo.chatApi._editDivForIconSetting(i,e.isBot,e.isOp,e.chatId)),-1===e.cn.indexOf("hearing_msg")&&(o.dataset.chatId=e.chatId),t&&i.classList.add("sinclo-scenario-msg"),e.isHearingAnswer&&(o.dataset.hearingSeqNum=e.answerCount),i.appendChild(o),n.appendChild(i);var s,a=e.message.split("\n"),r="sinclo-radio"+n.children.length,c="",l="";if(1===common.getWidgetSettings().widgetSizeType||scl_check.smartphone()?s="smallSizeImg":2===common.getWidgetSettings().widgetSizeType?s="middleSizeImg":3===common.getWidgetSettings().widgetSizeType&&(s="largeSizeImg"),!1===scl_check.isset(e.name)&&(e.name=""),scl_check.escape_html(e.name),-1!==e.cn.indexOf("sinclo_re")?(common.getWidgetSettings().isSendMessagePositionLeft?i.style.textAlign="right":i.style.textAlign="left",""!==e.name&&(c="<span class='cName'>"+e.name+"</span>")):-1!==e.cn.indexOf("sinclo_se")&&(common.getWidgetSettings().isSendMessagePositionLeft?i.style.textAlign="left":i.style.textAlign="right"),scl_check.isJSON(e.message)&&-1!==e.message.indexOf("separator")){common.getPageWidth();var d=common.getRatio(),p=JSON.parse(e.message),u=p.message.split(p.separator);1===u.length?c+='<span class="sinclo-text-line">'+u[0]+"</span>":(c+='<ul style="margin-top: -7px; height: auto;">',u.forEach(function(e){c+='<li style="list-style-type: disc; background-color: transparent; margin: '+2*d+"px 0 0 "+4*d+'px; padding: 0;">'+e+"</li>"}),c+="</ul>")}else{for(var g=!1,h=0;a.length>h;h++)if(a[h].match(/(<div class="free-block")/))c+=a[h],g=!0;else if(a[h].match(/(<\/div>)/))g=!1,c+=a[h];else if(g)c+=a[h];else{var m=scl_check.escape_html(a[h]),f=m.replace(/(&lt;)/g,"<").replace(/(&gt;)/g,">").replace(/(&quot;)/g,'"').replace(/(&#39;)/g,"'").replace(/(&amp;)/g,"&");if(-1!==e.cn.indexOf("sinclo_re")){var v=m.indexOf("[]"),b=m.indexOf("[*]");if(-1<v){var y=m.slice(v+2).trim();m=e.isBot?"<sinclo-radio><input type='radio' name='"+r+"' id='"+r+"-"+h+"' class='sinclo-chat-radio' value='"+y+"'>":"<sinclo-radio><input type='radio' name='"+r+"' id='"+r+"-"+h+"' class='sinclo-chat-radio send-operator' value='"+y+"'>",m+="<label for='"+r+"-"+h+"'>"+y+"</label></sinclo-radio>"}else if(-1<b){y=m.slice(b+3).trim();m=e.isBot?"<sinclo-radio><input type='radio' name='"+r+"' id='"+r+"-"+h+"' class='sinclo-chat-radio' value='"+y+"' checked>":"<sinclo-radio><input type='radio' name='"+r+"' id='"+r+"-"+h+"' class='sinclo-chat-radio send-operator' value='"+y+"' checked>",m+="<label for='"+r+"-"+h+"'>"+y+"</label></sinclo-radio>",l=y}}var x=m.match(this.createAnchorTag._regList.linkReg),_=f.match(this.createAnchorTag._regList.linkTabReg),w="clickLink";null!==_?(null!==m.match(this.createAnchorTag._regList.mailLinkReg)&&(w="clickMail",x=m.match(this.createAnchorTag._regList.mailLinkReg)),null!==m.match(this.createAnchorTag._regList.telLinkReg)&&(w="clickTelno",x=m.match(this.createAnchorTag._regList.telLinkReg)),m=sinclo.chatApi.createAnchorTag._linkText(w,x,_,f,m,s)):null!==x&&(m=sinclo.chatApi.createAnchorTag._linkWithoutText(w,x,f,m,s));var k=m.match(this.createAnchorTag._regList.telnoTagReg);if(null!==k){var T=k[1];if(scl_check.smartphone()){var S='href="tel:'+T+'"',I='<a class="sincloTelConversion" onclick=sinclo.api.callTelCV(\''+T+"');sclLink('"+T+"','"+S+"','clickTelno',event) href='tel:"+T+"'>"+T+"</a>";m=m.replace(k[0],I)}else{var A="<span class='telno'>"+T+"</span>";m=m.replace(k[0],A)}}if(1!==e.cn.indexOf("sinclo_re")){var C=RegExp(/<img ([\s\S]*?)>/),B=f.match(C);if(null!==B&&null==x&&null==_){var N="<div style='display:inline-block;width:100%;vertical-align:bottom;'><img "+B[1]+" class = "+s+"></div>";m=f.replace(B[0],N)}}m.match(/<(".*?"|'.*?'|[^'"])*?>/)?c+=m+"\n":c+=""===m?"<br>":"<span class='sinclo-text-line'>"+m.replace(/^[\n|\r\n|\r]$/g,"")+"</span>\n"}if(""!==l&&sinclo.scenarioApi.isProcessing()){var D=!1;void 0!==sinclo.scenarioApi.get("s_targetChatId")&&(D=e.chatId===sinclo.scenarioApi.get("s_targetChatId")[sinclo.scenarioApi.get("s_targetChatId").length-1]),0!==e.chatId&&!D||(c+="<p class='sincloButtonWrap' onclick='sinclo.chatApi.send(\""+l+"\")'><span class='sincloButton'>æ¬¡ã¸</span></p>")}}if(-1!==e.cn.indexOf("sinclo_re")?common.getWidgetSettings().isSendMessagePositionLeft?e.cn+=" effect_right":e.cn+=" effect_left":-1!==e.cn.indexOf("sinclo_se")&&(common.getWidgetSettings().isSendMessagePositionLeft?e.cn+=" effect_left":e.cn+=" effect_right"),o.className=e.cn,o.innerHTML=c,o.classList.contains("hearing_msg")&&-1<o.innerHTML.indexOf("sinclo-radio")&&!sinclo.scenarioApi.isProcessing()){var M=o.querySelectorAll("input[name^='sinclo-radio']");for(h=0;void 0!==M[h];h++)M[h].disabled=!0,M[h].parentElement.style.opacity=.5}},createMessageHtml:function(e,t){if(!e||0===e.length)return"";var n="",i=e.split("\n"),o="";t&&(o='style="width:100%; text-align:'+t+';"');var s="";1===common.getWidgetSettings().widgetSizeType||scl_check.smartphone()?s="smallSizeImg":2===common.getWidgetSettings().widgetSizeType?s="middleSizeImg":3===common.getWidgetSettings().widgetSizeType&&(s="largeSizeImg");for(var a=!1,r=0;i.length>r;r++)if(i[r].match(/(<div class="free-block")/))n+=i[r],a=!0;else if(i[r].match(/(<\/div>)/))a=!1,n+=i[r];else if(a)n+=i[r];else{var c=scl_check.escape_html(i[r]),l=c=c.replace(/(&lt;)/g,"<").replace(/(&gt;)/g,">").replace(/(&quot;)/g,'"').replace(/(&#39;)/g,"'").replace(/(&amp;)/g,"&"),d=c.match(this.createAnchorTag._regList.linkReg),p=l.match(this.createAnchorTag._regList.linkTabReg),u="clickLink";null!==p?(null!==c.match(this.createAnchorTag._regList.mailLinkReg)&&(u="clickMail",d=c.match(this.createAnchorTag._regList.mailLinkReg)),null!==c.match(this.createAnchorTag._regList.telLinkReg)&&(u="clickTelno",d=c.match(this.createAnchorTag._regList.telLinkReg)),c=sinclo.chatApi.createAnchorTag._linkText(u,d,p,l,c,s)):null!==d&&(c=sinclo.chatApi.createAnchorTag._linkWithoutText(u,d,l,c,s));var g=c.match(this.createAnchorTag._regList.telnoTagReg);if(null!==g){var h=g[1];if(scl_check.smartphone()){var m='href="tel:'+h+'"',f='<a class="sincloTelConversion" onclick=sinclo.api.callTelCV(\''+h+"');sclLink('"+h+"','"+m+"','clickTelno',event) href='tel:"+h+"'>"+h+"</a>";c=c.replace(g[0],f)}else{var v="<span class='telno'>"+h+"</span>";c=c.replace(g[0],v)}}c.match(/<(".*?"|'.*?'|[^'"])*?>/)?n+=c+"\n":n+=""===c?"<br>":"<span class='sinclo-text-line' "+o+">"+c.replace(/^[\n|\r\n|\r]$/g,"")+"</span>\n"}return n},addRadioButton:function(e,t,n,i){common.chatBotTypingTimerClear(),common.chatBotTypingRemove();var o=document.getElementsByTagName("sinclo-chat")[0],s=document.createElement("div"),a=document.createElement("li");(s=sinclo.chatApi._editDivForIconSetting(s,!0)).classList.add("sinclo-scenario-msg"),s.appendChild(a),o.appendChild(s);var r=sinclo.chatApi.createMessageHtml(t),c=sinclo.chatApi.createRadioButtonHtml(n,o.children.length,i);if(s.style.textAlign="left",e+=" effect_left",e+=" hearing_msg","1"===n.radioStyle&&(e+=" customWidth"),a.className=e,a.innerHTML=r+c,"1"===n.radioStyle){var l=$("#sinclo-radio-button"+o.children.length+' input[type="radio"]');$("#sinclo-radio-button"+o.children.length+" sinclo-radio").css("background-color",n.customDesign.radioEntireBackgroundColor),l.each(function(){$(this).prop("checked")?($(this).parent().css("background-color",n.customDesign.radioEntireActiveColor),$(this).parent().find("label").css("color",n.customDesign.radioActiveTextColor)):$(this).parent().find("label").css("color",n.customDesign.radioTextColor)}),l.on("change",function(){l.each(function(){$(this).prop("checked")?"1"!==n.radioStyle?$(this).parent().css("background-color","transparent"):($(this).parent().css("background-color",n.customDesign.radioEntireActiveColor),$(this).parent().find("label").css("color",n.customDesign.radioActiveTextColor)):"1"!==n.radioStyle?$(this).parent().css("background-color","transparent"):($(this).parent().css("background-color",n.customDesign.radioEntireBackgroundColor),$(this).parent().find("label").css("color",n.customDesign.radioTextColor))})})}},addPulldown:function(e,t,n,i,o){common.chatBotTypingTimerClear(),common.chatBotTypingRemove();var s=document.getElementsByTagName("sinclo-chat")[0],a=document.createElement("div"),r=document.createElement("li");(a=sinclo.chatApi._editDivForIconSetting(a,!0)).classList.add("sinclo-scenario-msg"),a.appendChild(r),s.appendChild(a);var c=sinclo.chatApi.createMessageHtml(t),l=sinclo.chatApi.createPullDownHtml(i,s.children.length,o);a.style.textAlign="left",e+=" effect_left",e+=" hearing_msg",r.className=e,r.innerHTML=c+l},addCarousel:function(e,t,i,n){common.chatBotTypingTimerClear(),common.chatBotTypingRemove();var o=document.getElementsByTagName("sinclo-chat")[0],s=document.createElement("div"),a=document.createElement("li");"1"===i.balloonStyle&&(s=sinclo.chatApi._editDivForIconSetting(s,!0)),s.classList.add("sinclo-scenario-msg"),s.appendChild(a),o.appendChild(s);var r=o.children.length,c=sinclo.chatApi.createMessageHtml(t),l=sinclo.chatApi.createCarouselHtml(i,o.children.length,n);s.style.textAlign="left",e+=" hearing_msg effect_left","1"===i.carouselPattern?e+=" insideArrow":e+=" outsideArrow","1"===i.balloonStyle?e+=" sinclo_re":e+=" noneBalloon",a.className=e,a.innerHTML=c+l;var d=sinclo.chatApi.getSlickOption(i),p=$("#sinclo-carousel"+r);p.on("init",function(e,t){var n=0;t.$slides.each(function(e){var t=$(this).find(".thumbnail").height();n=n<t?t:n}),i.outCarouselNoneBorder||(n+=2),t.$slides.each(function(e){$(this).find(".thumbnail").css("min-height",n+"px")})}),p.slick(d);var u=null;i.images.forEach(function(e,t){e.answer===n&&(u=t)}),u&&p.slick("slickGoTo",u)},addCalendar:function(e,t,n,i,o,s){common.chatBotTypingTimerClear(),common.chatBotTypingRemove();var a=document.getElementsByTagName("sinclo-chat")[0],r=document.createElement("div"),c=document.createElement("li");(r=sinclo.chatApi._editDivForIconSetting(r,!0)).classList.add("sinclo-scenario-msg"),r.appendChild(c),a.appendChild(r);var l=a.children.length,d=sinclo.chatApi.createMessageHtml(t),p=sinclo.chatApi.createCalendarHtml(n,l,i);if(r.style.textAlign="left",e+=" effect_left",e+=" hearing_msg",c.className=e,c.innerHTML=d+p,!0===o){c.innerHTML=d+p+"<div class='cancelReservationArea'><a>äºç´ãä¸­æ­¢ãã</a></div>",c.querySelector("div.cancelReservationArea a").addEventListener("click",function(){sinclo.scenarioApi._reservation._handleReservationCancel(r),emit("sendChat",{historyId:sinclo.chatApi.historyId,stayLogsId:sinclo.chatApi.stayLogsId,chatMessage:s,mUserId:null,messageType:57,messageRequestFlg:0,isAutoSpeech:!1,notifyToCompany:!1,isScenarioMessage:!0},function(){setTimeout(function(){sinclo.scenarioApi._reservation._doAfterCancelAction()},0)})})}else c.innerHTML=d+p;var u=sinclo.chatApi.createCalendarOption(n),g=$("#sinclo-datepicker"+l).flatpickr(u);$("#sinclo-datepicker"+l).hide();var h=$("#sinclo-datepicker"+l).find(".flatpickr-weekday");return h[0]&&(h[0].innerText=1==n.language?"æ¥":"Sun"),sinclo.chatApi.handleCalendarEvent(n,l),g},addButton:function(e,t,n,i){common.chatBotTypingTimerClear(),common.chatBotTypingRemove();var o=document.getElementsByTagName("sinclo-chat")[0],s=document.createElement("div"),a=document.createElement("li"),r=!1;t&&0!==t.length||(r=!0),(s=sinclo.chatApi._editDivForIconSetting(s,!0)).classList.add("sinclo-scenario-msg"),s.appendChild(a),o.appendChild(s);var c=this.getRawColor(common.getWidgetSettings().mainColor,.5);if(n.isCustomDesign)c=n.customDesign.buttonActiveColor;var l="<style>";l+='  #sincloBox li.sinclo_re.no-wrap.all-round .sincloHearingButtons[name="sinclo-button'+o.children.length+'"] .sincloHearingButton:active {background-color: '+c+"!important;}",l+='  #sincloBox li.sinclo_re.no-wrap.all-round .sincloHearingButtons[name="sinclo-button'+o.children.length+'"] .sincloHearingButton:hover {background-color: '+common.getThinColor(common.getWidgetSettings().mainColor,.2)+"!important;}",l+='  #sincloBox li.sinclo_re.no-wrap.all-round .sincloHearingButtons[name="sinclo-button'+o.children.length+'"] .sincloHearingButton.selected {background-color: '+c+"!important;}",l+="</style>";var d="left";switch(Number(n.customDesign.messageAlign)){case 1:break;case 2:d="center";break;case 3:d="right"}l+=sinclo.chatApi.createMessageHtml(t,d);var p=sinclo.chatApi.createButtonHtml(n,o.children.length,i,r);s.style.textAlign="left",e+=" effect_left",e+=" hearing_msg no-wrap all-round",r&&(e+=" noText"),a.className=e,a.innerHTML=l+p},addButtonUI:function(e,t,n,i){common.chatBotTypingTimerClear(),common.chatBotTypingRemove();var o=document.getElementsByTagName("sinclo-chat")[0],s=document.createElement("div"),a=document.createElement("li");(s=sinclo.chatApi._editDivForIconSetting(s,!0)).classList.add("sinclo-scenario-msg"),s.appendChild(a),o.appendChild(s);var r=sinclo.chatApi.createMessageHtml(t),c=sinclo.chatApi.createButtonUIHtml(n,o.children.length,i);s.style.textAlign="left",e+=" effect_left",e+=" hearing_msg",a.className=e,a.style.width="95%",a.innerHTML=r+c},addCheckbox:function(e,t,n,i){common.chatBotTypingTimerClear(),common.chatBotTypingRemove();var o=document.getElementsByTagName("sinclo-chat")[0],s=document.createElement("div"),a=document.createElement("li");(s=sinclo.chatApi._editDivForIconSetting(s,!0)).classList.add("sinclo-scenario-msg"),s.appendChild(a),o.appendChild(s);var r=sinclo.chatApi.createMessageHtml(t),c=sinclo.chatApi.createCheckboxHtml(n,o.children.length,i);if(s.style.textAlign="left",e+=" effect_left",e+=" hearing_msg","1"===n.checkboxStyle&&(e+=" customWidth"),a.className=e,a.innerHTML=r+c,0<$("#sinclo-checkbox"+o.children.length).find("input:checked").length?$("#sinclo-checkbox"+o.children.length).find(".checkbox-submit-btn").prop("disabled",!1).css("opacity",1):$("#sinclo-checkbox"+o.children.length).find(".checkbox-submit-btn").prop("disabled",!0).css("opacity",.5),"1"===n.checkboxStyle){var l=$("#sinclo-checkbox"+o.children.length+' input[type="checkbox"]');l.each(function(){$(this).prop("checked")&&($(this).parent().css("background-color",n.customDesign.checkboxEntireActiveColor),$(this).parent().css("color",n.customDesign.checkboxActiveTextColor))}),l.on("change",function(){$(this).prop("checked")?($(this).parent().css("background-color",n.customDesign.checkboxEntireActiveColor),$(this).parent().css("color",n.customDesign.checkboxActiveTextColor)):"1"!==n.checkboxStyle?$(this).parent().css("background-color","transparent"):($(this).parent().css("background-color",n.customDesign.checkboxEntireBackgroundColor),$(this).parent().css("color",n.customDesign.checkboxTextColor))})}},createCalendarHtml:function(e,t,n){var i="",o=!1;return i+=sinclo.chatApi.createCalendarStyle(e,t),i+='<div style="margin-top: 10px" id="sinclo-calendar'+t+'" name="sinclo-calendar'+t+'">',n?(o=!0,i+='<input type="text" name="sinclo-datepicker'+t+'" id="sinclo-datepicker'+t+'" value="'+n+'">'):i+='<input type="text" name="sinclo-datepicker'+t+'" id="sinclo-datepicker'+t+'">',i+="</div>",o&&(i+="<p class='sincloButtonWrap' onclick='sinclo.chatApi.send(\""+n+"\")'><span class='sincloButton'>æ¬¡ã¸</span></p>"),i},createCalendarStyle:function(e,t){var n=1;scl_check.smartphone()&&(n=common.isPortrait()?common.getPageWidth()*(1/285):2.5);var i=common.getWidgetSettings().mainColor,o=common.getWidgetSettings().mainColor,s=this.getRawColor(common.getWidgetSettings().mainColor);e.calendarCustomDesign&&(i=e.customDesign.borderColor,o=e.customDesign.headerBackgroundColor,s=e.customDesign.headerWeekdayBackgroundColor);var a="<style>",r="#sincloBox ul#chatTalk li.sinclo_re #sinclo-calendar"+t;return a+=r+" .flatpickr-calendar { border: "+2*n+"px solid "+i+"}",a+=r+" .flatpickr-calendar .flatpickr-months { background: "+o+"} ",a+=r+" .flatpickr-calendar .flatpickr-months .flatpickr-month { color: "+e.customDesign.headerTextColor+"}",a+=r+" .flatpickr-calendar .flatpickr-weekdays { background: "+s+"}",a+=r+" .flatpickr-calendar .flatpickr-months .flatpickr-prev-month { fill: "+e.customDesign.headerTextColor+"}",a+=r+" .flatpickr-calendar .flatpickr-months .flatpickr-next-month { fill: "+e.customDesign.headerTextColor+"}",a+=r+" .flatpickr-calendar .dayContainer { background-color: "+e.customDesign.calendarBackgroundColor+"}",a+=r+" .flatpickr-calendar .dayContainer .flatpickr-day.selected { background-color: "+o+"; color: "+sinclo.chatApi.getContrastColor(o)+" !important;}",a+=r+" .flatpickr-calendar .dayContainer .flatpickr-day.today:after { border: "+Math.floor(1*n)+"px solid "+o+"; outline: "+Math.floor(1*n)+"px solid "+s+";}",a+=r+" .flatpickr-calendar .dayContainer .flatpickr-day { border-top: none;  border-left:none; border-bottom: "+1*n+"px solid "+s+"; border-right: "+1*n+"px solid "+s+";}",a+=r+" .flatpickr-calendar .dayContainer span:nth-child(7n+7) { border-right: none }",a+=r+" .flatpickr-calendar span.flatpickr-weekday { color: "+sinclo.chatApi.getContrastColor(s)+" !important; };",a+="</style>"},createCalendarOption:function(i){var o={dateFormat:"Y/m/d",minDate:"today",maxDate:"today",inline:"true",disable:[],enable:[],locale:{firstDayOfWeek:0}};if(o.locale=1==i.language?{firstDayOfWeek:0,weekdays:{shorthand:["æ¥","æ","ç«","æ°´","æ¨","é","å"],longhand:["æ¥ææ¥","æææ¥","ç«ææ¥","æ°´ææ¥","æ¨ææ¥","éææ¥","åææ¥"]},months:{shorthand:["1æ","2æ","3æ","4æ","5æ","6æ","7æ","8æ","9æ","10æ","11æ","12æ"],longhand:["1æ","2æ","3æ","4æ","5æ","6æ","7æ","8æ","9æ","10æ","11æ","12æ"]}}:{firstDayOfWeek:0},i.isEnableAfterDate?o.minDate=(new Date).fp_incr(i.enableAfterDate):o.minDate=i.disablePastDate?"today":"",i.isDisableAfterDate?o.maxDate=(new Date).fp_incr(i.disableAfterDate):o.maxDate="",i.isDisableDayOfWeek){var s=[];Object.keys(i.dayOfWeekSetting).forEach(function(e,t,n){i.dayOfWeekSetting[e]&&s.push(Number(e))}),o.disable=[function(e){return-1!==s.indexOf(e.getDay())}]}else o.disable=[];if(i.isSetSpecificDate){if(1==i.setSpecificDateType){o.disable.length;try{Object.keys(i.specificDateData).forEach(function(e,t,n){o.disable.push(i.specificDateData[e])})}catch(e){}}if(2==i.setSpecificDateType)try{Object.keys(i.specificDateData).forEach(function(e,t,n){o.enable[e]=i.specificDateData[e]})}catch(e){}}else i.specificDateData=[""];return o},handleCalendarEvent:function(e,t){var n=$("#sinclo-calendar"+t),i=n.find(".flatpickr-weekday");i[0]&&(i[0].innerText=1===e.language?"æ¥":"Sun"),sinclo.chatApi.customCalendarTextColor(n,e),n.find(".flatpickr-calendar .flatpickr-months").on("mousedown",function(){sinclo.chatApi.customCalendarTextColor(n,e)}),$("#sinclo-datepicker"+t).on("change",function(){sinclo.chatApi.customCalendarTextColor(n,e)})},getContrastColor:function(e){var t,n=this.hexToRgb(e);return t=299*n.r+587*n.g+114*n.b,.5<=(t/=255e3)?"black":"white"},hexToRgb:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},createPullDownHtml:function(e,t,n){var i=sinclo.chatApi.createPulldownStyle(e),o="sinclo-pulldown"+t,s="",a=!1;return s+='<select name="'+o+'" id="'+o+'" style="'+i+'" class="sinclo-pulldown">',s+='<option value="">é¸æãã¦ãã ãã</option>',e.options.forEach(function(e,t){"object"==typeof e?n===e.label?(a=!0,s+='<option value="'+e.label+'" selected>'+e.label+"</option>"):!1===e.enabled?s+='<option value="'+e.label+'" style="color:#CCC" disabled>'+e.label+"</option>":s+='<option value="'+e.label+'">'+e.label+"</option>":n===e?(a=!0,s+='<option value="'+e+'" selected>'+e+"</option>"):s+='<option value="'+e+'">'+e+"</option>"}),s+="</select>",a&&(s+="<p class='sincloButtonWrap' onclick='sinclo.chatApi.send(\""+n+"\")'><span class='sincloButton'>æ¬¡ã¸</span></p>"),s},createRadioButtonHtml:function(e,t,n){var i="sinclo-radio-button"+t,o="",s=!1,a="1"===e.radioStyle?"buttonStyle":"labelStyle";o+='<div id="'+i+'" class="'+a+'">';var r=e.customDesign.radioSelectionDistance?e.customDesign.radioSelectionDistance:4,c="<style>";if(c+="#sincloBox ul#chatTalk #"+i+' sinclo-radio [type="radio"] + label:before {background-color: '+e.customDesign.radioBackgroundColor+" !important;}",c+="#sincloBox ul#chatTalk #"+i+' sinclo-radio [type="radio"]:checked + label:after {background: '+e.customDesign.radioActiveColor+" !important;}",c+="#sincloBox ul#chatTalk #"+i+" sinclo-radio:first-of-type {margin-top: 8px !important}",c+="#sincloBox ul#chatTalk #"+i+" sinclo-radio {margin-top: "+r+"px !important;}",e.radioNoneBorder?c+="#sincloBox ul#chatTalk #"+i+' sinclo-radio [type="radio"] + label:before {border-color: transparent !important;}':c+="#sincloBox ul#chatTalk #"+i+' sinclo-radio [type="radio"] + label:before {border-color: '+e.customDesign.radioBorderColor+"!important;}","1"!==e.radioStyle)c+="#sincloBox ul#chatTalk #"+i+' sinclo-radio [type="radio"] + label {background-color: transparent;}';else if(scl_check.smartphone()){var l=common.getRatio();c+="#sincloBox ul#chatTalk #"+i+" sinclo-radio {padding: "+8*l+"px;}"}else c+="#sincloBox ul#chatTalk #"+i+" sinclo-radio {padding: 8px;}",c+="#sincloBox ul#chatTalk #"+i+' sinclo-radio [type="radio"] + label {display: block !important;}',c+="#sincloBox ul#chatTalk #"+i+' sinclo-radio [type="radio"]:checked + label:after {top: 9px !important;}',c+="#sincloBox ul#chatTalk #"+i+' sinclo-radio [type="radio"] + label:before {top: 2px !important;}';return o+=c+="</style>",e.options.forEach(function(e,t){o+='<sinclo-radio style="display: block;">',n===e?(o+='<input type="radio" name="'+i+'" value="'+e+'" id="'+i+t+'" class="sinclo-chat-radio" checked="checked">',s=!0):o+='<input type="radio" name="'+i+'" value="'+e+'" id="'+i+t+'" class="sinclo-chat-radio">',o+='<label for="'+i+t+'">'+e+"</label>",o+="</sinclo-radio>"}),o+="</div>",s&&(o+="<p class='sincloButtonWrap' onclick='sinclo.chatApi.send(\""+n+"\")'><span class='sincloButton'>æ¬¡ã¸</span></p>"),o},createButtonUIHtml:function(t,e,n){var i="sinclo-buttonUI"+e,o=sinclo.chatApi.createButtonUIStyle(t,"#"+i),s="",a=!1;return s+='<div id="'+i+'" style="margin-top: 5px;">',s+=o,scl_check.isArray(t.options)?t.options.forEach(function(e){n===e?(a=!0,s+='<button onclick="return false;" class="sinclo-button-ui selected">'+e+"</button>"):s+='<button onclick="return false;" class="sinclo-button-ui">'+e+"</button>"}):Object.keys(t.options).forEach(function(e){n===e?(a=!0,s+='<button onclick="return false;" class="sinclo-button-ui selected">'+e+"</button>"):s+='<button onclick="return false;" class="sinclo-button-ui '+t.options[e]+'">'+e+"</button>"}),s+="</div>",a&&(s+="<p class='sincloButtonWrap' onclick='sinclo.chatApi.send(\""+n+"\")'><span class='sincloButton'>æ¬¡ã¸</span></p>"),s},createCheckboxHtml:function(e,t,i){var o="sinclo-checkbox"+t,n=sinclo.chatApi.createCheckboxStyle(e,"#"+o),s="",a="1"===e.checkboxStyle?"buttonStyle":"labelStyle";if(i)if(scl_check.isJSON(i))var r=JSON.parse(i),c=r.message.split(r.separator);else c=[i];return s+='<div id="'+o+'" style="margin-top: 5px;" data-separator="'+e.checkboxSeparator+'">',s+=n,e.options.forEach(function(t){if(!t||""===t)return!1;var n=!1;s+='<label class="sinclo-checkbox '+a+'">',i?(c.forEach(function(e){t===e&&(s+='<input type="checkbox" checked="checked" value="'+t+'" name="'+o+'">',n=!0)}),n||(s+='<input type="checkbox" value="'+t+'" name="'+o+'">')):s+='<input type="checkbox" value="'+t+'" name="'+o+'">',s+=t,s+='<span class="checkmark"></span>',s+="</label>"}),s+='<span class="ok-button checkbox-submit-btn">OK</span>',s+="</div>"},createCarouselHtml:function(e,t,n){var i=sinclo.chatApi.createCarouselStyle(e,"#carousel-container"+t),o=sinclo.chatApi.getCarouselSize(e);if(scl_check.smartphone()){var s=common.getRatio(),a=0;switch(Number(common.getWidgetSettings().widgetSizeType)){case 1:a=-5;break;case 2:a=60;break;case 3:default:a=90}common.isPortrait()?o.containerWidth=(o.containerWidth-a)*s:o.containerWidth=2.5*(o.containerWidth-a),"2"===e.lineUpStyle?o.width=o.containerWidth/1.6:o.width=o.containerWidth,o.height=o.width/e.aspectRatio}var r=o.width+2,c=o.containerWidth+2,l=e.outCarouselNoneBorder?o.width+2:o.width,d="sinclo-carousel"+t,p="";return p+=i,p+='<div class="carousel-container" id="carousel-container'+t+'" style="width: '+c+'px; margin-top: 6px;">',p+='<div class="single-item" id="'+d+'">',e.images.forEach(function(e,t){p+='<div style="width: '+c+'px">',p+='<div class="thumbnail" id="slide_'+d+"_image"+t+'" data-answer="'+e.answer+'" style="cursor: pointer; margin: auto; display: flex; flex-direction: column; background-color: #FFFFFF; width: '+r+'px;">',p+='<img id="img'+d+"_image"+t+'" alt="ç»å" data-answer="'+e.answer+'" style="cursor: pointer; height: '+o.height+"px; width: "+l+'px;" src="'+e.url+'" />',p+='<div class="caption" style="display: flex; flex-direction: column; flex: 1 0 auto;">',p+='<div class="title"><strong style="font-weight: bold;">'+e.title+"</strong></div>",p+='<p class="sub-title">'+e.subTitle+"</p>",p+="</div></div></div>"}),p+="</div></div>"},createPulldownStyle:function(e){var t="";return t+="width: 100%; word-break: break-all; ",t+="background-color: "+e.customDesign.backgroundColor+";",e.pulldownCustomDesign?(t+="color: "+e.customDesign.textColor+";",t+="border: 1px solid "+e.customDesign.borderColor+";"):(t+="color: "+common.getWidgetSettings().descriptionTextColor+";",t+="border: 1px solid "+common.getWidgetSettings().mainColor+";"),t},createButtonUIStyle:function(e,t){var n="<style>";switch(e.buttonUICustomDesign?(n+="#sincloBox ul#chatTalk "+t+" button {background-color: "+e.customDesign.buttonUIBackgroundColor+"}",n+="#sincloBox ul#chatTalk "+t+" button {color: "+e.customDesign.buttonUITextColor+"}",n+="#sincloBox ul#chatTalk "+t+" button:focus {outline: none}",n+="#sincloBox ul#chatTalk "+t+" button:active {background-color: "+e.customDesign.buttonUIActiveColor+"}",n+="#sincloBox ul#chatTalk "+t+" button.selected {background-color: "+e.customDesign.buttonUIActiveColor+" !important;}"):(n+="#sincloBox ul#chatTalk "+t+" button {background-color: "+common.getWidgetSettings().reTextColor+"}",n+="#sincloBox ul#chatTalk "+t+" button {color: "+common.getWidgetSettings().reBackgroundColor+"}",n+="#sincloBox ul#chatTalk "+t+" button:hover {background-color: "+this.getRawColor(common.getWidgetSettings().mainColor,.5)+"}",n+="#sincloBox ul#chatTalk "+t+" button:focus {outline: none}",n+="#sincloBox ul#chatTalk "+t+" button:active {background-color: "+this.getRawColor(common.getWidgetSettings().mainColor,.5)+"}",n+="#sincloBox ul#chatTalk "+t+" button.selected {background-color: "+this.getRawColor(common.getWidgetSettings().mainColor,.5)+" !important;}"),n+="#sincloBox ul#chatTalk "+t+" button {width: 100%;}",n+="#sincloBox ul#chatTalk "+t+' .sinclo-button-ui.free:before {content: "â";margin-right: 10px;}',n+="#sincloBox ul#chatTalk "+t+' .sinclo-button-ui.exist:before {content: "â³";margin-right: 10px;}',n+="#sincloBox ul#chatTalk "+t+" .sinclo-button-ui.none {opacity: 0.5;}",n+="#sincloBox ul#chatTalk "+t+" button:first-of-type {border-top-left-radius: 8px; border-top-right-radius: 8px}",n+="#sincloBox ul#chatTalk "+t+" button:last-child {border-bottom-left-radius: 8px; border-bottom-right-radius: 8px}",e.outButtonUINoneBorder?n+="#sincloBox ul#chatTalk "+t+" button {border: none}":n+="#sincloBox ul#chatTalk "+t+" button {border: 1px solid "+e.customDesign.buttonUIBorderColor+" }",Number(e.customDesign.buttonUITextAlign)){case 1:n+="#sincloBox ul#chatTalk "+t+" button {text-align: left}";break;case 2:n+="#sincloBox ul#chatTalk "+t+" button {text-align: center}";break;case 3:n+="#sincloBox ul#chatTalk "+t+" button {text-align: right}";break;default:n+="#sincloBox ul#chatTalk "+t+" button {text-align: center}"}return n+="</style>"},createCheckboxStyle:function(e,t){var n="#FFFFFF",i="#FFFFFF";i=e.checkboxCustomDesign?(n=e.customDesign.checkboxBorderColor,e.customDesign.checkboxCheckmarkColor):(n=common.getWidgetSettings().mainColor,common.getWidgetSettings().mainColor);var o="<style>";return o+="#sincloBox "+t+" .sinclo-checkbox {display: block;position: relative;padding-left: 20px;margin-bottom: "+(e.customDesign.checkboxSelectionDistance?e.customDesign.checkboxSelectionDistance:4)+"px;cursor: pointer; -webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none; color: "+common.getWidgetSettings().reTextColor+";}",o+="#sincloBox "+t+" .sinclo-checkbox input {position: absolute;opacity: 0;cursor: pointer;height: 0;width: 0;}",o+="#sincloBox "+t+" .sinclo-checkbox .checkmark {position: absolute;top: 1px;left: 0; background-color: "+e.customDesign.checkboxBackgroundColor+"}",o+="#sincloBox "+t+" .sinclo-checkbox .checkmark:after {border: solid "+i+"}",o+="#sincloBox "+t+" .sinclo-checkbox input:checked ~ .checkmark {background-color: "+e.customDesign.checkboxActiveColor+"}",o+="#sincloBox "+t+" .sinclo-checkbox input:checked ~ .checkmark:after {display: block}",o+="#sincloBox "+t+" .sinclo-checkbox input:hover ~ .checkmark {background-color: "+e.customDesign.checkboxActiveColor+"}",o+="#sincloBox "+t+"{ display: block;}",e.checkboxNoneBorder?o+="#sincloBox "+t+" .sinclo-checkbox .checkmark {border: none;}":o+="#sincloBox "+t+" .sinclo-checkbox .checkmark {border: 1px solid "+n+";}","1"===e.checkboxStyle&&(o+="#sincloBox "+t+" .sinclo-checkbox {background-color: "+e.customDesign.checkboxEntireBackgroundColor+";}",o+="#sincloBox "+t+" .sinclo-checkbox {color: "+e.customDesign.checkboxTextColor+";}"),o+="</style>"},createButtonHtml:function(n,e,i,o){var t=sinclo.chatApi.createButtonWrapStyle(n,o),s="sinclo-button"+e,a="",r="";2===n.options.length&&(r=" sideBySide");var c="";o&&(c=" noText");var l="";return"1"===n.customDesign.buttonAlign?l=" alignLeft":"3"===n.customDesign.buttonAlign&&(l=" alignRight"),a+='<div class="sincloHearingButtons'+r+c+'" name="'+s+'" id="'+s+'" style="'+t+'">',n.options.forEach(function(e,t){i===e?a+='<span class="sincloHearingButton selected'+c+l+'" style="'+sinclo.chatApi.createButtonStyle(n,t,o)+'">'+e+"</span>":a+='<span class="sincloHearingButton'+c+l+'" style="'+sinclo.chatApi.createButtonStyle(n,t,o)+'">'+e+"</span>"}),a+="</div>"},createButtonStyle:function(e,t,n){if(e.isCustomDesign)var i=e.customDesign.buttonBackgroundColor;else i=common.getWidgetSettings().reBackgroundColor;var o="align-items: center; padding: 12px; color: "+e.customDesign.buttonTextColor+"; background-color: "+i+";";return e.customDesign.outButtonNoneBorder||(n&&2<e.options.length&&Number(t)!==e.options.length-1?o+="border-bottom: 1px solid "+e.customDesign.buttonBorderColor+";":n||(o+="border-top: 1px solid "+e.customDesign.buttonBorderColor+";")),2===e.options.length?(o+="flex-flow: row nowrap; ",e.customDesign&&(n?0===t?(o+="border-radius: 12px 0 0 12px; ",e.customDesign.outButtonNoneBorder||(o+="border-right: 1px solid "+e.customDesign.buttonBorderColor+"!important;")):o+="border-radius: 0 12px 12px 0; ":0===t?(o+="border-bottom-left-radius: 12px; ",e.customDesign.outButtonNoneBorder||(o+="border-right: 1px solid "+e.customDesign.buttonBorderColor+"!important;")):o+="border-bottom-right-radius: 12px; ")):(o+="flex-flow: column nowrap; ",n&&0===t?o+="border-top-left-radius: 12px; border-top-right-radius: 12px; ":t===e.options.length-1&&(n&&1===e.options.length?o+="border-radius: 12px; ":o+="border-bottom-left-radius: 12px; border-bottom-right-radius: 12px; ")),o},createButtonWrapStyle:function(e,t){var n="display: flex; justify-content: center; width: 100%; ";return n+=t?"margin-top: 0px; ":"margin-top: 10px; ",2===e.options.length?n+="flex-flow: row nowrap; ":n+="flex-flow: column nowrap; ",n},createCarouselStyle:function(e,t){var n=sinclo.chatApi.getArrowPosition(e),i="2"===e.arrowType?"FA5P":"SincloFont",o="<style>";if(o+="#sincloBox ul#chatTalk "+t+" .slick-dots li { border-radius: unset; background: none;}",e.carouselCustomDesign?(o+="#sincloBox ul#chatTalk "+t+" .slick-prev:before { font-family: "+i+"; opacity: .5; color: "+e.customDesign.arrowColor+";}",o+="#sincloBox ul#chatTalk "+t+" .slick-next:before { font-family: "+i+"; opacity: .5; color: "+e.customDesign.arrowColor+";}"):(o+="#sincloBox ul#chatTalk "+t+" .slick-prev:before { font-family: "+i+"; opacity: .5; color: "+common.getWidgetSettings().mainColor+";}",o+="#sincloBox ul#chatTalk "+t+" .slick-next:before { font-family: "+i+"; opacity: .5; color: "+common.getWidgetSettings().mainColor+";}"),o+="#sincloBox ul#chatTalk "+t+" .thumbnail .caption .title strong {  color: "+e.customDesign.titleColor+"; text-align: "+this.getTitleTextAlign(e.titlePosition)+";}",o+="#sincloBox ul#chatTalk "+t+" .thumbnail .caption .title { text-align: "+this.getTitleTextAlign(e.titlePosition)+";}",o+="#sincloBox ul#chatTalk "+t+" .thumbnail .caption .sub-title { color: "+e.customDesign.subTitleColor+"; text-align: "+this.getTitleTextAlign(e.subTitlePosition)+";}",o+="#sincloBox ul#chatTalk "+t+" .thumbnail:hover { -webkit-filter: brightness(110%); filter: brightness(110%);}",e.outCarouselNoneBorder?o+="#sincloBox ul#chatTalk "+t+" .thumbnail { border: none;} ":o+="#sincloBox ul#chatTalk "+t+" .thumbnail { border: 1px solid "+e.customDesign.outBorderColor+";} ",e.inCarouselNoneBorder?o+="#sincloBox ul#chatTalk "+t+" .thumbnail img { border-bottom: none;} ":o+="#sincloBox ul#chatTalk "+t+" .thumbnail img { border-bottom: 1px solid "+e.customDesign.inBorderColor+";} ","2"!==e.arrowType&&(o+="#sincloBox ul#chatTalk "+t+" .slick-next:before { font-weight: 900 }",o+="#sincloBox ul#chatTalk "+t+" .slick-prev:before { font-weight: 900 }"),scl_check.smartphone()){var s=2.5,a=0<n.right?2*n.right*s:n.right/2*s;common.isPortrait()&&(s=common.getPageWidth()*(1/285),a=0<n.right?2*n.right*s:n.right/1.72*s),o+="#sincloBox ul#chatTalk "+t+" .slick-dots { position: relative; height: auto; }",o+="#sincloBox ul#chatTalk "+t+" .slick-dots li { padding: 0 "+5*s+"px;}",o+="#sincloBox ul#chatTalk "+t+" .slick-dots li button:before { font-size: "+25*s+"px;}",o+="#sincloBox ul#chatTalk "+t+" .slick-prev:before {font-size: "+28*s+"px;}",o+="#sincloBox ul#chatTalk "+t+" .slick-next:before { font-size: "+28*s+"px; }",o+="#sincloBox ul#chatTalk "+t+" .thumbnail .caption .title strong { font-size: "+e.customDesign.titleFontSize*s+"px; }",o+="#sincloBox ul#chatTalk "+t+" .thumbnail .caption .title { margin: "+10*s+"px "+12*s+"px "+3*s+"px "+12*s+"px; }",o+="#sincloBox ul#chatTalk "+t+" .thumbnail .caption .sub-title { margin:0 "+12*s+"px "+8*s+"px "+12*s+"px; font-size: "+e.customDesign.subTitleFontSize*s+"px;}",o+="#sincloBox ul#chatTalk "+t+" .slick-next { right: "+a+"px }",o+="#sincloBox ul#chatTalk "+t+" .slick-prev { left: "+n.left*s+"px }"}else o+="#sincloBox ul#chatTalk "+t+" .slick-dots li { padding: 0 5px;}",o+="#sincloBox ul#chatTalk "+t+" .slick-dots li button:before { font-size: 25px;}",o+="#sincloBox ul#chatTalk "+t+" .slick-prev:before {font-size: 28px;}",o+="#sincloBox ul#chatTalk "+t+" .slick-next:before { font-size: 28px; }",o+="#sincloBox ul#chatTalk "+t+" .thumbnail .caption .title strong { font-size: "+e.customDesign.titleFontSize+"px; }",o+="#sincloBox ul#chatTalk "+t+" .thumbnail .caption .title { margin: 10px 12px 3px 12px; }",o+="#sincloBox ul#chatTalk "+t+" .thumbnail .caption .sub-title { margin:0 12px 8px 12px; font-size: "+e.customDesign.subTitleFontSize+"px;}",o+="#sincloBox ul#chatTalk "+t+" .slick-next { right: "+n.right+"px }",o+="#sincloBox ul#chatTalk "+t+" .slick-prev { left: "+n.left+"px }";return o+="</style>"},getRawColor:function(e,t){t=t||.1;var n,i,o,s=e.substr(1);o=3===s.length?(n=String(s.substr(0,1))+String(s.substr(0,1)),i=String(s.substr(1,1))+String(s.substr(1,1)),String(s.substr(2))+String(s.substr(2))):(n=String(s.substr(0,2)),i=String(s.substr(2,2)),String(s.substr(4)));var a=String(Math.floor(255-(255-parseInt(n,16))*t)),r=String(Math.floor(255-(255-parseInt(i,16))*t)),c=String(Math.floor(255-(255-parseInt(o,16))*t));return("#"+parseInt(a).toString(16)+parseInt(r).toString(16)+parseInt(c).toString(16)).toUpperCase()},getButtonUIWidth:function(){return"100%"},getCarouselSize:function(e){return"1"===e.carouselPattern?this.getInsideArrowCarouselSize(e):this.getOutsideArrowCarouselSize(e)},getInsideArrowCarouselSize:function(e){return"1"===e.balloonStyle?this.getInsideArrowHasBalloonCarouselSize(e):this.insideArrowNoneBalloonCarouselSize(e)},getInsideArrowHasBalloonCarouselSize:function(e){var t=e.aspectRatio;t=t||1;var n={width:0,height:0,containerWidth:0};switch(Number(common.getWidgetSettings().widgetSizeType)){case 1:n.containerWidth=200,n.width="1"===e.lineUpStyle?200:125;break;case 2:n.containerWidth=250,n.width="1"===e.lineUpStyle?250:155;break;case 3:case 4:n.containerWidth=310,n.width="1"===e.lineUpStyle?310:193;break;case 5:n.containerWidth=$(".grid_for_icon").width()-$(".iconDiv").width(),n.width="1"===e.lineUpStyle?n.containerWidth:193;break;default:n.containerWidth=310,n.width="1"===e.lineUpStyle?310:193}return 1!==Number(common.getWidgetSettings().showOperatorIcon)&&1!==Number(common.getWidgetSettings().showChatbotIcon)||"1"!==e.balloonStyle||(n.containerWidth=n.containerWidth-this.getChatIconWidth(),n.width="1"===e.lineUpStyle?n.width-this.getChatIconWidth():n.width-this.getChatIconWidth()+14),n.height=n.width/t,n},insideArrowNoneBalloonCarouselSize:function(e){var t=e.aspectRatio;t=t||1;var n={width:0,height:0,containerWidth:0};switch(Number(common.getWidgetSettings().widgetSizeType)){case 1:n.containerWidth=220,n.width="1"===e.lineUpStyle?220:136;break;case 2:n.containerWidth=280,n.width="1"===e.lineUpStyle?280:170;break;case 3:case 4:default:n.containerWidth=340,n.width="1"===e.lineUpStyle?340:215}return 1!==Number(common.getWidgetSettings().showOperatorIcon)&&1!==Number(common.getWidgetSettings().showChatbotIcon)||"1"!==e.balloonStyle||(n.containerWidth=n.containerWidth-this.getChatIconWidth(),n.width="1"===e.lineUpStyle?n.width-this.getChatIconWidth():n.width-this.getChatIconWidth()+14),n.height=n.width/t,n},getOutsideArrowCarouselSize:function(e){return"1"===e.balloonStyle?this.getOutsideArrowHasBalloonCarouselSize(e):this.getOutsideArrowNoneBalloonCarouselSize(e)},getOutsideArrowHasBalloonCarouselSize:function(e){var t=e.aspectRatio;t=t||1;var n={width:0,height:0,containerWidth:0};switch(Number(common.getWidgetSettings().widgetSizeType)){case 1:n.containerWidth=170,n.width="1"===e.lineUpStyle?170:100;break;case 2:n.containerWidth=220,n.width="1"===e.lineUpStyle?220:130;break;case 3:case 4:default:n.containerWidth=260,n.width="1"===e.lineUpStyle?260:158}return 1!==Number(common.getWidgetSettings().showOperatorIcon)&&1!==Number(common.getWidgetSettings().showChatbotIcon)||"1"!==e.balloonStyle||(n.containerWidth=n.containerWidth-this.getChatIconWidth(),n.width="1"===e.lineUpStyle?n.width-this.getChatIconWidth():n.width-this.getChatIconWidth()+14),n.height=n.width/t,n},getOutsideArrowNoneBalloonCarouselSize:function(e){var t=e.aspectRatio;t=t||1;var n={width:0,height:0,containerWidth:0};switch(Number(common.getWidgetSettings().widgetSizeType)){case 1:n.containerWidth=170,n.width="1"===e.lineUpStyle?170:100;break;case 2:n.containerWidth=220,n.width="1"===e.lineUpStyle?220:130;break;case 3:case 4:default:n.containerWidth=280,n.width="1"===e.lineUpStyle?280:170}return 1!==Number(common.getWidgetSettings().showOperatorIcon)&&1!==Number(common.getWidgetSettings().showChatbotIcon)||"1"!==e.balloonStyle||(n.containerWidth=n.containerWidth-this.getChatIconWidth(),n.width="1"===e.lineUpStyle?n.width-this.getChatIconWidth():n.width-this.getChatIconWidth()+14),n.height=n.width/t,n},getArrowPosition:function(e){var t={left:0,right:0};if("1"===e.lineUpStyle)if("2"===e.carouselPattern)"3"===e.arrowType?t.left=-30:t.left=-34,t.right=-30;else switch(e.arrowType){case"1":case"2":t.left=8,t.right=14;break;case"3":t.left=8,t.right=8;break;case"4":t.left=8,t.right=10;break;default:t.left=8,t.right=8}else if("2"===e.carouselPattern)switch(e.arrowType){case"1":case"2":t.left=-27,t.right=-25;break;case"3":t.left=-20,t.right=-25;break;case"4":default:t.left=-27,t.right=-25}else switch(e.arrowType){case"1":case"2":t.left=16,t.right=16;break;case"3":t.left=12,t.right=8;break;case"4":default:t.left=16,t.right=16}return t},getRightArrowPosition:function(e,t){var n={left:0,right:0};if("1"===e.lineUpStyle)if("2"===e.carouselPattern)"3"===e.arrowType?(n.left=-30,n.right=-30):(n.left=-34,t=t);else switch(e.arrowType){case"1":case"2":n.left=8,n.right=14;break;case"3":n.left=8,n.right=8;break;case"4":n.left=8,n.right=10;break;default:n.left=8,n.right=8}else if("2"===e.carouselPattern)switch(e.arrowType){case"1":case"2":n.left=-27,n.right=-25;break;case"3":n.left=-20,n.right=-25;break;case"4":default:n.left=-27,n.right=-25}else switch(e.arrowType){case"1":case"2":n.left=16,n.right=16;break;case"3":n.left=12,n.right=8;break;case"4":default:n.left=16,n.right=16}return t},getChatIconWidth:function(){switch(Number(common.getWidgetSettings().widgetSizeType)){case 1:return 32;case 2:return 37;case 3:case 4:return 42;default:return 37}},getTitleTextAlign:function(e){switch(Number(e)){case 1:return"left";case 2:return"center";case 3:return"right";default:return"left"}},getSlickOption:function(e){var t="",n="";return n="3"===e.arrowType?(t="sinclo-fal fa-chevron-left","sinclo-fal fa-chevron-right"):"4"===e.arrowType?(t="sinclo-fal fa-chevron-square-left","sinclo-fal fa-chevron-square-right"):(t="sinclo-fal fa-chevron-circle-left","sinclo-fal fa-chevron-circle-right"),{dots:!0,slidesToShow:"1"===e.lineUpStyle?1:1.5,infinite:!1,lazyLoad:"ondemand",prevArrow:'<i class="fas '+t+' slick-prev"></i>',nextArrow:'<i class="fas '+n+' slick-next"></i>'}},createCogmoAttendBotMessage:function(e,t,n,i,o){common.chatBotTypingTimerClear(),common.chatBotTypingRemove();var s=document.getElementsByTagName("sinclo-chat")[0],a=document.createElement("div"),r=document.createElement("li");a.appendChild(r),s.appendChild(a);var c,l=t.split(/\n|<br>/g),d=RegExp(/(http(s)?:\/\/[\w\-\.\/\?\=\&\;\,\#\:\%\!\(\)\<\>\"\u3000-\u30FE\u4E00-\u9FA0\uFF01-\uFFE3]+)/),p=RegExp(/&lt;telno&gt;([\s\S]*?)&lt;\/telno&gt;/),u=RegExp(/<img ([\s\S]*?)>/),g="sinclo-radio"+s.children.length,h="",m=t.indexOf("search-title");1===common.getWidgetSettings().widgetSizeType||scl_check.smartphone()?c="smallSizeImg":2===common.getWidgetSettings().widgetSizeType?c="middleSizeImg":3===common.getWidgetSettings().widgetSizeType&&(c="largeSizeImg"),!1===scl_check.isset(n)&&(n=""),scl_check.escape_html(n),"sinclo_re"===e?(window.common.getWidgetSettings().isSendMessagePositionLeft?a.style.textAlign="right":a.style.textAlign="left",""!==n&&(h="<span class='cName'>"+n+"</span>")):"sinclo_se"===e&&(common.getWidgetSettings().isSendMessagePositionLeft?a.style.textAlign="left":a.style.textAlign="right"),o&&(h+="<style>",h+="#sincloBox ul#chatTalk li a.search-title{color: #4285f4;} ",h+="#sincloBox ul#chatTalk li a.search-title:visited{color: #70119f;} ",h+='a.search-title.iconPdf:after{content: ""; display: inline-block; vertical-align: middle; width: 21px; height: 21px; margin-left: 5px; background-image: url("https://iact.sinclo.jp/img/cogmo_pdf.png"); background-position: center center; background-repeat: no-repeat; background-size: 21px auto;} ',h+='a.search-title.iconHtml:after{content: ""; display: inline-block; vertical-align: middle; width: 21px; height: 21px; margin-left: 5px; background-image: url("https://iact.sinclo.jp/img/cogmo_html.png"); background-position: center center; background-repeat: no-repeat; background-size: 21px auto;} ',h+="</style>");for(var f=0;l.length>f;f++){var v=scl_check.escape_html(l[f]),b=v.replace(/(&lt;)/g,"<").replace(/(&gt;)/g,">").replace(/(&quot;)/g,'"').replace(/(&#39;)/g,"'").replace(/(&amp;)/g,"&");if("sinclo_re"===e&&-1===m){var y=v.indexOf("[]");if(-1<y){var x=v.slice(y+2).trim();v="<sinclo-radio><input type='radio' name='"+g+"' id='"+g+"-"+f+"' class='sinclo-chat-radio' value='"+x+"'>",v+="<label for='"+g+"-"+f+"'>"+x+"</label></sinclo-radio>"}if(v.match(/\[(.*)?]/g)){e+=" withButton";for(var _=v.match(/\[(.*?)]/g),w="",k=0;k<_.length;k++){v=v.replace(_[k],"");var T=_[k].replace(/[\[\]]/g,"");w+=o?"<p class='sincloButtonWrap searchButton' onclick='sinclo.chatApi.send(\"button_"+T+'")\' style="background-color: #E22D2D;"><span class=\'sincloButton\' style="color: #FFFFFF;">'+T+"</span></p>":"<p class='sincloButtonWrap' onclick='sinclo.chatApi.send(\"button_"+T+"\")'><span class='sincloButton'>"+T+"</span></p>"}v="<span class='sinclo-text-line'>"+v+"</span>",v+=w}i&&(e+=" withButton",v="<span class='sinclo-text-line'>"+v+"</span>",v+="<p class='sincloButtonWrap' onclick='sinclo.chatApi.send(\"button_ã¯ã\")'><span class='sincloButton'>ã¯ã</span></p>",v+="<p class='sincloButtonWrap' onclick='sinclo.chatApi.send(\"button_ããã\")'><span class='sincloButton'>ããã</span></p>")}var S=v.match(d),I=RegExp(/<a ([\s\S]*?)>([\s\S]*?)<\/a>/),A=b.match(I);if(null!==S||null!==A)if(null!==A){if(null!==S){var C=A[0];if(null==(H=b.match(u))){var B=RegExp(/<a ([\s\S]*?)style=([\s\S]*?)>([\s\S]*?)<\/a>/),N=b.match(B);if(null!==N)var D=N[1].replace(/ /g,"$nbsp;");else D=A[1].replace(/ /g,"$nbsp;");o||(C=C.replace(A[1],A[1]+" onclick=sclLink('"+A[2]+"','"+D+"',event)"))}else{D=(D=A[1].replace(H[0],"")).replace(/ /g,"$nbsp;");var M="<div style='display:inline-block;width:100%;vertical-align:bottom;'><img "+H[1]+" class = "+c+"></div>";C=C.replace(H[0],M);var F=RegExp(/href="([\s\S]*?)"([\s\S]*?)/),E=C.match(F);C=C.replace(A[1],A[1]+" onclick=sclLink('"+E[1]+"','"+D+"',event)")}}else C="<span class='link'>"+A[2]+"</span>";v=b.replace(A[0],C)}else{E=S[0];if(null==(H=b.match(u))){C='<a href="'+E+'" target="_blank">'+E+"</a>",I=RegExp(/<a ([\s\S]*?)>([\s\S]*?)<\/a>/);D=(A=C.match(I))[1].replace(/ /g,"$nbsp;"),C=C.replace(A[1],A[1]+" onclick=sclLink('"+A[2]+"','"+D+"',event)"),v=v.replace(E,C)}else{var $="<div style='display:inline-block;width:100%;vertical-align:bottom;'><img class='"+c+"' "+H[1]+"></div>";v=b.replace(H[0],$)}}var O=v.match(p);if(null!==O){var P=O[1];if(scl_check.smartphone()){C="<a href='tel:"+P+"'>"+P+"</a>";v=v.replace(O[0],C)}else{var W="<span class='telno'>"+P+"</span>";v=v.replace(O[0],W)}}if("sinclo_re"===e){var H;u=RegExp(/<img ([\s\S]*?)>/);if(null!==(H=b.match(u))&&null==S&&null==A){M="<div style='display:inline-block;width:100%;vertical-align:bottom;'><img "+H[1]+" class = "+c+"></div>";v=b.replace(H[0],M)}}v.match(/<(".*?"|'.*?'|[^'"])*?>/)?h+=v+"\n":h+="<span class='sinclo-text-line'>"+v.replace(/^[\n|\r\n|\r]$/g,"")+"</span>\n"}-1!==e.indexOf("sinclo_re")?common.getWidgetSettings().isSendMessagePositionLeft?e+=" effect_right":e+=" effect_left":-1!==e.indexOf("sinclo_se")&&(common.getWidgetSettings().isSendMessagePositionLeft?e+=" effect_left":e+=" effect_right"),r.className=e,r.innerHTML=h},createSendFileMessage:function(e,t){var n=document.getElementsByTagName("sinclo-chat")[0],i=document.createElement("div");i.style.cursor="pointer";var o=document.createElement("li"),s="",a=Math.floor((new Date).getTime()/1e3)>=Date.parse(e.expired.replace(/-/g,"/"))/1e3;(i=sinclo.chatApi._editDivForIconSetting(i,!0)).appendChild(o),n.appendChild(i),s=null==e.extension.match(/(jpeg|jpg|gif|png)$/i)||a?"<i class='sinclo-fal "+this._selectFontIconClassFromExtension(e.extension)+" fa-4x sendFileThumbnail' aria-hidden='true'></i>":"<img src='"+e.downloadUrl+"' class='sendFileThumbnail' width='64' height='64'>";var r="<span class='cName'>"+(2!==Number(common.getWidgetSettings().showAutomessageName)?"ãã¡ã¤ã«ãéä¿¡ããã¾ãã":"")+(a?"ï¼ãã¦ã³ã­ã¼ãæå¹æéåãï¼":"")+"</span>";scl_check.isset(e.message)&&""!==e.message&&(r+="<span class='sendFileMessage'>"+e.message+"</span>"),r+="<div class='sendFileContent'>",r+="  <div class='sendFileThumbnailArea'>"+s+"</div>",r+="  <div class='sendFileMetaArea'>",r+="    <span class='data sendFileName'>"+e.fileName+"</span>",r+="    <span class='data sendFileSize'>"+common.formatBytes(e.fileSize,2)+"</span>",r+="  </div>",r+="</div>";var c=common.getColorList(common.getWidgetSettings());a||(i.addEventListener("click",function(){if(scl_check.isset(sinclo_storage.s.get("operatorEntered"))&&"true"===sinclo_storage.s.get("operatorEntered")&&"auto"===t)return!1;window.open(e.downloadUrl)}),i.addEventListener("mouseenter",function(){var e=common.toRGBAcolor(c.reBackgroundColor,.9);common.getWidgetSettings().isSendMessagePositionLeft&&(e=common.toRGBAcolor(c.seBackgroundColor,.9)),o.style.backgroundColor=e}),i.addEventListener("mouseleave",function(){var e=c.reBackgroundColor;common.getWidgetSettings().isSendMessagePositionLeft&&(e=c.seBackgroundColor),o.style.backgroundColor=e})),o.className="sinclo_re",common.getWidgetSettings().isSendMessagePositionLeft?o.className+=" effect_right":o.className+=" effect_left",o.innerHTML=r},createSelectUploadFileMessage:function(e,t,n,i,o){common.chatBotTypingRemove();var s=document.getElementsByTagName("sinclo-chat")[0],a=document.createElement("div");a.style.cursor="pointer";var r=document.createElement("li");a=sinclo.chatApi._editDivForIconSetting(a,!0);sinclo.chatApi.operatorFileReceiver.isWaiting()&&a.classList.add("operator-receive"),a.appendChild(r),s.appendChild(a);var c=2!==Number(common.getWidgetSettings().showAutomessageName)?"<span class='cName'>"+common.getWidgetSettings().subTitle+"</span>":"";c+="<div class='receiveFileContent'>",c+="  <div class='selectFileArea'>",c+="    <p class='drop-area-message'>"+e+"</p>",c+="    <p class='drop-area-icon'><i class='sinclo-fal fa-cloud-upload'></i></p>",c+="<p>ã¾ãã¯</p>",c+="    <p class='drop-area-button'>",c+="<a class='select-file-button'>ãã¡ã¤ã«ãé¸æ</a>",c+="    </p>",c+="    <input type='file' class='receiveFileInput' name='receiveFileInput"+(new Date).getTime()+"' style='display:none'>",c+="  </div>",c+="  <div class='loadingPopup hide'><i class='sinclo-fal fa-spinner load'></i><p class='progressMessage'>èª­ã¿è¾¼ã¿ä¸­ã§ãã<br>ãã°ãããå¾ã¡ä¸ããã</p></div>",c+="</div>",t&&(c+="<div class='cancelReceiveFileArea'>",c+="<a>"+n+"</a>",c+="</div>"),r.className="sinclo_re effect_left recv_file_left",common.getWidgetSettings().isSendMessagePositionLeft&&(r.className="sinclo_se effect_right recv_file_right"),r.innerHTML=c,t&&r.querySelector("div.cancelReceiveFileArea a").addEventListener("click",function(){sinclo.chatApi.operatorFileReceiver.isWaiting()&&sinclo.chatApi.operatorFileReceiver.off(),s.removeChild(a),emit("sendChat",{historyId:sinclo.chatApi.historyId,stayLogsId:sinclo.chatApi.stayLogsId,chatMessage:sinclo.scenarioApi._sendFile.cancelerId?"ãã¡ã¤ã«åä¿¡ãã­ã£ã³ã»ã«":"ãã¡ã¤ã«éä¿¡ãã­ã£ã³ã»ã«",mUserId:sinclo.scenarioApi._sendFile.cancelerId?sinclo.scenarioApi._sendFile.cancelerId:null,messageType:sinclo.scenarioApi._sendFile.cancelerId?2:sinclo.scenarioApi.get(sinclo.scenarioApi._lKey.sendCustomerMessageType),messageRequestFlg:0,isAutoSpeech:!1,notifyToCompany:!1,isScenarioMessage:!0},function(){sinclo.scenarioApi._sendFile.cancelerId=null,$(document).trigger(sinclo.scenarioApi._events.fileUploaded,[!0,{canceled:!0,message:"ãã¡ã¤ã«éä¿¡ãã­ã£ã³ã»ã«"}])})}),sinclo.chatApi.fileUploader.init($("#sincloBox"),$(r.querySelector("div.receiveFileContent div.selectFileArea")),$(r.querySelector("div.receiveFileContent div.selectFileArea p.drop-area-button a.select-file-button")),$(r.querySelector("div.receiveFileContent div.selectFileArea input.receiveFileInput")),i,o),this.scDown()},createSentFileMessage:function(e,t,n){var i=document.createElement("div"),o="";o=n&&null!=n.match(/(jpeg|jpg|gif|png)$/i)?"<img src='"+t+"' class='sendFileThumbnail "+sinclo.chatApi.fileUploader._selectPreviewImgClass()+"'>":"<i class='sinclo-fal "+this._selectFontIconClassFromExtension(n)+" fa-4x sendFileThumbnail' aria-hidden='true'></i>";var s="sinclo_se chat_right effect_right";i.style.textAlign="right",common.getWidgetSettings().isSendMessagePositionLeft&&(s="sinclo_se chat_left effect_left",i.style.textAlign="left"),i.innerHTML='  <li class="'+s+' uploaded details">    <div class="receiveFileContent">      <div class="selectFileArea">        <p class="preview">'+o+'</p>        <p class="commentLabel">ï¼ã³ã¡ã³ãï¼</p>        <p class="commentarea" style=\'text-align: left;\'>'+e+"</p>      </div>    </div>  </li>",document.getElementById("chatTalk").querySelector("sinclo-chat").appendChild(i)},_selectFontIconClassFromExtension:function(e){var t={image:"fa-file-image",pdf:"fa-file-pdf",word:"fa-file-word",powerpoint:"fa-file-powerpoint",excel:"fa-file-excel",audio:"fa-file-audio",video:"fa-file-video",zip:"fa-file-zip",code:"fa-file-code",text:"fa-file-text",file:"fa-file"},n={gif:t.image,jpeg:t.image,jpg:t.image,png:t.image,pdf:t.pdf,doc:t.word,docx:t.word,ppt:t.powerpoint,pptx:t.powerpoint,xls:t.excel,xlsx:t.excel,aac:t.audio,mp3:t.audio,ogg:t.audio,avi:t.video,flv:t.video,mkv:t.video,mp4:t.video,gz:t.zip,zip:t.zip,css:t.code,html:t.code,js:t.code,txt:t.text,csv:t.csv,file:t.file};return scl_check.isset(n[e])?n[e]:n.file},createForm:function(e,i,r,n){common.chatBotTypingRemove(),sinclo.scenarioApi.isProcessing()&&sinclo.hideTextarea();var t=document.getElementsByTagName("sinclo-chat")[0],o=document.createElement("div"),c=document.createElement("li");o.appendChild(c),t.appendChild(o);var s="",a=!1,l="";e?(i.forEach(function(e,t,n){11===Number(e.inputType)?(!e.required||scl_check.isset(r[Number(e.inputType)])&&0!==r[Number(e.inputType)].lastname.length&&0!==r[Number(e.inputType)].firstname.length||(a=!0),s+=n.length-1===t?"    <div class='formElement'>":"    <div class='formElement withMB'>",s+="      <label class='formLabel'>"+sinclo.scenarioApi._replaceVariable(e.label)+(e.required?"<span class='require'>*</span>":"")+"</label>",s+='      <div style="display:flex;justify-content:stretch">',s+="      <input type='"+sinclo.chatApi.getInputType(e.inputType)+"' class='formInput lastName' placeholder='å§' data-required='"+e.required+"' data-input-type='"+e.inputType+"' data-label-text='"+sinclo.scenarioApi._replaceVariable(e.label)+"' name='"+e.variableLastname+"' value='"+(scl_check.isset(r[Number(e.inputType)].lastname)?r[Number(e.inputType)].lastname:"")+"'/>",s+="      <input type='"+sinclo.chatApi.getInputType(e.inputType)+"' class='formInput firstName' placeholder='å' data-required='"+e.required+"' data-input-type='"+e.inputType+"' data-label-text='"+sinclo.scenarioApi._replaceVariable(e.label)+"' name='"+e.variableFirstname+"' value='"+(scl_check.isset(r[Number(e.inputType)].firstname)?r[Number(e.inputType)].firstname:"")+"'/>",s+="    </div>"):(e.required&&0===r[Number(e.inputType)].length&&(a=!0),s+=n.length-1===t?"    <div class='formElement'>":"    <div class='formElement withMB'>",s+="      <label class='formLabel'>"+sinclo.scenarioApi._replaceVariable(e.label)+(e.required?"<span class='require'>*</span>":"")+"</label>",s+="      <input type='"+sinclo.chatApi.getInputType(e.inputType)+"' class='formInput' placeholder='"+sinclo.scenarioApi._replaceVariable(e.label)+"ãå¥åãã¦ãã ãã' data-required='"+e.required+"' data-input-type='"+e.inputType+"' data-label-text='"+sinclo.scenarioApi._replaceVariable(e.label)+"' name='"+e.variableName+"' value='"+r[Number(e.inputType)]+"'/>"),s+="    </div>"}),l+=2!==Number(common.getWidgetSettings().showAutomessageName)?"<span class='cName'>"+common.getWidgetSettings().subTitle+"</span>":"",l+="<div class='formContentArea'>",l+="  <p class='formMessage'>"+(a?"å¿é é ç®ã®å¥åãèªè­ã§ãã¾ããã§ããã\n*å°ã®é ç®ãå¥åãã¦ãã ããã":"ãã¡ãã®åå®¹ã§ããããã§ããããï¼")+"</p>",l+="  <div class='formArea'>",l+=s,l+="    <p class='formOKButtonArea'><span class='formOKButton'>OK</span></p>",l+="  </div>",l+="</div>",c.className="sinclo_re sinclo_form",common.getWidgetSettings().isSendMessagePositionLeft?c.className+=" effect_right":c.className+=" effect_left"):(i.forEach(function(e,t,n){11===Number(e.inputType)?((e.required&&0===r[Number(e.inputType)].lastname.length||0===r[Number(e.inputType)].firstname.length)&&(a=!0),s+=n.length-1===t?"    <div class='formElement'>":"    <div class='formElement withMB'>",s+="      <label class='formLabel'>"+sinclo.scenarioApi._replaceVariable(e.label)+(e.required?"<span class='require'>*</span>":"")+"</label>",s+='      <div style="display:flex;justify-content:stretch">',s+="      <input type='"+sinclo.chatApi.getInputType(e.inputType)+"' class='formInput lastName' placeholder='å§' data-required='"+e.required+"' data-input-type='"+e.inputType+"' data-label-text='"+sinclo.scenarioApi._replaceVariable(e.label)+"' name='"+e.variableLastname+"' value='"+(scl_check.isset(r[Number(e.inputType)].lastname)?r[Number(e.inputType)].lastname:"")+"'/>",s+="      <input type='"+sinclo.chatApi.getInputType(e.inputType)+"' class='formInput firstName' placeholder='å' data-required='"+e.required+"' data-input-type='"+e.inputType+"' data-label-text='"+sinclo.scenarioApi._replaceVariable(e.label)+"' name='"+e.variableFirstname+"' value='"+(scl_check.isset(r[Number(e.inputType)].firstname)?r[Number(e.inputType)].firstname:"")+"'/>",s+="    </div>"):(e.required&&0===r[e.variableName].value.length&&(a=!0),s+=n.length-1===t?"    <div class='formElement'>":"    <div class='formElement withMB'>",s+="      <label class='formLabel'>"+sinclo.scenarioApi._replaceVariable(e.label)+(e.required?"<span class='require'>*</span>":"")+"</label>",s+="      <input type='"+sinclo.chatApi.getInputType(e.inputType)+"' class='formInput' placeholder='"+sinclo.scenarioApi._replaceVariable(e.label)+"ãå¥åãã¦ãã ãã' data-required='"+e.required+"' data-label-text='"+sinclo.scenarioApi._replaceVariable(e.label)+"' name='"+e.variableName+"' value='"+r[e.variableName].value+"' readonly/>"),s+="    </div>"}),l+=2!==Number(common.getWidgetSettings().showAutomessageName)?"<span class='cName'>"+common.getWidgetSettings().subTitle+"</span>":"",l+="<div class='formContentArea'>",l+="  <div class='formArea'>",l+=s,l+="    <p class='formOKButtonArea'><span class='formOKButton disabled'>OK</span></p>",l+="  </div>",l+="</div>",c.className="sinclo_se sinclo_form",common.getWidgetSettings().isSendMessagePositionLeft?c.className+=" effect_left":c.className+=" effect_right"),c.innerHTML=l,a&&$(c).find("span.formOKButton").addClass("disabled"),$(c).find("span.formOKButton").on("click",function(e){if(!$(this).hasClass("disabled")){var s={},t=$(c).find(".formInput"),a=!1;t.each(function(e,t){if($(t).hasClass("lastName")){var n=$(t).next();if(!(o=$(t).data("required"))&&""===$(t).val()&&""===$(n).val())return void(s[$(t).attr("name")]={label:$(t).data("label-text"),value:$(t).val(),required:$(t).data("required"),changed:$(t).val()!==r[Number($(t).data("input-type"))]});a=!(!o||""!==$(t).val()||""!==$(t).val()&&""!==$(n).val());var i=sinclo.scenarioApi._bulkHearing._isValidValue($(t).data("inputType"),$(t).val());a||null===i||i[0]!==i.input?(a=!0,$(t).css("border","1px solid #F00")):$(t).css("border",""),s[$(t).attr("name")]={label:$(t).data("label-text"),showValue:$(t).val()+"ã"+$(n).val(),value:$(t).val(),required:$(t).data("required"),changed:$(t).val()!==r[Number($(t).data("input-type"))]}}else{var o;if(!(o=$(t).data("required"))&&""===$(t).val())return void(s[$(t).attr("name")]={label:$(t).data("label-text"),value:$(t).val(),required:$(t).data("required"),changed:$(t).val()!==r[Number($(t).data("input-type"))]});a=!(!o||""!==$(t).val());i=sinclo.scenarioApi._bulkHearing._isValidValue($(t).data("inputType"),$(t).val());a||null===i||i[0]!==i.input?(a=!0,$(t).css("border","1px solid #F00")):$(t).css("border",""),s[$(t).attr("name")]={label:$(t).data("label-text"),value:$(t).val(),required:$(t).data("required"),changed:$(t).val()!==r[Number($(t).data("input-type"))]}}}),a||n(s)}}),$(c).find("input.formInput").on("input",function(){$(c).find("input.formInput").each(function(e,t){if(scl_check.isset(i[e])){if(i[e].variableFirstname&&i[e].variableLastname){var n=$(this).next().length?$(this).next():$(this).prev();i[e].reqired;if(0===$(this).val().length||0===n.val().length)return $(c).find("span.formOKButton").addClass("disabled"),!1;i.length-1===e&&$(c).find("span.formOKButton").removeClass("disabled")}if(i[e].required&&0===$(this).val().length)return $(c).find("span.formOKButton").addClass("disabled"),!1;i.length-1===e&&$(c).find("span.formOKButton").removeClass("disabled")}})}),this.scDown()},getInputType:function(e){var t="";switch(Number(e)){case 1:case 2:t="text";break;case 3:t="tel";break;case 4:case 5:case 6:t="text";break;case 7:case 8:case 9:t="tel";break;case 10:t="email";break;case 11:default:t="text"}return t},createFormFromLog:function(i){var e=document.getElementsByTagName("sinclo-chat")[0],t=document.createElement("div"),n=document.createElement("li");t.appendChild(n),e.appendChild(t);var o="",s="",a=Object.keys(i),r=!1;a.forEach(function(e,t,n){r?r=!1:(o+=n.length-1===t?"    <div class='formElement'>":"    <div class='formElement withMB'>",o+="      <span class='formLabel'>"+i[e].label+(i[e].required?"<span class='require'>*</span>":"")+"</span>",o+="      <span class='formLabelSeparator'>ï¼</span>",i[e].showValue?(r=!0,o+="      <span class='formValue'>"+(scl_check.isset(i[e].showValue)?i[e].showValue:"")+"</span>"):o+="      <span class='formValue'>"+(scl_check.isset(i[e].value)?i[e].value:"")+"</span>",o+="    </div>")}),s+="<div class='formContentArea'>",s+="  <div class='formSubmitArea'>",s+=o,s+="  </div>",s+="</div>",n.className="sinclo_se sinclo_form",common.getWidgetSettings().isSendMessagePositionLeft?n.className+=" effect_left":n.className+=" effect_right",n.innerHTML=s},addScenarioInputForm:function(e){common.chatBotTypingTimerClear(),common.chatBotTypingRemove();var t=document.getElementsByTagName("sinclo-chat")[0],n=document.createElement("div"),i=document.createElement("li"),o=t.children.length;n.style.textAlign="right",i.id="chat_element"+o+"_inputForm",i.style.width="85%",n.appendChild(i),t.appendChild(n);var s=sinclo.chatApi.createInputFormHtml(e,o);i.className="sinclo_se sinclo_inputForm effect_right",i.innerHTML=s,!scl_check.isset(e.answer)&&sinclo.scenarioApi.cvIsEnable()&&setTimeout(function(){emit("addLastMessageToTerminate",{historyId:sinclo.chatApi.historyId})},500),sinclo.chatApi.addJsEvent(e,o),sinclo.chatApi.validateInputForm(e,o)},createInputFormHtml:function(o,s){!1===o.isCustomDesign&&(o.customDesign.boxBorderColor=common.getWidgetSettings().mainColor,o.customDesign.buttonBackgroundColor=common.getWidgetSettings().mainColor);var e="#chat_element"+s+"_inputForm",a="";return a+="<style>",a+="#sincloBox "+e+" .inputFormArea {background-color: "+o.customDesign.formBackgroundColor+";}",a+="#sincloBox "+e+" .inputFormArea .inputFormOKButtonArea .inputFormOKButton {background-color:"+o.customDesign.buttonBackgroundColor+"; color: "+o.customDesign.buttonTextColor+";}",a+="#sincloBox "+e+" .inputFormArea label.inputFormLabel .labelText {font-size: "+o.customDesign.labelFontSize+"px;}",a+="#sincloBox "+e+" .inputFormArea label.inputFormLabel .required {font-size: "+o.customDesign.labelFontSize+"px;}",a+="#sincloBox "+e+" .inputFormArea label.inputFormLabel .labelText {color: "+o.customDesign.labelColor+";}",a+="#sincloBox "+e+" .inputFormArea label.inputFormLabel .required {color: "+o.customDesign.requiredColor+";}",a+="#sincloBox "+e+" .inputFormArea .inputFormElement {margin-bottom: "+o.customDesign.elementDistance+"px;}",a+="#sincloBox "+e+" .inputFormArea .inputFormElement .section-mail .at {text-align: center; flex-basis: 5%; margin-right: auto; margin: 0 "+3.75*common.getRatio()+"px; min-width:"+14*common.getRatio()+"px;}",a+="#sincloBox "+e+" .inputFormArea input {border: 1px solid "+o.customDesign.boxBorderColor+";background-color: "+o.customDesign.boxBackgroundColor+";color: "+o.customDesign.textColor+";font-size: "+common.getFontSize(o.customDesign.textFontSize)+"px;}",a+="#sincloBox "+e+" .inputFormArea select {border: 1px solid "+o.customDesign.boxBorderColor+";background-color: "+o.customDesign.boxBackgroundColor+";color: "+o.customDesign.textColor+";font-size: "+common.getFontSize(o.customDesign.textFontSize)+"px;}",a+="#sincloBox "+e+" .inputFormArea textarea {border: 1px solid "+o.customDesign.boxBorderColor+" !important;background-color: "+o.customDesign.boxBackgroundColor+";color: "+o.customDesign.textColor+";font-size: "+common.getFontSize(o.customDesign.textFontSize)+"px;}",o.actionType===sinclo.scenarioApi._actionType.changeAddress&&(a+="input::-ms-clear {visibility:hidden}"),a+="</style>",a+='<div class="inputFormContentArea">',a+='<div class="inputFormArea">',o.inputForm.forEach(function(e,t,n){var i="element"+t;scl_check.isset(o.answer)&&(e.answer=o.answer),a+='<div class="inputFormElement" id="'+i+'">',a+=sinclo.chatApi.createFormElement(e,s,t,o.restore),a+="</div>"}),a+='<div class="errors" style="display: none;"></div>',a+='<p class="inputFormOKButtonArea">',a+='<span class="inputFormOKButton">'+o.customDesign.buttonText+"</span>",a+="</p>",a+="</div>",a+="</div>"},createFormElement:function(e,t,n,i){switch(Number(e.attribute)){case sinclo.scenarioApi._inputForm.attributeType.name:return sinclo.chatApi.createFormName(e,i);case sinclo.scenarioApi._inputForm.attributeType.phone:return sinclo.chatApi.createFormPhone(e,i);case sinclo.scenarioApi._inputForm.attributeType.mail:return sinclo.chatApi.createFormMail(e,i);case sinclo.scenarioApi._inputForm.attributeType.birthday:return sinclo.chatApi.createFormBirthday(e,i);case sinclo.scenarioApi._inputForm.attributeType.address:return sinclo.chatApi.createFormAddress(e,i);case sinclo.scenarioApi._inputForm.attributeType.calendar:return sinclo.chatApi.createFormCalendar(e,t,n,i);case sinclo.scenarioApi._inputForm.attributeType.other:return sinclo.chatApi.createFormOther(e,t,n,i);default:return""}},createFormName:function(e,t){var n="";if(e.isShowLabel&&(n+='<label  class="inputFormLabel"><span class="labelText">'+e.settings.label.name+"</span>",e.required&&(n+='<span class="required">*</span>'),n+="</label>"),e.type==sinclo.scenarioApi._inputForm.inputType.name["1box"]){n+="<div>";var i="",o="";e.isShowPlaceholder&&(i='placeholder="'+e.settings.placeholder.name+'"'),scl_check.isset(e.answer)?o='value="'+sinclo.scenarioApi._inputForm.getAnswerValueFromKey(e.answer,e.settings.variable.name)+'"':scl_check.isset(e.customerInformationId)?o='value="'+userInfo.getCustomerInfoById(e.customerInformationId)+'"':t&&sinclo.scenarioApi._getSavedVariable(e.settings.variable.name)&&(o='value="'+sinclo.scenarioApi._getSavedVariable(e.settings.variable.name)+'"'),n+='<input class="textInput one-name" type="text"'+i+o+">",n+="</div>"}if(e.type==sinclo.scenarioApi._inputForm.inputType.name.lastFirst){n+='<div class="inputWrap">';var s="",a="";e.isShowPlaceholder&&(s='placeholder="'+e.settings.placeholder.firstname+'"',a='placeholder="'+e.settings.placeholder.lastname+'"');var r="",c="";scl_check.isset(e.answer)?(r='value="'+sinclo.scenarioApi._inputForm.getAnswerValueFromKey(e.answer,e.settings.variable.firstname)+'"',c='value="'+sinclo.scenarioApi._inputForm.getAnswerValueFromKey(e.answer,e.settings.variable.lastname)+'"'):scl_check.isset(e.customerInformationLastName)||scl_check.isset(e.customerInformationFirstName)?(scl_check.isset(e.customerInformationLastName)&&(c='value="'+userInfo.getCustomerInfoById(e.customerInformationLastName)+'"'),scl_check.isset(e.customerInformationFirstName)&&(r='value="'+userInfo.getCustomerInfoById(e.customerInformationFirstName)+'"')):t&&(sinclo.scenarioApi._getSavedVariable(e.settings.variable.firstname)&&(r='value="'+sinclo.scenarioApi._getSavedVariable(e.settings.variable.firstname)+'"'),sinclo.scenarioApi._getSavedVariable(e.settings.variable.lastname)&&(c='value="'+sinclo.scenarioApi._getSavedVariable(e.settings.variable.lastname)+'"')),n+='<input class="firstName" type="text" style="height: auto;"'+s+r+">",n+='<input class="lastName" type="text" style="height: auto;"'+a+c+">",n+="</div>"}if(e.type==sinclo.scenarioApi._inputForm.inputType.name.nameKana){n+="<div>";var l="",d="";e.isShowPlaceholder&&(l='placeholder="'+e.settings.placeholder.name+'"',d='placeholder="'+e.settings.placeholder.kana+'"');var p="",u="";scl_check.isset(e.answer)?(p='value="'+sinclo.scenarioApi._inputForm.getAnswerValueFromKey(e.answer,e.settings.variable.name)+'"',u='value="'+sinclo.scenarioApi._inputForm.getAnswerValueFromKey(e.answer,e.settings.variable.kana)+'"'):scl_check.isset(e.customerInformationName)||scl_check.isset(e.customerInformationKana)?(scl_check.isset(e.customerInformationName)&&(p='value="'+userInfo.getCustomerInfoById(e.customerInformationName)+'"'),scl_check.isset(e.customerInformationKana)&&(u='value="'+userInfo.getCustomerInfoById(e.customerInformationKana)+'"')):t&&(sinclo.scenarioApi._getSavedVariable(e.settings.variable.name)&&(p='value="'+sinclo.scenarioApi._getSavedVariable(e.settings.variable.name)+'"'),sinclo.scenarioApi._getSavedVariable(e.settings.variable.kana)&&(u='value="'+sinclo.scenarioApi._getSavedVariable(e.settings.variable.kana)+'"')),n+='<input class="textInput name" type="text"'+l+p+">",n+='<input class="textInput kana" style="margin-top: 5px;" type="text"'+d+u+">",n+="</div>"}if(e.type==sinclo.scenarioApi._inputForm.inputType.name.lastFirstKana){s="",a="";var g="",h="";e.isShowPlaceholder&&(s='placeholder="'+e.settings.placeholder.firstname+'"',a='placeholder="'+e.settings.placeholder.lastname+'"',g='placeholder="'+e.settings.placeholder.firstnameKana+'"',h='placeholder="'+e.settings.placeholder.lastnameKana+'"');r="",c="";var m="",f="";scl_check.isset(e.answer)?(r='value="'+sinclo.scenarioApi._inputForm.getAnswerValueFromKey(e.answer,e.settings.variable.firstname)+'"',c='value="'+sinclo.scenarioApi._inputForm.getAnswerValueFromKey(e.answer,e.settings.variable.lastname)+'"',m='value="'+sinclo.scenarioApi._inputForm.getAnswerValueFromKey(e.answer,e.settings.variable.firstnameKana)+'"',f='value="'+sinclo.scenarioApi._inputForm.getAnswerValueFromKey(e.answer,e.settings.variable.lastnameKana)+'"'):scl_check.isset(e.customerInformationLastName)||scl_check.isset(e.customerInformationFirstName)||scl_check.isset(e.customerInformationLastNameKana)||scl_check.isset(e.customerInformationFirstNameKana)?(scl_check.isset(e.customerInformationFirstName)&&(r='value="'+userInfo.getCustomerInfoById(e.customerInformationFirstName)+'"'),scl_check.isset(e.customerInformationLastName)&&(c='value="'+userInfo.getCustomerInfoById(e.customerInformationLastName)+'"'),scl_check.isset(e.customerInformationFirstNameKana)&&(m='value="'+userInfo.getCustomerInfoById(e.customerInformationFirstNameKana)+'"'),scl_check.isset(e.customerInformationLastNameKana)&&(f='value="'+userInfo.getCustomerInfoById(e.customerInformationLastNameKana)+'"')):t&&(sinclo.scenarioApi._getSavedVariable(e.settings.variable.firstname)&&(r='value="'+sinclo.scenarioApi._getSavedVariable(e.settings.variable.firstname)+'"'),sinclo.scenarioApi._getSavedVariable(e.settings.variable.lastname)&&(c='value="'+sinclo.scenarioApi._getSavedVariable(e.settings.variable.lastname)+'"'),sinclo.scenarioApi._getSavedVariable(e.settings.variable.firstnameKana)&&(m='value="'+sinclo.scenarioApi._getSavedVariable(e.settings.variable.firstnameKana)+'"'),sinclo.scenarioApi._getSavedVariable(e.settings.variable.lastnameKana)&&(f='value="'+sinclo.scenarioApi._getSavedVariable(e.settings.variable.lastnameKana)+'"')),n+='<div class="inputWrap">',n+='<input class="firstName" type="text" style="height: auto;"'+s+r+">",n+='<input class="lastName" type="text" style="height: auto;"'+a+c+">",n+="</div>",n+='<div class="inputWrap" style="margin-top: 5px;">',n+='<input class="firstName firstNameKana" type="text" style="height: auto;"'+g+m+">",n+='<input class="lastName lastNameKana" type="text" style="height: auto;"'+h+f+">",n+="</div>"}return n},createFormPhone:function(e,t){var n="";if(e.isShowLabel&&(n+='<label  class="inputFormLabel"><span class="labelText">'+e.settings.label.phone+"</span>",e.required&&(n+='<span class="required">*</span>'),n+="</label>"),e.type==sinclo.scenarioApi._inputForm.inputType.phone["1box"]){n+="<div>";var i="";e.isShowPlaceholder&&(i='placeholder="'+e.settings.placeholder.phone+'"');var o="";scl_check.isset(e.answer)?o='value="'+sinclo.scenarioApi._inputForm.getAnswerValueFromKey(e.answer,e.settings.variable.phone)+'"':scl_check.isset(e.customerInformationId)?o='value="'+(o=userInfo.getCustomerInfoById(e.customerInformationId))+'"':t&&sinclo.scenarioApi._getSavedVariable(e.settings.variable.phone)&&(o='value="'+sinclo.scenarioApi._getSavedVariable(e.settings.variable.phone)+'"'),n+='<input class="textInput one-tel" type="tel"'+i+o+">",n+="</div>"}if(e.type==sinclo.scenarioApi._inputForm.inputType.phone.separate){n+='<div class="inputWrap">';var s="",a="",r="";e.isShowPlaceholder&&(s='placeholder="'+e.settings.placeholder.phone1+'"',a='placeholder="'+e.settings.placeholder.phone2+'"',r='placeholder="'+e.settings.placeholder.phone3+'"');var c="",l="",d="";if(scl_check.isset(e.answer))(p=sinclo.scenarioApi._inputForm.getAnswerValueFromKey(e.answer,e.settings.variable.phone))&&(c='value="'+p.substring(0,3)+'"',l='value="'+p.substring(3,7)+'"',d='value="'+p.substring(7)+'"');else if(t){var p;(p=sinclo.scenarioApi._getSavedVariable(e.settings.variable.phone))&&(c='value="'+p.substring(0,3)+'"',l='value="'+p.substring(3,7)+'"',d='value="'+p.substring(7)+'"')}n+='<input class="phone1" type="tel"'+s+c+">",n+='<input class="phone2" type="tel"'+a+l+">",n+='<input class="phone3" type="tel"'+r+d+">",n+="</div>"}return n},createFormMail:function(e,t){var n="";if(e.isShowLabel&&(n+='<label  class="inputFormLabel"><span class="labelText">'+e.settings.label.mail+"</span>",e.required&&(n+='<span class="required">*</span>'),n+="</label>"),e.type==sinclo.scenarioApi._inputForm.inputType.mail["1box"]){n+="<div>";var i="";e.isShowPlaceholder&&(i='placeholder="'+e.settings.placeholder.mail+'"');var o="";scl_check.isset(e.answer)?o='value="'+sinclo.scenarioApi._inputForm.getAnswerValueFromKey(e.answer,e.settings.variable.mail)+'"':scl_check.isset(e.customerInformationId)?o='value="'+(o=userInfo.getCustomerInfoById(e.customerInformationId))+'"':t&&sinclo.scenarioApi._getSavedVariable(e.settings.variable.mail)&&(o='value="'+sinclo.scenarioApi._getSavedVariable(e.settings.variable.mail)+'"'),n+='<input class="textInput mail" type="email"'+i+o+' formnovalidate style="display: block;">',n+="</div>"}if(e.type==sinclo.scenarioApi._inputForm.inputType.mail.separate){n+='<div class="section-mail">';var s="",a="";e.isShowPlaceholder&&(s='placeholder="'+e.settings.placeholder.mail1+'"',a='placeholder="'+e.settings.placeholder.mail2+'"');var r="",c="",l="";scl_check.isset(e.answer)?(r='value="'+(l=sinclo.scenarioApi._inputForm.getAnswerValueFromKey(e.answer,e.settings.variable.mail).split("@"))[0]+'"',c='value="'+l[1]+'"'):t&&sinclo.scenarioApi._getSavedVariable(e.settings.variable.mail)&&(r='value="'+(l=sinclo.scenarioApi._getSavedVariable(e.settings.variable.mail).split("@"))[0]+'"',c='value="'+l[1]+'"'),n+='<input class="mail1" type="email"'+s+r+" formnovalidate>",n+='<span class="at">@</span>',n+='<input class="mail2" type="email"'+a+c+" formnovalidate>",n+="</div>"}return n},createFormBirthday:function(e,t){function n(e){return("0"+e).slice(-2)}var i="";e.isShowLabel&&(i+='<label  class="inputFormLabel"><span class="labelText">'+e.settings.label.birthday+"</span>",e.required&&(i+='<span class="required">*</span>'),i+="</label>");var o=0,s=0,a=0;scl_check.isset(e.answer)?(o=sinclo.scenarioApi._inputForm.getAnswerValueFromKey(e.answer,e.settings.variable.year)?sinclo.scenarioApi._inputForm.getAnswerValueFromKey(e.answer,e.settings.variable.year):0,s=sinclo.scenarioApi._inputForm.getAnswerValueFromKey(e.answer,e.settings.variable.month)?sinclo.scenarioApi._inputForm.getAnswerValueFromKey(e.answer,e.settings.variable.month):0,a=sinclo.scenarioApi._inputForm.getAnswerValueFromKey(e.answer,e.settings.variable.date)?sinclo.scenarioApi._inputForm.getAnswerValueFromKey(e.answer,e.settings.variable.date):0):t&&(o=sinclo.scenarioApi._getSavedVariable(e.settings.variable.year)?sinclo.scenarioApi._getSavedVariable(e.settings.variable.year):0,s=sinclo.scenarioApi._getSavedVariable(e.settings.variable.month)?sinclo.scenarioApi._getSavedVariable(e.settings.variable.month):0,a=sinclo.scenarioApi._getSavedVariable(e.settings.variable.date)?sinclo.scenarioApi._getSavedVariable(e.settings.variable.date):0),i+="<div>",i+='<select class="year" style="float: none;">';for(var r=(new Date).getFullYear();r>(new Date).getFullYear()-100;r--)i+=o==r?'<option class="notranslate" selected value="'+r+'">'+r+"</option>":'<option class="notranslate" value="'+r+'">'+r+"</option>";i+="</select>",scl_check.smartphone()?i+='<span style="font-size: 9px;">å¹´</span>':i+='<span style="margin-left: 3px; margin-right: 3px; font-size: 0.8em;">å¹´</span>',i+='<select class="month" style="float: none;">';for(r=1;r<=12;r++)i+=s==r?'<option class="notranslate" selected value="'+n(r)+'">'+n(r)+"</option>":'<option class="notranslate" value="'+n(r)+'">'+n(r)+"</option>";i+="</select>",scl_check.smartphone()?i+='<span style="font-size: 9px;">æ</span>':i+='<span style="margin-left: 3px; margin-right: 3px; font-size: 0.8em;">æ</span>',i+='<select class="date" style="float: none;">';for(r=1;r<=31;r++)i+=a==r?'<option class="notranslate" selected value="'+n(r)+'">'+n(r)+"</option>":'<option class="notranslate" value="'+n(r)+'">'+n(r)+"</option>";return i+="</select>",scl_check.smartphone()?i+='<span style="font-size: 9px;">æ¥</span>':i+='<span style="margin-left: 3px; margin-right: 3px; font-size: 0.8em;">æ¥</span>',i+="</div>"},createFormAddress:function(e,t){var n="";if(e.type==sinclo.scenarioApi._inputForm.inputType.address["1box"]){e.isShowLabel&&(n+='<label  class="inputFormLabel"><span class="labelText">'+e.settings.label.address+"</span>",e.required&&(n+='<span class="required">*</span>'),n+="</label>"),n+="<div>";var i="";e.isShowPlaceholder&&(i='placeholder="'+e.settings.placeholder.address+'"');var o="";scl_check.isset(e.answer)?o='value="'+sinclo.scenarioApi._inputForm.getAnswerValueFromKey(e.answer,e.settings.variable.address)+'"':scl_check.isset(e.customerInformationId)?o='value="'+(o=userInfo.getCustomerInfoById(e.customerInformationId))+'"':t&&sinclo.scenarioApi._getSavedVariable(e.settings.variable.address)&&(o='value="'+sinclo.scenarioApi._getSavedVariable(e.settings.variable.address)+'"'),n+='<input class="textInput address" type="text"'+i+o+">",n+="</div>"}if(e.type==sinclo.scenarioApi._inputForm.inputType.address.zipAddress){e.isShowLabel&&(n+='<label  class="inputFormLabel"><span class="labelText">'+e.settings.label.postcode+"</span>",e.required&&(n+='<span class="required">*</span>'),n+="</label>");var s="",a="";scl_check.isset(e.answer)?(s='value="'+sinclo.scenarioApi._inputForm.getAnswerValueFromKey(e.answer,e.settings.variable.postcode)+'"',a='value="'+sinclo.scenarioApi._inputForm.getAnswerValueFromKey(e.answer,e.settings.variable.address)+'"'):t&&(sinclo.scenarioApi._getSavedVariable(e.settings.variable.postcode)&&(s='value="'+sinclo.scenarioApi._getSavedVariable(e.settings.variable.postcode)+'"'),sinclo.scenarioApi._getSavedVariable(e.settings.variable.address)&&(a='value="'+sinclo.scenarioApi._getSavedVariable(e.settings.variable.address)+'"')),n+="<div>";i="";e.isShowPlaceholder&&(i='placeholder="'+e.settings.placeholder.postcode+'"'),e.addressAutoComplete?n+='<input class="postcode" name="postcode" type="text" onKeyUp="AjaxZip3.zip2addr(this,\'\',\'address\',\'address\');"'+i+s+">":n+='<input class="postcode" name="postcode" type="text" '+i+s+">",n+="</div>",e.isShowLabel&&(n+='<label  class="inputFormLabel" style="margin-top: 5px;"><span class="labelText">'+e.settings.label.address+"</span>",e.required&&(n+='<span class="required">*</span>'),n+="</label>"),n+="<div>";i="";e.isShowPlaceholder&&(i='placeholder="'+e.settings.placeholder.address+'"'),n+='<input class="textInput address" name="address" type="text"'+i+a+">",n+="</div>"}var r=e.type==sinclo.scenarioApi._inputForm.inputType.address.change;if(e.type==sinclo.scenarioApi._inputForm.inputType.address.separate||r){e.isShowLabel&&(n+='<label  class="inputFormLabel"><span class="labelText">'+e.settings.label.postcode+"</span>",e.required&&(n+='<span class="required">*</span>'),n+="</label>");s="";var c="",l="",d="",p="",u=r?e.customDesign.elementDistance:5;scl_check.isset(e.answer)?(s='value="'+sinclo.scenarioApi._inputForm.getAnswerValueFromKey(e.answer,e.settings.variable.postcode)+'"',c='value="'+sinclo.scenarioApi._inputForm.getAnswerValueFromKey(e.answer,e.settings.variable.address1)+'"',l='value="'+sinclo.scenarioApi._inputForm.getAnswerValueFromKey(e.answer,e.settings.variable.address2)+'"',d='value="'+sinclo.scenarioApi._inputForm.getAnswerValueFromKey(e.answer,e.settings.variable.address3)+'"',p='value="'+sinclo.scenarioApi._inputForm.getAnswerValueFromKey(e.answer,e.settings.variable.address4)+'"'):t&&(sinclo.scenarioApi._getSavedVariable(e.settings.variable.postcode)&&(s='value="'+sinclo.scenarioApi._getSavedVariable(e.settings.variable.postcode)+'"'),sinclo.scenarioApi._getSavedVariable(e.settings.variable.address1)&&(c='value="'+sinclo.scenarioApi._getSavedVariable(e.settings.variable.address1)+'"'),sinclo.scenarioApi._getSavedVariable(e.settings.variable.address2)&&(l='value="'+sinclo.scenarioApi._getSavedVariable(e.settings.variable.address2)+'"'),sinclo.scenarioApi._getSavedVariable(e.settings.variable.address3)&&(d='value="'+sinclo.scenarioApi._getSavedVariable(e.settings.variable.address3)+'"'),sinclo.scenarioApi._getSavedVariable(e.settings.variable.address4)&&(p='value="'+sinclo.scenarioApi._getSavedVariable(e.settings.variable.address4)+'"')),n+="<div>";i="";if(e.isShowPlaceholder&&(i='placeholder="'+e.settings.placeholder.postcode+'"'),e.addressAutoComplete?n+='<input class="postcode" name="postcode" type="text" onKeyUp="AjaxZip3.zip2addr(this,\'\',\'address1\',\'address2\');"'+i+s+">":n+=r?'<input class="postcode" name="postcode" type="text" onKeyUp="sinclo.scenarioApi._changeAddress._postcodeHandler(this);"'+i+s+">":'<input class="postcode" name="postcode" type="text" '+i+s+">",n+="</div>",r&&(n+='<div style="display: flex;">'),e.isShowLabel&&(n+='<label  class="inputFormLabel" style="margin-top: '+u+'px;"><span class="labelText">'+e.settings.label.address1+"</span>",e.required&&(n+='<span class="required">*</span>'),n+="</label>"),r)n+='<div style="margin-top: '+u+'px; margin-left: 20px;"><p class="textInput address1">æ±äº¬</p>',n+="</div></div>";else{n+="<div>";i="";e.isShowPlaceholder&&(i='placeholder="'+e.settings.placeholder.address1+'"'),n+='<input class="textInput address1" type="text" name="address1"'+i+c+"></div>"}if(e.isShowLabel&&(n+='<label  class="inputFormLabel" style="margin-top: '+u+'px;"><span class="labelText">'+e.settings.label.address2+"</span>",e.required&&(n+='<span class="required">*</span>'),n+="</label>"),n+="<div>",r)n+='<select class="textInput address2" name="address2" onchange="sinclo.scenarioApi._changeAddress._changeInputFormState()">',n+='<option value="é¸æãã¦ãã ãã">é¸æãã¦ãã ãã</option>',l&&(n+="<option "+l+"selected>"+sinclo.scenarioApi._getSavedVariable(e.settings.variable.address2)+"</option>"),n+="</select></div>";else{i="";e.isShowPlaceholder&&(i='placeholder="'+e.settings.placeholder.address2+'"'),n+='<input class="textInput address2" type="text" name="address2"'+i+l+"></div>"}e.isShowLabel&&(n+='<label  class="inputFormLabel" style="margin-top: '+u+'px;"><span class="labelText">'+e.settings.label.address3+"</span>",e.required&&(n+='<span class="required">*</span>'),n+="</label>"),n+="<div>";i="";var g=r?' onchange="sinclo.scenarioApi._changeAddress._changeInputFormState()"':"";e.isShowPlaceholder&&(i='placeholder="'+e.settings.placeholder.address3+'"'),n+='<input class="textInput address3" type="text"'+i+d+g+"></div>",e.isShowLabel&&(n+='<label  class="inputFormLabel" style="margin-top: '+u+'px;"><span class="labelText">'+e.settings.label.address4+"</span>",n+="</label>"),n+="<div>";i="";e.isShowPlaceholder&&(i='placeholder="'+e.settings.placeholder.address4+'"'),n+='<input class="textInput address4" type="text"'+i+p+"></div>"}return n},createFormCalendar:function(e,t,n,i){var o="action"+t+"_element"+n+"_calendar",s="action"+t+"_element"+n+"_datepicker",a=common.getWidgetSettings().mainColor,r=common.getWidgetSettings().mainColor,c=this.getRawColor(common.getWidgetSettings().mainColor);e.settings.calendarCustomDesign&&(a=e.settings.customDesign.borderColor,r=e.settings.customDesign.headerBackgroundColor,c=e.settings.customDesign.headerWeekdayBackgroundColor);var l=e.settings.customDesign,d="";e.isShowLabel&&(d+='<label  class="inputFormLabel" style="margin-bottom: 2px;"><span class="labelText">'+e.settings.label.calendar+"</span>",e.required&&(d+='<span class="required">*</span>'),d+="</label>"),d+='<div id="'+o+'">',d+="<style>",d+="#sincloBox #"+o+" .flatpickr-calendar { border: 2px solid "+a+" !important;}",1===Number(common.getWidgetSettings().widgetSizeType)&&(d+="#sincloBox #"+o+" .flatpickr-calendar { transform: scale(0.8) translate(-24px, -30px) }"),d+="#sincloBox #"+o+" .flatpickr-calendar .flatpickr-months { background: "+r+";}",d+="#sincloBox #"+o+" .flatpickr-calendar .flatpickr-months .flatpickr-month { color: "+l.headerTextColor+";}",d+="#sincloBox #"+o+" .flatpickr-calendar .flatpickr-weekdays { background: "+c+";}",d+="#sincloBox #"+o+" .flatpickr-calendar .flatpickr-weekdaycontainer .flatpickr-weekday { color: "+sinclo.chatApi.getContrastColor(c)+" !important;}",d+="#sincloBox #"+o+" .flatpickr-calendar .flatpickr-months .flatpickr-prev-month { fill: "+l.headerTextColor+";}",d+="#sincloBox #"+o+" .flatpickr-calendar .flatpickr-months .flatpickr-next-month { fill: "+l.headerTextColor+";}",d+="#sincloBox #"+o+" .flatpickr-calendar .dayContainer { background-color: "+l.calendarBackgroundColor+";}",d+="#sincloBox #"+o+' .flatpickr-calendar .dayContainer .flatpickr-day.today:after { content: "";position: absolute;top: 0px;left: -2px;width: 29px;height: 34px;display: inline-block;  border: 1px solid '+r+"; outline: 1px solid "+c+";}",d+="#sincloBox #"+o+" .flatpickr-calendar .dayContainer .flatpickr-day { border-top: none;  border-left:none; border-bottom: 1px solid  "+c+"; border-right: 1px solid  "+c+";}",d+="#sincloBox #"+o+" .dayContainer .flatpickr-day.selected { background-color: "+r+"; color: "+sinclo.chatApi.getContrastColor(r)+" !important;}",d+="#sincloBox #"+o+" .flatpickr-calendar .dayContainer span:nth-child(7n+7) { border-right: none;};",d+="</style>";var p="";return scl_check.isset(e.customerInformationId)?p='value="'+(p=userInfo.getCustomerInfoById(e.customerInformationId))+'"':i&&sinclo.scenarioApi._getSavedVariable(e.settings.variable.calendar)&&(p='value="'+sinclo.scenarioApi._getSavedVariable(e.settings.variable.calendar)+'"'),d+='<input type="hidden" id="'+s+'"'+p+"></div>"},createFormTextbox:function(e,t,n){var i="";e.isShowLabel&&(i+='<label  class="inputFormLabel"><span class="labelText">'+e.settings.label.other+"</span>",e.required&&(i+='<span class="required">*</span>'),i+="</label>"),i+="<div>";var o="";e.isShowPlaceholder&&(o='placeholder="'+e.settings.placeholder.other+'"');var s="";return scl_check.isset(e.answer)?s='value="'+sinclo.scenarioApi._inputForm.getAnswerValueFromKey(e.answer,e.settings.variable.other)+'"':scl_check.isset(e.customerInformationId)?s='value="'+(s=userInfo.getCustomerInfoById(e.customerInformationId))+'"':t&&sinclo.scenarioApi._getSavedVariable(e.settings.variable.other)&&(s='value="'+sinclo.scenarioApi._getSavedVariable(e.settings.variable.other)+'"'),i+='<input class="textInput other'+n+'" type="text" maxlength="1000"'+o+s+">",i+="</div>"},createFormOther:function(e,t,n,i){switch(Number(e.type)){case sinclo.scenarioApi._inputForm.inputType.other.textbox:return sinclo.chatApi.createFormTextbox(e,i,n);case sinclo.scenarioApi._inputForm.inputType.other.textarea:return sinclo.chatApi.createFormTextarea(e,i,n);case sinclo.scenarioApi._inputForm.inputType.other.radio:return sinclo.chatApi.createFormRadio(e,t,n,i);case sinclo.scenarioApi._inputForm.inputType.other.pulldown:return sinclo.chatApi.createFormPulldown(e,t,n,i);case sinclo.scenarioApi._inputForm.inputType.other.checkbox:return sinclo.chatApi.createFormCheckbox(e,t,n,i);default:return""}},createFormTextarea:function(e,t,n){var i="";e.isShowLabel&&(i+='<label  class="inputFormLabel"><span class="labelText">'+e.settings.label.other+"</span>",e.required&&(i+='<span class="required">*</span>'),i+="</label>"),i+="<div>";var o="";e.isShowPlaceholder&&(o='placeholder="'+e.settings.placeholder.other+'"');var s="";return scl_check.isset(e.answer)?s=sinclo.scenarioApi._inputForm.getAnswerValueFromKey(e.answer,e.settings.variable.other):scl_check.isset(e.customerInformationId)?s='value="'+(s=userInfo.getCustomerInfoById(e.customerInformationId))+'"':t&&sinclo.scenarioApi._getSavedVariable(e.settings.variable.other)&&(s=sinclo.scenarioApi._getSavedVariable(e.settings.variable.other)),i+='<textarea class="other'+n+'" style="width: 100%; resize: vertical" rows="3" maxlength="1000"'+o+">"+s+"</textarea>",i+="</div>"},createFormRadio:function(o,e,t,s){var a="action"+e+"_element"+t+"_radio",r="";o.isShowLabel&&(r+='<label  class="inputFormLabel"><span class="labelText">'+o.settings.label.other+"</span>",o.required&&(r+='<span class="required">*</span>'),r+="</label>");var n="1"===o.settings.radioStyle?"buttonStyle":"labelStyle";r+='<div id="'+a+'" class="'+n+'">';var i="<style>";return i+="#sincloBox #"+a+' sinclo-radio [type="radio"] + label:before {background-color: '+o.settings.customDesign.radioBackgroundColor+" !important;}",i+="#sincloBox #"+a+' sinclo-radio [type="radio"]:checked + label:after {background: '+o.settings.customDesign.radioActiveColor+" !important;}",i+="#sincloBox #"+a+" sinclo-radio:first-of-type {margin-top: "+8*common.getRatio()+"px !important}",i+="#sincloBox #"+a+" sinclo-radio {margin-top: "+o.settings.customDesign.radioSelectionDistance*common.getRatio()+"px !important;}",o.settings.radioNoneBorder?i+="#sincloBox #"+a+' sinclo-radio [type="radio"] + label:before {border-color: transparent !important;}':i+="#sincloBox #"+a+' sinclo-radio [type="radio"] + label:before {border-color: '+o.settings.customDesign.radioBorderColor+"!important;}","1"!==o.settings.radioStyle?i+="#sincloBox #"+a+' sinclo-radio [type="radio"] + label {background-color: transparent;}':i+="#sincloBox #"+a+" sinclo-radio {padding: "+8*common.getRatio()+"px; color: "+o.settings.customDesign.radioTextColor+";}",r+=i+="</style>",Object.keys(o.settings.options).forEach(function(e,t,n){if(!o.settings.options[e]||""==o.settings.options[e])return!1;if(scl_check.isset(o.answer))0===(i=sinclo.scenarioApi._inputForm.getAnswerValueFromKey(o.answer,o.settings.variable.other)).indexOf(o.settings.options[e])?r+="<sinclo-radio style=\"display: block\"><input type='radio' name='"+a+"' id='"+a+"-"+e+"' class='sinclo-chat-radio' value='"+o.settings.options[e]+"' checked>":r+="<sinclo-radio style=\"display: block\"><input type='radio' name='"+a+"' id='"+a+"-"+e+"' class='sinclo-chat-radio' value='"+o.settings.options[e]+"'>",r+="<label for='"+a+"-"+e+"'>"+o.settings.options[e]+"</label></sinclo-radio>";else if(s){var i=sinclo.scenarioApi._getSavedVariable(o.settings.variable.other);scl_check.isset(o.customerInformationId)&&(i=userInfo.getCustomerInfoById(o.customerInformationId)),0===i.indexOf(o.settings.options[e])?r+="<sinclo-radio style=\"display: block\"><input type='radio' name='"+a+"' id='"+a+"-"+e+"' class='sinclo-chat-radio' value='"+o.settings.options[e]+"' checked>":r+="<sinclo-radio style=\"display: block\"><input type='radio' name='"+a+"' id='"+a+"-"+e+"' class='sinclo-chat-radio' value='"+o.settings.options[e]+"'>",r+="<label for='"+a+"-"+e+"'>"+o.settings.options[e]+"</label></sinclo-radio>"}else r+="<sinclo-radio style=\"display: block\"><input type='radio' name='"+a+"' id='"+a+"-"+e+"' class='sinclo-chat-radio' value='"+o.settings.options[e]+"'>",r+="<label for='"+a+"-"+e+"'>"+o.settings.options[e]+"</label></sinclo-radio>"}),r+="</select>",r+="</div>"},createFormPulldown:function(o,e,t,s){var n="action"+e+"_element"+t+"_pulldown",a="";o.isShowLabel&&(a+='<label  class="inputFormLabel"><span class="labelText">'+o.settings.label.other+"</span>",o.required&&(a+='<span class="required">*</span>'),a+="</label>");var i='style="border: 1px solid #909090; height: '+30*common.getRatio()+"px; width: 100%; word-break: break-all;";return i+="background-color: "+o.settings.customDesign.backgroundColor+";",o.settings.pulldownCustomDesign?(i+="color: "+o.settings.customDesign.textColor+";",i+="border-color: "+o.settings.customDesign.borderColor+';"'):(i+="color: "+common.getWidgetSettings().descriptionTextColor+";",i+="border-color: "+common.getWidgetSettings().mainColor+';"'),a+='<select id="'+n+'" '+i+">",a+="<option>é¸æãã¦ãã ãã</option>",Object.keys(o.settings.options).forEach(function(e,t,n){if(!o.settings.options[e]||""==o.settings.options[e])return!1;if(scl_check.isset(o.answer))0===(i=sinclo.scenarioApi._inputForm.getAnswerValueFromKey(o.answer,o.settings.variable.other)).indexOf(o.settings.options[e])?a+='<option value="'+o.settings.options[e]+'" selected>'+o.settings.options[e]+"</option>":a+='<option value="'+o.settings.options[e]+'">'+o.settings.options[e]+"</option>";else if(scl_check.isset(o.customerInformationId)){var i=userInfo.getCustomerInfoById(o.customerInformationId);scl_check.isset(i)&&-1!==i.indexOf(o.settings.options[e])?a+='<option value="'+o.settings.options[e]+'" selected>'+o.settings.options[e]+"</option>":a+='<option value="'+o.settings.options[e]+'">'+o.settings.options[e]+"</option>"}else s&&0<=sinclo.scenarioApi._getSavedVariable(o.settings.variable.other).indexOf(o.settings.options[e])?a+='<option value="'+o.settings.options[e]+'" selected>'+o.settings.options[e]+"</option>":a+='<option value="'+o.settings.options[e]+'">'+o.settings.options[e]+"</option>"}),a+="</select>"},createFormCheckbox:function(o,e,t,s){var n="action"+e+"_element"+t+"_checkbox",a="";o.isShowLabel&&(a+='<label  class="inputFormLabel"><span class="labelText">'+o.settings.label.other+"</span>",o.required&&(a+='<span class="required">*</span>'),a+="</label>");var i="<style>";return i+="#sincloBox #"+n+" .sinclo-checkbox {display: block;position: relative;padding-left: "+20*common.getRatio()+"px;margin-bottom: "+o.settings.customDesign.checkboxSelectionDistance*common.getRatio()+"px;cursor: pointer;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;}",i+="#sincloBox #"+n+" .sinclo-checkbox input {position: absolute;opacity: 0;cursor: pointer;height: 0;width: 0;}",scl_check.smartphone()&&!common.isPortrait()?i+="#sincloBox #"+n+" .sinclo-checkbox .checkmark {position: absolute;top: 14px; left: 0px; background-color: "+o.settings.customDesign.checkboxBackgroundColor+"}":i+="#sincloBox #"+n+" .sinclo-checkbox .checkmark {position: absolute;top: "+1*common.getRatio()+"px;left: 0px; background-color: "+o.settings.customDesign.checkboxBackgroundColor+"}",i+="#sincloBox #"+n+' .sinclo-checkbox .checkmark:after {content: "";position: absolute;display: none;border: solid '+o.settings.customDesign.checkboxCheckmarkColor+";}",i+="#sincloBox #"+n+" .sinclo-checkbox input:checked ~ .checkmark {background-color: "+o.settings.customDesign.checkboxActiveColor+"}",i+="#sincloBox #"+n+" .sinclo-checkbox input:checked ~ .checkmark:after {display: block}",i+="#sincloBox #"+n+" .sinclo-checkbox input:hover ~ .checkmark {background-color: "+o.settings.customDesign.checkboxActiveColor+"}",i+="#sincloBox #"+n+"{display: table;}",o.settings.checkboxNoneBorder?i+="#sincloBox #"+n+" .sinclo-checkbox .checkmark {border: none;}":i+="#sincloBox #"+n+" .sinclo-checkbox .checkmark {border: 1px solid "+o.settings.customDesign.checkboxBorderColor+";}","1"!==o.settings.checkboxStyle?i+="#sincloBox #"+n+" .sinclo-checkbox {background-color: transparent;}":(i+="#sincloBox #"+n+" .sinclo-checkbox {padding: "+8*common.getRatio()+"px "+8*common.getRatio()+"px "+8*common.getRatio()+"px "+28*common.getRatio()+"px;}",scl_check.smartphone()&&!common.isPortrait()?i+="#sincloBox #"+n+" .sinclo-checkbox .checkmark { top: 14px; left: 14px; }":i+="#sincloBox #"+n+" .sinclo-checkbox .checkmark {top: "+9*common.getRatio()+"px;left: "+8*common.getRatio()+"px; }",i+="#sincloBox #"+n+" .sinclo-checkbox {background-color: "+o.settings.customDesign.checkboxEntireBackgroundColor+";}",i+="#sincloBox #"+n+" .sinclo-checkbox {color: "+o.settings.customDesign.checkboxTextColor+";}"),o.message&&(i+="#sincloBox #"+n+" {margin-top: "+8*common.getRatio()+"px}"),i+="</style>",a+='<div id="'+n+'" style="display: block;" data-separator="'+o.settings.checkboxSeparator+'">',a+=i,Object.keys(o.settings.options).forEach(function(e,t,n){if(!o.settings.options[e]||""===o.settings.options[e])return!1;if(a+='<label class="sinclo-checkbox">',scl_check.isset(o.answer)){var i=sinclo.scenarioApi._inputForm.getAnswerValueFromKey(o.answer,o.settings.variable.other);0<=(i=scl_check.isset(i)?i.split(sinclo.chatApi.getCheckboxSeparator(o.checkboxSeparator)):[]).indexOf(o.settings.options[e])?a+='<input type="checkbox" value="'+o.settings.options[e]+'" checked>':a+='<input type="checkbox" value="'+o.settings.options[e]+'">'}else if(scl_check.isset(o.customerInformationId)){i=userInfo.getCustomerInfoById(o.customerInformationId);scl_check.isset(i)&&0<=i.indexOf(o.settings.options[e])?a+='<input type="checkbox" value="'+o.settings.options[e]+'" checked>':a+='<input type="checkbox" value="'+o.settings.options[e]+'">'}else if(s){i=sinclo.scenarioApi._getSavedVariable(o.settings.variable.other);0<=(i=scl_check.isset(i)?i.split(sinclo.chatApi.getCheckboxSeparator(o.checkboxSeparator)):[]).indexOf(o.settings.options[e])?a+='<input type="checkbox" value="'+o.settings.options[e]+'" checked>':a+='<input type="checkbox" value="'+o.settings.options[e]+'">'}else a+='<input type="checkbox" value="'+o.settings.options[e]+'">';a+=o.settings.options[e],a+='<span class="checkmark"></span>',a+="</label>"}),a+="</div>"},validateInputForm:function(e,t){function i(e){return'<p class="errors" style="color: red;">'+$("<div>").html(e).text()+"</p>"}function l(e,t,n){if($(this).hasClass("disabled"))return!1;e?(t.next("p").remove(),t.after(i(n))):t.next("p").remove()}function d(e,t,n){e?t.after(i(n)):t.next("p").remove()}function p(e){e.next("p").remove()}function u(e,t,n,i){var o,s=[],a=[];switch(Number(e.attribute)){case 1:switch(Number(e.type)){case 1:return i&&s.push(!$(t+" input").val().trim(),e.settings.label.name+"ãæªå¥åã§ã"),s;case 2:return i&&s.push(!$(t+" .firstName").val().trim()||!$(t+" .lastName").val().trim(),e.settings.label.name+"ãæªå¥åã§ã"),s;case 3:return i&&s.push(!$(t+" .name").val().trim()||!$(t+" .kana").val().trim(),e.settings.label.name+"ãæªå¥åã§ã"),s;case 4:return i&&s.push(!($(t+" .firstName").val().trim()&&$(t+" .lastName").val().trim()&&$(t+" .firstNameKana").val().trim()&&$(t+" .lastNameKana").val().trim()),e.settings.label.name+"ãæªå¥åã§ã"),s}case 2:switch(Number(e.type)){case 1:return $(t+" input").val()?(o=/^\+?(\d{10,}|[\d-]{12,})/,s.push(!o.test($(t+" input").val()),e.settings.label.phone+"ãç¡å¹ãªå½¢å¼ã§ã")):i&&s.push(!$(t+" input").val(),e.settings.label.phone+"ãæªå¥åã§ã"),s;case 2:return $(t+" .phone1").val()&&$(t+" .phone2").val()&&$(t+" .phone3").val()?(o=/^\+?(\d{10,}|[\d-]{12,})/,s.push(!o.test($(t+" .phone1").val()+$(t+" .phone2").val()+$(t+" .phone3").val()),e.settings.label.phone+"ãç¡å¹ãªå½¢å¼ã§ã")):i&&s.push(!$(t+" .phone1").val()||!$(t+" .phone2").val()||!$(t+" .phone3").val(),e.settings.label.phone+"ãæªå¥åã§ã"),s}case 3:switch(Number(e.type)){case 1:return $(t+" input").val()?(o=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,s.push(!o.test($(t+" input").val()),e.settings.label.mail+"ãç¡å¹ãªå½¢å¼ã§ã")):i&&s.push(!$(t+" input").val(),e.settings.label.mail+"ãæªå¥åã§ã"),s;case 2:return $(t+" .mail1").val()&&$(t+" .mail2").val()?(o=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,s.push(!o.test($(t+" .mail1").val()+"@"+$(t+" .mail2").val()),e.settings.label.mail+"ãç¡å¹ãªå½¢å¼ã§ã")):i&&s.push(!$(t+" .mail1").val()||!$(t+" .mail2").val(),e.settings.label.mail+"ãæªå¥åã§ã"),s}case 6:return i&&s.push(!$(t+" input").val(),e.settings.label.calendar+"ãæªé¸æã§ã"),s;case 7:switch(Number(e.type)){case 1:if($(t+" input").val().trim()){var r=parseInt(e.settings.inputRestrictionType);if(o=sinclo.chatApi._inputFormRegExp.halfAlphanumericSym,e.isInputRestriction&&1<r){var c=$(t+" input").val().replace(o,"");$(t+" input").val(c)}return e.isInputRestriction&&e.settings.isSetMinChar?a.push($(t+" input").val().length<Number(e.settings.minChar)):a.push(!1),e.isInputRestriction&&e.settings.isSetMaxChar?a.push($(t+" input").val().length>Number(e.settings.maxChar)):a.push(!1),a[0]&&a.push(e.settings.label.other+"ã¯"+e.settings.minChar+"æå­ä»¥ä¸ã§å¥åãã¦ãã ãã"),a[1]&&a.push(e.settings.label.other+"ã¯"+e.settings.maxChar+"æå­ä»¥ä¸ã§å¥åãã¦ãã ãã"),s.push(scl_check.includes(a,!0)),a[0]&&a[1]&&(a[2]+=a[3]),s.push(a[2]),s}return i&&s.push(!$(t+" input").val().trim(),e.settings.label.other+"ãæªå¥åã§ã"),s;case 2:return $(t+" textarea").val().trim()?($(t+" textarea").val()&&e.isInputRestriction&&e.settings.isSetMinChar?a.push($(t+" textarea").val().length<Number(e.settings.minChar)):a.push(!1),$(t+" textarea").val()&&e.isInputRestriction&&e.settings.isSetMaxChar?a.push($(t+" textarea").val().length>Number(e.settings.maxChar)):a.push(!1),a[0]&&a.push(e.settings.label.other+"ã¯"+e.settings.minChar+"æå­ä»¥ä¸ã§å¥åãã¦ãã ãã"),a[1]&&a.push(e.settings.label.other+"ã¯"+e.settings.maxChar+"æå­ä»¥ä¸ã§å¥åãã¦ãã ãã"),s.push(scl_check.includes(a,!0)),a[0]&&a[1]&&(a[2]+=a[3]),s.push(a[2])):i&&s.push(!$(t+" textarea").val().trim(),e.settings.label.other+"ãæªå¥åã§ã"),s;case 4:return i&&s.push("é¸æãã¦ãã ãã"===$(t+" select").val(),e.settings.label.other+"ãæªé¸æã§ã"),s;case 3:case 6:return i&&s.push(!n,e.settings.label.other+"ãæªé¸æã§ã"),s}}}var g="#chat_element"+t+"_inputForm";e.inputForm.forEach(function(n,e,t){var i=g+" "+("#element"+e),o="",s="",a="",r="",c=[];Number(n.attribute)!==sinclo.scenarioApi._inputForm.attributeType.name&&Number(n.attribute)!==sinclo.scenarioApi._inputForm.attributeType.phone&&Number(n.attribute)!==sinclo.scenarioApi._inputForm.attributeType.mail&&Number(n.attribute)!==sinclo.scenarioApi._inputForm.attributeType.calendar&&Number(n.attribute)!==sinclo.scenarioApi._inputForm.attributeType.other||(s=$(i+" input").closest("div"),1===Number(n.attribute)&&4===Number(n.type)?s=$(i+" input.firstNameKana").parent("div"):3===Number(n.attribute)&&2===Number(n.type)?s=$(i+" div:first"):7===Number(n.attribute)&&(2===Number(n.type)&&(s=$(i+" textarea")),4===Number(n.type)&&(s=$(i+" select"))),r=$(i+" input"),7===Number(n.attribute)&&2===Number(n.type)&&(r=$(i+" textarea")),$(g+" .inputFormOKButton").on("click",function(){c=[],7!==Number(n.attribute)||3!==Number(n.type)&&6!==Number(n.type)||($(i+" input").each(function(e,t){$(this).prop("checked")?c.push(!0):c.push(!1)}),c=scl_check.includes(c,!0));var e=u(n,i,c,n.required);o=e[0],a=e[1],l(o,s,a)}),(7!==Number(n.attribute)||3!==Number(n.type)&&6!==Number(n.type))&&r.on({blur:function(e){var t=u(n,i,c,n.required);o=t[0],a=t[1],p(s),d(o,s,a)},focus:function(e){}})),n.required&&Number(n.attribute)===sinclo.scenarioApi._inputForm.attributeType.address&&Object.keys(n.settings.label).forEach(function(t){"address4"!==t&&($(g+" .inputFormOKButton").on("click",function(){s=$(i+" input."+t),o=!$(i+" input."+t).val(),a=n.settings.label[t]+"ãæªå¥åã§ã",l(o,s,a)}),$(i+" input."+t).on({blur:function(e){s=$(i+" input."+t),o=!$(i+" input."+t).val(),a=n.settings.label[t]+"ãæªå¥åã§ã",p(s),d(o,s,a)},focus:function(e){}}))})});sinclo.chatApi.getInputFormValue(e,t);$(g+" .inputFormOKButton").on("click",function(){if($(this).hasClass("disabled"))return!1;$(g+" p.errors").length||($(g+" .errors").hide(),sinclo.chatApi.disableAllInputForm(e,t),sinclo.chatApi.disableAllButtons(),$(document).trigger(sinclo.scenarioApi._inputForm.event.inputComplete,{data:e,chatElementIndex:t}))})},getInputFormValue:function(e,t){var a=[],r="#chat_element"+t+"_inputForm";return e.inputForm.forEach(function(n,e,t){var i=r+(" #element"+e);n.attribute==sinclo.scenarioApi._inputForm.attributeType.name&&n.type==sinclo.scenarioApi._inputForm.inputType.name["1box"]&&a.push({key:n.settings.variable.name,value:$(i+" input.one-name").val()}),n.attribute==sinclo.scenarioApi._inputForm.attributeType.name&&n.type==sinclo.scenarioApi._inputForm.inputType.name.lastFirst&&(a.push({key:n.settings.variable.firstname,value:$(i+" .firstName").val()}),a.push({key:n.settings.variable.lastname,value:$(i+" .lastName").val()})),n.attribute==sinclo.scenarioApi._inputForm.attributeType.name&&n.type==sinclo.scenarioApi._inputForm.inputType.name.nameKana&&(a.push({key:n.settings.variable.name,value:$(i+" .name").val()}),a.push({key:n.settings.variable.kana,value:$(i+" .kana").val()})),n.attribute==sinclo.scenarioApi._inputForm.attributeType.name&&n.type==sinclo.scenarioApi._inputForm.inputType.name.lastFirstKana&&(a.push({key:n.settings.variable.firstname,value:$(i+" .firstName").val()}),a.push({key:n.settings.variable.lastname,value:$(i+" .lastName").val()}),a.push({key:n.settings.variable.firstnameKana,value:$(i+" .firstNameKana").val()}),a.push({key:n.settings.variable.lastnameKana,value:$(i+" .lastNameKana").val()})),n.attribute==sinclo.scenarioApi._inputForm.attributeType.phone&&n.type==sinclo.scenarioApi._inputForm.inputType.phone["1box"]&&a.push({key:n.settings.variable.phone,value:$(i+" input.one-tel").val()}),n.attribute==sinclo.scenarioApi._inputForm.attributeType.phone&&n.type==sinclo.scenarioApi._inputForm.inputType.phone.separate&&a.push({key:n.settings.variable.phone,value:$(i+" .phone1").val()+$(i+" .phone2").val()+$(i+" .phone3").val()}),n.attribute==sinclo.scenarioApi._inputForm.attributeType.mail&&n.type==sinclo.scenarioApi._inputForm.inputType.mail["1box"]&&a.push({key:n.settings.variable.mail,value:$(i+" input.mail").val()}),n.attribute==sinclo.scenarioApi._inputForm.attributeType.mail&&n.type==sinclo.scenarioApi._inputForm.inputType.mail.separate&&a.push({key:n.settings.variable.mail,value:$(i+" .mail1").val()+"@"+$(i+" .mail2").val()}),n.attribute==sinclo.scenarioApi._inputForm.attributeType.birthday&&(a.push({key:n.settings.variable.year,value:$(i+" .year").val()}),a.push({key:n.settings.variable.month,value:$(i+" .month").val()}),a.push({key:n.settings.variable.date,value:$(i+" .date").val()})),n.attribute==sinclo.scenarioApi._inputForm.attributeType.address&&n.type==sinclo.scenarioApi._inputForm.inputType.address["1box"]&&a.push({key:n.settings.variable.address,value:$(i+" input").val()}),n.attribute==sinclo.scenarioApi._inputForm.attributeType.address&&n.type==sinclo.scenarioApi._inputForm.inputType.address.zipAddress&&(a.push({key:n.settings.variable.postcode,value:$(i+" .postcode").val()}),a.push({key:n.settings.variable.address,value:$(i+" .address").val()}));var o=n.type==sinclo.scenarioApi._inputForm.inputType.address.change;if(n.attribute!=sinclo.scenarioApi._inputForm.attributeType.address||n.type!=sinclo.scenarioApi._inputForm.inputType.address.separate&&!o||(a.push({key:n.settings.variable.postcode,value:$(i+" .postcode").val()}),a.push({key:n.settings.variable.address1,value:$(i+" .address1")[o?"text":"val"]()}),a.push({key:n.settings.variable.address2,value:$(i+" .address2").val()}),a.push({key:n.settings.variable.address3,value:$(i+" .address3").val()}),a.push({key:n.settings.variable.address4,value:$(i+" .address4").val()})),n.attribute==sinclo.scenarioApi._inputForm.attributeType.calendar&&a.push({key:n.settings.variable.calendar,value:$(i+" input").val()}),n.attribute==sinclo.scenarioApi._inputForm.attributeType.other&&(n.type==sinclo.scenarioApi._inputForm.inputType.other.textbox&&a.push({key:n.settings.variable.other,value:$(i+" input.other"+e).val()}),n.type==sinclo.scenarioApi._inputForm.inputType.other.textarea&&a.push({key:n.settings.variable.other,value:$(i+" textarea.other"+e).val()}),n.type==sinclo.scenarioApi._inputForm.inputType.other.radio&&$(i+" input").each(function(e,t){$(this).prop("checked")&&a.push({key:n.settings.variable.other,value:$(this).val()})}),n.type==sinclo.scenarioApi._inputForm.inputType.other.pulldown&&$(i+" select").each(function(e,t){a.push({key:n.settings.variable.other,value:$(this).find("option:selected").attr("value")?$(this).val():""})}),n.type==sinclo.scenarioApi._inputForm.inputType.other.checkbox)){var s="";$(i+" label.sinclo-checkbox input").each(function(e,t){$(this).prop("checked")&&(s+=$(this).val()+sinclo.chatApi.getCheckboxSeparator(n.checkboxSeparator))}),0<s.length&&(s=s.slice(0,-1)),a.push({key:n.settings.variable.other,value:s})}}),a},disableAllInputForm:function(o,e){var s="#chat_element"+e+"_inputForm";return o.inputForm.forEach(function(e,t,n){var i=s;e.attribute==sinclo.scenarioApi._inputForm.attributeType.name&&e.type==sinclo.scenarioApi._inputForm.inputType.name["1box"]&&sinclo.chatApi.disableInputElement($(i+" input.one-name")),e.attribute==sinclo.scenarioApi._inputForm.attributeType.name&&e.type==sinclo.scenarioApi._inputForm.inputType.name.lastFirst&&(sinclo.chatApi.disableInputElement($(i+" .firstName")),sinclo.chatApi.disableInputElement($(i+" .lastName"))),e.attribute==sinclo.scenarioApi._inputForm.attributeType.name&&e.type==sinclo.scenarioApi._inputForm.inputType.name.nameKana&&(sinclo.chatApi.disableInputElement($(i+" .name")),sinclo.chatApi.disableInputElement($(i+" .kana"))),e.attribute==sinclo.scenarioApi._inputForm.attributeType.name&&e.type==sinclo.scenarioApi._inputForm.inputType.name.lastFirstKana&&(sinclo.chatApi.disableInputElement($(i+" .firstName")),sinclo.chatApi.disableInputElement($(i+" .lastName")),sinclo.chatApi.disableInputElement($(i+" .firstNameKana")),sinclo.chatApi.disableInputElement($(i+" .lastNameKana"))),e.attribute==sinclo.scenarioApi._inputForm.attributeType.phone&&e.type==sinclo.scenarioApi._inputForm.inputType.phone["1box"]&&sinclo.chatApi.disableInputElement($(i+" input.one-tel")),e.attribute==sinclo.scenarioApi._inputForm.attributeType.phone&&e.type==sinclo.scenarioApi._inputForm.inputType.phone.separate&&(sinclo.chatApi.disableInputElement($(i+" input.phone1")),sinclo.chatApi.disableInputElement($(i+" input.phone2")),sinclo.chatApi.disableInputElement($(i+" input.phone3"))),e.attribute==sinclo.scenarioApi._inputForm.attributeType.mail&&e.type==sinclo.scenarioApi._inputForm.inputType.mail["1box"]&&sinclo.chatApi.disableInputElement($(i+" input.mail")),e.attribute==sinclo.scenarioApi._inputForm.attributeType.mail&&e.type==sinclo.scenarioApi._inputForm.inputType.mail.separate&&(sinclo.chatApi.disableInputElement($(i+" input.mail1")),sinclo.chatApi.disableInputElement($(i+" input.mail2"))),e.attribute==sinclo.scenarioApi._inputForm.attributeType.birthday&&(sinclo.chatApi.disableInputElement($(i+" input.year")),sinclo.chatApi.disableInputElement($(i+" input.month")),sinclo.chatApi.disableInputElement($(i+" input.date"))),e.attribute==sinclo.scenarioApi._inputForm.attributeType.address&&e.type==sinclo.scenarioApi._inputForm.inputType.address["1box"]&&sinclo.chatApi.disableInputElement($(i+" input.address")),e.attribute==sinclo.scenarioApi._inputForm.attributeType.address&&e.type==sinclo.scenarioApi._inputForm.inputType.address.zipAddress&&(sinclo.chatApi.disableInputElement($(i+" .postcode")),sinclo.chatApi.disableInputElement($(i+" .address"))),e.attribute==sinclo.scenarioApi._inputForm.attributeType.address&&e.type==sinclo.scenarioApi._inputForm.inputType.address.separate&&(sinclo.chatApi.disableInputElement($(i+" .postcode")),sinclo.chatApi.disableInputElement($(i+" .address1")),sinclo.chatApi.disableInputElement($(i+" .address2")),sinclo.chatApi.disableInputElement($(i+" .address3")),sinclo.chatApi.disableInputElement($(i+" .address4"))),e.attribute==sinclo.scenarioApi._inputForm.attributeType.address&&e.type==sinclo.scenarioApi._inputForm.inputType.address.change&&sinclo.scenarioApi._changeAddress._disableAll(o),e.attribute==sinclo.scenarioApi._inputForm.attributeType.calendar&&$(i).find(".flatpickr-calendar").addClass("disable"),e.attribute==sinclo.scenarioApi._inputForm.attributeType.other&&(e.type==sinclo.scenarioApi._inputForm.inputType.other.textbox&&sinclo.chatApi.disableInputElement($(i+" input.other"+t)),e.type==sinclo.scenarioApi._inputForm.inputType.other.textarea&&sinclo.chatApi.disableInputElement($(i+" textarea")),e.type==sinclo.scenarioApi._inputForm.inputType.other.radio&&sinclo.chatApi.disableInputElement($(i+' input[type="radio"]')),e.type==sinclo.scenarioApi._inputForm.inputType.other.pulldown&&sinclo.chatApi.disableInputElement($(i+" select")),e.type==sinclo.scenarioApi._inputForm.inputType.other.checkbox&&sinclo.chatApi.disableInputElement($(i+' input[type="checkbox"]')))}),sinclo.chatApi.disableInputElement($(s+" span.inputFormOKButton")),[]},getCheckboxSeparator:function(e){var t=",";switch(e){case 1:t=",";break;case 2:t="/";break;case 3:t="|";break;default:t=","}return t},disableInputElement:function(e){e.is(".inputFormOKButton")?e.addClass("disabled").css({opacity:.5}):e.is('input[type="radio"]')||e.is('input[type="checkbox"]')?e.addClass("disabled").parent("label, sinclo-radio").css({opacity:.5,"pointer-events":"none"}):e.prop("disabled",!0).css({"background-color":"#CCCCCC",color:"#333333"})},_inputFormWatcher:null,_inputFormRegExp:{email:/[^0-9a-zA-Z@._-]/g,halfAlphanumericSym:/[^a-zA-Z0-9!"#$%&'()\*\+\-\.,\/:;<=>?@\[\\\]^_`{|}~]/g,halfAlphanumeric:/[^a-zA-Z0-9]/g,halfCharSym:/[^a-zA-Z!"#$%&'()\*\+\-\.,\/:;<=>?@\[\\\]^_`{|}~]/g,halfChar:/[^a-zA-Z]/g,halfNumSym:/[^0-9!"#$%&'()\*\+\-\.,\/:;<=>?@\[\\\]^_`{|}~]/g,halfNum:/[^0-9]/g},setIntervalInputForm:function(t,n){var e=sinclo.chatApi;e.clearIntervalInputForm(),t.val()&&(e._inputFormWatcher=setInterval(function(){if(t.val().match(n)){var e=t.val().replace(n,"");t.val(e)}},100))},clearIntervalInputForm:function(){var e=sinclo.chatApi;e._inputFormWatcher&&(clearInterval(e._inputFormWatcher),e._inputFormWatcher=null)},addJsEvent:function(e,u){var g=sinclo.chatApi,h="#chat_element"+u+"_inputForm";e.inputForm.forEach(function(i,e,t){var o=h+" "+("#element"+e);if(i.attribute==sinclo.scenarioApi._inputForm.attributeType.name){var n="",s={};if(i.furiganaAutoComplete){if(n="keyup",i.isConvertKana)switch(Number(i.furiganaInputType)){case 1:break;case 2:s={katakana:!0};break;case 3:s={hankakuKatakana:!0}}i.type==sinclo.scenarioApi._inputForm.inputType.name.nameKana&&$.fn.autoKana(o+" .name",o+" .kana",s),i.type==sinclo.scenarioApi._inputForm.inputType.name.lastFirstKana&&($.fn.autoKana(o+" .firstName",o+" .firstNameKana",s),$.fn.autoKana(o+" .lastName",o+" .lastNameKana",s))}i.isConvertKana&&(n="blur",i.type==sinclo.scenarioApi._inputForm.inputType.name.nameKana&&sinclo.chatApi.convertKana(o+" input",o+" .kana",i.furiganaInputType,n),i.type==sinclo.scenarioApi._inputForm.inputType.name.lastFirstKana&&(sinclo.chatApi.convertKana(o+" input",o+" .firstNameKana",i.furiganaInputType,n),sinclo.chatApi.convertKana(o+" input",o+" .lastNameKana",i.furiganaInputType,n)))}if(i.attribute==sinclo.scenarioApi._inputForm.attributeType.phone&&($(o+" input").on("input paste",function(e){var t=$(o+" input"),n=g._inputFormRegExp.halfNum;g.setIntervalInputForm(t,n)}),$(o+" input").on("blur",function(e){g.clearIntervalInputForm()})),i.attribute==sinclo.scenarioApi._inputForm.attributeType.mail)if($(o+" input").on("input",function(e){this.setCustomValidity("");var t=$(o+" input"),n=g._inputFormRegExp.email;g.setIntervalInputForm(t,n)}),$(o+" input").on("blur",function(e){g.clearIntervalInputForm()}),i.domainAutoComplete&&1==i.type){var a=new Awesomplete($(o+" input").get(0),{list:sinclo.chatApi.mailDomainList,maxItems:5,data:function(e,t){return t.slice(0,t.indexOf("@"))+"@"+e},filter:Awesomplete.FILTER_STARTSWITH});$(o+" input").on("input",function(){a.open()})}else if(i.domainAutoComplete&&2==i.type)a=new Awesomplete($(o+" input.mail2").get(0),{list:sinclo.chatApi.mailDomainList,minChars:1,maxItems:5,data:function(e,t){return e},filter:function(e,t){return 0===e.indexOf(t)}});if(i.attribute==sinclo.scenarioApi._inputForm.attributeType.address&&($(o+" .postcode").on("input",function(e){var t=$(o+" .postcode"),n=g._inputFormRegExp.halfNum;g.setIntervalInputForm(t,n)}),$(o+" input").on("blur",function(e){g.clearIntervalInputForm()}),!i.isShowLabel)){var r="<style>";r+=o+" .address {margin-top : 5px;}",r+=o+" .address1 {margin-top : 5px;}",r+=o+" .address2 {margin-top : 5px;}",r+=o+" .address3 {margin-top : 5px;}",r+=o+" .address4 {margin-top : 5px;}",r+="</style>",$(o).append(r)}if(i.attribute==sinclo.scenarioApi._inputForm.attributeType.calendar){var c="#action"+u+"_element"+e+"_calendar";sinclo.chatApi.addDatePicker(c,i.settings,i.settings.customDesign)}if(i.attribute==sinclo.scenarioApi._inputForm.attributeType.other){if(i.type!=sinclo.scenarioApi._inputForm.inputType.other.textbox&&i.type!=sinclo.scenarioApi._inputForm.inputType.other.textarea||(i.isInputRestriction&&2==i.settings.inputRestrictionType&&($(o+" input, "+o+" textarea").on("input",function(e){if(i.settings.canInputSymbol){var t=$(o+" input, "+o+" textarea"),n=g._inputFormRegExp.halfAlphanumericSym;g.setIntervalInputForm(t,n)}else{t=$(o+" input, "+o+" textarea"),n=g._inputFormRegExp.halfAlphanumeric;g.setIntervalInputForm(t,n)}}),$(o+" input").on("blur",function(e){g.clearIntervalInputForm()})),i.isInputRestriction&&3==i.settings.inputRestrictionType&&($(o+" input, "+o+" textarea").on("input",function(e){if(i.settings.canInputSymbol){var t=$(o+" input, "+o+" textarea"),n=g._inputFormRegExp.halfCharSym;g.setIntervalInputForm(t,n)}else{t=$(o+" input, "+o+" textarea"),n=g._inputFormRegExp.halfChar;g.setIntervalInputForm(t,n)}}),$(o+" input").on("blur",function(e){g.clearIntervalInputForm()})),i.isInputRestriction&&4==i.settings.inputRestrictionType&&($(o+" input, "+o+" textarea").on("input",function(e){if(i.settings.canInputSymbol){var t=$(o+" input, "+o+" textarea"),n=g._inputFormRegExp.halfNumSym;g.setIntervalInputForm(t,n)}else{t=$(o+" input, "+o+" textarea"),n=g._inputFormRegExp.halfNum;g.setIntervalInputForm(t,n)}}),$(o+" input").on("blur",function(e){g.clearIntervalInputForm()}))),i.type==sinclo.scenarioApi._inputForm.inputType.other.radio){var l=$("#action"+u+"_element"+e+'_radio input[type="radio"]'),d=$("#action"+u+"_element"+e+"_radio sinclo-radio");"1"===i.settings.radioStyle?(d.css("background-color",i.settings.customDesign.radioEntireBackgroundColor),l.each(function(){$(this).prop("checked")?($(this).parent().css("background-color",i.settings.customDesign.radioEntireActiveColor),$(this).parent().find("label").css("color",i.settings.customDesign.radioActiveTextColor)):$(this).parent().find("label").css("color",i.settings.customDesign.radioTextColor)}),l.on("change",function(){l.each(function(){$(this).prop("checked")?"1"!==i.settings.radioStyle?$(this).parent().css("background-color","transparent"):($(this).parent().css("background-color",i.settings.customDesign.radioEntireActiveColor),$(this).parent().find("label").css("color",i.settings.customDesign.radioActiveTextColor)):"1"!==i.settings.radioStyle?$(this).parent().css("background-color","transparent"):($(this).parent().css("background-color",i.settings.customDesign.radioEntireBackgroundColor),$(this).parent().find("label").css("color",i.settings.customDesign.radioTextColor))})})):(l.each(function(){$(this).prop("checked")?$(this).parent().find("label").css("color",i.settings.customDesign.radioActiveTextColor):$(this).parent().find("label").css("color",i.settings.customDesign.radioTextColor)}),l.on("change",function(){l.each(function(){$(this).prop("checked")?$(this).parent().find("label").css("color",i.settings.customDesign.radioActiveTextColor):$(this).parent().find("label").css("color",i.settings.customDesign.radioTextColor)})}))}if(i.type==sinclo.scenarioApi._inputForm.inputType.other.checkbox){var p=$("#action"+u+"_element"+e+'_checkbox input[type="checkbox"]');"1"===i.settings.checkboxStyle?(p.each(function(){$(this).prop("checked")&&($(this).parent().css("background-color",i.settings.customDesign.checkboxEntireActiveColor),$(this).parent().css("color",i.settings.customDesign.checkboxActiveTextColor))}),p.on("change",function(){$(this).prop("checked")?($(this).parent().css("background-color",i.settings.customDesign.checkboxEntireActiveColor),$(this).parent().css("color",i.settings.customDesign.checkboxActiveTextColor)):"1"!==i.settings.checkboxStyle?$(this).parent().css("background-color","transparent"):($(this).parent().css("background-color",i.settings.customDesign.checkboxEntireBackgroundColor),$(this).parent().css("color",i.settings.customDesign.checkboxTextColor))})):(p.each(function(){$(this).prop("checked")?$(this).parent().css("color",i.settings.customDesign.checkboxActiveTextColor):$(this).parent().css("color",i.settings.customDesign.checkboxTextColor)}),p.on("change",function(){$(this).prop("checked")?$(this).parent().css("color",i.settings.customDesign.checkboxActiveTextColor):$(this).parent().css("color",i.settings.customDesign.checkboxTextColor)}))}}})},convertKana:function(e,n,t,i){void 0!==t&&("1"===t?$(e).on(i,function(e){var t=sinclo.chatApi.toZenKana($(n).val());$(n)[0].value=t.replace(/[\u30a1-\u30f6]/g,function(e){return String.fromCharCode(e.charCodeAt(0)-96)})}):"2"===t?$(e).on(i,function(e){var t=sinclo.chatApi.toZenKana($(n).val());$(n)[0].value=t.replace(/[\u3041-\u3096]/g,function(e){return String.fromCharCode(e.charCodeAt(0)+96)})}):"3"===t&&$(e).on(i,function(e){$(n).val().match(/^[ã-ãã¼ã]*$/)?$(n)[0].value=$(n).val().replace(/[\u3041-\u3096]/g,function(e){var t=String.fromCharCode(e.charCodeAt(0)+96);return sinclo.chatApi.toHanKana(t)}):$(n).val().match(/^[ã¡-ã¶ã¼ã]+$/)&&($(n)[0].value=sinclo.chatApi.toHanKana($(n).val()))}))},toHanKana:function(e){var t={"ã¬":"ï½¶ï¾","ã®":"ï½·ï¾","ã°":"ï½¸ï¾","ã²":"ï½¹ï¾","ã´":"ï½ºï¾","ã¶":"ï½»ï¾","ã¸":"ï½¼ï¾","ãº":"ï½½ï¾","ã¼":"ï½¾ï¾","ã¾":"ï½¿ï¾","ã":"ï¾ï¾","ã":"ï¾ï¾","ã":"ï¾ï¾","ã":"ï¾ï¾","ã":"ï¾ï¾","ã":"ï¾ï¾","ã":"ï¾ï¾","ã":"ï¾ï¾","ã":"ï¾ï¾","ã":"ï¾ï¾","ã":"ï¾ï¾","ã":"ï¾ï¾","ã":"ï¾ï¾","ã":"ï¾ï¾","ã":"ï¾ï¾","ã´":"ï½³ï¾","ã·":"ï¾ï¾","ãº":"ï½¦ï¾","ã¢":"ï½±","ã¤":"ï½²","ã¦":"ï½³","ã¨":"ï½´","ãª":"ï½µ","ã«":"ï½¶","ã­":"ï½·","ã¯":"ï½¸","ã±":"ï½¹","ã³":"ï½º","ãµ":"ï½»","ã·":"ï½¼","ã¹":"ï½½","ã»":"ï½¾","ã½":"ï½¿","ã¿":"ï¾","ã":"ï¾","ã":"ï¾","ã":"ï¾","ã":"ï¾","ã":"ï¾","ã":"ï¾","ã":"ï¾","ã":"ï¾","ã":"ï¾","ã":"ï¾","ã":"ï¾","ã":"ï¾","ã":"ï¾","ã":"ï¾","ã":"ï¾","ã":"ï¾","ã ":"ï¾","ã¡":"ï¾","ã¢":"ï¾","ã¤":"ï¾","ã¦":"ï¾","ã¨":"ï¾","ã©":"ï¾","ãª":"ï¾","ã«":"ï¾","ã¬":"ï¾","ã­":"ï¾","ã¯":"ï¾","ã²":"ï½¦","ã³":"ï¾","ã¡":"ï½§","ã£":"ï½¨","ã¥":"ï½©","ã§":"ï½ª","ã©":"ï½«","ã":"ï½¯","ã£":"ï½¬","ã¥":"ï½­","ã§":"ï½®","ã":"ï½¡","ã":"ï½¤","ã¼":"ï½°","ã":"ï½¢","ã":"ï½£","ã»":"ï½¥"},n=new RegExp("("+Object.keys(t).join("|")+")","g");return e.replace(n,function(e){return t[e]}).replace(/ã/g,"ï¾").replace(/ã/g,"ï¾")},toZenKana:function(e){var t={"ï½¶ï¾":"ã¬","ï½·ï¾":"ã®","ï½¸ï¾":"ã°","ï½¹ï¾":"ã²","ï½ºï¾":"ã´","ï½»ï¾":"ã¶","ï½¼ï¾":"ã¸","ï½½ï¾":"ãº","ï½¾ï¾":"ã¼","ï½¿ï¾":"ã¾","ï¾ï¾":"ã","ï¾ï¾":"ã","ï¾ï¾":"ã","ï¾ï¾":"ã","ï¾ï¾":"ã","ï¾ï¾":"ã","ï¾ï¾":"ã","ï¾ï¾":"ã","ï¾ï¾":"ã","ï¾ï¾":"ã","ï¾ï¾":"ã","ï¾ï¾":"ã","ï¾ï¾":"ã","ï¾ï¾":"ã","ï¾ï¾":"ã","ï½³ï¾":"ã´","ï¾ï¾":"ã·","ï½¦ï¾":"ãº","ï½±":"ã¢","ï½²":"ã¤","ï½³":"ã¦","ï½´":"ã¨","ï½µ":"ãª","ï½¶":"ã«","ï½·":"ã­","ï½¸":"ã¯","ï½¹":"ã±","ï½º":"ã³","ï½»":"ãµ","ï½¼":"ã·","ï½½":"ã¹","ï½¾":"ã»","ï½¿":"ã½","ï¾":"ã¿","ï¾":"ã","ï¾":"ã","ï¾":"ã","ï¾":"ã","ï¾":"ã","ï¾":"ã","ï¾":"ã","ï¾":"ã","ï¾":"ã","ï¾":"ã","ï¾":"ã","ï¾":"ã","ï¾":"ã","ï¾":"ã","ï¾":"ã","ï¾":"ã","ï¾":"ã ","ï¾":"ã¡","ï¾":"ã¢","ï¾":"ã¤","ï¾":"ã¦","ï¾":"ã¨","ï¾":"ã©","ï¾":"ãª","ï¾":"ã«","ï¾":"ã¬","ï¾":"ã­","ï¾":"ã¯","ï½¦":"ã²","ï¾":"ã³","ï½§":"ã¡","ï½¨":"ã£","ï½©":"ã¥","ï½ª":"ã§","ï½«":"ã©","ï½¯":"ã","ï½¬":"ã£","ï½­":"ã¥","ï½®":"ã§","ï½¡":"ã","ï½¤":"ã","ï½°":"ã¼","ï½¢":"ã","ï½£":"ã","ï½¥":"ã»"},n=new RegExp("("+Object.keys(t).join("|")+")","g");return e.replace(n,function(e){return t[e]}).replace(/ï¾/g,"ã").replace(/ï¾/g,"ã")},addDatePicker:function(e,t,n){var i=sinclo.chatApi.createCalendarOption(t);$(e.replace("calendar","datepicker")).flatpickr(i),$(e.replace("calendar","datepicker")).hide(),$(e).find(".flatpickr-weekday")[0].innerText=1==t.language?"æ¥":"Sun",$(e).find(".flatpickr-calendar .flatpickr-day").each(function(){$(this).hasClass("disabled")||$(this).hasClass("nextMonthDay")||$(this).hasClass("prevMonthDay")||$(this).css("color",n.calendarTextColor)}),$(e).find(".dayContainer span:nth-child(7n+1)").each(function(){$(this).hasClass("disabled")||$(this).hasClass("nextMonthDay")||$(this).hasClass("prevMonthDay")||$(this).css("color",n.sundayColor)}),$(e).find(".dayContainer span:nth-child(7n+7)").each(function(){$(this).hasClass("disabled")||$(this).hasClass("nextMonthDay")||$(this).hasClass("prevMonthDay")||$(this).css("color",n.saturdayColor)}),$(e).find(".flatpickr-calendar .flatpickr-months").on("mousedown",function(){sinclo.chatApi.customCalendarTextColor($(e),n)}),$(e.replace("calendar","datepicker")).on("change",function(){sinclo.chatApi.customCalendarTextColor($(e),n)})},hideForm:function(){$("li.sinclo_re.sinclo_form").remove()},customCalendarTextColor:function(e,t){e.find(".flatpickr-calendar .flatpickr-day").each(function(){$(this).hasClass("disabled")||$(this).hasClass("nextMonthDay")||$(this).hasClass("prevMonthDay")||$(this).css("color",t.calendarTextColor)}),e.find(".dayContainer span:nth-child(7n + 1)").each(function(){$(this).hasClass("disabled")||$(this).hasClass("nextMonthDay")||$(this).hasClass("prevMonthDay")||$(this).css("color",t.sundayColor)}),e.find(".dayContainer span:nth-child(7n+7)").each(function(){$(this).hasClass("disabled")||$(this).hasClass("nextMonthDay")||$(this).hasClass("prevMonthDay")||$(this).css("color",t.saturdayColor)}),e.find(".flatpickr-calendar .dayContainer").css("background-color",t.calendarBackgroundColor)},createMessageUnread:function(e,t,n,i,o){e.cn&&0<=e.cn.indexOf("sinclo_re")&&(sinclo.chatApi.unread++,sinclo.chatApi.showUnreadCnt()),n?sinclo.chatApi.createCogmoAttendBotMessage(e.cn,e.message,e.name,i,e.isSearchMsg):sinclo.chatApi.createMessage(e,t)},createPullDown:function(e,t,n,i){sinclo.chatApi.createPullDownHtml(e,t,n,i)},clearChatMessages:function(){for(var e=document.getElementsByTagName("sinclo-chat")[0];e.firstChild;)e.removeChild(e.firstChild)},scDownTimer:null,scDown:function(e){this.scDownTimer&&clearTimeout(this.scDownTimer),this.scDownTimer=setTimeout(function(){var e=document.getElementById("chatTalk"),t=$("#chatTalk sinclo-chat div:last-of-type").find(".sinclo_re:last-of-type, .sinclo_se.sinclo_inputForm:last-of-type"),n=e.scrollHeight,i=e.clientHeight;if(0<t.length){var o=t.parent().outerHeight(),s=parseFloat($("#chatTalk sinclo-typing").css("padding-bottom"));if(scl_check.smartphone())s+=10*common.getRatio();e.clientHeight>o+s?$("#sincloBox #chatTalk").animate({scrollTop:n-i-2},300):null===document.getElementById("sinclo_typeing_message")?$("#sincloBox #chatTalk").animate({scrollTop:n-(o+s)},300):$("#sincloBox #chatTalk").animate({scrollTop:n-(o+s+25)},300)}else $("#sincloBox #chatTalk").animate({scrollTop:n-i-2},300)},500)},scDownImmediate:function(){var e=document.getElementById("chatTalk"),t=$("#chatTalk sinclo-chat div:last-of-type").find(".sinclo_re:last-of-type");if(0<t.length){var n=t.parent().outerHeight(),i=parseFloat($("#chatTalk sinclo-typing").css("padding-bottom")),o=1;scl_check.smartphone()&&(i+=10*(o=common.getPageWidth()*(1/285))),e.clientHeight>n+i?$("#sincloBox #chatTalk").scrollTop(e.scrollHeight-e.clientHeight-2):null===document.getElementById("sinclo_typeing_message")?$("#sincloBox #chatTalk").scrollTop(e.scrollHeight-(n+i*o)):$("#sincloBox #chatTalk").scrollTop(e.scrollHeight-(n+i*o+25))}else $("#sincloBox #chatTalk").scrollTop(e.scrollHeight-e.clientHeight-2)},scDownCogmoSearch:function(){this.scDownTimer&&clearTimeout(this.scDownTimer),this.scDownTimer=setTimeout(function(){var e=document.getElementById("chatTalk"),t=$("#chatTalk sinclo-chat div:last-of-type").find(".sinclo_re:last-of-type, .sinclo_se.sinclo_inputForm:last-of-type"),n=e.scrollHeight,i=e.clientHeight,o=t.parent().outerHeight(),s=parseFloat($("#chatTalk sinclo-typing").css("padding-bottom"));scl_check.smartphone()&&(s+=10*common.getRatio());var a=t.parent().prev(),r=a.prev(),c=a.outerHeight(),l=r.outerHeight();e.clientHeight>o+c+l+s?$("#sincloBox #chatTalk").animate({scrollTop:n-i-2},300):$("#sincloBox #chatTalk").animate({scrollTop:n-(o+c+l+s)},300)},500)},isNotifyOpened:!1,notify:function(e){var t=this,n=$("sinclo-chat-receiver");n.find("#receiveMessage").html(e),n.css("display","block");var i=n.outerHeight();n.css("top",$("#sincloBox #chatTalk").position().top+$("#sincloBox #chatTalk").outerHeight()-i),n.css("display","none"),n.css("display","block");for(var o=!1;0<e.length&&n.find("#receiveMessage").outerHeight()>=i;)o=!0,e=e.substr(0,e.length-1),n.find("#receiveMessage").html(e+"...");o&&(e=e.substr(0,e.length-1),n.find("#receiveMessage").html(e+"...")),this.isNotifyOpened||(n.css("display","none"),this.isNotifyOpened=!0,n.show("fast").off("click").on("click",function(e){t.isNotifyOpened=!1,e.stopImmediatePropagation(),t.scDown(),$(this).hide()})),$("#sincloBox #chatTalk").on("scroll",function(e){t.isShowChatReceiver()||(t.isNotifyOpened=!1,n.hide("fast"))})},isShowChatReceiver:function(){var e=$("#sincloBox #chatTalk"),t=0;return e.find("sinclo-chat").find("li").each(function(e){t+=$(this).outerHeight()}),55<=t-e.height()-e.scrollTop()},pushFlg:!1,push:function(){if(this.pushFlg)return!1;this.pushFlg=!0,sinclo.operatorInfo.reCreateWidgetMessage="";var e=document.getElementById("sincloChatMessage");$("#flexBoxHeight").hasClass("sinclo-hide")&&(e=document.getElementById("miniSincloChatMessage"));var t=e.value,n=new RegExp(/^\s*$/);scl_check.isset(e.value)&&!n.test(e.value)?(this.send(e.value),e.value=""):scl_check.isset(e.value)||"ã¹ã­ãã"!==$(e).next().text()||sinclo.scenarioApi.isProcessing()&&sinclo.scenarioApi.isWaitingInput()&&sinclo.scenarioApi._hearing.isHearingMode()&&(0<$("#sincloBox sinclo-chat div:last-child .sincloButtonWrap").length&&$("#sincloBox sinclo-chat div:last-child .sincloButtonWrap").remove(),sinclo.scenarioApi._hearing.tmpSeqStorage=sinclo.scenarioApi._hearing._getCurrentSeq(),sinclo.scenarioApi._hearing._setPrevSeqNum(),emit("sendChat",{historyId:sinclo.chatApi.historyId,stayLogsId:sinclo.chatApi.stayLogsId,chatMessage:"ã¹ã­ãããã¿ã³å¥å",mUserId:null,messageType:sinclo.chatApi.messageType.scenario.customer.skipHearing,messageRequestFlg:0,isAutoSpeech:!1,notifyToCompany:!1,isScenarioMessage:!0}),sinclo.scenarioApi.triggerInputWaitComplete(" ")),!sinclo.scenarioApi.isProcessing()||scl_check.isset(sinclo_storage.s.get("operatorEntered"))&&"false"!==sinclo_storage.s.get("operatorEntered")||!scl_check.isset(t)&&"ã¹ã­ãã"!==$(e).next().text()?this.pushFlg=!1:$("#flexBoxWrap").css("display","none").promise().done(function(){var e=$("#miniFlexBoxHeight").is(":visible"),t=$("#miniFlexBoxHeight").hasClass("sinclo-hide");document.getElementById("chatTalk").style.height=e||!t?chatTalk.clientHeight+48+"px":chatTalk.clientHeight+75+"px",sinclo.chatApi.pushFlg=!1})},send:function(t){if(sinclo_client_log.client_log("chatApi.send",t),sinclo.chatApi.clickBranchCount++,t.did&&1===sinclo.chatApi.clickBranchCount?sinclo.chatApi.isFirstDiagramSelected=!0:sinclo.chatApi.isFirstDiagramSelected=!1,!socket)return!1;var n=this;$.ajax({type:"get",url:window.sincloInfo.site.files+"/api/util/timestamp",cache:!1,dataType:"json",success:function(e){$("sinclo-chat-alert").css("display","none"),socket&&!socket.isConnected()?(common.chatBotTypingCall({forceWaitAnimation:!0}),socket.connect().then(function(){return sinclo.executeConnectSuccess(window.userInfo.connectSuccessData,window.userInfo.accessInfoData)}).then(sinclo.setHistoryId).then(function(){n.executeSend(t)})):n.executeSend(t)},error:function(){$("sinclo-chat-alert").css("display","block").html("ãããã¯ã¼ã¯ãåæ­ããã¾ããã").on("click",function(){$("sinclo-chat-alert").css("display","none"),common.handleInit(),sinclo.chatApi.sendErrCatchFlg=!1}),sinclo.chatApi.sendErrCatchFlg=!0}})},executeSend:function(i){var o=sinclo.chatApi.messageType.customer;sinclo.trigger.processing||sinclo_storage.s.set("chatAct",!0),sinclo.scenarioApi.isCanceled=!1,sinclo.diagramApi.executor.isCanceled=!1,null!==this.sendErrCatchTimer&&clearTimeout(this.sendErrCatchTimer);var s=!1,a="",r="",c="",l=!1;if(window.sincloInfo.contract.hasOwnProperty("useLinkRegistration")&&(l=window.sincloInfo.contract.useLinkRegistration),window.sincloInfo.contract.chat){var e=sinclo_storage.s.get("chatEmit"),d=0;scl_check.isset(e)||(common.hasGA()&&common.callGA("sendChat",location.href,1),d="true"!==sinclo_storage.s.get("requestFlg")?(sinclo_storage.s.set("requestFlg",!0),sinclo_storage.s.set("autoChatFlg",!0),1):0),window.sincloInfo.contract.useCogmoAttendApi?($("#sincloBox #chatTalk li.sinclo_re p.sincloButtonWrap").removeAttr("onclick"),$("#sincloBox #chatTalk li.sinclo_re p.sincloButtonWrap").addClass("cogmo-disabled").css("pointer-events","none").css("background-color","#E7E7E7"),$("#sincloBox #chatTalk li.sinclo_re p.sincloButtonWrap .sincloButton").css("pointer-events","none").css("color","#333333")):$(".sincloButtonWrap").remove();var p=!1,u=!1;if(sinclo_client_log.client_log("chatApi.executeSend.beforeIsProcessing",{forNotHavingConnectionMessageStack:scl_check.isset(localStorage.forNotHavingConnectionMessageStack)?localStorage.forNotHavingConnectionMessageStack:"nodata",messageType:sinclo.scenarioApi.getCustomerMessageType(),isProcessing:sinclo.scenarioApi.isProcessing(),operatorEntered:sinclo_storage.s.get("operatorEntered")?sinclo_storage.s.get("operatorEntered"):"no operator",isWaitingInput:sinclo.scenarioApi.isWaitingInput(),actionType:sinclo.scenarioApi.get(sinclo.scenarioApi._lKey.currentScenario).actionType,tabId:userInfo.tabId}),!sinclo.scenarioApi.isProcessing()||scl_check.isset(sinclo_storage.s.get("operatorEntered"))&&"false"!==sinclo_storage.s.get("operatorEntered"))(i.did||i.sourceNodeId)&&(sinclo.diagramApi.common.changeAllowSaving(),o=i.did&&i.sourceNodeId?sinclo.diagramApi.sinclo_storage.getSendCustomerMessageType(i.did,i.sourceNodeId):301,u=!0);else if(sinclo.scenarioApi._hearing._setPrevSeqNum(),o=sinclo.scenarioApi.getCustomerMessageType(),sinclo.scenarioApi._hearing._forceRadioTypeFlg&&(o=sinclo.chatApi.messageType.scenario.customer.reInputRadio,sinclo.scenarioApi._hearing._forceRadioTypeFlg=!1),p=!0,s=!!scl_check.isset(sinclo.scenarioApi.get(sinclo.scenarioApi._lKey.currentScenario).useLinkRegistration)&&sinclo.scenarioApi.get(sinclo.scenarioApi._lKey.currentScenario).useLinkRegistration,l&&s){var t="",n=scl_check.isset(sinclo.scenarioApi.get(sinclo.scenarioApi._lKey.currentScenario).assignment)?sinclo.scenarioApi.get(sinclo.scenarioApi._lKey.currentScenario).assignment:{};for(key in n)""!=n[key]&&(t=sinclo.scenarioApi._getSavedVariable(n[key]),1==key?c=t:2==key?a=t:3==key&&(r=t))}sinclo.trigger.judge.matchAllSpeechContent(i,function(e){!(p||u||e)||scl_check.isset(sinclo_storage.s.get("operatorEntered"))&&"false"!==sinclo_storage.s.get("operatorEntered")||(e=!0,sinclo_storage.s.set("chatAct",!1));var t=!1;t=null===sinclo_storage.s.get("initialNotification")||"true"===sinclo_storage.s.get("initialNotification")||(sinclo_storage.s.get("initialNotification"),!1);var n=!e;u&&sinclo.diagramApi.callOperator.isNodeIdCallOperatorAction(i.nextNodeId)&&(n=!0),setTimeout(function(){sinclo_client_log.client_log("chatApi.executeSend.emit(sendChat)",{historyId:sinclo.chatApi.historyId,stayLogsId:sinclo.chatApi.stayLogsId,chatMessage:i,mUserId:null,messageType:o,messageRequestFlg:d,initialNotification:t,isAutoSpeech:!n,notifyToCompany:n,isScenarioMessage:p,isDiagramMessage:u,isPreventWithdrawal:preventWithdrawalOverlay.isActive(),useLinkRegistration:s,inquiryNumber:a,claimNumber:r,partnerCompanyName:c,useLinkRegistrationOp:l,isFirstDiagramSelected:sinclo.chatApi.isFirstDiagramSelected,isPreventWithdrawal:preventWithdrawalOverlay.isActive()}),emit("sendChat",{historyId:sinclo.chatApi.historyId,stayLogsId:sinclo.chatApi.stayLogsId,chatMessage:i,mUserId:null,messageType:o,messageRequestFlg:d,initialNotification:t,isAutoSpeech:!n,notifyToCompany:n,isScenarioMessage:p,isDiagramMessage:u,isPreventWithdrawal:preventWithdrawalOverlay.isActive(),useLinkRegistration:s,inquiryNumber:a,claimNumber:r,partnerCompanyName:c,useLinkRegistrationOp:l,isFirstDiagramSelected:sinclo.chatApi.isFirstDiagramSelected,isPreventWithdrawal:preventWithdrawalOverlay.isActive()}),$(document).trigger("sinclo:sendChatCompleted")},100),setTimeout(function(){sinclo.chatApi.isCustomerSendMessageType(o)&&sinclo.scenarioApi.isProcessing()&&sinclo.scenarioApi.isWaitingInput()&&(!scl_check.isset(sinclo_storage.s.get("operatorEntered"))||"false"===sinclo_storage.s.get("operatorEntered"))&&sinclo.scenarioApi.triggerInputWaitComplete(i)},200)}),sinclo_storage.s.set("chatEmit",!0)}scl_check.smartphone()&&this.sendErrCatch()},callOpTimer:null,callOperator:function(){if(scl_check.isset(sinclo.chatApi.callOpTimer))return!1;sinclo.scenarioApi.isProcessing()&&sinclo.scenarioApi._end(),sinclo.chatApi.send({did:"manual",sourceNodeId:"callOperator",nextNodeId:"callOperator",message:""}),sinclo.chatApi.callOpTimer=setTimeout(function(){clearTimeout(sinclo.chatApi.callOpTimer),sinclo.chatApi.callOpTimer=null},5e3)},observeType:{timer:null,prevMessage:"",status:!1,timingInterval:500,start:function(){if(window.sincloInfo.contract.useMessageSynchronization){var e=document.getElementById("sincloChatMessage");null!==this.timer&&clearInterval(this.timer),this.timer=setInterval(function(){""===e.value?(sinclo.chatApi.observeType.prevMessage="",sinclo.chatApi.observeType.send(!1,e.value)):e.value!==sinclo.chatApi.observeType.prevMessage&&(sinclo.chatApi.observeType.prevMessage=e.value,sinclo.chatApi.observeType.send(!0,e.value))},this.timingInterval)}},send:function(e,t){(sinclo.chatApi.observeType.status!==e||!0===e&&""!==t)&&(sinclo.chatApi.observeType.emit(e,t),sinclo.chatApi.observeType.status=e)},emit:function(e,t){emit("sendTypeCond",{type:2,status:e,message:t,sincloSessionId:userInfo.sincloSessionId})}},sendErrCatchFlg:!1,sendErrCatchTimer:null,sendErrCatch:function(){null!==this.sendErrCatchTimer&&clearTimeout(this.sendErrCatchTimer),this.sendErrCatchTimer=setTimeout(function(){$("sinclo-chat-alert").css("display","block").html("éä¿¡ãåæ­ããã¾ããã<br>ãã¡ããã¿ããããã¨åæ¥ç¶ãã¾ãã").on("click",function(){$("sinclo-chat-alert").css("display","none"),$("sinclo-chat").children().remove(),common.handleInit(),sinclo.chatApi.sendErrCatchFlg=!1}),sinclo.chatApi.sendErrCatchFlg=!0,sinclo.chatApi.removeAllEvent()},5e3)},inactiveTimer:null,inactiveCloseFlg:!1,startInactiveTimeout:function(){"623abb61b16b5"!==window.sincloInfo.site.key&&"62df765e0d90f"!==window.sincloInfo.site.key&&(this.inactiveTimer||(this.inactiveTimer=setTimeout(sinclo.chatApi._handleInactive,54e5)))},clearInactiveTimeout:function(){this.inactiveTimer&&(clearTimeout(this.inactiveTimer),this.inactiveTimer=null)},_handleInactive:function(){socket&&(sinclo.chatApi.inactiveCloseFlg=!0,sinclo_storage.s.set("inactiveTimeout",!0),socket.close()),$("sinclo-chat-alert").css("display","block").html("ã¯ãªãã¯ãã¦åæ¥ç¶").one("click",function(){$("sinclo-chat-alert").css("display","none"),$("sinclo-chat").children().remove(),socket||socket.isOnceConnected()?socket.connect().then(function(){$("sinclo-chat-alert").off("click"),sinclo.connect().then(function(){common.handleInit()})}):common.handleInit()}),sinclo.chatApi.removeAllEvent()},sound:null,call:function(){this.sound&&!scl_check.smartphone()&&this.sound.play()},showUnreadCnt:function(){var e="sincloChatUnread",t=document.getElementById(e),n=(document.getElementById("sincloBox"),sinclo.widget.condifiton.get());if(t&&t.parentNode.removeChild(t),0<Number(sinclo.chatApi.unread)){if("none"!==$("#sincloBox #chatTab").css("display")&&"true"===String(n))return emit("isReadFromCustomer",{}),sinclo.chatApi.unread=0,!1;var i=document.createElement("em");i.id=e,i.textContent=sinclo.chatApi.unread;var o=document.getElementById("mainImage"),s=document.getElementById("widgetTitle");common.getAbridgementType().MinRes?s&&s.appendChild(i):o?o.appendChild(i):s&&s.appendChild(i)}},retReadFromCustomer:function(e){JSON.parse(e).sincloSessionId===userInfo.sincloSessionId&&(sinclo.chatApi.unread=0,sinclo.chatApi.showUnreadCnt())},KEY_TRIGGERED_AUTO_SPEECH:"triggeredAutoSpeech",_getAutoSpeechTriggeredList:function(){return sinclo_storage.l.get(this.KEY_TRIGGERED_AUTO_SPEECH)?JSON.parse(sinclo_storage.l.get(this.KEY_TRIGGERED_AUTO_SPEECH)):[]},saveAutoSpeechTriggered:function(e,t){if("1"===e){var n=this._getAutoSpeechTriggeredList();n.indexOf(t)<0&&(n.push(t),sinclo_storage.l.set(this.KEY_TRIGGERED_AUTO_SPEECH,JSON.stringify(n)))}},triggeredAutoSpeechExists:function(e){return 0<=this._getAutoSpeechTriggeredList().indexOf(e)},saveScrollPositionTriggered:function(e,t){sinclo.trigger.judge.pageScrollPositionTriggered[e]=t},saveElementClickTriggered:function(e,t){sinclo.trigger.judge.elementClickTriggered[e]=t},triggeredScrollPosition:function(t){var e=Object.keys(sinclo.trigger.judge.pageScrollPositionTriggered).find(function(e){return Number(e)===Number(t)});return e&&sinclo.trigger.judge.pageScrollPositionTriggered[e]||void 0===e},triggeredElementClick:function(t){var e=Object.keys(sinclo.trigger.judge.elementClickTriggered).find(function(e){return Number(e)===Number(t)});return e&&sinclo.trigger.judge.elementClickTriggered[e]||void 0===e},fileUploader:{isDisable:!1,dragging:!1,dragArea:null,droppable:null,selectFileBtn:null,selectInput:null,fileObj:null,loadData:null,extensionType:null,extendedExtensions:null,init:function(e,t,n,i,o,s){this.dragArea=e,this.droppable=t,this.selectFileBtn=n,this.selectInput=i,this.extensionType=o,this.extendedExtensions=s,window.FileReader?this._addDragAndDropEvents():this.isDisable=!0,this._addSelectFileEvents()},_addDragAndDropEvents:function(){this.dragArea.on("dragenter",this._enterEvent),this.dragArea.on("dragover",this._overEvent),this.dragArea.on("dragleave",this._leaveEvent),this.dragArea.on("drop",function(){return event.preventDefault(),event.stopPropagation(),!1}),this.droppable.on("drop",this._handleDroppedFile)},_addSelectFileEvents:function(){this.selectFileBtn.on("click",function(e){sinclo.chatApi.fileUploader.selectInput.trigger("click")}),this.selectInput.on("click",function(e){sinclo.chatApi.fileUploader._hideInvalidError(),$(this).val(null)}).on("change",function(e){if(sinclo.chatApi.fileUploader.selectInput[0].files[0]&&1===sinclo.chatApi.fileUploader.selectInput[0].files.length){var n=this;sinclo.chatApi.fileUploader.fileObj=sinclo.chatApi.fileUploader.selectInput[0].files[0],sinclo.chatApi.fileUploader._showLoadingPopup($(n).parents("li.sinclo_re"));var t=new FileReader;t.onload=function(e){sinclo.chatApi.fileUploader._hideLoadingPopup($(n).parents("li.sinclo_re"));var t=scl_check.isset(sinclo.scenarioApi.get(sinclo.scenarioApi._lKey.currentScenario).actionType)?sinclo.scenarioApi.get(sinclo.scenarioApi._lKey.currentScenario).actionType:"";if(sinclo.chatApi.fileUploader._validExtension(sinclo.chatApi.fileUploader.fileObj.name)){if(t==sinclo.scenarioApi._actionType.sendFile&&sinclo.chatApi.fileUploader.fileObj.size>sinclo.scenarioApi._sendFile.limitSize)return sinclo.scenarioApi._sendFile.isSizeOver=!0,void sinclo.chatApi.fileUploader._showInvalidError();$("#chatTab").find('[class^="sinclo_re delete_e"]').remove(),sinclo.chatApi.fileUploader.loadData=e.target.result,sinclo.chatApi.fileUploader._showPreview(n,sinclo.chatApi.fileUploader.fileObj,sinclo.chatApi.fileUploader.loadData)}else sinclo.chatApi.fileUploader._showInvalidError()},t.readAsArrayBuffer(sinclo.chatApi.fileUploader.fileObj)}else sinclo.chatApi.fileUploader._showInvalidError()})},_enterEvent:function(e){return sinclo.chatApi.fileUploader.dragging=!0,sinclo.chatApi.fileUploader._cancelEvent(e),!1},_overEvent:function(e){return sinclo.chatApi.fileUploader.dragging=!1,sinclo.chatApi.fileUploader.droppable.css("opacity","0.8"),sinclo.chatApi.fileUploader._cancelEvent(e),!1},_leaveEvent:function(e){return sinclo.chatApi.fileUploader.dragging?sinclo.chatApi.fileUploader.dragging=!1:sinclo.chatApi.fileUploader.droppable.css("opacity","1.0"),sinclo.chatApi.fileUploader._cancelEvent(e),!1},_handleDroppedFile:function(e){if(sinclo.chatApi.fileUploader._hideInvalidError(),e.originalEvent.dataTransfer.files[0]&&1===e.originalEvent.dataTransfer.files.length){sinclo.chatApi.fileUploader.fileObj=e.originalEvent.dataTransfer.files[0];var n=this;sinclo.chatApi.fileUploader._showLoadingPopup($(n).parents("li.sinclo_re"));var t=new FileReader;t.onload=function(e){sinclo.chatApi.fileUploader._hideLoadingPopup($(n).parents("li.sinclo_re"));var t=scl_check.isset(sinclo.scenarioApi.get(sinclo.scenarioApi._lKey.currentScenario).actionType)?sinclo.scenarioApi.get(sinclo.scenarioApi._lKey.currentScenario).actionType:"";if(sinclo.chatApi.fileUploader._validExtension(sinclo.chatApi.fileUploader.fileObj.name)){if(t==sinclo.scenarioApi._actionType.sendFile&&sinclo.chatApi.fileUploader.fileObj.size>sinclo.scenarioApi._sendFile.limitSize)return sinclo.scenarioApi._sendFile.isSizeOver=!0,void sinclo.chatApi.fileUploader._showInvalidError();$("#chatTab").find('[class^="sinclo_re delete_e"]').remove(),sinclo.chatApi.fileUploader.loadData=e.target.result,sinclo.chatApi.fileUploader._showPreview(n,sinclo.chatApi.fileUploader.fileObj,sinclo.chatApi.fileUploader.loadData)}else sinclo.chatApi.fileUploader._showInvalidError()},t.readAsArrayBuffer(sinclo.chatApi.fileUploader.fileObj)}else sinclo.chatApi.fileUploader._showInvalidError();return sinclo.chatApi.fileUploader._cancelEvent(e),!1},_cancelEvent:function(e){e.preventDefault(),e.stopPropagation()},_validExtension:function(e){if(3===Number(sinclo.chatApi.fileUploader.extensionType))return!0;var t=sinclo.chatApi.fileUploader._getAllowExtension(),n=e.split("."),i=n[n.length-1];return new RegExp(t.join("|"),"i").test(i)},_getAllowExtension:function(){var e=["pdf","pptx","ppt","jpg","jpeg","png","gif"];switch(Number(sinclo.chatApi.fileUploader.extensionType)){case 1:return e;case 2:var t=sinclo.chatApi.fileUploader.extendedExtensions;return e.concat(t);case 3:return"*";default:return e}},_showLoadingPopup:function(e){$(e).find("div.receiveFileContent").find("div.loadingPopup").removeClass("hide")},_hideLoadingPopup:function(e){$(e).find("div.receiveFileContent").find("div.loadingPopup").addClass("hide")},_showInvalidError:function(){$(document).trigger(sinclo.scenarioApi._events.fileUploaded,[!1,{}])},_hideInvalidError:function(){$("#sendMessageArea").find("span.errorMsg").remove()},_showConfirmDialog:function(e){modalOpen.call(window,e,"p-cus-file-upload","ç¢ºèª","moment"),popupEvent.closePopup=function(){sinclo.chatApi.uploadFile(sinclo.chatApi.fileUploader.fileObj,sinclo.chatApi.fileUploader.loadData),popupEvent.close()}},_showPreview:function(l,d,p){sinclo.chatApi.fileUploader._effectScene(!1,$(l).parents("li.sinclo_re").parent(),function(){var e=13;scl_check.smartphone()&&(e=16);var t="sinclo_se recv_file_right effect_right chat_right";common.getWidgetSettings().isSendMessagePositionLeft&&(t="sinclo_se recv_file_left effect_left chat_left");var i=document.createElement("div");i.innerHTML='  <li class="'+t+' details">    <div class="receiveFileContent">      <div class="selectFileArea">        <p class="preview"></p><p class="commentLabel">ã³ã¡ã³ã</p>        <p class="commentarea"><textarea maxlength="1000" style="font-size: '+e+'px; border-width: 1px; padding: 5px; line-height: 1.5;"></textarea></p>        <div class="actionButtonWrap">          <a class="cancel-file-button">é¸æãç´ã</a>          <a class="send-file-button">éä¿¡ãã</a>        </div>      </div>      <div class=\'loadingPopup hide\'><i class=\'sinclo-fal fa-spinner load\'></i><p class=\'progressMessage\'>ã¢ããã­ã¼ãä¸­ã§ãã<br>ãã°ãããå¾ã¡ä¸ããã</p></div>    </div>  </li>',sinclo.chatApi.operatorFileReceiver.isWaiting()&&i.classList.add("operator-receive"),common.getWidgetSettings().isSendMessagePositionLeft?i.style.textAlign="left":i.style.textAlign="right";var n=d.name.split("."),o=n[n.length-1];function s(e){var n="li.sinclo_se.recv_file_right ";common.getWidgetSettings().isSendMessagePositionLeft&&(n="li.sinclo_se.recv_file_left "),i.querySelector(n+" div.receiveFileContent p.preview").appendChild(e),i.querySelector(n+" div.receiveFileContent div.selectFileArea p.commentarea").style.textAlign="center",$(i.querySelector(n+" div.actionButtonWrap a.cancel-file-button")).off("click"),i.querySelector(n+" div.actionButtonWrap a.cancel-file-button").addEventListener("click",function(e){sinclo.chatApi.fileUploader._effectScene(!1,$(i),function(){document.getElementById("chatTalk").querySelector("sinclo-chat").removeChild(i),sinclo.chatApi.fileUploader._effectScene(!0,$(l).parents("li.sinclo_re").parent(),function(){})})}),$(i.querySelector(n+" div.actionButtonWrap a.send-file-button")).off("click"),i.querySelector(n+" div.actionButtonWrap a.send-file-button").addEventListener("click",function(e){$(this).addClass("end-disabled").css("pointer-events","none").css("opacity",.5);var t=i.querySelector(n+" div.receiveFileContent div.selectFileArea p.commentarea textarea").value;t=t||"ï¼ãªãï¼",sinclo.chatApi.fileUploader._showLoadingPopup(i),emit("sendFileCond",{status:"loadingForUser",sincloSessionId:userInfo.sincloSessionId}),sinclo.chatApi.fileUploader._uploadFile(i,t,d,p)}),document.getElementById("chatTalk").querySelector("sinclo-chat").appendChild(i),sinclo.chatApi.fileUploader._changeResizableTextarea(i.querySelector(n+" div.receiveFileContent div.selectFileArea p.commentarea textarea")),sinclo.chatApi.scDown()}if(null!=o.match(/(jpeg|jpg|gif|png)$/i)){var a=document.createElement("img");a.classList.add(sinclo.chatApi.fileUploader._selectPreviewImgClass());var r=new FileReader;r.onload=function(e){a.src=this.result,s(a)},r.readAsDataURL(d)}else{var c=document.createElement("i");c.classList.add("sinclo-fal"),c.classList.add("fa-4x"),c.classList.add(sinclo.chatApi._selectFontIconClassFromExtension(o)),c.setAttribute("aria-hidden","true"),s(c)}})},_selectPreviewImgClass:function(){switch(scl_check.smartphone()?1:Number(common.getWidgetSettings().widgetSizeType)){case 1:return"small";case 2:return"middle";case 3:return"large";default:return"middle"}},_effectScene:function(e,t,n){e?t.fadeIn("fast",n):t.fadeOut("fast",n)},_changeResizableTextarea:function(e){var o=parseFloat(e.style.fontSize,10),t=2*parseFloat(e.style.borderWidth,10),s=2*parseFloat(e.style.padding,10),a=parseFloat(e.style.lineHeight,10);function n(){var n=e.getBoundingClientRect().width-t-s,i=0;e.value.split("\n").forEach(function(e){var t=e.length*o;i+=Math.max(Math.ceil(t/n),1)}),5<i?(e.style.height=o*a*5+s+"px",e.style.overflow="auto"):(e.style.height=i*(o*a)+s+"px",e.style.overflow="hidden"),sinclo.chatApi.scDown()}n(),e.addEventListener("input",n)},_uploadFile:function(i,e,t,n){var o=new FormData,s=new Blob([n],{type:t.type});o.append("k",sincloInfo.site.key),o.append("c",e),o.append("f",s,t.name);var a=!!scl_check.isset(sinclo.scenarioApi.get(sinclo.scenarioApi._lKey.currentScenario).useLinkRegistration)&&sinclo.scenarioApi.get(sinclo.scenarioApi._lKey.currentScenario).useLinkRegistration,r="",c="",l="",d=!1;if(window.sincloInfo.contract.hasOwnProperty("useLinkRegistration")&&(d=window.sincloInfo.contract.useLinkRegistration),d&&a){var p="",u=scl_check.isset(sinclo.scenarioApi.get(sinclo.scenarioApi._lKey.currentScenario).assignment)?sinclo.scenarioApi.get(sinclo.scenarioApi._lKey.currentScenario).assignment:{};for(key in u)""!=u[key]&&(p=sinclo.scenarioApi._getSavedVariable(u[key]),1==key?l=p:2==key?r=p:3==key&&(c=p))}var g=scl_check.isset(sinclo.scenarioApi.get(sinclo.scenarioApi._lKey.currentScenario).actionType)?sinclo.scenarioApi.get(sinclo.scenarioApi._lKey.currentScenario).actionType:"";o.append("partnerCompanyName",l),o.append("inquiryNumber",r),o.append("claimNumber",c),o.append("actionType",g),o.append("useLinkRegistration",a),o.append("useLinkRegistrationOp",d),$.ajax({url:sincloInfo.site.socket+"/FC/pu",type:"POST",data:o,cache:!1,contentType:!1,processData:!1,dataType:"json",xhr:function(){return $.ajaxSettings.xhr()}}).done(function(e,t,n){sinclo.chatApi.fileUploader._hideLoadingPopup(i),sinclo.chatApi.fileUploader._effectScene(!1,$(i),function(){document.getElementById("chatTalk").querySelector("sinclo-chat").removeChild(i),emit("sendChat",{historyId:sinclo.chatApi.historyId,stayLogsId:sinclo.chatApi.stayLogsId,chatMessage:JSON.stringify(e),mUserId:null,messageType:sinclo.scenarioApi.get(sinclo.scenarioApi._lKey.sendCustomerMessageType),messageRequestFlg:0,isAutoSpeech:!1,notifyToCompany:!1,isScenarioMessage:!0},function(){$(document).trigger(sinclo.scenarioApi._events.fileUploaded,[!0,{downloadUrl:e.downloadUrl,comment:e.comment}])})}),emit("sendFileCond",{status:"stopLoadingForUser",sincloSessionId:userInfo.sincloSessionId})}).fail(function(e,t,n){sinclo.chatApi.fileUploader._hideLoadingPopup(i),sinclo.scenarioApi._sendFile.isUploadError=!0,sinclo.chatApi.fileUploader._showInvalidError(),emit("sendFileCond",{status:"stopLoadingForUser",sincloSessionId:userInfo.sincloSessionId})}).always(function(){sinclo.chatApi.operatorFileReceiver.isWaiting()&&sinclo.chatApi.operatorFileReceiver.off()})}},handleBrowserZoom:function(){1<=window.devicePixelRatio?$('#sincloBox ul#chatTalk li sinclo-radio [type="radio"] + label').removeClass("radio-zoom"):$('#sincloBox ul#chatTalk li sinclo-radio [type="radio"] + label').addClass("radio-zoom")},handleChatClear:function(){sinclo.scenarioApi.isProcessing()&&(sinclo.scenarioApi._cancel(),sinclo.scenarioApi._hearing.needHearingEndMode()&&sinclo.scenarioApi.syncScenarioData._endHearing(),sinclo.scenarioApi._end()),sinclo.diagramApi.common.isProcessing()&&sinclo.diagramApi.executor._cancel(),sinclo.diagramApi.common.reset();var e=!1;sinclo.chatApi.saveFlg?(emit("sendChat",{historyId:sinclo.chatApi.historyId,stayLogsId:sinclo.chatApi.stayLogsId,chatMessage:"ãã£ããã¯ãªã¢",mUserId:null,messageType:997,messageRequestFlg:0,isAutoSpeech:!1,notifyToCompany:!1,isScenarioMessage:!1}),e=!0):(sinclo.setForNotHavingConnectionMessageStack({message:"ãã£ããã¯ãªã¢",messageType:997,isAutoSpeech:!1,sendMailFlg:!1}),sinclo.chatApi.store.unset()),$("#sincloBox ul#chatTalk div").remove(),emit("chatReset",{siteKey:sincloInfo.site.key,userId:userInfo.userId,historyId:sinclo.chatApi.historyId,tabId:userInfo.tabId,saveFlg:e})},isCustomerSendMessageType:function(e){return(e=Number(e))===sinclo.chatApi.messageType.customer||e===sinclo.chatApi.messageType.scenario.customer.answerBulkHearing||e===sinclo.chatApi.messageType.scenario.customer.button||e===sinclo.chatApi.messageType.scenario.customer.calendar||e===sinclo.chatApi.messageType.scenario.customer.carousel||e===sinclo.chatApi.messageType.scenario.customer.hearing||e===sinclo.chatApi.messageType.scenario.customer.hearingConfirm||e===sinclo.chatApi.messageType.scenario.customer.modifyBulkHearing||e===sinclo.chatApi.messageType.scenario.customer.noModBulkHearing||e===sinclo.chatApi.messageType.scenario.customer.pulldown||e===sinclo.chatApi.messageType.scenario.customer.radio||e===sinclo.chatApi.messageType.scenario.customer.buttonUI||e===sinclo.chatApi.messageType.scenario.customer.checkbox||e===sinclo.chatApi.messageType.scenario.customer.reInputButtonUI||e===sinclo.chatApi.messageType.scenario.customer.reInputCheckbox||e===sinclo.chatApi.messageType.scenario.customer.reInputButton||e===sinclo.chatApi.messageType.scenario.customer.reInputCalendar||e===sinclo.chatApi.messageType.scenario.customer.reInputCarousel||e===sinclo.chatApi.messageType.scenario.customer.reInputPulldown||e===sinclo.chatApi.messageType.scenario.customer.reInputRadio||e===sinclo.chatApi.messageType.scenario.customer.reInputText||e===sinclo.chatApi.messageType.scenario.customer.selection||e===sinclo.chatApi.messageType.scenario.customer.sendFile||e===sinclo.chatApi.messageType.scenario.customer.skipHearing||e===sinclo.chatApi.messageType.scenario.customer.reservation||e===sinclo.chatApi.messageType.diagram.customer.branch},isBotMessage:function(e){return 3<=Number(e)&&Number(e)<=9||20<Number(e)&&Number(e)<29||40<=Number(e)&&Number(e)<43||45===Number(e)||46===Number(e)||Number(e)===sinclo.scenarioApi._inputForm.messageType.answer},store:{_key:"scl_tmp_msg",save:function(e){var t=this.get(),n=scl_check.isJSON(e)?JSON.parse(e):e;t.push(n),sinclo_storage.l.set(this._key,JSON.stringify(t))},get:function(){var e=sinclo_storage.l.get(this._key);return scl_check.isJSON(e)?JSON.parse(e):[]},unset:function(){sinclo_storage.l.unset(this._key)}},execDiagram:function(e){var t=scl_check.isJSON(e)?common.jParse(e):e;sinclo.diagramApi.common.init(t.id,t.activity),sinclo.diagramApi.executor.execute()},execScenario:function(e){var t=scl_check.isJSON(e)?common.jParse(e):e;sinclo.scenarioApi.init(t.id,t.activity.scenarios),sinclo.scenarioApi.begin(t.id,t.activity.scenarios,!1)},operatorFileReceiver:{events:{start:"startOperatorFileReceiver",end:"endOperatorFileReceiver"},storageKey:{waiting:"operatorIsWaitingForUploadingFile"},messages:{dropHere:"ããã«ãã¡ã¤ã«ããã­ãããã¦ãã ãã",cancel:"ãã¡ã¤ã«éä¿¡ãã­ã£ã³ã»ã«ãã",error:"é¸æããããã¡ã¤ã«ã¯ã¢ããã­ã¼ããããã¨ãã§ãã¾ããã"},_onWaiting:function(){sinclo_storage.l.set(this.storageKey.waiting,"true")},_offWaiting:function(){sinclo_storage.l.set(this.storageKey.waiting,"false")},isWaiting:function(){return"true"==sinclo_storage.l.get(this.storageKey.waiting)},on:function(){var i=this;i._unnecessary()||(socket.connector.off(i.events.start),socket.on(i.events.start,function(e){var t=JSON.parse(e),n=sinclo.scenarioApi;n.set(n._lKey.sendCustomerMessageType,sinclo.chatApi.messageType.operatorReceiveFile),t.waitingFlg?(i._onWaiting(),i.doSendFileAction(t)):i.cancel(t.mUserId)}))},_unnecessary:function(){return!window.sincloInfo.contract.chat||"false"!=sinclo_storage.l.get("leaveFlg")},doSendFileAction:function(e){var t=sinclo.scenarioApi,n=t._sendFile;sinclo.chatApi.createSelectUploadFileMessage(this.messages.dropHere,!0,this.messages.cancel,e.type,e.allowExtensions),n._init(t),t.set(t._lKey.currentScenario,{errorMessage:this.messages.error}),n._waitUserAction(n._handleFileSelect)},cancel:function(e){sinclo.scenarioApi._sendFile.cancelerId=e,this._removeFileUploader()},_removeFileUploader:function(){var t=document.getElementsByTagName("sinclo-chat")[0];t.querySelector("div.cancelReceiveFileArea a").click(),this._operateEachFileUploader(function(e){t.removeChild(e)})},_operateEachFileUploader:function(t){var e=document.getElementsByClassName("operator-receive");e&&0<e.length&&[].slice.call(e).forEach(function(e){t(e)})},moveDown:function(){var t=document.getElementsByTagName("sinclo-chat")[0];this._operateEachFileUploader(function(e){t.removeChild(e),setTimeout(function(){t.appendChild(e)},1e3)})},off:function(){this._offWaiting(),emit(this.events.end,{})}}},trigger:{flg:!1,nowSaving:!1,timerTriggeredList:{},orTriggeredId:[],triggerIds:{},processing:!1,triggerTimers:[],pageScrollEventFlg:!1,pageScrollPositionConditions:[],init:function(){if(preventWithdrawalOverlay.isActive()&&(sinclo.chatApi.autoMessages.delete(window.sincloInfo.preventWithdrawalSettings.trigger.id),sinclo.trigger.clearTriggerTimer(),sinclo.trigger.triggerTimers=[],scl_check.isset(window.sincloInfo.messages)||(window.sincloInfo.messages=[]),window.sincloInfo.messages.push(window.sincloInfo.preventWithdrawalSettings.trigger)),!("messages"in window.sincloInfo)||"messages"in window.sincloInfo&&"object"!=typeof window.sincloInfo.messages)return!1;sinclo.trigger.judge.speechContentRegEx=[];var r=window.sincloInfo.messages;sinclo.trigger.triggerIds={},sinclo.trigger.judge.pageScrollPositionContents={},sinclo.trigger.judge.elementClickContents={};function e(e,t,n,i){7!==e&&12!==e&&13!==e||(sinclo.trigger.processing=!0);var o,s=r[n];"number"==typeof i?(sinclo.trigger.triggerIds[i]||(sinclo.trigger.triggerIds[i]=[]),(7!==e&&12!==e||13!==e)&&sinclo.trigger.triggerIds[i].push(s.id),o=setTimeout(function(){2==s.action_type&&7!==e&&12!==e&&13!==e&&sinclo.trigger.triggerIds[i][0]!=s.id||(sinclo.trigger.setAction(s.id,s.action_type,s.activity,s.send_mail_flg,s.scenario_id,s.call_automessage_id,!1,s.diagram_id),sinclo.trigger.processing=!1)},i),sinclo.trigger.triggerTimers.push(o)):i&&"object"==typeof i&&(sinclo.trigger.timerTriggeredList[s.id]=!1,o=setTimeout(function(){sinclo.trigger.processing=!1,sinclo.trigger.timerTriggeredList[s.id]=!0},i.delay),sinclo.trigger.triggerTimers.push(o))}function t(i,o,e,s){var a=r[e];if(7!==i&&12!==i||(sinclo.trigger.processing=!0),"number"==typeof s){sinclo.trigger.triggerIds[s]||(sinclo.trigger.triggerIds[s]=[]),7!==i&&12!==i&&sinclo.trigger.triggerIds[s].push(a.id);var t=setTimeout(function(){var e=i&&o&&7===i,t=!1;if(e&&"1"===o.speechTriggerCond?t=!1:e&&"2"===o.speechTriggerCond&&(t=!0),t||!(0<=sinclo.trigger.orTriggeredId.indexOf(a.id))){if(-1===sinclo.trigger.orTriggeredId.indexOf(a.id)&&sinclo.trigger.orTriggeredId.push(a.id),!e&&0<=Object.keys(a.activity.conditions).indexOf("7")){var n=a.activity.conditions[7][0];n&&sinclo.chatApi.saveAutoSpeechTriggered(n.speechTriggerCond,a.id)}2==a.action_type&&7!==i&&12!==i&&sinclo.trigger.triggerIds[s][0]!=a.id||(sinclo.trigger.setAction(a.id,a.action_type,a.activity,a.send_mail_flg,a.scenario_id,a.call_automessage_id,!1,a.diagram_id),sinclo.trigger.processing=!1)}},s);sinclo.trigger.triggerTimers.push(t)}}for(var n=0;r.length>n;n++)1===Number(r[n].activity.conditionType)?this.setAndSetting(n,r[n].activity,e):this.setOrSetting(n,r[n].activity,t);sinclo.trigger.hasPageScrollPositions()&&window.addEventListener("scroll",sinclo.trigger.handleScrollEvent),sinclo.trigger.hasPageElementClickPositions()&&window.addEventListener("click",sinclo.trigger.handleElementClickEvent),sinclo.trigger.flg=!0,operationUtil._triggerCustomEventOnDocument("sinclo:loadTriggerComplete")},clearTriggerTimer:function(){sinclo.trigger.triggerTimers.forEach(function(e,t,n){scl_check.isset(e)&&clearTimeout(e)})},setAndSetting:function(i,e,o){var s=Object.keys(e.conditions),a=[];["1","2","3","4","5","6","8","9","10","11","12","13","7"].forEach(function(e,t,n){0<=s.indexOf(e)&&a.push(e)}),s=a;for(var r=0,t=0;s.length>t;t++){var c=e.conditions[s[t]];s.length,Number(t+1);switch(Number(s[t])){case 1:this.judge.stayTime(c[0],function(e,t){!e&&"number"==typeof t&&r<=t&&(r=Number(t)),(e||preventWithdrawalOverlay.isActive())&&(r=null)});break;case 2:this.judge.stayCount(c[0],function(e,t){(e||preventWithdrawalOverlay.isActive())&&(r=null)});break;case 3:this.judge.page(c[0],function(e,t){e&&(r=null)});break;case 4:this.judge.dayTime(c[0],function(e,t){!e&&"number"==typeof t&&r<=t&&(r=Number(t)),(e||preventWithdrawalOverlay.isActive())&&(r=null)});break;case 5:this.judge.referrer(c[0],function(e,t){(e||preventWithdrawalOverlay.isActive())&&(r=null)});break;case 6:this.judge.searchWord(c[0],function(e,t){(e||preventWithdrawalOverlay.isActive())&&(r=null)});break;case 7:if(null!==r){var n=JSON.parse(JSON.stringify(c[0]));this.judge.setMatchSpeechContent(1,window.sincloInfo.messages[i].id,n,function(e,t){e?r=null:(sinclo.chatApi.saveAutoSpeechTriggered(n.speechTriggerCond,window.sincloInfo.messages[i].id),r=1e3*Number(n.triggerTimeSec),o(7,n,i,r))}),"number"==typeof r&&(r={delay:r})}break;case 8:this.judge.pageOfFirst(c[0],function(e,t){(e||preventWithdrawalOverlay.isActive())&&(r=null)});break;case 9:this.judge.pageOfPrevious(c[0],function(e,t){(e||preventWithdrawalOverlay.isActive())&&(r=null)});break;case 10:this.judge.operating_hours(c[0],function(e,t){(e||preventWithdrawalOverlay.isActive())&&(r=null)});break;case 11:this.judge.visitorDevice(c[0],function(e,t){(e||preventWithdrawalOverlay.isActive())&&(r=null)});break;case 12:null!==r&&this.judge.pageScrollPosition(c[0],function(e,t){if(e||preventWithdrawalOverlay.isActive()){var n=JSON.parse(JSON.stringify(c[0]));sinclo.trigger.judge.setMatchScrollContents(1,window.sincloInfo.messages[i].id,n,function(e,t){e?r=null:(sinclo.chatApi.saveScrollPositionTriggered(window.sincloInfo.messages[i].id,!0),sinclo.trigger.checkAndExecuteCallback(12,n,i,o))}),"number"==typeof r&&(r={delay:r})}});break;case 13:null!==r&&(n=JSON.parse(JSON.stringify(c[0])),sinclo.trigger.judge.setMatchEleClickContents(1,window.sincloInfo.messages[i].id,n,function(e,t){e?r=null:(sinclo.chatApi.saveElementClickTriggered(window.sincloInfo.messages[i].id,!0),sinclo.trigger.checkAndExecuteCallback(13,n,i,o))}),"number"==typeof r&&(r={delay:r}));break;default:r=null}if(null===r)break}o(null,null,i,r)},setOrSetting:function(i,e,o){for(var t=Object.keys(e.conditions),s=null,n=0;t.length>n;n++){var a,r=e.conditions[t[n]];t.length,Number(n+1);switch(Number(t[n])){case 1:for(a=0;a<r.length;a++)this.judge.stayTime(r[a],function(e,t){!e&&!preventWithdrawalOverlay.isActive()&&"number"==typeof t&&s<=t&&(s=Number(t))});break;case 2:for(a=0;a<r.length;a++)this.judge.stayCount(r[a],function(e,t){e||preventWithdrawalOverlay.isActive()||(s=0)});break;case 3:for(a=0;a<r.length;a++)this.judge.page(r[a],function(e,t){e||preventWithdrawalOverlay.isActive()||(s=0)});break;case 4:for(a=0;a<r.length;a++)this.judge.dayTime(r[a],function(e,t){!e&&!preventWithdrawalOverlay.isActive()&&"number"==typeof t&&s<=t&&(s=Number(t))});break;case 5:for(a=0;a<r.length;a++)this.judge.referrer(r[a],function(e,t){e||preventWithdrawalOverlay.isActive()||(s=0)});break;case 6:for(a=0;a<r.length;a++)this.judge.searchWord(r[a],function(e,t){e||preventWithdrawalOverlay.isActive()||(s=0)});break;case 7:for(a=0;a<r.length;a++){var c=JSON.parse(JSON.stringify(r[a]));this.judge.setMatchSpeechContent(2,window.sincloInfo.messages[i].id,c,function(e,t){e||(sinclo.chatApi.saveAutoSpeechTriggered(c.speechTriggerCond,window.sincloInfo.messages[i].id),s=1e3*Number(c.triggerTimeSec),o(7,c,i,s))})}break;case 8:for(a=0;a<r.length;a++)this.judge.pageOfFirst(r[a],function(e,t){e||preventWithdrawalOverlay.isActive()||(s=0)});break;case 9:for(a=0;a<r.length;a++)this.judge.pageOfPrevious(r[a],function(e,t){e||preventWithdrawalOverlay.isActive()||(s=0)});break;case 10:for(a=0;a<r.length;a++)this.judge.operating_hours(r[a],function(e,t){e||preventWithdrawalOverlay.isActive()||(s=0)});break;case 11:for(a=0;a<r.length;a++)this.judge.visitorDevice(r[a],function(e,t){e||preventWithdrawalOverlay.isActive()||(s=0)});break;case 12:for(a=0;a<r.length;a++)this.judge.pageScrollPosition(r[0],function(e,t){if(e||preventWithdrawalOverlay.isActive()){var n=JSON.parse(JSON.stringify(r[0]));sinclo.trigger.judge.setMatchScrollContents(2,window.sincloInfo.messages[i].id,n,function(e,t){e?s=null:(sinclo.chatApi.saveScrollPositionTriggered(window.sincloInfo.messages[i].id,!0),o(12,n,i,0))})}else s=0});break;case 13:for(a=0;a<r.length;a++){var l=JSON.parse(JSON.stringify(r[0]));sinclo.trigger.judge.setMatchEleClickContents(2,window.sincloInfo.messages[i].id,l,function(e,t){e?s=null:(sinclo.chatApi.saveElementClickTriggered(window.sincloInfo.messages[i].id,!0),o(13,l,i,0))})}}}o(null,null,i,s)},setAutoMessage:function(e,t,n){3===common.getWidgetSettings().showTiming&&(sincloInfo.widgetDisplay=!0,common.widgetHandler.show()),sinclo.trigger.handleChatTextArea(t.chatTextarea);var i=!1;for(var o in t.conditions)"7"===o&&(i=!0,sinclo.chatApi.saveFlg=!0,t.conditions[7][0].speechTriggerCond);if(n&&sinclo.api.callFunction("am",e),1==t.cv){var s={chatId:e,message:t.message,messageType:i?sinclo.chatApi.messageType.autoSpeech:sinclo.chatApi.messageType.auto,isAutoSpeech:i,achievementFlg:3,tabFlg:!0,sendMailFlg:n};socket.isConnected()?emit("sendAutoChat",{messageList:sinclo.chatApi.autoMessages.getByArray()}):socket.connect().then(function(){return sinclo.executeConnectSuccess(window.userInfo.connectSuccessData,window.userInfo.accessInfoData)}).then(sinclo.setHistoryId).then(function(){emit("sendAutoChat",{messageList:sinclo.chatApi.autoMessages.getByArray()})}),sinclo.chatApi.autoMessages.unset(),sinclo.chatApi.saveFlg=!0}else if(n){s={chatId:e,message:t.message,messageType:i?sinclo.chatApi.messageType.autoSpeech:sinclo.chatApi.messageType.auto,isAutoSpeech:i,tabFlg:!0,sendMailFlg:n};socket.isConnected()?emit("sendAutoChat",{messageList:sinclo.chatApi.autoMessages.getByArray()}):socket.connect().then(function(){return sinclo.executeConnectSuccess(window.userInfo.connectSuccessData,window.userInfo.accessInfoData)}).then(sinclo.setHistoryId).then(function(){emit("sendAutoChat",{messageList:sinclo.chatApi.autoMessages.getByArray()})}),sinclo.chatApi.autoMessages.unset(),sinclo.chatApi.saveFlg=!0}else s={chatId:e,message:t.message,messageType:i?sinclo.chatApi.messageType.autoSpeech:sinclo.chatApi.messageType.auto,isAutoSpeech:i,sendMailFlg:n,tabFlg:!0};sinclo.trigger.pushProcessedTrigger(e,t,s),sinclo.chatApi.saveFlg?emit("sendAutoChat",{messageList:[s]}):(sinclo.setForNotHavingConnectionMessageStack(s),emit("sendAutoChatMessage",s),sinclo.chatApi.store.save(s))},handleChatTextArea:function(e){1===Number(e)||void 0===e?(sinclo.displayTextarea(),sinclo_storage.l.set("textareaOpend","open")):2===Number(e)&&(sinclo.hideTextarea(),sinclo_storage.l.set("textareaOpend","close"))},pushProcessedTrigger:function(e,t,n){var i=!1,o="";for(var s in t.conditions)"7"===s&&(i=!0,o=t.conditions[7][0].speechTriggerCond);sinclo.chatApi.autoMessages.exists(e)||i||"2"===String(o)||(scl_check.isset(n)?n.created=new Date:n={},sinclo.chatApi.autoMessages.push(e,n))},setAction:function(n,e,i,o,t,s,a,r){for(var c=Object.keys(i.conditions),l=!1,d=0;c.length>d;d++)7===Number(c[d])&&(l=!0);var p=sinclo_storage.l.get("callChatMessage");"true"===p&&l&&($.each(sinclo.forCallingTimerArray,function(e,t){clearTimeout(t)}),sinclo_storage.l.set("callChatMessage",!1),sinclo.forCallingTimerArray=[],sinclo_storage.s.set("initialNotification","true"));var u=i.discardChat,g=!1,h=!0;"true"===sinclo_storage.l.get("pageTransition")&&u&&n!==Number(sinclo_storage.l.get("lastActTriggerId"))&&("2"===String(e)&&scl_check.isset(sinclo_storage.l.get("lastActTriggerScenarioId"))&&Number(sinclo_storage.l.get("lastActTriggerScenarioId"))===Number(t)||"4"===String(e)&&scl_check.isset(sinclo_storage.l.get("lastActTriggerDiagramId"))&&Number(sinclo_storage.l.get("lastActTriggerDiagramId"))===Number(r)||(g=!0),"4"===String(e)&&scl_check.isset(sinclo_storage.l.get("lastActTriggerDiagramId"))&&Number(sinclo_storage.l.get("lastActTriggerDiagramId"))===Number(r)&&!sinclo.scenarioApi.isProcessing()&&(h=!1));var m=sinclo_storage.s.get("chatAct");if(scl_check.isset(m)||(m="false"),"1"===String(e)&&"message"in i&&"false"===String(m)){if(sinclo.scenarioApi.isProcessing())return;if(!a&&sinclo.chatApi.autoMessages.exists(n)&&!g||sinclo.scenarioApi.isProcessing()&&(!u||u&&l||!g)||"true"===p&&!l)return;sinclo_storage.l.set("lastActTriggerId",n),sinclo_storage.l.unset("lastActTriggerScenarioId"),sinclo_storage.l.unset("lastActTriggerDiagramId"),u&&sinclo.chatApi.handleChatClear();var f=common.getWidgetSettings().subTitle;2===common.getWidgetSettings().showAutomessageName&&(f="");var v={cn:"sinclo_re",message:i.message,name:f,chatId:n,isBot:!0};sinclo.chatApi.createMessageUnread(v),sinclo.chatApi.scDown();var b=sinclo.chatApi.autoMessages.getByArray(),y=setInterval(function(){var e=common.fullDateTime();if(0===b.length||0<b.length&&b[b.length-1].created!==e){if(clearInterval(y),sinclo.trigger.setAutoMessage(n,i,o),!("widgetOpen"in i)||scl_check.smartphone()&&common.getWidgetSettings().hasOwnProperty("spAutoOpenFlg")&&1===Number(common.getWidgetSettings().spAutoOpenFlg))return!1;var t=sinclo.widget.condifiton.get();1!==Number(i.widgetOpen)||common.widgetHandler.isShown()?1===Number(i.widgetOpen)&&"false"===String(t)&&("true"===sinclo_storage.l.get("bannerAct")&&sinclo.operatorInfo.clickBanner(!0),sinclo.operatorInfo.ev()):sinclo_storage.s.set("preWidgetOpened",!0)}},1)}else if("2"===String(e)){if(sinclo.scenarioApi.isProcessing())return;if(window.sincloInfo.contract.chatbotScenario&&(!sinclo.scenarioApi.isProcessing()||g&&!l)&&(!sinclo.chatApi.autoMessages.exists(n)||g)&&(a||scl_check.isset(t))&&("true"!==p||l)){if(sinclo_storage.l.set("lastActTriggerId",n),sinclo_storage.l.set("lastActTriggerScenarioId",t),sinclo_storage.l.unset("lastActTriggerDiagramId"),u&&sinclo.chatApi.handleChatClear(),socket&&!socket.isConnected()?socket.connect().then(function(){return sinclo.executeConnectSuccess(window.userInfo.connectSuccessData,window.userInfo.accessInfoData)}).then(sinclo.setHistoryId).then(function(){emit("getScenario",{scenarioId:t})}):emit("getScenario",{scenarioId:t}),3===common.getWidgetSettings().showTiming&&(sincloInfo.widgetDisplay=!0,common.widgetHandler.show()),sinclo.trigger.pushProcessedTrigger(n,i),!("widgetOpen"in i)||scl_check.smartphone()&&common.getWidgetSettings().hasOwnProperty("spAutoOpenFlg")&&1===Number(common.getWidgetSettings().spAutoOpenFlg))return!1;var x=sinclo.widget.condifiton.get();1===Number(i.widgetOpen)&&"false"===String(x)&&("true"===sinclo_storage.l.get("bannerAct")&&sinclo.operatorInfo.clickBanner(!0),sinclo.operatorInfo.ev())}}else if("3"===String(e)){if(sinclo.scenarioApi.isProcessing())return;if((!sinclo.scenarioApi.isProcessing()||g&&!l)&&("true"!==p||l)){sinclo_storage.l.set("lastActTriggerId",n),sinclo_storage.l.unset("lastActTriggerScenarioId"),sinclo_storage.l.unset("lastActTriggerDiagramId"),u&&sinclo.chatApi.handleChatClear();var _=null;for(d=0;window.sincloInfo.messages.length>d;d++)if(Number(window.sincloInfo.messages[d].id)===Number(s)){_=window.sincloInfo.messages[d];break}_&&sinclo.trigger.setAction(_.id,_.action_type,_.activity,_.send_mail_flg,_.scenario_id,_.call_automessage_id,!0,_.diagram_id)}}else if("4"===String(e)){if(sinclo.scenarioApi.isProcessing())return;if(Array.isArray(i.conditions[n])&&i.conditions[n][0].speechTrigger,!window.sincloInfo.contract.chatbotTreeEditor||sinclo.scenarioApi.isProcessing()&&(!g||l)||!a&&(!r||sinclo.chatApi.autoMessages.exists(n)&&!g)||"true"===p&&!l||!h)return;if(sinclo_storage.l.set("lastActTriggerId",n),sinclo_storage.l.set("lastActTriggerDiagramId",r),sinclo_storage.l.unset("lastActTriggerScenarioId"),u&&sinclo.chatApi.handleChatClear(),sinclo.diagramApi.executor.setChatTextArea({actionParam:{chatTextarea:i.chatTreeTextarea}}),socket&&!socket.isConnected()?$.ajax({type:"get",url:window.sincloInfo.site.files+"/settings/diagram",cache:!1,data:{sitekey:window.sincloInfo.site.key,did:r},dataType:"json",success:function(e){sinclo.chatApi.execDiagram(e)},error:function(e,t,n){$("#XMLHttpRequest").html("XMLHttpRequest : "+e.status),$("#textStatus").html("textStatus : "+t),$("#errorThrown").html("errorThrown : "+n.message)}}):emit("getChatDiagram",{diagramId:r}),sinclo.trigger.pushProcessedTrigger(n,i),3===common.getWidgetSettings().showTiming&&(sincloInfo.widgetDisplay=!0,common.widgetHandler.show()),!("widgetOpen"in i)||scl_check.smartphone()&&common.getWidgetSettings().hasOwnProperty("spAutoOpenFlg")&&1===Number(common.getWidgetSettings().spAutoOpenFlg))return!1;x=sinclo.widget.condifiton.get();1===Number(i.widgetOpen)&&"false"===String(x)&&("true"===sinclo_storage.l.get("bannerAct")&&sinclo.operatorInfo.clickBanner(!0),sinclo.operatorInfo.ev())}},fireChatEnterEvent:function(e){$(this).trigger("chatEntered",e)},executeScrollPositionTriggers:function(){var s=sinclo.trigger.judge.pageScrollPositionContents;Object.keys(s).forEach(function(e){if(!(e in sinclo.trigger.timerTriggeredList)||sinclo.trigger.timerTriggeredList[Number(e)])if(1===Number(s[e].pageScrollPosition)){if(!("percentPosition"in s[e]))return;var t=Number(s[e].percentPosition),n=document.body.scrollHeight;Math.round(n*(t/100))<=Math.round(window.scrollY+window.innerHeight)&&s[e].callback(!1,0)}else if(2===Number(s[e].pageScrollPosition)){if(!("cssSelector"in s[e]))return;var i=document.querySelector(s[e].cssSelector);if(!i)return;var o=i.getBoundingClientRect().top+window.scrollY;window.scrollY+window.innerHeight>=o&&s[e].callback(!1,0)}else s[e].callback(!0,null)})},handleScrollEvent:function(){"true"!==sinclo_storage.s.get("operatorEntered")&&sinclo.trigger.executeScrollPositionTriggers()},hasPageScrollPositions:function(){return 0<Object.keys(sinclo.trigger.judge.pageScrollPositionContents).length},checkAndExecuteCallback:function(e,t,n,i){sinclo.trigger.judge.speechContentIdList.find(function(e){return e===window.sincloInfo.messages[n].id})||i(e,t,n,0)},executeElementClickTriggers:function(t){var n=sinclo.trigger.judge.elementClickContents;Object.keys(n).forEach(function(e){e in sinclo.trigger.timerTriggeredList&&!sinclo.trigger.timerTriggeredList[Number(e)]||"elementClickCssSelector"in n[e]&&document.querySelector(n[e].elementClickCssSelector)&&(t.target.matches(n[e].elementClickCssSelector)||t.target.closest(n[e].elementClickCssSelector)?n[e].callback(!1,0):n[e].callback(!0,null))})},handleElementClickEvent:function(e){"true"!==sinclo_storage.s.get("operatorEntered")&&sinclo.trigger.executeElementClickTriggers(e)},hasPageElementClickPositions:function(){return 0<Object.keys(sinclo.trigger.judge.elementClickContents).length},common:{numMatch:function(e,t,n){switch(Number(e)){case 1:if(Number(t)===Number(n))return!0;break;case 2:if(Number(t)>=Number(n))return!0;break;case 3:if(Number(t)<Number(n))return!0}return!1},isValidStayCountCondition:function(e,t){switch(Number(e.visitCntCond)){case 1:return Number(e.visitCnt)===Number(t);case 2:return Number(e.visitCnt)<=Number(t);case 3:return Number(e.visitCnt)>Number(t);case 4:return Number(e.visitCntMax)>Number(t)&&Number(e.visitCnt)<=Number(t);default:return!1}},pregMatch:function(e,t,n){var i=!1;switch(Number(e)){case 1:i=new RegExp("^"+t+"$").test(n);break;case 2:i=new RegExp(t).test(n);break;case 3:i=!new RegExp("^"+t+"$").test(n)}return i},pregContainsAndExclsion:function(e,t,n,i){var o=!0,s=[];t.split('"').forEach(function(e,t,n){if(1<n.length){if(0!==t&&t%2==1)""!==e&&s.push(e);else if(e){var i=e.trim().replace(/ã/g," ").split(" ");s=s.concat($.grep(i,function(e){return""!==e}))}}else{i=e.trim().replace(/ã/g," ").split(" ");s=s.concat($.grep(i,function(e){return""!==e}))}});for(var a=0;a<s.length;a++)if(""!==s[a]){var r="";switch(Number(e.wordType)){case 1:r=s[a].replace(/[-\/\\^$+?.()|[\]{}]/g,"\\$&").replace(/\*/g,".*"),o=new RegExp("^"+r+"$").test(i);break;case 2:r=s[a].replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),o=new RegExp(r).test(i)}if(o&&2===e.containsType)break;if(!o&&1===e.containsType)break}else o=!0;if(!o)return!1;var c=[];n.split('"').forEach(function(e,t,n){if(1<n.length){if(0!==t&&t%2==1)""!==e&&c.push(e);else if(e){var i=e.trim().replace(/ã/g," ").split(" ");c=c.concat($.grep(i,function(e){return""!==e}))}}else{i=e.trim().replace(/ã/g," ").split(" ");c=c.concat($.grep(i,function(e){return""!==e}))}});var l=!1;for(a=0;a<c.length;a++)if(""!==c[a]){r="";switch(Number(e.wordType)){case 1:r=c[a].replace(/[-\/\\^$+?.()|[\]{}]/g,"\\$&").replace(/\*/g,".*"),l=new RegExp("^"+r+"$").test(i);break;case 2:r=c[a].replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),l=new RegExp(r).test(i)}if(!l&&1===e.exclusionsType){o=!0;break}if(l&&1===e.exclusionsType&&a===c.length-1){o=!1;break}if(l&&2===e.exclusionsType){o=!1;break}if(!l&&2===e.exclusionsType&&a===c.length-1){o=!0;break}}else if(1<c.length&&a===c.length-1){o=1!==e.exclusionsType;break}return o}},judge:{speechContentRegEx:[],speechContentIdList:[],pageScrollPositionContents:{},pageScrollPositionTriggered:{},elementClickContents:{},elementClickTriggered:{},stayTime:function(e,t){if(!("stayTimeCheckType"in e&&"stayTimeType"in e&&"stayTimeRange"in e))return t(!0,null);var n=0;switch(Number(e.stayTimeType)){case 1:n=1e3*Number(e.stayTimeRange);break;case 2:n=1e3*Number(e.stayTimeRange)*60;break;case 3:n=1e3*Number(e.stayTimeRange)*60*60}if(1===Number(e.stayTimeCheckType))t(!1,n);else{var i=Number(userInfo.pageTime)-Number(userInfo.time);i<=n?t(!1,n-i):t(!0,null)}},stayCount:function(e,t){if(!("visitCntCond"in e&&"visitCnt"in e))return t(!0,null);sinclo.trigger.common.isValidStayCountCondition(e,userInfo.getStayCount())?t(!1,0):t(!0,null)},page:function(e,t){if(!1 in e||!1 in e||!1 in e||!1 in e||!("stayPageCond"in e)||!("targetName"in e))return t(!0,null);var n=1===Number(e.targetName)?common.title():location.href;sinclo.trigger.common.pregContainsAndExclsion({wordType:Number(e.stayPageCond),containsType:Number(e.keyword_contains_type),exclusionsType:Number(e.keyword_exclusions_type)},e.keyword_contains,e.keyword_exclusions,n)?t(!1,0):t(!0,null)},dayTime:function(e,t){function n(e){var t={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};return e in t?t[e]:null}function i(e){return new RegExp(/^(0{0,1}[0-9]{1}|1[0-9]{1}|2[0-3]{1}):([0-5]{1}[0-9]{1})$/).test(e)}function o(e){var t=new Date(e);return Date.parse(t)}"settingMode"in e||(e.settingMode=1);var s,a,r,c,l,d,p,u,g,h,m,f=new Date,v=$.ajax({async:!1}).getResponseHeader("Date"),b=new Date(v),y=(new Date).getTimezoneOffset(),x=b.toUTCString(),_=x.replace("GMT",""),w=new Date(_),k=w.getHours();w.setHours(k+y/-60);var T=Date.parse(x),S=w,I=new Date(w);I.setDate(I.getDate()+1),a=S.getDay(),r=Math.abs(6<a+1?0:a+1),s=S.getFullYear()+"/"+(S.getMonth()+1)+"/"+S.getDate()+" ";var A=I.getFullYear()+"/"+(I.getMonth()+1)+"/"+I.getDate()+" ",C=0,B=[];switch(Date.parse(S),parseInt(e.settingMode)){default:case 1:if(!("day"in e&&"timeSetting"in e))return t(!0,null);if(!(1!==Number(e.timeSetting)||"startTime"in e&&"endTime"in e))return t(!0,null);c=Object.keys(e.day);for(var N=0;c.length>N;N++)if(e.day[c[N]]){if(null!==(l=n(c[N]))){if(l===a||l===r){if(l===a&&2===Number(e.timeSetting))return t(!1,0);if(2!==Number(e.timeSetting)){if(!i(e.startTime)||!i(e.endTime))return t(!0,null);if(d=o(s+e.startTime),p=o(s+e.endTime),u=new Date(d).getHours(),g=o(A+e.startTime)-T,C=d-T,l===a&&d<=T&&T<p)return t(!1,0);if(l===a&&T<=d&&T<p&&C<=36e5)return t(!1,C);if(l===r&&g<=36e5&&0==u)return t(!1,g)}else if(c.length-1===N)return t(!0,null)}else if(c.length-1===N)return t(!0,null)}else if(c.length-1===N)return t(!0,null)}else if(c.length-1===N)return t(!0,null);return t(!0,null);case 2:if(!("mode2"in e))return t(!0,null);if(e.mode2.length<=0)return t(!0,null);for(B=[],N=0;e.mode2.length>N;N++){if(!("startTime"in(h=e.mode2[N])&&"endTime"in h&&"startDate"in h&&"endDate"in h))return t(!0,null);if(!i(h.startTime)||!i(h.endTime))return t(!0,null);var D=o(h.startDate+" "+h.startTime),M=o(h.endDate+" "+h.endTime);if(C=D-T,D<=T&&T<M)return t(!1,0);T<D&&T<M&&C<=36e5&&B.push(C)}return 0<B.length?t(!1,Math.min.apply(Math,B)):t(!0,null);case 3:B=[];var F=[];if(!("mode3"in e))return t(!0,null);if(e.mode3.length<=0)return t(!0,null);for(N=0;e.mode3.length>N;N++){if(!("startDate"in(h=e.mode3[N])&&"endDate"in h))return t(!0,null);if(!("startTime"in h&&"endTime"in h))return t(!0,null);if(!("day"in h))return t(!0,null);if(!i(h.startTime)||!i(h.endTime))return t(!0,null);d=new Date(h.startDate),p=new Date(h.endDate);var E=o(s+h.startTime),O=o(s+h.endTime);u=new Date(E).getHours();var P=d<=f&&f<=p;m=E<=T&&T<O,C=E-T,g=o(A+h.startTime)-T;var W=o(h.startDate+" "+h.startTime)-T;if(P||0===u&&W<=36e5&&f<d&&f<=p){c=Object.keys(h.day);for(var H=0;c.length>H;H++)if(h.day[c[H]]&&null!==(l=n(c[H]))&&(l===a||l===r)){if(l===a&&m)return t(!1,0);l===a&&T<E&&T<O&&C<=36e5?B.push(C):l===r&&g<=36e5&&0==u&&F.push(g)}}}return 0<B.length?t(!1,Math.min.apply(Math,B)):0<F.length?(minOutTime=Math.min.apply(Math,F),t(!1,minOutTime)):t(!0,null)}},referrer:function(e,t){return!1 in e||!1 in e||!1 in e||!1 in e||!("referrerCond"in e)?t(!0,null):""===userInfo.referrer?t(!0,null):void(sinclo.trigger.common.pregContainsAndExclsion({wordType:Number(e.referrerCond),containsType:Number(e.keyword_contains_type),exclusionsType:Number(e.keyword_exclusions_type)},e.keyword_contains,e.keyword_exclusions,userInfo.referrer)?t(!1,0):t(!0,null))},searchWord:function(e,t){return"keyword"in e&&"searchCond"in e?null===userInfo.searchKeyword&&3!==Number(e.searchCond)?t(!0,null):null===userInfo.searchKeyword&&3===Number(e.searchCond)?t(!1,0):void(sinclo.trigger.common.pregMatch(e.searchCond,e.keyword,userInfo.searchKeyword)?t(!1,0):t(!0,null)):t(!0,null)},setMatchSpeechContent:function(e,t,n,i){if(!1 in n||!1 in n||!1 in n||!1 in n||!("speechContentCond"in n))return!1;this.speechContentRegEx.push({id:t,typeObj:{wordType:Number(n.speechContentCond),containsType:Number(n.keyword_contains_type),exclusionsType:Number(n.keyword_exclusions_type)},keyword_contains:n.keyword_contains,keyword_exclusions:n.keyword_exclusions,delay:n.triggerTimeSec,conditionType:e,callback:i}),this.speechContentIdList.push(t)},setMatchScrollContents:function(e,t,n,i){"pageScrollPosition"in n&&("percentPosition"in n?(sinclo.trigger.judge.pageScrollPositionContents[t]={id:t,pageScrollPosition:n.pageScrollPosition,percentPosition:n.percentPosition,callback:i},1===Number(e)&&sinclo.chatApi.saveScrollPositionTriggered(t,!1)):"cssSelector"in n&&(sinclo.trigger.judge.pageScrollPositionContents[t]={id:t,pageScrollPosition:n.pageScrollPosition,cssSelector:n.cssSelector,callback:i},1===Number(e)&&sinclo.chatApi.saveScrollPositionTriggered(t,!1)))},setMatchEleClickContents:function(e,t,n,i){"elementClickCssSelector"in n&&(sinclo.trigger.judge.elementClickContents[t]={id:t,elementClickCssSelector:n.elementClickCssSelector,callback:i}),1===Number(e)&&sinclo.chatApi.saveElementClickTriggered(t,!1)},matchAllSpeechContent:function(e,t){var n=!1;if(window.sincloInfo.contract.useCogmoAttendApi||scl_check.isset(sinclo_storage.s.get("operatorEntered"))&&"false"!==sinclo_storage.s.get("operatorEntered")||sinclo.scenarioApi.isProcessing()||sinclo.scenarioApi.isWaitingInput()||!(0<this.speechContentRegEx.length))t(n);else{for(var i=0;i<this.speechContentRegEx.length;i++)sinclo.chatApi.triggeredAutoSpeechExists(this.speechContentRegEx[i].id)||sinclo.trigger.timerTriggeredList.hasOwnProperty(this.speechContentRegEx[i].id)&&!sinclo.trigger.timerTriggeredList[this.speechContentRegEx[i].id]||sinclo.chatApi.triggeredScrollPosition(this.speechContentRegEx[i].id)&&sinclo.chatApi.triggeredElementClick(this.speechContentRegEx[i].id)&&sinclo.trigger.common.pregContainsAndExclsion(this.speechContentRegEx[i].typeObj,this.speechContentRegEx[i].keyword_contains,this.speechContentRegEx[i].keyword_exclusions,e)&&(this.speechContentRegEx[i].callback(!1,this.speechContentRegEx[i].delay),n=!0);t(n)}},pageOfFirst:function(e,t){if(!1 in e||!1 in e||!1 in e||!1 in e||!("stayPageCond"in e)||!("targetName"in e))return t(!0,null);var n=1===Number(e.targetName)?userInfo.prev[0].title:userInfo.prev[0].url;sinclo.trigger.common.pregContainsAndExclsion({wordType:Number(e.stayPageCond),containsType:Number(e.keyword_contains_type),exclusionsType:Number(e.keyword_exclusions_type)},e.keyword_contains,e.keyword_exclusions,n)?t(!1,0):t(!0,null)},pageOfPrevious:function(e,t){if(!1 in e||!1 in e||!1 in e||!1 in e||!("stayPageCond"in e)||!("targetName"in e))return t(!0,null);var n=userInfo.prev.length-2;if(n<0)t(!0,null);else{var i=1===Number(e.targetName)?userInfo.prev[n].title:userInfo.prev[n].url;sinclo.trigger.common.pregContainsAndExclsion({wordType:Number(e.stayPageCond),containsType:Number(e.keyword_contains_type),exclusionsType:Number(e.keyword_exclusions_type)},e.keyword_contains,e.keyword_exclusions,i)?t(!1,0):t(!0,null)}},operating_hours:function(e,t){if(!("operatingHoursTime"in e))return t(!0,null);var n="",i="",o=(e.now,e.nowDay),s=(e.dateParse,e.date),a=e.today,r={},c={};if(1==e.type){l=(l={0:"sun",1:"mon",2:"tue",3:"wed",4:"thu",5:"fri",6:"sat"})[o],r=e.everyday[l],c=e.everyday.pub}else{var l={0:"sun",1:"mon",2:"tue",3:"wed",4:"thu",5:"fri",6:"sat"};if(1==o||2==o||3==o||4==o||5==o)l="week";else l="weekend";r=e.weekly[l],c=e.weekly.weekpub}var d=e.publicHoliday,p=window.userInfo.pageTime,u=new Date(p).toUTCString().replace("GMT",""),g=new Date(u),h=g.getHours();g.setHours(h+9);var m=Date.parse(g);if(1==e.operatingHoursTime){for(var f=0;f<d.length;f++)if(a==d[f].month+"/"+d[f].day){if(n=!0,""==c[0].start||""==c[0].end)return void t(!0,null);for(var v=0;v<c.length;v++){var b=null;if("24:00"==(y=c[v].end)?(b=new Date(s)).setDate(b.getDate()+1):b=new Date(s+y),Date.parse(new Date(s+c[v].start))<=m&&m<Date.parse(b))return void t(!(i=!0),0)}}if(1==n&&1!=i)return void t(!0,null);if(1!=n)if(""===r[0].start&&""===r[0].end)t(!0,null);else{for(v=0;v<r.length;v++){b=null;if("24:00"==(y=r[v].end)?(b=new Date(s)).setDate(b.getDate()+1):b=new Date(s+y),Date.parse(new Date(s+r[v].start))<=m&&m<Date.parse(b))return void t(!(i=!0),0)}1!=i&&t(!0,null)}}else if(2==e.operatingHoursTime){for(f=0;f<d.length;f++)if(a==d[f].month+"/"+d[f].day){if(n=!0,""==c[0].start||""==c[0].end)return void t(!1,0);for(v=0;v<c.length;v++){b=null;if("24:00"==(y=c[v].end)?(b=new Date(s)).setDate(b.getDate()+1):b=new Date(s+y),Date.parse(new Date(s+c[v].start))<=m&&m<Date.parse(b))return void t(i=!0,null)}}if(1==n&&1!=i)return void t(!1,0);if(1!=n)if(""===r[0].start&&""===r[0].end)t(!1,0);else{for(v=0;v<r.length;v++){var y;b=null;if("24:00"==(y=r[v].end)?(b=new Date(s)).setDate(b.getDate()+1):b=new Date(s+y),Date.parse(new Date(s+r[v].start))<=m&&m<Date.parse(b))return void t(i=!0,null)}1!=i&&t(!1,0)}}},visitorDevice:function(e,t){if(!("pc"in e&&"smartphone"in e&&"tablet"in e))return t(!0,null);var n=scl_check.getDevice();"pc"===n&&e.pc||"smartphone"===n&&e.smartphone||"tablet"===n&&e.tablet?t(!1,0):t(!0,null)},pageScrollPosition:function(e,t){if(!("pageScrollPosition"in e))return t(!0,null);if(1===Number(e.pageScrollPosition)){if(!("percentPosition"in e))return t(!0,null);var n=Number(e.percentPosition),i=document.documentElement.scrollHeight,o=Math.round(i*(n/100));if(Math.round(window.scrollY+window.innerHeight)<o)return t(!0,null)}else if(2===Number(e.pageScrollPosition)){if(!("cssSelector"in e))return t(!0,null);var s=document.querySelector(e.cssSelector);if(!s)return t(!0,null);var a=s.getBoundingClientRect().top+window.scrollY;if(window.scrollY+window.innerHeight<a)return t(!0,null)}t(!1,0)}}},scenarioApi:{_validation:{1:".+",2:"[0-9]+",3:'^(([^<>()\\[\\]\\.,;:\\s@"]+(\\.[^<>()\\[\\]\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$',4:"^(0|\\+)(\\d{9,}|[\\d-]{11,})"},_validChars:{1:".+","1_lf":"(.|\\r\\n|\\n|\\r)+",2:"[0-9]+","2_lf":"([0-9]|\\r\\n|\\n|\\r)+",3:"[abcdefg.hijklmnopqrstuvwxyz!#$%&'*/=?^_+-`{|}~0123456789)]+","3_lf":"([abcdefg.hijklmnopqrstuvwxyz!#$%&'*/=?^_+-`{|}~0123456789]|\\r\\n|\\n|\\r)+",4:"([0-9]|-)+","4_lf":"([0-9]|-|\\r\\n|\\n|\\r)+"},_lKey:{beforeTextareaOpened:"s_beforeTextareaOpened",scenarioBase:"s_currentdata",scenarioId:"s_id",processing:"s_processing",waitingProcess:"s_waitingProcess",waitingInput:"s_waiting",variables:"scl_s_variables",messages:"s_messages",allowSave:"s_allowSave",scenarios:"s_scenarios",scenarioLength:"s_scenarioLength",currentScenario:"s_currentScenario",currentScenarioSeqNum:"s_currentScenarioSeqNum",storedVariableKeys:"scl_s_storedVariableKeys",sendCustomerMessageType:"s_sendCustomerMessageType",showSequenceSet:"s_showSequenceList",scenarioMessageType:"s_scenarioMessageType",previousChatMessageLength:"s_prevChatMessageLength",stackReturnSettings:"s_stackReturnSettings",isSentMail:"s_isSentMail",runScenarioPageTitle:"s_runScenarioPageTitle",runScenarioPageURL:"s_runScenarioPageURL"},defaultVal:{s_id:0,s_currentdata:{},s_processing:{},s_waiting:!1,s_waitingProcess:!1,s_messages:[],s_allowSave:!1,s_scenarios:{},s_scenarioLength:0,s_currentScenario:0,s_currentScenarioSeqNum:0,s_storedVariableKeys:[],s_sendCustomerMessageType:1,s_showSequenceList:{},s_scenarioMessageType:3,s_stackReturnSettings:{},s_targetChatId:[],s_isSentMail:!1},_isReload:!1,_doingTimer:null,isCanceled:!1,_events:{inputCompleted:"sinclo:scenario:inputComplete",fileUploaded:"sinclo:scenario:fileUploaded"},_actionType:{speakText:"1",hearing:"2",selection:"3",mail:"4",anotherScenario:"5",callExternalApi:"6",receiveFile:"7",getAttributeValue:"8",sendFile:"9",branchOnCond:"10",addCustomerInformation:"11",bulkHearing:"12",addLeadInformation:"13",controlVariable:"14",reservation:"15",inputForm:"16",changeAddress:"70"},set:function(e,t){var n=sinclo.scenarioApi,i={};e===n._lKey.variables?sinclo_storage.l.set(n._lKey.variables,JSON.stringify(t)):e===n._lKey.storedVariableKeys?sinclo_storage.l.set(n._lKey.storedVariableKeys,JSON.stringify(t)):((i=n._getBaseObj())[e]=t,n._setBaseObj(i))},get:function(e){var t=sinclo.scenarioApi,n={};if(e===t._lKey.variables)return n={},(n=sinclo_storage.l.get(t._lKey.variables)?sinclo_storage.l.get(t._lKey.variables):n)&&"string"==typeof n?JSON.parse(n):n;if(e!==t._lKey.storedVariableKeys)return(n=t._getBaseObj())[e]?n[e]:t.defaultVal[e];var i;return(i=sinclo_storage.l.get(t._lKey.storedVariableKeys)?sinclo_storage.l.get(t._lKey.storedVariableKeys):[])&&"string"==typeof i?JSON.parse(i):i},unset:function(e){var t=sinclo.scenarioApi,n=t._getBaseObj();delete n[e],t._setBaseObj(n)},unsetSequenceList:function(e){var t=sinclo.scenarioApi,n=t._getBaseObj();delete n[t._lKey.showSequenceSet][e],t._setBaseObj(n)},reset:function(){sinclo.scenarioApi._unsetBaseObj()},exists:function(){var e=sinclo.scenarioApi._getBaseObj();return 0!==Object.keys(e).length},init:function(e,t){var n=sinclo.scenarioApi;n._resetDefaultVal(),n.isProcessing()?n._isReload=!0:(n.isCanceled=!1,n._unsetUploadedFileData(),n._setBaseObj({}),n.set(n._lKey.beforeTextareaOpened,sinclo_storage.l.get("textareaOpend")),n.set(n._lKey.scenarioId,e),n.set(n._lKey.scenarios,t),n.set(n._lKey.scenarioLength,Object.keys(t).length),n.set(n._lKey.currentScenario,t[0]),n.set(n._lKey.currentScenarioSeqNum,0),scl_check.isset(n.get(n._lKey.storedVariableKeys))||n.set(n._lKey.storedVariableKeys,[]),n.set(n._lKey.sendCustomerMessageType,1),n.set(n._lKey.allowSave,n._getChatSaveFlg()),n.set(n._lKey.showSequenceSet,{}),n.set(n._lKey.previousChatMessageLength,0),n.set(n._lKey.stackReturnSettings,{}),n.set(n._lKey.isSentMail,!1),n.set(n._lKey.runScenarioPageTitle,document.title),n.set(n._lKey.runScenarioPageURL,location.href)),sinclo.diagramApi.common.isProcessing()&&scl_check.isset(sinclo.diagramApi.sinclo_storage.getCurrentNode())&&sinclo.diagramApi.callScenario.setCorrectNode()},_getChatSaveFlg:function(){return sinclo.chatApi.saveFlg},_resetDefaultVal:function(){var e=sinclo.scenarioApi;e.defaultVal={s_id:0,s_currentdata:{},s_processing:{},s_waiting:!1,s_waitingProcess:!1,s_variables:{},s_messages:[],s_allowSave:e._getChatSaveFlg(),s_scenarios:{},s_scenarioLength:0,s_currentScenario:0,s_currentScenarioSeqNum:0,s_storedVariableKeys:[],s_sendCustomerMessageType:1,s_showSequenceList:{},s_scenarioMessageType:3,s_stackReturnSettings:{},s_isSentMail:!1}},begin:function(e,t,n){if(this._disablePreviousRadioButton(),sinclo_client_log.client_log("scenarioApi.begin.beforeSaveProcessingState",{}),this._saveProcessingState(!0),this._process(),scl_check.isIE()&&document.hasFocus()&&!n||!scl_check.isIE()&&!n){var i={id:e,scenarioObj:t};this.syncScenarioData.sendDetail("startScenario",i)}this._isReload=!1},beginImmediate:function(){this._process()},_end:function(e){try{if(!JSON.parse(sinclo_storage.l.get(sinclo.scenarioApi._lKey.scenarioBase)).s_id)return}catch(e){return}setTimeout(function(){common.chatBotTypingRemove()},850),sinclo.diagramApi.callScenario.isWaitingEndScenario()||common.chatBotTypingTimerClear();var t=sinclo.scenarioApi;t.syncScenarioData.sendDetail("endScenario");var n=t.get(t._lKey.beforeTextareaOpened);sinclo.chatApi.forceHideMiniMessageArea=!0,sinclo.scenarioApi._hearing._disableGrantCancelAbleFlg=!1,sinclo.scenarioApi._hearing._forceRadioTypeFlg=!1,sinclo.scenarioApi._hearing._endValidInputWatcher(),sinclo.chatApi.hideMiniMessageArea(),t._saveProcessingState(!1),sinclo.chatApi.removeAllEvent(),sinclo.chatApi.initEvent();var i="close"===n?"2":"1";t._handleChatTextArea(i),$("#sincloChatMessage").off("input",sinclo._skipLabelHandler),$("#miniSincloChatMessage").off("input",sinclo._skipLabelHandler),$("#sincloChatSendBtn").text("éä¿¡"),$("#miniSincloChatSendBtn").text("éä¿¡"),t._hearing._disableAllHearingMessageInput(),t._resetDefaultVal(),t._enablePreviousRadioButton(),t._unsetBaseObj(),t._unsetUploadedFileData(),t.setPlaceholderMessage(t.getPlaceholderMessage()),sinclo.diagramApi.callScenario.checkCallScenario()&&sinclo.diagramApi.callScenario.endCallScenario(),!e&&sinclo.diagramApi.callScenario.isWaitingEndScenario()&&(sinclo.chatApi.scDown(),common.chatBotTyping({forceWaitAnimation:!0}).then(function(){sinclo.diagramApi.callScenario.goToNextNode()}))},isProcessing:function(){var e=sinclo.scenarioApi,t=!1,n=e.get(e._lKey.processing);return null===n||"true"!==n&&!0!==n||(t=!0),t},restartOnAnotherTab:function(){sinclo.scenarioApi;sinclo.scenarioApi.isProcessing()&&setTimeout(function(){sinclo.scenarioApi._cancel(),sinclo.scenarioApi.init(null,null),sinclo.scenarioApi.begin(null,null,!1)},100)},isWaitingInput:function(){var e=sinclo.scenarioApi,t=!1,n=e.get(e._lKey.waitingInput);null===n||"true"!==n&&!0!==n||(t=!0),!scl_check.isIE()||t||null!==sinclo_storage.s.get("Waiting_on_IE")&&"true"===sinclo_storage.s.get("Waiting_on_IE").toLowerCase()&&(t=!0);return t},isScenarioLFDisabled:function(){var e=sinclo.scenarioApi;return e.isProcessing()&&e._hearing.isHearingMode()&&e._hearing.isLFModeDisabled()},triggerInputWaitComplete:function(e){$(document).trigger(this._events.inputCompleted,[e])},geScenarioMessageType:function(){return sinclo.scenarioApi.get(this._lKey.sendCustomerMessageType)},getPlaceholderMessage:function(){var e=sinclo.scenarioApi,t="";if(e._hearing.isHearingMode()){var n=e._hearing._getCurrentHearingProcess(),i="2";switch(n.uiType?i=String(n.uiType):n.inputLFType&&(i=n.inputLFType),i){case"1":t="ã¡ãã»ã¼ã¸ãå¥åãã¦ãã ãã";break;case"2":t="ã¡ãã»ã¼ã¸ãå¥åãã¦ãã ãã",scl_check.smartphone()||(t+="\nï¼Enterã§æ¹è¡/Shift+Enterã§éä¿¡ï¼")}}return t},setPlaceholderMessage:function(e){""!==e&&sinclo.chatApi.setPlaceholderMessage(e)},getCustomerMessageType:function(){return sinclo.scenarioApi.get(this._lKey.sendCustomerMessageType)},getInputType:function(){return sinclo.scenarioApi._hearing.getInputType()},getStoredMessage:function(){var e=sinclo.scenarioApi,t=e.get(e._lKey.messages);return t||[]},setWaitingProcess:function(){var e=sinclo.scenarioApi;e.set(e._lKey.waitingProcess,!0)},unsetWaitingProcess:function(){var e=sinclo.scenarioApi;e.set(e._lKey.waitingProcess,!1)},isWaitingProcess:function(){var e=sinclo.scenarioApi,t=e.get(e._lKey.waitingProcess),n=!1;return null===t||"true"!==t&&!0!==t||(n=!0),n},_getBaseObj:function(){var e=sinclo.scenarioApi,t=sinclo_storage.l.get(e._lKey.scenarioBase);return t?JSON.parse(t):{}},_setBaseObj:function(e){var t=sinclo.scenarioApi;sinclo_storage.l.set(t._lKey.scenarioBase,JSON.stringify(e))},_unsetBaseObj:function(){var e=sinclo.scenarioApi;sinclo_storage.l.unset(e._lKey.scenarioBase)},_unsetUploadedFileData:function(){var e=sinclo.scenarioApi,t=e.get(e._lKey.variables);scl_check.isset(t)&&scl_check.isset(t[e._sendFile._downloadUrlKey])&&(delete t[e._sendFile._downloadUrlKey],e.set(e._lKey.variables,t))},_getCurrentScenario:function(){var e=sinclo.scenarioApi;return e.get(e._lKey.currentScenario)},_saveMessage:function(e){var t=sinclo.scenarioApi,n=t.getStoredMessage();n.push(e),t.set(t._lKey.messages,n)},_disablePreviousRadioButton:function(){var e=sinclo.scenarioApi,t=$("sinclo-chat").find('div > li[class*="sinclo"]'),n=e.get(e._lKey.previousChatMessageLength);if(e.isProcessing()||(n=t.length,e.set(e._lKey.previousChatMessageLength,n)),1!==t.length)for(var i=0;i<n;i++){$(t[i]).find('[type="radio"]').each(function(e,t){var n=$(t).attr("name");$("input[name="+n+'][type="radio"]').prop("disabled",!0).addClass("previous-selectable-button").parent().css("opacity",.5)}),$(t[i]).find(".sinclo-button-ui").prop("disabled",!0).css("background-color","#DADADA").addClass("previous-selectable-button")}},_enablePreviousRadioButton:function(e){var t=sinclo.scenarioApi,n=$("sinclo-chat").find('div:not(.sinclo-scenario-msg) > li[class*="sinclo"]');void 0===e&&(e=t.get(t._lKey.previousChatMessageLength));for(var i=0;i<e;i++)$(n[i]).find('[type="radio"]').each(function(e,t){var n=t.name;$("input[name="+n+'][type="radio"]').prop("disabled",!1).parent().css("opacity",1)}),$(n[i]).find(".sinclo-button-ui").prop("disabled",!1).css("background-color","")},_process:function(e){var t=sinclo.scenarioApi;if(!t.isCanceled)switch(String(t.get(t._lKey.currentScenario).actionType)!==t._actionType.bulkHearing&&setTimeout(function(){common.chatBotTyping({forceWaitAnimation:!0})},800),String(t.get(t._lKey.currentScenario).actionType)){case t._actionType.speakText:t.set(t._lKey.scenarioMessageType,21),setTimeout(function(){t._speakText()},0===Number(t.get(t._lKey.currentScenarioSeqNum))?2e3:100);break;case t._actionType.hearing:t._hearing._init(t,t.get(t._lKey.currentScenario)),t.syncScenarioData.sendDetail("startHearing",t.get(t._lKey.currentScenario)),setTimeout(function(){t._hearing._process(e)},0===Number(t.get(t._lKey.currentScenarioSeqNum))?2e3:100);break;case t._actionType.selection:t._selection._init(t,t.get(t._lKey.currentScenario)),t._selection._process(),t.set(t._lKey.sendCustomerMessageType,13),t.set(t._lKey.scenarioMessageType,23);break;case t._actionType.mail:t._mail._init(t,t.get(t._lKey.currentScenario)),t._mail._process();break;case t._actionType.anotherScenario:t._anotherScenario._init(t),t._anotherScenario._process();break;case t._actionType.callExternalApi:t._callExternalApi._init(t),t._callExternalApi._process();break;case t._actionType.receiveFile:t.set(t._lKey.scenarioMessageType,27),t._receiveFile._init(t),t._receiveFile._process();break;case t._actionType.getAttributeValue:t._getAttributeValue._init(t),t._getAttributeValue._process();break;case t._actionType.sendFile:t.set(t._lKey.sendCustomerMessageType,19),t._sendFile._init(t),t._sendFile._process();break;case t._actionType.branchOnCond:t.set(t._lKey.scenarioMessageType,21),t._branchOnCond._init(t),t._branchOnCond._process();break;case t._actionType.addCustomerInformation:t._addCustomerInformation._init(t),t._addCustomerInformation._process();break;case t._actionType.bulkHearing:t.syncScenarioData.sendDetail("startBulkHearing",t.get(t._lKey.currentScenario)),t._bulkHearing._init(t),t._bulkHearing._process(),t.set(t._lKey.sendCustomerMessageType,30);break;case t._actionType.addLeadInformation:t._addLeadInformation._init(t),t._addLeadInformation._process();break;case t._actionType.controlVariable:t._controlVariable._init(t),t._controlVariable._process();break;case t._actionType.reservation:t._reservation._init(t),0<t._reservation._getHearingLength()?(t._reservation.hasState()||t._reservation.changeState(t._reservation._state.hearing),t._hearing._init(t,t.get(t._lKey.currentScenario)),t.syncScenarioData.sendDetail("startHearing",t.get(t._lKey.currentScenario)),t._hearing._process(e)):(t._hearing._init(t,t.get(t._lKey.currentScenario)),t._reservation.hasState()||t._reservation.changeState(t._reservation._state.hearing),t._reservation._process());break;case t._actionType.inputForm:t.set(t._lKey.sendCustomerMessageType,56),t.set(t._lKey.scenarioMessageType,57),t._inputForm._init(t),t._inputForm._process();break;case t._actionType.changeAddress:t._changeAddress._init(t),t._changeAddress._process()}},_scenarioSeqIsUpdated:!1,_isTheFiestScenaroAndSequence:function(){var e=sinclo.scenarioApi,t=!1;return e.get(e._lKey.currentScenario).actionType===e._actionType.speakText||e.get(e._lKey.currentScenario).actionType===e._actionType.selection||e.get(e._lKey.currentScenario).actionType===e._actionType.mail?t=0===e.get(e._lKey.currentScenarioSeqNum):e.get(e._lKey.currentScenario).actionType===e._actionType.hearing&&(t=0===e.get(e._lKey.currentScenarioSeqNum)&&e._hearing._isTheFirst()),t},_goToNextScenario:function(e){var t=sinclo.scenarioApi;return e||Number(t.get(t._lKey.currentScenarioSeqNum))!==Number(t.get(t._lKey.scenarioLength))-1?(e||t.set(t._lKey.currentScenarioSeqNum,Number(t.get(t._lKey.currentScenarioSeqNum))+1),t.set(t._lKey.currentScenario,t.get(t._lKey.scenarios)[Number(t.get(t._lKey.currentScenarioSeqNum))]),5==t.get(t._lKey.scenarios)[Number(t.get(t._lKey.currentScenarioSeqNum))].actionType||t.syncScenarioData.sendDetail("changeScenarioSeq",t.get(t._lKey.currentScenario)),!0):(t._end(),!1)},_handleChatTextArea:function(e){switch(e){case"1":sinclo.displayTextarea(),sinclo_storage.l.set("textareaOpend","open");break;case"2":sinclo.hideTextarea(),sinclo_storage.l.set("textareaOpend","close")}},_showMessage:function(e,t,n,i,o){sinclo_client_log.client_log("scenarioApi._showMessage",{type:e,message:t,categoryNum:n});var s=sinclo.scenarioApi;if(t=s._replaceVariable(t),s._isShownMessage(s.get(s._lKey.currentScenarioSeqNum),n))o();else{var a=2===common.getWidgetSettings().showAutomessageName?"":common.getWidgetSettings().subTitle,r="sinclo_re";if((e==s._actionType.hearing||e==s._actionType.selection||e==s._actionType.callExternalApi&&3===Number(s._getCurrentScenario().externalType)||e==s._actionType.reservation)&&(r="hearing_msg "+r),e==s._actionType.hearing||e==s._actionType.selection||e==s._actionType.callExternalApi&&3===Number(s._getCurrentScenario().externalType)||e==s._actionType.sendFile||e==s._actionType.reservation||common.chatBotTypingCall({forceWaitAnimation:!0}),0<=String(n).indexOf("delete_"))sinclo.chatApi.createMessageUnread({cn:r+n,message:t,name:a,chatId:0,isBot:!0},!0);else{var c=s._getCurrentScenario();if(c.confirmRadioStyle){e=2;var l=common.getWidgetSettings().mainColor;c.confirmDesign.radioActiveColor=l,c.confirmDesign.radioBorderColor=l,c.confirmDesign.radioEntireBackgroundColor=l,c.confirmDesign.radioEntireBackgroundColor=sinclo.chatApi.getRawColor(l,.5),c.confirmDesign.radioEntireActiveColor=l;var d={radioStyle:String(c.confirmUiType),customDesign:c.confirmDesign,options:[c.success,c.cancel]};switch(Number(c.confirmRadioStyle)){case 1:sinclo.chatApi.addRadioButton(r,sinclo.scenarioApi._replaceVariable(c.confirmMessage),d);break;case 2:sinclo.chatApi.addButtonUI(r,sinclo.scenarioApi._replaceVariable(c.confirmMessage),d);break;default:sinclo.chatApi.createMessageUnread({cn:r,message:t,name:a,chatId:0,isBot:!0},!0)}d.confirmRadioStyle=c.confirmRadioStyle,d.confirmUiType=c.confirmUiType,t=JSON.stringify({message:sinclo.scenarioApi._replaceVariable(c.confirmMessage),settings:d})}else sinclo.chatApi.createMessageUnread({cn:r,message:t,name:a,chatId:0,isBot:!0},!0)}sinclo.chatApi.handleBrowserZoom(),s._saveShownMessage(s.get(s._lKey.currentScenarioSeqNum),n),sinclo.chatApi.scDown(),s._putScenarioMessage(e,t,n,i,o)}},_showRadioButton:function(e,t){var n=sinclo.scenarioApi;if(e.message=n._replaceVariable(e.message),n._isShownMessage(n.get(n._lKey.currentScenarioSeqNum),e.categoryNum))t();else{2===common.getWidgetSettings().showAutomessageName||common.getWidgetSettings().subTitle;sinclo.chatApi.addRadioButton("sinclo_re",e.message,e.settings,e.storedValue),n._hearing._handleChatTextArea(e.uiType,e.required),n._saveShownMessage(n.get(n._lKey.currentScenarioSeqNum),e.categoryNum),sinclo.chatApi.scDown(),n._putHearingRadioButton(e,t)}},_showPullDown:function(e,t){var n=sinclo.scenarioApi;if(e.message=n._replaceVariable(e.message),n._isShownMessage(n.get(n._lKey.currentScenarioSeqNum),e.categoryNum))t();else{var i=2===common.getWidgetSettings().showAutomessageName?"":common.getWidgetSettings().subTitle;sinclo.chatApi.addPulldown("sinclo_re",e.message,i,e.settings,e.storedValue),n._hearing._handleChatTextArea(e.uiType,e.required),n._saveShownMessage(n.get(n._lKey.currentScenarioSeqNum),e.categoryNum),sinclo.chatApi.scDown(),n._putHearingPulldown(e,t)}},_showCarousel:function(e,t){var n=sinclo.scenarioApi;if(e.message=n._replaceVariable(e.message),n._isShownMessage(n.get(n._lKey.currentScenarioSeqNum),e.categoryNum))t();else{2===common.getWidgetSettings().showAutomessageName||common.getWidgetSettings().subTitle;sinclo.chatApi.addCarousel("",e.message,e.settings,e.storedValue),n._hearing._handleChatTextArea(e.uiType,e.required),n._saveShownMessage(n.get(n._lKey.currentScenarioSeqNum),e.categoryNum),sinclo.chatApi.scDown(),n._putHearingCarousel(e,t)}},_showCalendar:function(e,t){var n=sinclo.scenarioApi;e.message=n._replaceVariable(e.message),n._isShownMessage(n.get(n._lKey.currentScenarioSeqNum),e.categoryNum)?t():(sinclo.chatApi.addCalendar("sinclo_re",e.message,e.settings,e.storedValue),n._hearing._handleChatTextArea(e.uiType,e.required),n._saveShownMessage(n.get(n._lKey.currentScenarioSeqNum),e.categoryNum),sinclo.chatApi.scDown(),n._putHearingCalendar(e,t))},_showButtons:function(e,t){var n=sinclo.scenarioApi;e.message=n._replaceVariable(e.message),n._isShownMessage(n.get(n._lKey.currentScenarioSeqNum),e.categoryNum)?t():(sinclo.chatApi.addButton("sinclo_re",e.message,e.settings,e.storedValue),n._hearing._handleChatTextArea(e.uiType,e.required),n._saveShownMessage(n.get(n._lKey.currentScenarioSeqNum),e.categoryNum),sinclo.chatApi.scDown(),n._putHearingButtons(e,t))},_showButtonUI:function(e,t){var n=sinclo.scenarioApi;e.message=n._replaceVariable(e.message),n._isShownMessage(n.get(n._lKey.currentScenarioSeqNum),e.categoryNum)?t():(sinclo.chatApi.addButtonUI("sinclo_re",e.message,e.settings,e.storedValue),n._hearing._handleChatTextArea(e.uiType,e.required),n._saveShownMessage(n.get(n._lKey.currentScenarioSeqNum),e.categoryNum),sinclo.chatApi.scDown(),n._putHearingButtonUI(e,t))},_showCheckbox:function(e,t){var n=sinclo.scenarioApi;e.message=n._replaceVariable(e.message),n._isShownMessage(n.get(n._lKey.currentScenarioSeqNum),e.categoryNum)?t():(sinclo.chatApi.addCheckbox("sinclo_re",e.message,e.settings,e.storedValue),n._hearing._handleChatTextArea(e.uiType,e.required),n._saveShownMessage(n.get(n._lKey.currentScenarioSeqNum),e.categoryNum),sinclo.chatApi.scDown(),n._putHearingCheckbox(e,t))},_showFileTypeMessage:function(e,t,n,i,o){var s=sinclo.scenarioApi;t.message=s._replaceVariable(t.message),s._isShownMessage(s.get(s._lKey.currentScenarioSeqNum),n)?o():(sinclo.chatApi.unread++,sinclo.chatApi.showUnreadCnt(),sinclo.chatApi.createSendFileMessage(t,"auto"),s._saveShownMessage(s.get(s._lKey.currentScenarioSeqNum),n),sinclo.chatApi.scDown(),s._putScenarioMessage(e,JSON.stringify(t),n,i,o))},_saveShownMessage:function(e,t){if(socket.isConnected()){var n,i=sinclo.scenarioApi,o=(n=(n=i.get(i._lKey.showSequenceSet))||{})[e]?n[e]:[];o.push(t),n[e]=o,i.set(i._lKey.showSequenceSet,n)}},_deleteShownMessage:function(e,t){var n,i=sinclo.scenarioApi,o=(n=(n=i.get(i._lKey.showSequenceSet))||{})[e]?n[e]:[];delete o[o.indexOf(t)],n[e]=o,i.set(i._lKey.showSequenceSet,n)},_isShownMessage:function(e,t){var n=sinclo.scenarioApi,i=n.get(n._lKey.showSequenceSet),o=i[e]?i[e]:[];return-1!==o.indexOf(t)},_storeMessageToDB:function(e,t){sinclo.scenarioApi;emit("storeScenarioMessage",{messages:e},t=t||function(){})},_saveProcessingState:function(e){var t=sinclo.scenarioApi;t.set(t._lKey.processing,e)},_saveWaitingInputState:function(e){scl_check.isIE()&&sinclo_storage.s.set("Waiting_on_IE",e);var t=sinclo.scenarioApi;t.set(t._lKey.waitingInput,e)},_putScenarioMessage:function(e,t,n,i,o){var s=sinclo.scenarioApi,a={scenarioId:s.get(s._lKey.scenarioId),type:e,messageType:s.get(s._lKey.scenarioMessageType),sequenceNum:s.get(s._lKey.currentScenarioSeqNum),requireCv:s._bulkHearing.isInMode()||(e===s._actionType.hearing||e===s._actionType.reservation)&&s.cvIsEnable(),categoryNum:n,showTextarea:i,message:t};s._disallowSaveing()?(s._pushScenarioMessage(a,function(e){s._saveMessage(e.data),o()}),sinclo.setForNotHavingConnectionMessageStack(a)):s._storeMessageToDB([a],o)},_putHearingRadioButton:function(e,t){var n={message:e.message,settings:e.settings},i=sinclo.scenarioApi,o={scenarioId:i.get(i._lKey.scenarioId),type:e.type,uiType:e.uiType,messageType:i.get(i._lKey.scenarioMessageType),sequenceNum:i.get(i._lKey.currentScenarioSeqNum),requireCv:i._bulkHearing.isInMode()||e.type===i._actionType.hearing&&i.cvIsEnable(),categoryNum:e.categoryNum,showTextarea:e.showTextArea,message:JSON.stringify(n)};i._disallowSaveing()?(i._pushScenarioMessage(o,function(e){i._saveMessage(e.data),t()}),sinclo.setForNotHavingConnectionMessageStack(o)):i._storeMessageToDB([o],t)},_putHearingPulldown:function(e,t){var n={message:e.message,settings:{options:e.settings.options,customDesign:e.settings.customDesign}},i=sinclo.scenarioApi,o={scenarioId:i.get(i._lKey.scenarioId),type:e.type,uiType:e.uiType,messageType:i.get(i._lKey.scenarioMessageType),sequenceNum:i.get(i._lKey.currentScenarioSeqNum),requireCv:i._bulkHearing.isInMode()||e.type===i._actionType.hearing&&i.cvIsEnable(),categoryNum:e.categoryNum,showTextarea:e.showTextArea,message:JSON.stringify(n)};i._disallowSaveing()?(i._pushScenarioMessage(o,function(e){i._saveMessage(e.data),t()}),sinclo.setForNotHavingConnectionMessageStack(o)):i._storeMessageToDB([o],t)},_putHearingCalendar:function(e,t){var n={message:e.message,settings:e.settings};e.cancelReservation&&(n.cancelReservation=e.cancelReservation,n.cancelMessage=e.cancelMessage);var i=sinclo.scenarioApi,o={scenarioId:i.get(i._lKey.scenarioId),type:e.type,uiType:e.uiType,messageType:i.get(i._lKey.scenarioMessageType),sequenceNum:i.get(i._lKey.currentScenarioSeqNum),requireCv:i._bulkHearing.isInMode()||e.type===i._actionType.hearing&&i.cvIsEnable(),categoryNum:e.categoryNum,showTextarea:e.showTextArea,message:JSON.stringify(n)};i._disallowSaveing()?(i._pushScenarioMessage(o,function(e){i._saveMessage(e.data),t()}),sinclo.setForNotHavingConnectionMessageStack(o)):i._storeMessageToDB([o],t)},_putHearingCarousel:function(e,t){var n={message:e.message,settings:e.settings},i=sinclo.scenarioApi,o={scenarioId:i.get(i._lKey.scenarioId),type:e.type,uiType:e.uiType,messageType:i.get(i._lKey.scenarioMessageType),sequenceNum:i.get(i._lKey.currentScenarioSeqNum),requireCv:i._bulkHearing.isInMode()||e.type===i._actionType.hearing&&i.cvIsEnable(),categoryNum:e.categoryNum,showTextarea:e.showTextArea,message:JSON.stringify(n)};i._disallowSaveing()?(i._pushScenarioMessage(o,function(e){i._saveMessage(e.data),t()}),sinclo.setForNotHavingConnectionMessageStack(o)):i._storeMessageToDB([o],t)},_putHearingButtons:function(e,t){var n={message:e.message,settings:e.settings},i=sinclo.scenarioApi,o={scenarioId:i.get(i._lKey.scenarioId),type:e.type,uiType:e.uiType,messageType:i.get(i._lKey.scenarioMessageType),sequenceNum:i.get(i._lKey.currentScenarioSeqNum),requireCv:i._bulkHearing.isInMode()||e.type===i._actionType.hearing&&i.cvIsEnable(),categoryNum:e.categoryNum,showTextarea:e.showTextArea,message:JSON.stringify(n)};i._disallowSaveing()?(i._pushScenarioMessage(o,function(e){i._saveMessage(e.data),t()}),sinclo.setForNotHavingConnectionMessageStack(o)):i._storeMessageToDB([o],t)},_putHearingButtonUI:function(e,t){var n={message:e.message,settings:e.settings},i=sinclo.scenarioApi,o={scenarioId:i.get(i._lKey.scenarioId),type:e.type,uiType:e.uiType,messageType:i.get(i._lKey.scenarioMessageType),sequenceNum:i.get(i._lKey.currentScenarioSeqNum),requireCv:i._bulkHearing.isInMode()||e.type===i._actionType.hearing&&i.cvIsEnable(),categoryNum:e.categoryNum,showTextarea:e.showTextArea,message:JSON.stringify(n)};i._disallowSaveing()?(i._pushScenarioMessage(o,function(e){i._saveMessage(e.data),t()}),sinclo.setForNotHavingConnectionMessageStack(o)):i._storeMessageToDB([o],t)},_putHearingCheckbox:function(e,t){var n={message:e.message,settings:e.settings},i=sinclo.scenarioApi,o={scenarioId:i.get(i._lKey.scenarioId),type:e.type,uiType:e.uiType,messageType:i.get(i._lKey.scenarioMessageType),sequenceNum:i.get(i._lKey.currentScenarioSeqNum),requireCv:i._bulkHearing.isInMode()||e.type===i._actionType.hearing&&i.cvIsEnable(),categoryNum:e.categoryNum,showTextarea:e.showTextArea,message:JSON.stringify(n)};i._disallowSaveing()?(i._pushScenarioMessage(o,function(e){i._saveMessage(e.data),t()}),sinclo.setForNotHavingConnectionMessageStack(o)):i._storeMessageToDB([o],t)},_handleStoredMessage:function(){var e=sinclo.scenarioApi;e._disallowSaveing()&&e._unsetScenarioMessage()},_pushScenarioMessage:function(e,t){sinclo.chatApi.store.save(e),emit("sendScenarioMessage",e,t)},_saveStoredMessage:function(e){var t=sinclo.scenarioApi,n=t.get(t._lKey.messages),i=n||[];t._storeMessageToDB(i,e)},_unsetScenarioMessage:function(){var e=sinclo.scenarioApi;e.unset(e._lKey.messages),e.set(e._lKey.allowSave,!0)},_disallowSaveing:function(){var e=sinclo.scenarioApi,t=e.get(e._lKey.allowSave);return null==t||"false"===t||!1===t},_saveVariable:function(e,t){sinclo_client_log.client_log("scenarioApi._saveVariable",{valKey:e,value:t}),e=e.trim();var n=sinclo.scenarioApi,i=n.get(n._lKey.variables);if(i[e]={},i[e].value=scl_check.isset(t)?String(t).trim():"",i[e].created=(new Date).getTime(),i[e].scId=n.get(n._lKey.scenarioId),n.set(n._lKey.variables,i),n.get(n._lKey.storedVariableKeys)&&-1===n.get(n._lKey.storedVariableKeys).indexOf(e)){var o=n.get(n._lKey.storedVariableKeys);o.push(e),n.set(n._lKey.storedVariableKeys,o)}else n.get(n._lKey.storedVariableKeys)||n.set(n._lKey.storedVariableKeys,[e])},_getStoredVariable:function(e){var t=sinclo.scenarioApi;return-1!==t.get(t._lKey.storedVariableKeys).indexOf(e)?t._getSavedVariable(e):e},_getCustomerInfoValue:function(e){sinclo.scenarioApi;for(var t=userInfo.customerInfo,n=0;n<t.length;n++)t[n].item_name===e&&t[n];return scl_check.isset(t[e])?t[e]:""},_getSavedVariable:function(e){var t=sinclo.scenarioApi,n={};return 0<=e.indexOf("ï¼è¨ªåã¦ã¼ã¶æå ±ï¼")?(n=userInfo.customerInfo)[e=e.replace(/^ï¼è¨ªåã¦ã¼ã¶æå ±ï¼/,"")]?n[e]:"":(n=t.get(t._lKey.variables))[e]&&n[e].value?n[e].value:""},_getAllTargetVariables:function(){var r=sinclo.scenarioApi,c={};return r.get(r._lKey.storedVariableKeys).forEach(function(e,t,n){if(e===r._sendFile._downloadUrlKey){var i=r._getSavedVariable(e);if(scl_check.isset(i))for(var o=JSON.parse(r._getSavedVariable(e)),s=[],a=0;a<o.length;a++)o[a].sent||s.push(o[a]),c[e]=JSON.stringify(s)}else c[e]=r._getSavedVariable(e)}),c},_getMessage:function(){var e=sinclo.scenarioApi;return e.get(e._lKey.currentScenario).message},_replaceVariable:function(e){var a=sinclo.scenarioApi;if(e){e=e.replace(/\*\*(.+?)\*\*/g,function(e){var t=e.replace(/^\*\*(.+)\*\*$/,"$1"),n=a._getCustomerInfoValue(t);if(!n)return"";if(scl_check.isJSON(n)&&-1!==n.indexOf("separator")){var i=JSON.parse(n),o=i.message.split(i.separator),s="";return 1===item.length?s=s+o[0]+"\n":o.forEach(function(e){s=s+"ã»"+e+"\n"}),s}return n});var t=a.get(a._lKey.scenarioId),n=sessionStorage.getItem("scenario_"+t+"_inquiry_number"),i=sinclo.scenarioApi._getMailInquiryNumberSetting();e=e.replace(/##MAIL_INQUIRY_NUMBER##/g,function(e){return n?sinclo.scenarioApi._convertSystemVariable(n,i):""});var o=sessionStorage.getItem("cv_unique_id"),s=sinclo.scenarioApi._getCvUniqueSetting();return(e=(e=(e=e.replace(/##CV_UNIQUE_ID##/g,function(e){return o?sinclo.scenarioApi._convertSystemVariable(o,s):""})).replace(/##CURRENT_PAGE_URL##/g,location.href)).replace(/##CURRENT_PAGE_TITLE##/g,document.title)).replace(/\{\{(.+?)\}\}/g,function(e){var t=e.replace(/^\{\{(.+)\}\}$/,"$1"),n=a._getSavedVariable(t);if(!n)return"";if(scl_check.isJSON(n)&&-1!==n.indexOf("separator")){var i=JSON.parse(n),o=i.message.split(i.separator),s="";return 1===o.length?s=s+o[0]+"\n":o.forEach(function(e){s=s+"ã»"+e+"\n"}),s}return n})}return""},_getMailInquiryNumberSetting:function(){var i={prefix:"",suffix:"",zero_padding_flg:!1,number_of_char:5};return scl_check.isset(window.sincloInfo.mailInquiryNumberSettings)&&(void 0===window.sincloInfo.mailInquiryNumberSettings.length?i=window.sincloInfo.mailInquiryNumberSettings:window.sincloInfo.mailInquiryNumberSettings.forEach(function(e,t,n){e.company_key==window.sincloInfo.site.key&&(i=e)})),i},_getCvUniqueSetting:function(){var i={prefix:"SCL",suffix:"",zero_padding_flg:!0,number_of_char:5};return scl_check.isset(window.sincloInfo.cvUniqueSettings)&&(void 0===window.sincloInfo.cvUniqueSettings.length?i=window.sincloInfo.cvUniqueSettings:window.sincloInfo.cvUniqueSettings.forEach(function(e,t,n){e.company_key==window.sincloInfo.site.key&&(i=e)})),i},_convertSystemVariable:function(e,t){if(t.zero_padding_flg){var n=e.toString().length,i="";if(n<t.number_of_char){for(var o=0;o<Number(t.number_of_char)-n;o++)i+="0";e=i+e}}return t.prefix+e+t.suffix},_getIntervalTimeSec:function(){var e=sinclo.scenarioApi;return Number(e.get(e._lKey.currentScenario).messageIntervalTimeSec)},_doing:function(e,t,n){var i=sinclo.scenarioApi;void 0!==n&&!n||i._isTheFiestScenaroAndSequence()||0===e?t():(i.setWaitingProcess(),i._doingTimer=setTimeout(function(){i.isProcessing()&&t(),i.unsetWaitingProcess()},1e3*e))},_cancel:function(){var e=sinclo.scenarioApi;clearTimeout(e._doingTimer),e._doingTimer=null,e.isCanceled=!0},_valid:function(e,t){var n=sinclo.scenarioApi;if(2<n._hearing._getCurrentHearingProcess().uiType)return!0;var i=new RegExp(n._validation[Number(e)]);return" "===t||i.test(t)},_speakText:function(){var e=sinclo.scenarioApi;this._doing(e._getIntervalTimeSec(),function(){e._handleChatTextArea(e.get(e._lKey.currentScenario).chatTextArea),e._showMessage(e.get(e._lKey.currentScenario).actionType,e._getMessage(),0,e.get(e._lKey.currentScenario).chatTextArea,function(){e._goToNextScenario()&&e._process()})})},_createSelectionMessage:function(e,t){var i=sinclo.scenarioApi._replaceVariable(e)+"\n";return t.forEach(function(e,t,n){i+="[] "+e,t!==n.length-1&&(i+="\n")}),i},inputStateHandleTimer:null,_waitingInput:function(n){var e=sinclo.scenarioApi;e._unWaitingInput(),$(document).on(e._events.inputCompleted,function(e,t){n(t)}),e._saveWaitingInputState(!0)},_unWaitingInput:function(){var e=sinclo.scenarioApi;$(document).off(e._events.inputCompleted),e._saveWaitingInputState(!1)},_mergeScenario:function(e,t,i){var o=e.activity.scenarios,n=sinclo.scenarioApi,s=n.get(n._lKey.scenarios),a=n.get(n._lKey.currentScenarioSeqNum),r={},c=t,l=0;Object.keys(s).some(function(e,t){if(t===a){if(Object.keys(o).forEach(function(e,t,n){o[e].scenarioId=i,r[String(l)]=o[e],l++}),n._saveReturnSettings(l-1,c,Object.keys(o).length,a),!c)return!0}else r[String(l)]=s[e],l++}),["columnNumber","fileUrl","lineNumber"].map(function(e){r.hasOwnProperty(e)&&delete r[e]}),n.set(n._lKey.scenarios,r),n.set(n._lKey.scenarioLength,Object.keys(r).length);var d=n.get(n._lKey.isSentMail);!d&&"true"!==d||n._applyAllDataSent()},_saveReturnSettings:function(e,t,i,o){var n=sinclo.scenarioApi,s=n.get(n._lKey.stackReturnSettings),a={};Object.keys(s).forEach(function(e,t,n){Number(e)>o?a[Number(e)+i-1]=s[e]:a[Number(e)]=s[e]}),a[e]=t,n.set(n._lKey.stackReturnSettings,a)},_getReturnSettingsOnCallerScenario:function(t){var e=sinclo.scenarioApi,n=e.get(e._lKey.stackReturnSettings),i={lastSequenceNum:0,isReturn:!1};return Object.keys(n).some(function(e){if(Number(e)>=t)return i.lastSequenceNum=Number(e),i.isReturn=n[e],!0}),i},cvIsEnable:function(){var e=sinclo.scenarioApi;return"1"===e.get(e._lKey.currentScenario).cv||!0===e.get(e._lKey.currentScenario).cv},wait:function(e){var t=$.Deferred();return setTimeout(function(){t.resolve()},e),t.promise()},_applyAllDataSent:function(){var e=sinclo.scenarioApi,t=e._getSavedVariable(e._sendFile._downloadUrlKey),n=[];scl_check.isJSON(t)&&(n=JSON.parse(t));for(var i=0;i<n.length;i++)n[i].sent=!0;e._saveVariable(e._sendFile._downloadUrlKey,JSON.stringify(n))},_hearing:{_parent:null,_state:{currentSeq:"sh_currentSeq",retry:"sh_retry",length:"sh_length",confirming:"sh_comfirming",prevSeq:"sh_prevSeq"},_cvType:{validOnce:"1",validAll:"2",confirmOK:"3"},_inputType:{1:"text",2:"number",3:"email",4:"tel"},_watcher:null,_events:{processSuccess:"sinclo:scenario:hearingProcessSuccess",processCancel:"sinclo:scenario:hearingProcessCancel"},disableRestoreMessage:function(e){var t=!0;if(sinclo.scenarioApi.isProcessing()){var n=sinclo.scenarioApi.get("s_targetChatId");if(scl_check.isset(n)||(n=[]),0===n.length)return!1;for(var i=0;i<n.length;i++)if(n[i]===e){t=!1;break}return t}return t},isHearingMode:function(){var e=sinclo.scenarioApi._hearing;return!!e._parent&&("2"===String(e._parent._getCurrentScenario().actionType)||"12"===String(e._parent._getCurrentScenario().actionType)||"15"===String(e._parent._getCurrentScenario().actionType))},needHearingEndMode:function(){var e=sinclo.scenarioApi._hearing;return!!e._parent&&("2"===String(e._parent._getCurrentScenario().actionType)||"15"===String(e._parent._getCurrentScenario().actionType))},isHearingAnswer:function(e){return e.messageType===sinclo.chatApi.messageType.scenario.customer.hearing||e.messageType===sinclo.chatApi.messageType.scenario.customer.hearingConfirm||e.messageType===sinclo.chatApi.messageType.scenario.customer.radio||e.messageType===sinclo.chatApi.messageType.scenario.customer.pulldown||e.messageType===sinclo.chatApi.messageType.scenario.customer.calendar||e.messageType===sinclo.chatApi.messageType.scenario.customer.carousel||e.messageType===sinclo.chatApi.messageType.scenario.customer.button||e.messageType===sinclo.chatApi.messageType.scenario.customer.buttonUI||e.messageType===sinclo.chatApi.messageType.scenario.customer.checkbox||e.messageType===sinclo.chatApi.messageType.scenario.customer.buttonUI||e.messageType===sinclo.chatApi.messageType.scenario.customer.checkbox||e.messageType===sinclo.chatApi.messageType.scenario.customer.reInputText||e.messageType===sinclo.chatApi.messageType.scenario.customer.reInputRadio||e.messageType===sinclo.chatApi.messageType.scenario.customer.reInputPulldown||e.messageType===sinclo.chatApi.messageType.scenario.customer.reInputCalendar||e.messageType===sinclo.chatApi.messageType.scenario.customer.reInputCarousel||e.messageType===sinclo.chatApi.messageType.scenario.customer.reInputButton||e.messageType===sinclo.chatApi.messageType.scenario.customer.reInputButtonUI||e.messageType===sinclo.chatApi.messageType.scenario.customer.reInputCheckbox||e.messageType===sinclo.chatApi.messageType.scenario.customer.reInputButtonUI||e.messageType===sinclo.chatApi.messageType.scenario.customer.reInputCheckbox||e.messageType===sinclo.chatApi.messageType.scenario.customer.skipHearing},isLFModeDisabled:function(){var e=sinclo.scenarioApi._hearing;return!e._parent||("1"===String(e._getCurrentHearingProcess().inputLFType)||"1"===String(e._getCurrentHearingProcess().uiType))},getInputType:function(){var e=sinclo.scenarioApi._hearing,t="1";return e.isHearingMode()&&(t=String(e._getCurrentHearingProcess().inputType)),e._inputType[t]},_init:function(e,t){var n=sinclo.scenarioApi._hearing;if(n._parent=e,n._setCurrentSeq(n._getCurrentSeq()),n._isParseSignatureMode())n._setLength(1);else try{n._setLength(n._parent.get(n._parent._lKey.currentScenario).hearings.length)}catch(e){n._setLength(sinclo.scenarioApi.get(sinclo.scenarioApi._lKey.currentScenario).hearings.length)}},_setCurrentSeq:function(e){var t=sinclo.scenarioApi._hearing;t._parent.set(t._state.currentSeq,e)},tmpSeqStorage:null,_getCurrentSeq:function(){var e=sinclo.scenarioApi,t=e.get(e._hearing._state.currentSeq);return t||0},_setRetryFlg:function(){var e=sinclo.scenarioApi._hearing;e._parent.set(e._state.retry,!0)},_clearRetryFlg:function(){var e=sinclo.scenarioApi._hearing;e._parent.set(e._state.retry,!1)},_getRetryFlg:function(){var e=sinclo.scenarioApi._hearing,t=e._parent.get(e._state.retry),n=t||!1;return n},_setLength:function(e){var t=sinclo.scenarioApi._hearing;t._parent.set(t._state.length,e)},_getValidChars:function(e){var t=sinclo.scenarioApi._hearing,n=t.isLFModeDisabled()?String(t._getCurrentHearingProcess().inputType):String(t._getCurrentHearingProcess().inputType)+"_lf",i=e.match(t._parent._validChars[n]);return i?i[0]:""},_getLength:function(){var e=sinclo.scenarioApi._hearing,t=e._parent.get(e._state.length);return Number(t||0)},_beginValidInputWatcher:function(){var e=sinclo.scenarioApi._hearing;sinclo.scenarioApi.isScenarioLFDisabled()?sinclo.chatApi.showMiniMessageArea():sinclo.chatApi.hideMiniMessageArea(),scl_check.isIE()||e._watcher||(e._watcher=setInterval(function(){scl_check.isset(sinclo_storage.s.get("operatorEntered"))&&"false"!==sinclo_storage.s.get("operatorEntered")||(sinclo.scenarioApi.isScenarioLFDisabled()?$("#miniSincloChatMessage").val(e._getValidChars($("#miniSincloChatMessage").val())):$("#sincloChatMessage").val(e._getValidChars($("#sincloChatMessage").val())))},100))},_endValidInputWatcher:function(){var e=sinclo.scenarioApi._hearing;if(!scl_check.isIE()&&e._watcher){if(scl_check.smartphone()){var t=document.getElementById("miniSincloChatMessage"),n=document.getElementById("sincloChatMessage");n&&(n.disabled=!0),t&&(t.disabled=!0)}clearInterval(e._watcher),e._watcher=null}},_beginCancelHandler:function(){var e=sinclo.scenarioApi._hearing;$("#sincloBox ul#chatTalk li.sinclo_se.cancelable").on("click",e._handleTextCancel)},_handleTextCancel:function(e){var t=sinclo.scenarioApi._hearing;t._handleCancel(e),t._parent.set(t._parent._lKey.sendCustomerMessageType,36)},_handleCancel:function(e){var t=sinclo.scenarioApi._hearing,n=$.Deferred();t.isConfirmingFlg&&(t.isConfirmingFlg=!1);var i=$(e.target).closest("div").find("li").data("chatId"),o=i?$(e.target).closest("div").find("li"):$(e.target).closest("div").next("div").find("li"),s=o.data("chatId");sinclo.scenarioApi.syncScenarioData.sendDetail("cancelHearing",s);var a=o.text(),r=o.data("hearingSeqNum"),c=[];c.push(s),o.closest("div").nextAll().each(function(e,t){c.push($(this).find("li").data("chatId")),$(this).fadeOut("fast").promise().then(function(){$(this).remove()})}),o.closest("div").fadeOut("fast").promise().then(function(){$(this).remove()}),t._hideMessage(c),scl_check.isIE()&&t._resetShownMessage(t._parent.get(t._parent._lKey.currentScenarioSeqNum),t._getCurrentSeq()),t._setCurrentSeq(Number(r)),t._resetShownMessage(t._parent.get(t._parent._lKey.currentScenarioSeqNum),t._getCurrentSeq());var l=t._getCurrentHearingProcess();if(i&&$("#sincloChatMessage, #miniSincloChatMessage").val(a),scl_check.isset(l))t._parent._reservation.isInMode()&&t._parent._reservation.changeState(t._parent._reservation._state.hearing),t._execute(l,!0),n.resolve();else if(t._parent._reservation.hasState()){var d=t._getLength(),p=t._parent._reservation.calcStateByScequenceNum(r,d);t._parent._reservation.changeState(p),t._parent._reservation.waitProcessComplete().then(function(){n.resolve()}),t._parent._reservation._process()}return n.promise()},_handleCarouselCancel:function(e){var t=sinclo.scenarioApi._hearing,n=$.Deferred();t.isConfirmingFlg&&(t.isConfirmingFlg=!1);var i=$(e).closest(".sinclo-scenario-msg").nextAll(":has(.sinclo_se):first").find(".sinclo_se"),o=i.data("chatId");sinclo.scenarioApi.syncScenarioData.sendDetail("cancelHearing",o);i.text();var s=i.data("hearingSeqNum"),a=[];a.push(o),i.closest("div").nextAll().each(function(e,t){a.push($(this).find("li").data("chatId")),$(this).fadeOut("fast").promise().then(function(){$(this).remove()})}),i.closest("div").fadeOut("fast").promise().then(function(){$(this).remove()}),t._hideMessage(a),scl_check.isIE()&&t._resetShownMessage(t._parent.get(t._parent._lKey.currentScenarioSeqNum),t._getCurrentSeq()),t._setCurrentSeq(Number(s)),t._resetShownMessage(t._parent.get(t._parent._lKey.currentScenarioSeqNum),t._getCurrentSeq());var r=t._getCurrentHearingProcess();if(scl_check.isset(r))t._execute(r,!0),n.resolve();else if(t._parent._reservation.hasState()){var c=t._getLength(),l=t._parent._reservation.calcStateByScequenceNum(s,c);t._setCurrentSeq(Number(s)===c?s:s-1),t._parent._reservation.changeState(l),t._parent._reservation.waitProcessComplete().then(function(){n.resolve()}),t._parent._reservation._process()}return n.promise()},_handleButtonCancel:function(e){var t=sinclo.scenarioApi._hearing,n=$.Deferred();t.isConfirmingFlg&&(t.isConfirmingFlg=!1);var i=$(e.target).parents("li").parent().next("div").find("li"),o=i.data("chatId");sinclo.scenarioApi.syncScenarioData.sendDetail("cancelHearing",o);i.text();var s=i.data("hearingSeqNum"),a=[];a.push(o),i.closest("div").nextAll().each(function(e,t){a.push($(this).find("li").data("chatId")),$(this).fadeOut("fast").promise().then(function(){$(this).remove()})}),i.closest("div").fadeOut("fast").promise().then(function(){$(this).remove()}),t._hideMessage(a),scl_check.isIE()&&t._resetShownMessage(t._parent.get(t._parent._lKey.currentScenarioSeqNum),t._getCurrentSeq()),t._setCurrentSeq(Number(s)),t._resetShownMessage(t._parent.get(t._parent._lKey.currentScenarioSeqNum),t._getCurrentSeq());var r=t._getCurrentHearingProcess();if(scl_check.isset(r))t._execute(r,!0),n.resolve();else if(t._parent._reservation.hasState()){var c=t._getLength(),l=t._parent._reservation.calcStateByScequenceNum(s,c);t._setCurrentSeq(Number(s)===c?s:s-1),t._parent._reservation.changeState(l),t._parent._reservation.waitProcessComplete().then(function(){n.resolve()}),t._parent._reservation._process()}return n.promise()},_needCancel:function(e){for(var t,n=0;void 0!==$(".hearing_msg")[n];n++)t=$(".hearing_msg")[n];return t!==$(e).parents("li").get(0)},_resetShownMessage:function(e,t){var n,i=sinclo.scenarioApi._hearing,o=(n=(n=i._parent.get(i._parent._lKey.showSequenceSet))||{})[e]?n[e]:[];o.splice(Number(t),o.length-Number(t)),n[e]=o,i._parent.set(i._parent._lKey.showSequenceSet,n)},_hideMessage:function(e){emit("hideScenarioMessages",{hideMessages:e})},_setPrevSeqNum:function(){var e=sinclo.scenarioApi._hearing;e._parent&&e._parent.set(e._state.prevSeq,e._getCurrentSeq())},_getPrevSeqNum:function(){var e=sinclo.scenarioApi._hearing;if(e._parent){var t=e._parent.get(e._state.prevSeq);return t||0}return 0},_addForceFirst:function(e){var t=sinclo.scenarioApi._hearing;e&&(t._setCurrentSeq(0),t._parent.unsetSequenceList(t._parent.get(t._parent._lKey.currentScenarioSeqNum)))},_process:function(e,t){sinclo_client_log.client_log("scenarioApi._hearing._process","");var n=sinclo.scenarioApi._hearing;n._addForceFirst(e),setTimeout(function(){n._beginCancelHandler()},2e3);var i=!1;void 0!==t&&(i=t);var o=n._getCurrentHearingProcess();n._isTheEnd()?n._executeConfirm(i):n._execute(o,i)},_execute:function(n,e){sinclo.scenarioApi.isProcessing()||(sinclo.scenarioApi.init(null,null),sinclo.scenarioApi.begin(null,null,!1));var i=n.message,o=sinclo.scenarioApi._hearing,t=o._parent._getIntervalTimeSec();(sinclo.scenarioApi._isReload||e)&&(t=0,sinclo.scenarioApi._isReload=!1),o._parent._doing(t,function(){o._handleChatTextArea(o._getCurrentHearingProcess().uiType,o._getCurrentHearingProcess().required),o._parent.setPlaceholderMessage(o._parent.getPlaceholderMessage());var t;t=e,sinclo.chatApi.addKeyDownEventToSendChat(),o._parent._saveWaitingInputState(!0),o._parent._waitingInput(function(e){o._endInputProcess(),o._parent._handleStoredMessage(),o._parent._valid(n.inputType,e)?(o._parent._saveVariable(n.variableName,e),o._goToNext()?o._process():o._executeConfirm(t)):o._showError(n)}),e||o._showMessage(o._getCurrentHearingProcess().uiType,i,o._getCurrentHearingProcess().required,o._getCurrentHearingProcess().settings,function(){})})},_showMessage:function(e,t,n,i,o){sinclo_client_log.client_log("scenarioApi._hearing._showMessage.start",{uiType:e,message:t});var s=sinclo.scenarioApi._hearing;switch(e){case"1":if(s._parent.set(s._parent._lKey.sendCustomerMessageType,12),s._parent.set(s._parent._lKey.scenarioMessageType,22),s._parent._showMessage("2",t,s._getCurrentSeq(),"1",o),s._parent._getCurrentScenario().restore&&($("#miniSincloChatMessage").val(s._parent._getSavedVariable(s._getCurrentHearingProcess().variableName)),s._parent._getSavedVariable(s._getCurrentHearingProcess().variableName).match(/^\s/)&&$("#miniSincloChatMessage").val(""),sinclo._skipLabelHandler()),scl_check.isset(s._getCurrentHearingProcess().customerInformationId)){var a=userInfo.getCustomerInfoById(s._getCurrentHearingProcess().customerInformationId);$("#miniSincloChatMessage").val(a),sinclo._skipLabelHandler()}break;case"2":if(s._parent.set(s._parent._lKey.sendCustomerMessageType,12),s._parent.set(s._parent._lKey.scenarioMessageType,22),s._parent._showMessage("2",t,s._getCurrentSeq(),"1",o),s._parent._getCurrentScenario().restore&&($("#sincloChatMessage").val(s._parent._getSavedVariable(s._getCurrentHearingProcess().variableName)),s._parent._getSavedVariable(s._getCurrentHearingProcess().variableName).match(/^\s/)&&$("#sincloChatMessage").val(""),sinclo._skipLabelHandler()),scl_check.isset(s._getCurrentHearingProcess().customerInformationId)){a=userInfo.getCustomerInfoById(s._getCurrentHearingProcess().customerInformationId);$("#sincloChatMessage").val(a),sinclo._skipLabelHandler()}break;case"3":s._parent.set(s._parent._lKey.sendCustomerMessageType,33),s._parent.set(s._parent._lKey.scenarioMessageType,55);var r={type:"2",uiType:e,message:t,settings:i,categoryNum:s._getCurrentSeq(),required:n};if(s._parent._getCurrentScenario().restore&&(r.storedValue=s._parent._getSavedVariable(s._getCurrentHearingProcess().variableName)),scl_check.isset(s._getCurrentHearingProcess().customerInformationId)){a=userInfo.getCustomerInfoById(s._getCurrentHearingProcess().customerInformationId);r.storedValue=a}s._parent._showRadioButton(r,o);break;case"4":s._parent.set(s._parent._lKey.sendCustomerMessageType,34),s._parent.set(s._parent._lKey.scenarioMessageType,41);r={type:"2",uiType:e,message:t,settings:i,categoryNum:s._getCurrentSeq(),required:n};if(s._parent._getCurrentScenario().restore&&(r.storedValue=s._parent._getSavedVariable(s._getCurrentHearingProcess().variableName)),scl_check.isset(s._getCurrentHearingProcess().customerInformationId)){a=userInfo.getCustomerInfoById(s._getCurrentHearingProcess().customerInformationId);r.storedValue=a}s._parent._showPullDown(r,o);break;case"5":s._parent.set(s._parent._lKey.sendCustomerMessageType,35),s._parent.set(s._parent._lKey.scenarioMessageType,42);r={type:"2",uiType:e,message:t,settings:i,categoryNum:s._getCurrentSeq(),required:n};if(s._parent._getCurrentScenario().restore&&(r.storedValue=s._parent._getSavedVariable(s._getCurrentHearingProcess().variableName)),scl_check.isset(s._getCurrentHearingProcess().customerInformationId)){a=userInfo.getCustomerInfoById(s._getCurrentHearingProcess().customerInformationId);r.storedValue=a}s._parent._showCalendar(r,o);break;case"7":s._parent.set(s._parent._lKey.sendCustomerMessageType,47),s._parent.set(s._parent._lKey.scenarioMessageType,46);r={type:"2",uiType:e,message:t,settings:i,categoryNum:s._getCurrentSeq(),required:n};if(s._parent._getCurrentScenario().restore&&(r.storedValue=s._parent._getSavedVariable(s._getCurrentHearingProcess().variableName)),scl_check.isset(s._getCurrentHearingProcess().customerInformationId)){a=userInfo.getCustomerInfoById(s._getCurrentHearingProcess().customerInformationId);r.storedValue=a}s._parent._showButtons(r,o);break;case"6":s._parent.set(s._parent._lKey.sendCustomerMessageType,43),s._parent.set(s._parent._lKey.scenarioMessageType,45);r={type:"2",uiType:e,message:t,settings:i,categoryNum:s._getCurrentSeq(),required:n};if(s._parent._getCurrentScenario().restore&&(r.storedValue=s._parent._getSavedVariable(s._getCurrentHearingProcess().variableName)),scl_check.isset(s._getCurrentHearingProcess().customerInformationId)){a=userInfo.getCustomerInfoById(s._getCurrentHearingProcess().customerInformationId);r.storedValue=a}s._parent._showCarousel(r,o);break;case"8":s._parent.set(s._parent._lKey.sendCustomerMessageType,50),s._parent.set(s._parent._lKey.scenarioMessageType,49);r={type:"2",uiType:e,message:t,settings:i,categoryNum:s._getCurrentSeq(),required:n};if(s._parent._getCurrentScenario().restore&&(r.storedValue=s._parent._getSavedVariable(s._getCurrentHearingProcess().variableName)),scl_check.isset(s._getCurrentHearingProcess().customerInformationId)){a=userInfo.getCustomerInfoById(s._getCurrentHearingProcess().customerInformationId);r.storedValue=a}s._parent._showButtonUI(r,o);break;case"9":s._parent.set(s._parent._lKey.sendCustomerMessageType,53),s._parent.set(s._parent._lKey.scenarioMessageType,52);r={type:"2",uiType:e,message:t,settings:i,categoryNum:s._getCurrentSeq(),required:n};if(s._parent._getCurrentScenario().restore&&(r.storedValue=s._parent._getSavedVariable(s._getCurrentHearingProcess().variableName)),scl_check.isset(s._getCurrentHearingProcess().customerInformationId)){a=userInfo.getCustomerInfoById(s._getCurrentHearingProcess().customerInformationId);r.storedValue=a}s._parent._showCheckbox(r,o);break;default:s._parent.set(s._parent._lKey.sendCustomerMessageType,12),s._parent.set(s._parent._lKey.scenarioMessageType,22),s._parent._showMessage("2",t,s._getCurrentSeq(),"1",o)}sinclo_client_log.client_log("scenarioApi._hearing._showMessage.end",{sendCustomerMessageType:s._parent.get(s._parent._lKey.sendCustomerMessageType),scenarioMessageType:s._parent.get(s._parent._lKey.scenarioMessageType)})},_handleChatTextArea:function(e,t){var n=sinclo.scenarioApi._hearing;switch(void 0===e&&15===Number(n._parent.get(n._parent._lKey.currentScenario).actionType)&&"hearing"!==n._parent.get(n._parent._reservation._key.state)&&(e="5",t=!0),e){case"1":case"2":n._endInputProcess(),sinclo.displayTextarea(!t,!1),n._beginValidInputWatcher(),sinclo_storage.l.set("textareaOpend","open");break;case"3":case"4":case"5":case"6":case"7":case"8":case"9":t?(sinclo_storage.l.set("textareaOpend","close"),sinclo.hideTextarea()):(sinclo_storage.l.set("textareaOpend","open"),sinclo.chatApi.showMiniMessageArea(),sinclo.displayTextarea(!0,!0));break;default:n._endInputProcess(),sinclo.displayTextarea(),n._beginValidInputWatcher(),sinclo_storage.l.set("textareaOpend","open")}},_endInputProcess:function(){var e=sinclo.scenarioApi._hearing;sinclo.chatApi.removeKeyDownEventToSendChat(),e._parent._unWaitingInput(),e._endValidInputWatcher()},_disableGrantCancelAbleFlg:!1,_executeConfirm:function(e){var t=sinclo.scenarioApi._hearing;if(scl_check.smartphone()){var n=document.getElementById("miniSincloChatMessage"),i=document.getElementById("sincloChatMessage");i&&(i.disabled=!1),n&&(n.disabled=!1)}t._requireConfirm()?t._parent._reservation.isInMode()?t._parent._reservation._process():(t._saveConfirmFlg(!0),t._showConfirmMessage(e)):(t._fireProcessSuccess(),t._parent.syncScenarioData.sendDetail("endHearing"),t._parent.cvIsEnable()&&setTimeout(function(){emit("addLastMessageToCV",{historyId:sinclo.chatApi.historyId})},500),setTimeout(function(){t._disableAllHearingMessageInput(),e||(t._parent._reservation.isInMode()?t._parent._reservation._process():t._parent._goToNextScenario()&&(t._setCurrentSeq(0),t._parent._process()))},1e3))},_fireWaitProcessComplete:function(){var e=sinclo.scenarioApi._hearing;$(document).trigger(e._events.processComplete)},_fireProcessSuccess:function(){var e=sinclo.scenarioApi._hearing;$(document).trigger(e._events.processSuccess)},_fireProcessCancel:function(){var e=sinclo.scenarioApi._hearing;$(document).trigger(e._events.processCancel)},_saveConfirmFlg:function(e){var t=sinclo.scenarioApi._hearing;t._parent.set(t._state.confirming,e)},_isConfirming:function(){var e=sinclo.scenarioApi._hearing;if(!e||!e._parent)return!1;var t=e._parent.get(e._state.confirming);return null!==typeof t&&(t||"true"===t)},_requireConfirm:function(){var e=sinclo.scenarioApi._hearing;return"1"===e._parent.get(e._parent._lKey.currentScenario).isConfirm},_getCurrentHearingProcess:function(e){var t=sinclo.scenarioApi._hearing,n={};if(t._parent.get(t._parent._lKey.currentScenario).hearings){var i=t._parent.get(t._parent._lKey.currentScenario).hearings[t._getCurrentSeq()];void 0!==e&&(i=t._parent.get(t._parent._lKey.currentScenario).hearings[e]),void 0!==i&&(n=i)}return n},_showError:function(e){var t=sinclo.scenarioApi._hearing;t.errorCountFlg=!0;var n=e.uiType?e.errorMessage:t._parent._getCurrentScenario().errorMessage;t._parent._doing(t._parent._getIntervalTimeSec(),function(){t._parent._showMessage(t._parent.get(t._parent._lKey.currentScenario).actionType,n,t._getCurrentSeq()+"e"+common.fullDateTime(),t._parent.get(t._parent._lKey.currentScenario).chatTextArea,function(){t._parent._deleteShownMessage(t._parent.get(t._parent._lKey.currentScenarioSeqNum),t._getCurrentSeq()),t.errorCountFlg=!1,t._process()})},!0)},_goToNext:function(){var e=sinclo.scenarioApi._hearing;return e._isTheEnd()?(sinclo.chatApi.hideMiniMessageArea(),e._disableAllHearingMessageInput(),!1):(e._parent._hearing._setCurrentSeq(e._parent._hearing._getCurrentSeq()+1),scl_check.isIE()&&!document.hasFocus()||e._parent.syncScenarioData.sendDetail("changeHearingSeq",e._parent.get(e._parent._lKey.currentScenario)),!0)},_isTheEnd:function(){var e=sinclo.scenarioApi._hearing;return e._getCurrentSeq()===e._getLength()},_disableAllHearingMessageInput:function(){$("#sincloBox ul#chatTalk li.sinclo_re.hearing_msg").each(function(e,t){$(this).find('input[type="radio"]').addClass("end-disabled").prop("disabled",!0).parent().css("opacity",.5),$(this).find('select[name^="sinclo-pulldown"]').addClass("end-disabled").prop("disabled",!0).css("opacity",.5),$(this).find(".flatpickr-calendar").addClass("disable").addClass("end-disabled"),"5df3556abc1e6"===sincloInfo.site.key?$(this).find(".sincloHearingButton").addClass("end-disabled").prop("disabled",!0).css("opacity",.5):$(this).find(".sincloHearingButton").addClass("end-disabled").prop("disabled",!0).prop("disabled",!0).css("background-color","#DADADA"),"5df3556abc1e6"===sincloInfo.site.key?$(this).find(".sinclo-button-ui").addClass("end-disabled").prop("disabled",!0).css("opacity",.5):$(this).find(".sinclo-button-ui").addClass("end-disabled").prop("disabled",!0).prop("disabled",!0).css("background-color","#DADADA"),$(this).find(".sinclo-checkbox").addClass("end-disabled").prop("disabled",!0).css("opacity",.5),$(this).find(".checkbox-submit-btn").addClass("end-disabled").prop("disabled",!0).css("opacity",.5),$(this).find('input[name^="sinclo-checkbox"]').addClass("end-disabled").prop("disabled",!0).css("opacity",.5),$(this).find(".cancelReservationArea").addClass("end-disabled").css("pointer-events","none")}),$("#sincloBox ul#chatTalk li.hearing_msg").each(function(e,t){$(this).find('[id^="slide_sinclo-carousel"]').prop("disabled",!0).css("opacity",.5),$(this).find('[id^="slide_sinclo-carousel"]').prop("disabled",!0).css("opacity",.5)}),$("#sincloBox ul#chatTalk li.sinclo_se.cancelable").each(function(e,t){$(this).removeClass("cancelable"),$(this).off("click",self._handleCancel)}),$("#sincloBox ul#chatTalk li.sinclo_se .inputFormOKButton").addClass("end-disabled").prop("disabled",!0).css("opacity",.5)},_isTheFirst:function(){var e=sinclo.scenarioApi._hearing;return 0===e._getCurrentSeq()&&!e._getRetryFlg()},_cvTypeIs:function(e){var t=sinclo.scenarioApi._hearing;return!!t._parent.cvIsEnable()&&e===String(t._parent.get(t._parent._lKey.currentScenario).cvCondition)},_isParseSignatureMode:function(){var e=sinclo.scenarioApi._hearing;return e._parent.get(e._parent._lKey.currentScenario).parseSignatureMode},_forceRadioTypeFlg:!1,errorCountFlg:!1,isConfirmingFlg:!1,_showConfirmMessage:function(e){var t=sinclo.scenarioApi._hearing,n=!1;void 0!==e&&(n=e),scl_check.isIE()&&sinclo.scenarioApi.syncScenarioData.sendDetail("forceWaiting"),t.isConfirmingFlg&&(n=!0),t.isConfirmingFlg=!0;function i(){t._parent._waitingInput(function(e){t._disableGrantCancelAbleFlg=!0,t._parent._unWaitingInput(),t._parent._handleStoredMessage(),t._saveConfirmFlg(!1),e===t._parent.get(t._parent._lKey.currentScenario).success?(t._fireProcessSuccess(),t._clearRetryFlg(),t._parent.cvIsEnable()&&setTimeout(function(){emit("addLastMessageToCV",{historyId:sinclo.chatApi.historyId})},500),setTimeout(function(){t._disableAllHearingMessageInput(),t._parent.syncScenarioData.sendDetail("endHearing"),t._parent._goToNextScenario()&&(t._setCurrentSeq(0),t._parent._process()),t.isConfirmingFlg=!1},1e3)):e===t._parent.get(t._parent._lKey.currentScenario).cancel?(t._fireProcessCancel(),t.isConfirmingFlg=!1,t._disableAllHearingMessageInput(),t._parent.syncScenarioData.sendDetail("endHearing","isRetrying"),t._setRetryFlg(),t._parent._process(!0)):t._showError()})}var o=t._parent._createSelectionMessage(t._parent.get(t._parent._lKey.currentScenario).confirmMessage,[t._parent.get(t._parent._lKey.currentScenario).success,t._parent.get(t._parent._lKey.currentScenario).cancel]);t._parent._doing(t._parent._getIntervalTimeSec(),function(){t._parent._handleChatTextArea("2"),n?i():t._parent._showMessage(t._parent.get(t._parent._lKey.currentScenario).actionType,o,t._parent.get(t._state.currentSeq)+1,"2",i)})}},_selection:{_parent:null,_init:function(e,t){this._parent=e},_process:function(){sinclo_client_log.client_log("scenarioApi._selection._process","");var t=sinclo.scenarioApi._selection,e=t._parent._createSelectionMessage(t._parent.get(t._parent._lKey.currentScenario).message,t._parent.get(t._parent._lKey.currentScenario).selection.options);t._parent._doing(t._parent._getIntervalTimeSec(),function(){t._parent._handleChatTextArea(t._parent.get(t._parent._lKey.currentScenario).chatTextArea),t._parent._showMessage(t._parent.get(t._parent._lKey.currentScenario).actionType,e,0,t._parent.get(t._parent._lKey.currentScenario).chatTextArea,function(){t._parent._waitingInput(function(e){t._parent._unWaitingInput(),t._parent._handleStoredMessage(),t._parent._saveVariable(t._parent.get(t._parent._lKey.currentScenario).selection.variableName,e),t._parent._goToNextScenario()&&t._parent._process()})})})},isSelectionMode:function(){var e=sinclo.scenarioApi._selection;return!!e._parent&&"3"===String(e._parent._getCurrentScenario().actionType)}},_mail:{_parent:null,_init:function(e,t){this._parent=e},_process:function(){sinclo_client_log.client_log("scenarioApi._mail._process","");var e=sinclo.scenarioApi._mail,t=e._parent._getAllTargetVariables(),n=e._parent.get(e._parent._lKey.scenarioId),i={number:sessionStorage.getItem("scenario_"+n+"_inquiry_number"),setting:sinclo.scenarioApi._getMailInquiryNumberSetting()},o={number:sessionStorage.getItem("cv_unique_id"),setting:sinclo.scenarioApi._getCvUniqueSetting()},s={historyId:sinclo.chatApi.historyId,mailType:e._parent.get(e._parent._lKey.currentScenario).mailType,transmissionId:e._parent.get(e._parent._lKey.currentScenario).mMailTransmissionId,templateId:e._parent.get(e._parent._lKey.currentScenario).mMailTemplateId,withDownloadURL:e._isNeedToAddDownloadURL(),variables:t,customerInfo:userInfo.customerInfo,scenarioId:n,mailInquiryNumberData:i,cvUniqueIdData:o,runScenarioPageTitle:e._parent.get(e._parent._lKey.runScenarioPageTitle),runScenarioPageURL:e._parent.get(e._parent._lKey.runScenarioPageURL)};sinclo.api.callFunction("sc",e._parent.get(e._parent._lKey.scenarioId)),emit("processSendMail",s,function(e){}),e._parent.set(e._parent._lKey.isSentMail,!0),e._parent._goToNextScenario()&&e._parent._process()},_isNeedToAddDownloadURL:function(){var e=sinclo.scenarioApi._mail,t=e._parent.get(e._parent._lKey.currentScenario).sendWithDownloadURL;return t||!1}},_anotherScenario:{_parent:null,_init:function(e){this._parent=e},_process:function(){sinclo_client_log.client_log("scenarioApi._anotherScenario._process","");var n=sinclo.scenarioApi._anotherScenario;n._getScenario(function(e){var t=n._parent._getCurrentScenario().tChatbotScenarioId;t=t||n._parent.get(n._parent._lKey.scenarioId),n._parent._mergeScenario(e,n._isExecutableNextAction(),t),n._parent._goToNextScenario(!0)&&n._parent._process()})},_getScenario:function(e){var t=sinclo.scenarioApi._anotherScenario;emit("getScenario",{scenarioId:t._parent.get(t._parent._lKey.currentScenario).tChatbotScenarioId},e)},_isExecutableNextAction:function(){var e=sinclo.scenarioApi._anotherScenario,t=e._parent.get(e._parent._lKey.currentScenario).executeNextAction;return t&&0<="1".indexOf(t)}},_callExternalApi:{_parent:null,_externalType:{useApi:"1",useScript:"2",useService:"3"},_init:function(e){this._parent=e},_process:function(){sinclo_client_log.client_log("scenarioApi._callExternalApi._process","");var o=sinclo.scenarioApi._callExternalApi,t=o._parent.get(o._parent._lKey.currentScenario).externalType;o._parent._doing(0,function(){if(String(t)===o._externalType.useScript){var e=o._parent.get(o._parent._lKey.currentScenario).externalScript;o._callScript(o._parent._replaceVariable(e)),o._parent._goToNextScenario()&&o._parent._process()}else String(t)===o._externalType.useService?o._callService():o._callApi(function(i){if(!o._isCallFromClient())try{Object.keys(i).forEach(function(e,t,n){o._parent._saveVariable(i[e].variableName,i[e].value)})}catch(e){}o._parent._goToNextScenario()&&o._parent._process()})})},_isCallFromClient:function(){return sinclo.scenarioApi.get(sinclo.scenarioApi._lKey.currentScenario).callFromClient},_callScript:function(externalScript){var self=sinclo.scenarioApi._callExternalApi;emit("traceScenarioInfo",{type:"i",message:"call external script. from scenarioID : "+self._parent.get(self._parent._lKey.scenarioId),data:externalScript});try{eval(externalScript)}catch(e){return void emit("traceScenarioInfo",{type:"w",message:"call external script error found. error: "+e.message,data:externalScript})}emit("traceScenarioInfo",{type:"i",message:"result is OK.",data:externalScript})},_callApi:function(d){var e,t,s=sinclo.scenarioApi._callExternalApi,n=sessionStorage.getItem("cv_unique_id"),i=sinclo.scenarioApi._getCvUniqueSetting(),o=sinclo.scenarioApi.get(sinclo.scenarioApi._lKey.scenarioId),a=sessionStorage.getItem("scenario_"+o+"_inquiry_number"),r=sinclo.scenarioApi._getMailInquiryNumberSetting();e=n?sinclo.scenarioApi._convertSystemVariable(n,i):"",t=a?sinclo.scenarioApi._convertSystemVariable(a,r):"";var c=s._parent.get(s._parent._lKey.currentScenario).tExternalApiConnectionId;if(s._isCallFromClient()){var p=$.Deferred();emit("callApiFromClient",{externalApiConnectionId:c,variables:s._parent._getAllTargetVariables(),systemVariables:{"##CURRENT_PAGE_URL##":location.href,"##CURRENT_PAGE_TITLE##":document.title,"##CV_UNIQUE_ID##":e,"##MAIL_INQUIRE_NUMBER##":t},customerInfo:scl_check.isset(userInfo.customerInfo)?userInfo.customerInfo:{}},function(l){var e="GET",o={};try{JSON.parse(l.request_headers).forEach(function(e,t,n){var i;i=s._parent._replaceVariable(e.name),o[i]=s._parent._replaceVariable(e.value)})}catch(e){}2===l.method_type&&(e="POST"),$.ajax({headers:o,url:l.url,type:e,dataType:"json",data:l.request_body,cache:!1,crossDomain:!0,timeout:1e4}).done(function(i,e,t){for(var n=JSON.parse(l.response_body_maps),o=0;n.length>o;o++){var s=n[o].variableName,a=n[o].sourceKey.split(/[.\[]/),r=a.reduce(function(e,t,n){return 1===n&&(e=i[e]),scl_check.isArray(e)?e[Number(t.slice(0,-1))]:scl_check.isset(e)?e[t]:""});1===a.length&&(r=i[a[0]]);var c=scl_check.isset(r)?r:"";sinclo.scenarioApi._saveVariable(s,c)}d()}).fail(function(e,t,n){}).always(function(e,t){return p.resolve(),p.promise()})})}else emit("callExternalApi",{externalApiConnectionId:c,variables:s._parent._getAllTargetVariables(),systemVariables:{"##CURRENT_PAGE_URL##":location.href,"##CURRENT_PAGE_TITLE##":document.title,"##CV_UNIQUE_ID##":e,"##MAIL_INQUIRE_NUMBER##":t},customerInfo:scl_check.isset(userInfo.customerInfo)?userInfo.customerInfo:{}},function(e){d(e)})},_key:{dateTime:"s_api_date_time"},_setting:{},_cooperationSystem:{readWrite:1,readOnly:2,writeOnly:3},_externalService:{calendar:{google:1,outlook:2}},_callService:function(){var e=sinclo.scenarioApi,t=e._callExternalApi;switch(t._setting=e._getCurrentScenario(),Number(t._setting.externalService)){case t._externalService.calendar.google:case t._externalService.calendar.outlook:t._callCalendarService()}},_callCalendarService:function(){var e=sinclo.scenarioApi,t=e._callExternalApi;switch(Number(t._setting.cooperationSystem)){case t._cooperationSystem.readWrite:case t._cooperationSystem.readOnly:t._doHearing();break;case t._cooperationSystem.writeOnly:var n=e._getStoredVariable(t._setting.dateTimeVariable),i=e._getStoredVariable(t._setting.momentVariable);t._writeCalendar(n,i).then(function(){t._parent._goToNextScenario()&&t._parent._process()})}},_doHearing:function(){function i(){o._showCalendar=t,o._showPullDown=n}var o=sinclo.scenarioApi,e=o._hearing,s=o._callExternalApi,t=o._showCalendar,n=o._showPullDown;$(document).off(e._events.processSuccess),$(document).one(e._events.processSuccess,function(e){if(i(),Number(s._setting.cooperationSystem)!==s._cooperationSystem.readOnly){var t=o._getStoredVariable(s._setting.dateTimeVariable),n=o._getStoredVariable(s._setting.momentVariable);s._writeCalendar(t,n)}}),$(document).off(e._events.processCancel),$(document).one(e._events.processCancel,function(e){i()}),o._showCalendar=s._showCalendar,o._showPullDown=s._showPullDown,s._addHearingSetting(),e._init(o),o.syncScenarioData.sendDetail("startHearing",o.get(o._lKey.currentScenario)),e._process(!0)},_addHearingSetting:function(){var e=sinclo.scenarioApi,t=e._getCurrentScenario(),n=t.settings;t.hearings=[{variableName:t.dateTimeVariable,uiType:"5",message:t.dateTimeQuestion,required:!0,settings:{disablePastDate:n.disablePastDate,isEnableAfterDate:n.isEnableAfterDate,enableAfterDate:n.enableAfterDate,isDisableAfterDate:n.isDisableAfterDate,disableAfterDate:n.disableAfterDate,isSetDisableDate:n.isSetDisableDate,isDisableDayOfWeek:n.isDisableDayOfWeek,dayOfWeekSetting:n.dayOfWeekSetting,language:parseInt(n.language),calendarCustomDesign:n.calendarCustomDesign,customDesign:n.customDesignCalendar,calendarTextColor:n.customDesignCalendar.calendarTextColor,sundayColor:n.customDesignCalendar.sundayColor,saturdayColor:n.customDesignCalendar.saturdayColor}},{variableName:t.momentVariable,uiType:"4",message:t.momentQuestion,required:!0,settings:{options:[],pulldownCustomDesign:n.pulldownCustomDesign,customDesign:n.customDesignMoment}}],t.confirmDesign=n.customDesignCalendar,e.set(e._lKey.currentScenario,t)},_showCalendar:function(o,t){var n=sinclo.scenarioApi,s=n._callExternalApi;if(o.message=n._replaceVariable(o.message),n._isShownMessage(n.get(n._lKey.currentScenarioSeqNum),o.categoryNum))return t();var e={};if(o.settings.isEnableAfterDate){var i=(new Date).fp_incr(o.settings.enableAfterDate);e=s._getCurrentMonthDates(i)}else e=s._getCurrentMonthDates();s._readCalendar(e.from,e.to).then(function(e){o.settings.isSetSpecificDate=!0,o.settings.setSpecificDateType=2,o.settings.specificDateData=e;var i=sinclo.chatApi.addCalendar("sinclo_re",o.message,o.settings,o.storedValue);i.config.onMonthChange.push(function(e,t,n){s._flipCalendar(i,n,o.settings)}),n._saveShownMessage(n.get(n._lKey.currentScenarioSeqNum),o.categoryNum),sinclo.chatApi.scDown(),n._putHearingCalendar(o,t)})},_flipCalendar:function(o,e,s){var t=sinclo.scenarioApi._callExternalApi,n=new Date(e.currentYear,e.currentMonth,1);n=[n.getFullYear(),n.getMonth()+1,n.getDate()].join("/");var i=new Date(e.currentYear,e.currentMonth+1,0);i=[i.getFullYear(),i.getMonth()+1,i.getDate()].join("/"),t._readCalendar(n,i).then(function(e){s.specificDateData=e;var t=sinclo.chatApi.createCalendarOption(s);o.config.enable=t.enable,o.redraw();var n=document.getElementsByTagName("sinclo-chat")[0].children.length,i=$("#sinclo-calendar"+n);sinclo.chatApi.customCalendarTextColor(i,s)})},_showPullDown:function(e,t){var n=sinclo.scenarioApi,i=n._callExternalApi;n._isShownMessage(n.get(n._lKey.currentScenarioSeqNum),e.categoryNum)&&t();var o=n._getStoredVariable(i._setting.dateTimeVariable);e.message=n._replaceVariable(e.message),e.settings.options=i._getPullDownList(o);var s=2===common.getWidgetSettings().showAutomessageName?"":common.getWidgetSettings().subTitle;sinclo.chatApi.addPulldown("sinclo_re",e.message,s,e.settings,e.storedValue),n._saveShownMessage(n.get(n._lKey.currentScenarioSeqNum),e.categoryNum),sinclo.chatApi.scDown(),n._putHearingPulldown(e,t)},_getCurrentMonthDates:function(e){var t=e?new Date(e):new Date,n=new Date(t.getFullYear(),t.getMonth()+1,0);return{from:[t.getFullYear(),t.getMonth()+1,t.getDate()].join("/"),to:[n.getFullYear(),n.getMonth()+1,n.getDate()].join("/")}},_readCalendar:function(e,t){var n=sinclo.scenarioApi._getCurrentScenario(),i=sinclo.scenarioApi._callExternalApi,o=$.Deferred();return socket.once("notifyResultOfReadCalendar",function(e){var t=i._filter(JSON.parse(e));o.resolve(0<t.dateList.length?t.dateList:["1970/01/01"]),i._parent.set(i._key.dateTime,t.dateTime)}),emit("readCalendar",{calendarId:i._setting.calendarId,externalService:i._setting.externalService,tOpenAuthorizationId:i._setting.tOpenAuthorizationId,startReservationTime:n.settings.startReservationTime,reservationInterval:n.settings.reservationInterval,from:e,to:t}),o.promise()},_filter:function(e){var t=sinclo.scenarioApi._callExternalApi._setting.settings,n=t.specificDateData.slice();if(t.isSetDisableDate&&Array.isArray(n)&&0<n.length)for(var i in n){var o=n[i].split("/").join("-");1==t.setSpecificDateType?e[o]&&delete e[o]:2==t.setSpecificDateType&&(e[o]||n.splice(i,1))}var s=Object.keys(e);if(2==t.setSpecificDateType&&(s=n),t.isDisableDayOfWeek){var a=[];for(var i in s){var r=new Date(s[i]),c=r.getDay();t.dayOfWeekSetting[c]||a.push(r)}s=a}return{dateList:s,dateTime:e}},_getPullDownList:function(e){var t=sinclo.scenarioApi._callExternalApi,n=t._parent.get(t._key.dateTime);if(e=e.split("/").join("-"),n&&n[e])return n[e].map(function(e){return e.join(" ã ")})},_writeCalendar:function(e,t){var n=$.Deferred();if(!e||!t)return n.resolve(),n.promise();var i=sinclo.scenarioApi,o=i._callExternalApi,s=e.split("/").join("-"),a=t.split("ã");2!=a.length&&(a=t.split("ï½"));var r=s,c=(a=a.map(function(e){return e.trim()}))[0].split(":"),l=a[1].split(":");if(parseInt(c[0])>parseInt(l[0])){var d=new Date(s);d.setDate(d.getDate()+1),r=d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate()}return socket.once("notifyResultOfWriteCalendar",function(e){n.resolve(e)}),emit("writeCalendar",{subject:i._replaceVariable(o._setting.subject),memo:i._replaceVariable(o._setting.memo),calendarId:o._setting.calendarId,externalService:o._setting.externalService,tOpenAuthorizationId:o._setting.tOpenAuthorizationId,start:s+" "+a[0],end:r+" "+a[1]}),n.promise()}},_receiveFile:{_parent:null,_init:function(e){this._parent=e},_process:function(){sinclo_client_log.client_log("scenarioApi._receiveFile._process","");var n=sinclo.scenarioApi._receiveFile;n._parent._doing(n._parent._getIntervalTimeSec(),function(){n._parent._handleChatTextArea(n._parent.get(n._parent._lKey.currentScenario).chatTextArea),n._getDownloadInfo(function(e){if(e.success&&!e.deleted){var t=e.fileName.split(".");e.extension=t[t.length-1].toLowerCase(),e.message=n._parent.get(n._parent._lKey.currentScenario).message,n._parent._showFileTypeMessage(n._parent.get(n._parent._lKey.currentScenario).actionType,e,0,n._parent.get(n._parent._lKey.currentScenario).chatTextArea,function(){n._parent._goToNextScenario()&&n._parent._process()})}})})},_getDownloadInfo:function(t){var e=sinclo.scenarioApi._receiveFile;emit("getScenarioDownloadInfo",{sendFileId:e._parent.get(e._parent._lKey.currentScenario).tChatbotScenarioSendFileId},function(e){t(e)})}},_getAttributeValue:{_parent:null,_init:function(e){this._parent=e},_process:function(){sinclo_client_log.client_log("scenarioApi._getAttributeValue._process","");var t=sinclo.scenarioApi._getAttributeValue;t._parent._doing(0,function(){t._parent._handleChatTextArea(t._parent.get(t._parent._lKey.currentScenario).chatTextArea),t._getValueFromAttribute(function(e){t._parent._goToNextScenario()&&t._parent._process()})})},_getValueFromAttribute:function(e){for(var t=sinclo.scenarioApi._getAttributeValue,n=t._parent.get(t._parent._lKey.currentScenario).getAttributes,i={},o=0;o<n.length;o++){var s=t._getValue(n[o].type,n[o].attributeValue);t._parent._saveVariable(n[o].variableName,s),i[n[o].variableName]=s}emit("attributeValue",{attributeValue:i}),e()},_getValue:function(e,t){var n=sinclo.scenarioApi._getAttributeValue;switch(Number(e)){case 1:return n._getText($("#"+t));case 2:return n._getText($('[name="'+t+'"]'));case 3:return n._getText($(t))}},_getText:function(e){return""!==e.text()?e.text():""!==e.val()?e.val():""}},_sendFile:{_parent:null,_downloadUrlKey:"s_sendfile_data",cancelerId:null,isUploadError:!1,isSizeOver:!1,limitSize:209715200,sizeOverMessage:"ã¢ããã­ã¼ãããããã¡ã¤ã«ãå¤§ãããã¾ãã\n200[MB]ä»¥ä¸ã®ãã¡ã¤ã«ãã¢ããã­ã¼ããã¦ãã ããã",uploadErrorMessage:"ãã¡ã¤ã«ã®ã¢ããã­ã¼ãã«å¤±æãã¾ããã\nãææ°ã§ãããååº¦ãã¢ããã­ã¼ããã¦ãã ããã",_init:function(e){this._parent=e},_process:function(){sinclo_client_log.client_log("scenarioApi._sendFile._process","");var s=sinclo.scenarioApi._sendFile;s._parent._doing(s._parent._getIntervalTimeSec(),function(){s._parent._handleChatTextArea("2");var e=s._parent.get(s._parent._lKey.currentScenario).dropAreaMessage,t=s._parent.get(s._parent._lKey.currentScenario).cancelEnabled,n=s._parent.get(s._parent._lKey.currentScenario).cancelLabel,i=s._parent.get(s._parent._lKey.currentScenario).receiveFileType,o=s._parent.get(s._parent._lKey.currentScenario).extendedReceiveFileExtensions.split(",");sinclo.chatApi.unread++,sinclo.chatApi.showUnreadCnt(),sinclo.chatApi.createSelectUploadFileMessage(s._parent._replaceVariable(e),t,s._parent._replaceVariable(n),i,o),s._waitUserAction(s._handleFileSelect)})},_waitUserAction:function(e){var t=sinclo.scenarioApi._sendFile;$(document).off(t._parent._events.fileUploaded),$(document).one(t._parent._events.fileUploaded,e)},_pushDownloadUrlData:function(e){var t=sinclo.scenarioApi._sendFile,n=t._parent._getSavedVariable(t._downloadUrlKey),i=[];scl_check.isJSON(n)&&(i=JSON.parse(n)),i.push(e),t._parent._saveVariable(t._downloadUrlKey,JSON.stringify(i))},_showError:function(){var e=sinclo.scenarioApi._sendFile,t="";e.isSizeOver?(t=e.sizeOverMessage,e.isSizeOver=!1):e.isUploadError?(t=e.uploadErrorMessage,e.isUploadError=!1):t=e._parent.get(e._parent._lKey.currentScenario).errorMessage,e._parent._doing(0,function(){e._parent._handleChatTextArea(e._parent.get(e._parent._lKey.currentScenario).chatTextArea),e._parent._showMessage(e._parent.get(e._parent._lKey.currentScenario).actionType,t," delete_e"+new Date(common.fullDateTime()).getTime(),e._parent.get(e._parent._lKey.currentScenario).chatTextArea,function(){e._waitUserAction(e._handleFileSelect)})})},_handleFileSelect:function(e,t,n){emit("sendFileLog",n);var i=sinclo.scenarioApi._sendFile;t?(i._parent._handleStoredMessage(),n&&i._pushDownloadUrlData(n),i._parent._goToNextScenario()&&i._parent._process()):i._showError()}},_branchOnCond:{_parent:null,_init:function(e){this._parent=e},_process:function(){sinclo_client_log.client_log("scenarioApi._branchOnCond._process","");var i=sinclo.scenarioApi._branchOnCond;i._parent._doing(0,function(){i._parent._handleChatTextArea(i._parent.get(i._parent._lKey.currentScenario).chatTextArea);for(var e=i._parent.get(i._parent._lKey.currentScenario).referenceVariable,t=i._parent.get(i._parent._lKey.currentScenario).conditionList,n=0;n<t.length;n++)if(i._isMatch(e,t[n]))return void i._doAction(t[n]);i._parent.get(i._parent._lKey.currentScenario).elseEnabled?i._doAction(i._parent.get(i._parent._lKey.currentScenario).elseAction):i._parent._goToNextScenario()&&i._parent._process()})},_isMatch:function(e,t){var n=sinclo.scenarioApi._branchOnCond,i=n._parent._getSavedVariable(e),o=n._parent._replaceVariable(t.matchValue);if("60c8753d2d42d"==sincloInfo.site.key&&("åæãã"==i||"ãã©ã¤ãã·ã¼ããªã·ã¼ãç¢ºèªãã"==i)&&i==o){var s=n._parent._getAllTargetVariables(),a=sinclo.scenarioApi.get(sinclo.scenarioApi._lKey.scenarioId),r=sinclo.chatApi.historyId,c={number:sessionStorage.getItem("scenario_"+a+"_inquiry_number"),setting:sinclo.scenarioApi._getMailInquiryNumberSetting()},l={number:sessionStorage.getItem("cv_unique_id"),setting:sinclo.scenarioApi._getCvUniqueSetting()};s.userAgent=userInfo.newUserAgent?userInfo.newUserAgent:userInfo.userAgent,s.executeUrl=location.href,s.landingUrl=userInfo.prev[0].url,s.runScenarioPageTitle=n._parent.get(n._parent._lKey.runScenarioPageTitle),s.runScenarioPageURL=n._parent.get(n._parent._lKey.runScenarioPageURL),s.mailInquiryNumberData=c,s.cvUniqueIdData=l,emit("saveLeadListRemedies",{scenarioId:sinclo.scenarioApi.get(sinclo.scenarioApi._lKey.scenarioId),targetVariables:s,userId:userInfo.userId,historyId:r})}switch(scl_check.isJSON(i)&&scl_check.isset(JSON.parse(i).message)&&(i=JSON.parse(i).message),Number(t.matchValueType)){case 1:return n._matchCaseInclude(i,n._splitMatchValue(o),t.matchValuePattern);case 2:return n._matchCaseExclude(i,n._splitMatchValue(o),t.matchValuePattern);default:return!1}},_doAction:function(n,e,t,i){var o=sinclo.scenarioApi._branchOnCond;switch(Number(n.actionType)){case 1:o._parent._doing(o._parent._getIntervalTimeSec(),function(){o._parent._showMessage(o._parent.get(o._parent._lKey.currentScenario).actionType,n.action.message,0,o._parent.get(o._parent._lKey.currentScenario).chatTextArea,function(){o._parent._goToNextScenario()&&o._parent._process()})});break;case 2:var s=n.action.callScenarioId;"self"===s&&(s=(s=o._parent._getCurrentScenario().scenarioId)||o._parent.get(o._parent._lKey.scenarioId)),emit("getScenario",{scenarioId:s},function(e){var t=!!n.action.executeNextAction&&n.action.executeNextAction;o._parent._mergeScenario(e,t,s),o._parent._goToNextScenario(!0)&&o._parent._process()});break;case 3:common.chatBotTypingRemove();var a=Number(o._parent.get(o._parent._lKey.currentScenarioSeqNum)),r=o._parent._getReturnSettingsOnCallerScenario(a);r.isReturn?(o._parent.set(o._parent._lKey.currentScenarioSeqNum,r.lastSequenceNum),o._parent._goToNextScenario()&&o._parent._process()):o._parent._end();break;case 4:o._parent._goToNextScenario()&&o._parent._process();break;case 5:var c=null,l=n.action.openType;2===Number(l)&&(c=window.open("about:blank","sincloChild"+(new Date).getTime())),o._parent._doing(.2,function(){var e=o._parent._replaceVariable(n.action.url);switch(scl_check.smartphone()&&sinclo.operatorInfo.ev(),Number(l)){case 1:location.href=e;break;case 2:c.location.href=e}o._parent._goToNextScenario()&&o._parent._process()});break;case 5:var d=n.action.url;l=n.action.openType;switch(Number(l)){case 1:location.href=d;break;case 2:window.open(d)}o._parent._goToNextScenario()&&o._parent._process();break;case 6:var p=n.action.callDiagramId;o._parent._end(),window.sincloInfo.contract.chatbotTreeEditor&&(e||p&&!sinclo.chatApi.autoMessages.exists(t))&&(socket&&!socket.isConnected()?$.ajax({type:"get",url:window.sincloInfo.site.files+"/settings/diagram",cache:!1,data:{sitekey:window.sincloInfo.site.key,did:p},dataType:"json",success:function(e){sinclo.chatApi.execDiagram(e)},error:function(e,t,n){$("#XMLHttpRequest").html("XMLHttpRequest : "+e.status),$("#textStatus").html("textStatus : "+t),$("#errorThrown").html("errorThrown : "+n.message)}}):emit("getChatDiagram",{diagramId:p}))}},_splitMatchValue:function(e){var o=[];return e.split('"').forEach(function(e,t,n){if(1<n.length){if(0!==t&&t%2==1)o.push(e);else if(e){var i=e.trim().replace(/ã/g," ").split(" ");o=o.concat($.grep(i,function(e){return""!==e}))}}else{i=e.trim().replace(/ã/g," ").split(" ");o=o.concat($.grep(i,function(e){return""!==e}))}}),o},_matchCaseInclude:function(e,t,n){for(var i=!1,o=0;o<t.length;o++)if(""!==t[o]){var s=t[o].replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");if(i=(n&&"2"!==n?new RegExp("^"+s+"$"):new RegExp(s)).test(e))break}else if(i=""===e)break;return i},_matchCaseExclude:function(e,t,n){for(var i=0;i<t.length;i++)if(""!==t[i]){var o=t[i].replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");if((n&&"1"!==n?new RegExp(o):new RegExp("^"+o+"$")).test(e))return!1}else{if(""===e)return!1}return!0}},_addCustomerInformation:{_parent:null,_init:function(e){this._parent=e},_process:function(){sinclo_client_log.client_log("scenarioApi._addCustomerInformation._process","");var t=sinclo.scenarioApi._addCustomerInformation;t._parent._doing(0,function(){t._parent._handleChatTextArea(t._parent.get(t._parent._lKey.currentScenario).chatTextArea),t._getValueAndSend(function(e){t._parent._goToNextScenario()&&t._parent._process()})})},_getValueAndSend:function(e){var t=sinclo.scenarioApi._addCustomerInformation,n=t._parent.get(t._parent._lKey.currentScenario).addCustomerInformations;if(void 0===n)for(var i=Number(t._parent.get(t._parent._lKey.currentScenarioSeqNum));void 0===n&&0!==i;--i)n=t._parent.get(t._parent._lKey.scenarios)[i].addCustomerInformations;for(var o=[],s=0;s<n.length;s++){var a=n[s].variableName,r=n[s].targetId,c=t._parent._getSavedVariable(a);if(o.push({id:r,value:c}),""!==c&&scl_check.isset(sincloInfo.customerInfoSettings))for(var l=0;l<sincloInfo.customerInfoSettings.length;l++)if(Number(sincloInfo.customerInfoSettings[l].id)===Number(r)){userInfo.customerInfo[sincloInfo.customerInfoSettings[l].item_name]=c;break}}emit("saveCustomerInfoValue",{targetValues:o}),sinclo.scenarioApi.syncScenarioData.sendDetail("syncCustomerInfo"),e()}},_bulkHearing:{_parent:null,_analyseResult:{},_state:{waitInput:"sbh_waitInput",confirm:"sbh_confirm"},_init:function(e){this._parent=e},handleFormOK:function(i){var o=sinclo.scenarioApi._bulkHearing;if(i&&0<Object.keys(i).length){o.endInput();var s=!1,a=Object.keys(i);a.forEach(function(e,t,n){o._parent._saveVariable(a[t],i[a[t]].value.trim()),s=s||i[a[t]].changed}),emit("sendChat",{historyId:sinclo.chatApi.historyId,stayLogsId:sinclo.chatApi.stayLogsId,chatMessage:JSON.stringify(i),mUserId:null,messageType:s?32:31,messageRequestFlg:0,isAutoSpeech:!1,notifyToCompany:!1,isScenarioMessage:!0},function(){!o._parent.get(o._parent._lKey.currentScenario).cv&&scl_check.isset(o._parent.get(o._parent._lKey.currentScenario).cv)||setTimeout(function(){emit("addLastMessageToCV",{historyId:sinclo.chatApi.historyId})},500),setTimeout(function(){o._clearConfirmState(),o._clearWaitingInputState(),o._parent._goToNextScenario()&&o._parent._process()},1e3)}),sinclo.chatApi.hideForm()}},isInMode:function(){var e=sinclo.scenarioApi._bulkHearing;return!!e._parent&&String(e._parent.get(e._parent._lKey.currentScenario).actionType)===e._parent._actionType.bulkHearing},beginInput:function(){var e=sinclo.scenarioApi._bulkHearing;$(document).on("input paste","#sincloBox #chatTalk li.sinclo_re div.formElement input.formInput",e._handleInput)},endInput:function(){var e=sinclo.scenarioApi._bulkHearing;$(document).off("input paste","#sincloBox #chatTalk li.sinclo_re div.formElement input.formInput",e._handleInput)},_handleInput:function(e){var t=sinclo.scenarioApi._bulkHearing,n=$(e.target),i=n.attr("type"),o=n.val(),s=n.data("required"),a=new RegExp(t._parent._validChars[{text:"1",number:"2",email:"3",tel:"4"}[i]]);if(""===o&&"false"===s.toLowerCase())return!0;var r="";o.split(/\r\n|\n/).every(function(e){var t=e.match(a);return null===t||t[0]!==t.input?(r+=null===t||0!==t.index?"":t[0],!1):(r+=e+"\n",!0)})||n.val(r)},_isValidValue:function(e,t){var n="";switch(Number(e)){case 1:case 2:case 4:case 5:case 6:case 11:n=new RegExp(".+");break;case 3:n=new RegExp(/^\d{3}[-]\d{4}$|^\d{3}[-]\d{2}$|^\d{3}$|^\d{5}$|^\d{7}$/);break;case 7:case 8:case 9:n=new RegExp(/^(0|\+)(\d{9,}|[\d-]{11,})/);break;case 10:n=new RegExp('^(([^<>()\\[\\]\\.,;:\\s@"]+(\\.[^<>()\\[\\]\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$');break;default:n=new RegExp(/.+/)}return t.match(n)},_process:function(){sinclo_client_log.client_log("scenarioApi._bulkHearing._process","");var t=sinclo.scenarioApi._bulkHearing;t.beginInput(),t._isStatusConfirming()||t._parent._doing(0,function(){t._parent._handleChatTextArea("1"),sinclo.chatApi.hideMiniMessageArea(),setTimeout(function(){t._notifyBeginBulkHearing()},200),t._saveWaitingInputState(),common.chatBotTypingTimerClear(),common.chatBotTypingRemove(),t._parent._waitingInput(function(e){t._parent._unWaitingInput(),t._parent._handleStoredMessage(),t._parent._doing(t._parent._getIntervalTimeSec(),function(){t._analyseInput(e,function(e){t._parent._handleChatTextArea("2"),t._saveConfirmState()})})})})},_analyseInput:function(e,t){var n=sinclo.scenarioApi._bulkHearing;emit("sendParseSignature",{historyId:sinclo.chatApi.historyId,stayLogsId:sinclo.chatApi.stayLogsId,targetText:e,ip:userInfo.getIp(),requireCv:null,isAutoSpeech:!1,notifyToCompany:!1,isScenarioMessage:!0,targetVariable:n._parent.get(n._parent._lKey.currentScenario).multipleHearings},t)},_notifyBeginBulkHearing:function(){var e=sinclo.scenarioApi._bulkHearing;emit("beginBulkHearing",{historyId:sinclo.chatApi.historyId,requireCv:e._parent.get(e._parent._lKey.currentScenario).cv||!scl_check.isset(e._parent.get(e._parent._lKey.currentScenario).cv)})},_saveWaitingInputState:function(){var e=sinclo.scenarioApi._bulkHearing;e._parent.set(e._state.waitInput,!0)},_saveConfirmState:function(){var e=sinclo.scenarioApi._bulkHearing;e._parent.set(e._state.confirm,!0)},_clearWaitingInputState:function(){var e=sinclo.scenarioApi._bulkHearing;e._parent.unset(e._state.waitInput)},_clearConfirmState:function(){var e=sinclo.scenarioApi._bulkHearing;e._parent.unset(e._state.confirm)},_isStatusConfirming:function(){var e=sinclo.scenarioApi._bulkHearing,t=e._parent.get(e._state.confirm);return t&&("boolean"==typeof t&&t||"string"==typeof t&&"true"===t)}},_addLeadInformation:{_parent:null,_init:function(e){this._parent=e},_process:function(){sinclo_client_log.client_log("scenarioApi._addLeadInformation._process","");var o=sinclo.scenarioApi._addLeadInformation;o._parent._doing(0,function(){o._parent._handleChatTextArea(o._parent.get(o._parent._lKey.currentScenario).chatTextArea);var e=o._parent.get(o._parent._lKey.currentScenario).tLeadListSettingId,t=o._setVariables(o._parent._getAllTargetVariables()),n=sinclo.chatApi.historyId,i={scenarioId:sinclo.scenarioApi.get(sinclo.scenarioApi._lKey.scenarioId),leadSettingsId:e,dataSet:t,userAgent:userInfo.newUserAgent?userInfo.newUserAgent:userInfo.userAgent,executeUrl:location.href,landingUrl:userInfo.prev?userInfo.prev[0].url:location.href,userId:userInfo.userId,historyId:n};sinclo_client_log.client_log("scenarioApi._addLeadInformation._process.emit(saveLeadList)",{sendData:i}),emit("saveLeadList",i),o._parent._goToNextScenario()&&o._parent._process()})},_setVariables:function(i){var e=sinclo.scenarioApi._addLeadInformation,t=e._parent.get(e._parent._lKey.currentScenario).leadInformations;return t.forEach(function(t){var n=!1;if(Object.keys(i).forEach(function(e){t.leadVariableName===e&&(t.leadVariable=i[e],n=!0)}),0<=t.leadVariableName.indexOf("ï¼è¨ªåã¦ã¼ã¶æå ±ï¼")&&!t.leadVariable)try{t.leadVariable=userInfo.customerInfo[t.leadVariableName.replace("ï¼è¨ªåã¦ã¼ã¶æå ±ï¼","")],n=!0}catch(e){}n||(t.leadVariable=""),delete t.leadVariableName}),t}},_controlVariable:{_parent:null,_init:function(e){this._parent=e},_process:function(){sinclo_client_log.client_log("scenarioApi._controlVariable._process","");var t=sinclo.scenarioApi._controlVariable;t._parent._doing(0,function(){t._parent._handleChatTextArea(t._parent.get(t._parent._lKey.currentScenario).chatTextArea),t._calculateFormula(function(e){t._parent._goToNextScenario()&&t._parent._process()})})},_calculateFormula:function(callback){var self=sinclo.scenarioApi._controlVariable,result="",rules=self._parent.get(self._parent._lKey.currentScenario).calcRules;rules.forEach(function(rule){try{if(1===Number(rule.calcType)){var formula=self._toHalfWidth(self._replaceIntegerVariable(rule.formula));if(result=Number(eval(formula)),result=self._roundResult(result,rule.significantDigits,rule.rulesForRounding),isNaN(result))throw new Error("Not a Number")}else result=self._convertString(self._replaceVariable(rule.formula));self._parent._saveVariable(rule.variableName,self._parent._replaceVariable(String(result)))}catch(e){self._parent._saveVariable(rule.variableName,"è¨ç®ã¨ã©ã¼")}}),callback()},_roundResult:function(e,t,n){var i=Math.pow(10,t-1);if(0<Number(t))switch(Number(n)){case 1:e=Math.round(e*i)/i;break;case 2:e=Math.floor(e*i)/i;break;case 3:e=Math.ceil(e*i)/i;break;default:e=Math.round(e*i)/i}else e=0<e?Math.floor(e):Math.ceil(e);return e},_toHalfWidth:function(e){return e.replace(/[ï¼-ï½]/g,function(e){return String.fromCharCode(e.charCodeAt(0)-65248)}).replace(/â/g,'"').replace(/â/g,"'").replace(/ï¿¥/g,"\\").replace(/ã/g," ").replace(/ï½/g,"~")},_replaceVariable:function(e){var i=sinclo.scenarioApi._controlVariable;return e?e.replace(/\{\{(.+?)\}\}/g,function(e){var t=e.replace(/^\{\{(.+)\}\}$/,"$1"),n=i._parent._getStoredVariable(t);return n===t&&(n=""),n}):""},_replaceIntegerVariable:function(e){var n=sinclo.scenarioApi._controlVariable;return e?e.replace(/{{(.+?)\}}/g,function(e){var t=e.replace(/^{{(.+)}}$/,"$1");return Number(n._toHalfWidth(n._parent._getStoredVariable(t)))}):""},_convertString:function(t){if(-1!==t.indexOf("&")){var e=t.split("&");t="",e.forEach(function(e){t+=e})}return t}},_reservation:{_key:{state:"sre_state",targetMR:"sre_target_mr",targetDate:"sre_target_date",targetTimeSummary:"sre_target_time_summary",targetTimeDetail:"sre_target_time_detail",operation:"sre_operation",commonTime:"sre_commonTime",timeTables:"sre_timeTables",allStaffIds:"sre_allStaffIds",priority:"sre_priority"},_state:{hearing:"hearing",staff:"staff",date:"date",timeSummary:"timeSummary",timeDetail:"timeDetail",confirm:"confirm"},_events:{processComplete:"sinclo:scenario:processComplete"},_parent:null,_cache:{},_lock:{},_init:function(e){this._parent=e;var t=sinclo.scenarioApi._reservation;!t.staffSelectable()&&t.isPriorityMR()&&t._prepareCache()},_prepareCache:function(){var i=sinclo.scenarioApi._reservation,e="sendPossibleDateForCashing";i._cache={normal:{},priority:{},deferred:{}},socket.connector.off(e),socket.on(e,function(e){var t=JSON.parse(e).from,n=t.split("-");t=[n[0],n[1],"01"].join("/"),i._lock[t].resolve(e),delete i._lock[t]}),i._getAllStaffIds().then(function(e){var t=i._getTargetDate();i._preparePossibleDate(e,t.fromDate,t.toDate,"priority").then(function(){(t=i._getNextTargetDate(common.formatDateParse(Number(t.fromDate))))&&i._preparePossibleDate(e,t.fromDate,t.toDate,"priority")})})},_dayOfWeekMap:{0:"sun",1:"mon",2:"tue",3:"wed",4:"thu",5:"fri",6:"sat"},isInMode:function(){var e=sinclo.scenarioApi._reservation;return!!e._parent&&String(e._parent.get(e._parent._lKey.currentScenario).actionType)===e._parent._actionType.reservation},isState:function(e){var t=sinclo.scenarioApi._reservation,n=sinclo.scenarioApi.get(t._key.state);return scl_check.isset(n)&&0<=n.indexOf(e)},waitProcessComplete:function(){var e=sinclo.scenarioApi._reservation,t=$.Deferred();return $(document).one(e._events.processComplete,function(e){t.resolve()}),t.promise()},fireWaitProcessComplete:function(){var e=sinclo.scenarioApi._reservation;$(document).trigger(e._events.processComplete)},hasState:function(){var e=sinclo.scenarioApi._reservation,t=e._parent.get(e._key.state);return scl_check.isset(t)},changeState:function(e){var t=sinclo.scenarioApi._reservation;t._parent.set(t._key.state,e)},deleteState:function(){var e=sinclo.scenarioApi._reservation;e._parent.unset(e._key.state)},calcStateByScequenceNum:function(e,t){var n=sinclo.scenarioApi._reservation;if(e<t)return n._state.hearing;var i=e-t;switch(n.staffSelectable(),i=i){case 0:return n._state.staff;case 1:return n._state.date;case 2:return n._state.timeSummary;case 3:return n._state.timeDetail;case 4:return n._state.confirm;default:return n._state.hearing}},_process:function(s){sinclo_client_log.client_log("scenarioApi._reservation._process","");var a=sinclo.scenarioApi._reservation;a._selectStaff().then(a._switchPriorityMRIfNecessary).then(function(e){return a._selectDate(e,s)}).then(function(e,t){return a._selectTimeSummary(e,t,s)}).then(function(e,t,n,i,o){return a._selectTimeDetail(e,t,n,i,o,s)}).then(a._reselectStaffIfNecessary).then(a._confirm).then(a._commit,function(){a.changeState(a._state.hearing),a._parent._process(!0)}).then(function(){a.deleteState(),a._parent._goToNextScenario(!1)&&a._parent._process()})},_switchPriorityMRIfNecessary:function(e){var t=sinclo.scenarioApi._reservation,n=$.Deferred();return t.isPriorityMR()&&!e?t._parent.set(t._key.priority,!0):(e=e||t.searchDefaultStaff(),t._parent._saveVariable(t._getRemoteMRVariable(),e.userName)),t._parent.set(t._key.targetMR,e),n.resolve(e),n.promise()},isPriorityMR:function(){return sincloInfo.contract.priorityMR},_getAllStaffIds:function(){var e=sinclo.scenarioApi._reservation,t=$.Deferred(),n=e._parent.get(e._key.allStaffIds);return n?t.resolve(n):e._staffInfo?(e._parent.set(e._key.allStaffIds,n),t.resolve(e._extractRemoteMRIds())):e._getStaffList().then(function(){e._parent.set(e._key.allStaffIds,n),t.resolve(e._extractRemoteMRIds())}),t.promise()},_extractRemoteMRIds:function(){var e=sinclo.scenarioApi._reservation,t=[];for(var n in e._staffInfo){var i=e._staffInfo[n];i.isRemoteMR&&t.push(i.id)}return t},_selectStaff:function(){var e=sinclo.scenarioApi._reservation,t=$.Deferred();return sinclo.chatApi._disableAllSelectableUI(),e.isState(e._state.hearing)||e.isState(e._state.staff)?e._getStaffList().then(e._execSelectStaff).then(function(e){t.resolve(e)}):t.resolve(e._parent.get(e._key.targetMR)),t.promise()},_selectDate:function(n,e){var i=sinclo.scenarioApi._reservation,o=$.Deferred();if(i.isState(i._state.staff)||i.isState(i._state.date)){var t=i._parent.get(i._key.priority)?null:n.id,s=i._parent.get(i._key.priority)?"priority":"normal",a=i._getTargetDate(i._getEnableAfterDate());i.waitInSec(0).then(function(){return i._preparePossibleDate(t,a.fromDate,a.toDate,s)}).then(function(e){var t=JSON.parse(e);i.showCalendarAndWaitInput(n,t.result).then(function(e){i._parent._saveVariable(i._getDatetimeVariable(),e),i._parent.set(i._key.targetDate,e),o.resolve(n,e)})}),e||i._parent._hearing._setCurrentSeq(i._parent._hearing._getLength()+1)}else o.resolve(i._parent.get(i._key.targetMR),i._parent.get(i._key.targetDate));return o.promise()},_preparePossibleDate:function(e,t,n,i){var o=sinclo.scenarioApi._reservation,s=$.Deferred();if(!t||!n){var a=o._getTargetDate();t=a.fromDate,n=a.toDate}var r=common.formatDateParse(Number(t)).split(" ").shift();if(r=r.slice(0,8)+"01",e){var c=null;if(i&&o._cache[i]&&(c=o._cache[i][r]))return c;var l=null;switch(i){case"priority":l="getPossibleDateForCashing",o._cache.priority[r]=s.promise(),o._lock[r]=s;break;default:socket.once("sendRemoteMRReservationPossibleDate",function(e){s.resolve(e)}),l="getRemoteMRReservationPossibleDate"}emit(l,{targetUserId:e,from:common.formatDateParse(Number(t)),to:common.formatDateParse(Number(n))})}else o._getAllStaffIds().then(function(e){o._preparePossibleDate(e,t,n,i).then(function(e){s.resolve(e)})});return s.promise()},_getTargetDate:function(e){var t=new Date;e=e?Number(e):0;var n={fromDate:new Date(t.getFullYear(),t.getMonth(),t.getDate()+e,t.getHours(),t.getMinutes(),t.getSeconds()),toDate:new Date(t.getFullYear(),t.getMonth()+1,0,23,59,59)};return t.getMonth()!==n.fromDate.getMonth()?{fromDate:new Date(n.fromDate.getFullYear(),n.fromDate.getMonth(),n.fromDate.getDate(),0,0,0),toDate:new Date(n.fromDate.getFullYear(),n.fromDate.getMonth()+1,0,23,59,59)}:n},_getNextTargetDate:function(e){var t=sinclo.scenarioApi._reservation;if(!(e=e||Object.keys(t._cache.priority).pop()))return null;var n=new Date(e),i=new Date(n.getFullYear(),n.getMonth()+1,1,0,0,0),o=new Date(n.getFullYear(),n.getMonth()+2,0,23,59,59),s=common.formatDateParse(Number(i)).split(" ").shift();return t._cache.priority[s]?null:{fromDate:i,toDate:o}},_selectTimeSummary:function(b,y,e){var x=sinclo.scenarioApi._reservation,_=$.Deferred();if(x.isState(x._state.date)||x.isState(x._state.timeSummary)){var w=new Date(y+" 00:00:00"),t=x._parent.get(x._key.priority)?null:b.id;x._prepareTime(t,y).then(function(e){var t=JSON.parse(e);if(t.success){var n=x._dayOfWeekMap[w.getDay()],i=t.common,o=y.split("/").join("-"),s={},a=[];for(var r in t.timeTables){var c=t.timeTables[r];if(c.data[o]&&c.data[o].length){var l=c.operation[n];s[r]=x._createSummaryList(y,c.data[o],l,i),x._parent.get(x._key.priority)&&c.data[o].forEach(function(e){var t=e.fromTime+"-"+e.toTime;a[t]=e})}}var d=null,p={};if(0<Object.keys(s).length)if(x._parent.get(x._key.priority)){(a=Object.keys(a).map(function(e){return a[e]})).sort(function(e,t){return e.fromTime<=t.fromTime&&e.toTime<=t.toTime?-1:1}),d=a;var u=x._reframeAndMergeSummaryList(s);for(var g in u){var h=u[g];1<h.length?u[g]=x._mergeState(h,y):1==h.length?u[g]=h[0]:u[g]="none"}p=u}else d=t.timeTables[b.id].data[o],p=s[b.id];var m=Object.keys(p),f=0;for(var v in p){"none"===p[v]&&f++}0===m.length||m.length&&m.length===f?x._showMessage("é¸æå¯è½ãªæéå¸¯ãããã¾ããã§ãããã¹ã¯ã­ã¼ã«ããã ãæ¥ç¨ãåé¸æãã ããã",x._state.timeSummary):x.showButtonAndInputWait(p,"ãå¸æã®éå§æéå¸¯ãé¸æãã¦ãã ããããå¸æã®éå§æéå¸¯ããªãå ´åã¯ã¹ã¯ã­ã¼ã«ããã ãæ¥ç¨ãåé¸æãã ããã").then(function(e){x._parent.set(x._key.targetTimeSummary,e),x._parent.set(x._key.commonTime,i),x._parent.set(x._key.operation,d),x._parent.set(x._key.timeTables,t.timeTables),_.resolve(b,y,e,d,i)})}}),e||x._parent._hearing._setCurrentSeq(x._parent._hearing._getLength()+2)}else _.resolve(x._parent.get(x._key.targetMR),x._parent.get(x._key.targetDate),x._parent.get(x._key.targetTimeSummary),x._parent.get(x._key.operation),x._parent.get(x._key.commonTime));return _.promise()},_showMessage:function(e,t){var n=sinclo.scenarioApi._reservation,i=n._parent;i._doing(i._getIntervalTimeSec(),function(){i._showMessage(i.get(i._lKey.currentScenario).actionType,e,0,i.get(i._lKey.currentScenario).chatTextArea,function(){}),sinclo.chatApi.clearAllDisableSelectableUIClass(Number(i._getIntervalTimeSec())),n.changeState(t)})},_reframeAndMergeSummaryList:function(e){var t=sinclo.scenarioApi._reservation,n=[],i=[];for(var o in e){var s=e[o],a=Object.keys(s),r=a[0].split(" ï½ ")[0];r=t._toTimeString(r.split(":")[0]);var c=a.slice(-1)[0].split(" ï½ ").slice(-1)[0];n.push(r),i.push(c)}n.sort(),i.sort(function(e,t){return e<t?1:-1});for(var l=n[0].split(":"),d=i[0].split(":"),p=new Date(0,0,0,l[0],0),u=new Date(0,0,0,parseInt(l[0])+2,0),g=new Date(0,0,0,d[0],0),h={};u<=g;){var m=(y=("0"+p.getHours()).slice(-2)+":00")+" ï½ "+(x=("0"+u.getHours()).slice(-2)+":00");for(var o in h[m]||(h[m]=[]),e){var f=e[o];for(var v in f){var b=f[v];r=v.split(" ï½ ")[0];r=t._toTimeString(r.split(":")[0]);c=v.split(" ï½ ").slice(-1)[0];c=t._toTimeString(c.split(":")[0]),x<=r||c<=y||h[m].push(b)}}p.setHours(p.getHours()+2),u.setHours(u.getHours()+2)}if(g<u&&p<g){var y,x;m=(y=p.getHours()+":00")+" ï½ "+(x=p.getHours()+1+":00");for(var o in h[m]||(h[m]=[]),e){f=e[o];for(var v in f){b=f[v],r=v.split(" ï½ ")[0],c=v.split(" ï½ ").slice(-1)[0];x<=r||c<=y||h[m].push(b)}}}return h},_mergeState:function(e,t){return-1!==e.indexOf("free")?"free":-1!==e.indexOf("exist")?"exist":"none"},_toMinuteNumber:function(e,t){return t=t||":",Number(e.split(t).pop())},_toHourNumber:function(e,t){return t=t||":",Number(e.split(t).shift())},_toTimeString:function(e,t){return t=("0"+(t=t||"00")).slice(-2),("0"+e).slice(-2)+":"+t},_prepareTime:function(e,t){var n=sinclo.scenarioApi._reservation,i=$.Deferred();if(e){socket.once("sendRemoteMRBlankDatetime",function(e){JSON.parse(e);i.resolve(e)});var o=new Date(t+" 00:00:00"),s=new Date,a=new Date(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0),r=new Date(o.getFullYear(),o.getMonth(),o.getDate(),23,59,59);a.getFullYear()===s.getFullYear()&&a.getMonth()===s.getMonth()&&a.getDate()===s.getDate()&&(a=s),emit("getRemoteMRBlankDatetime",{targetUserId:e,from:common.formatDateParse(Number(a)),to:common.formatDateParse(Number(r))})}else n._getAllStaffIds().then(function(e){n._prepareTime(e,t).then(function(e){i.resolve(e)})});return i.promise()},_selectTimeDetail:function(t,n,e,i,o,s){var a=sinclo.scenarioApi._reservation,r=$.Deferred(),c=e.split(" ï½ "),l=c[0],d=c[c.length-1],p=(Number(l.split(":")[0]),Number(d.split(":")[0])),u=[];if(a.isState(a._state.timeSummary)||a.isState(a._state.timeDetail)){for(var g=new Date(n+" "+l+":00"),h=new Date(g.getFullYear(),g.getMonth(),g.getDate(),g.getHours(),g.getMinutes()+Number(o.length));g.getHours()<p;){for(var m=!1,f={fromTime:g.getHours()+":"+("0"+g.getMinutes()).slice(-2),toTime:h.getHours()+":"+("0"+h.getMinutes()).slice(-2)},v=0;v<i.length;v++)Number(i[v].fromTime.split(":")[0])===g.getHours()&&Number(i[v].fromTime.split(":")[1])===g.getMinutes()&&Number(i[v].toTime.split(":")[0])===h.getHours()&&Number(i[v].toTime.split(":")[1])===h.getMinutes()&&(m=!0);f.enabled=m,u.push(f),g=new Date(g.getFullYear(),g.getMonth(),g.getDate(),g.getHours(),g.getMinutes()+Number(o.buffer)),h=new Date(g.getFullYear(),g.getMonth(),g.getDate(),g.getHours(),g.getMinutes()+Number(o.length))}var b=[];for(v=0;v<u.length;v++)b.push({label:a._joinDateTime(u[v].fromTime,u[v].toTime),enabled:u[v].enabled});var y=Object.keys(b),x=0;for(var v in b){b[v].enabled||x++}0===y.length||y.length&&y.length===x?l.match(/\d{4}\/\d{1,2}\/\d{1,2}/)?a._showMessage("æ¥æã2åº¦é¸æãããç­ã®ä¸æ­£ãªå¥åãç¢ºèªãã¾ããããææ°ãæããã¾ããã¹ã¯ã­ã¼ã«ããã ãæ¥ç¨ããåé¸æãã ããã",a._state.timeDetail):a._showMessage("é¸æå¯è½ãªæéå¸¯ãããã¾ããã§ãããã¹ã¯ã­ã¼ã«ããã ãæ¥ç¨ãåé¸æãã ããã",a._state.timeDetail):a.showPulldownAndInputWait(b).then(function(e){a._parent._saveVariable(a._getMomemtVariable(),e),a._parent.set(a._key.targetTimeDetail,e),r.resolve(t,n,e)}),s||a._parent._hearing._setCurrentSeq(a._parent._hearing._getLength()+3)}else r.resolve(a._parent.get(a._key.targetMR),a._parent.get(a._key.targetDate),a._parent.get(a._key.targetTimeDetail));return r.promise()},_commit:function(e,t,n){var i=sinclo.scenarioApi._reservation,o=$.Deferred(),s=n.split(" ï½ ");return socket.once("resSaveRemoteMRReservation",function(e){o.resolve()}),emit("saveRemoteMRReservation",{targetUserId:e.id,historyId:sinclo.chatApi.historyId,from:t+" "+s[0],to:t+" "+s[1],userId:userInfo.userId,userName:i._parent._getSavedVariable("äºç´èå"),variables:i._parent._getAllTargetVariables()}),i._parent.syncScenarioData._endHearing(),o.promise()},_getStaffList:function(){var t=sinclo.scenarioApi._reservation,n=$.Deferred();return socket.once("sendRemoteMRUserInfo",function(e){t._staffInfo=JSON.parse(e),n.resolve()}),emit("getRemoteMRUserInfo",{siteKey:sincloInfo.site.key}),n.promise()},staffSelectable:function(){var e=sinclo.scenarioApi._reservation;return e._parent.get(e._parent._lKey.currentScenario).canSelect},_execSelectStaff:function(){var n=sinclo.scenarioApi._reservation,i=$.Deferred();if(n.staffSelectable())n.showStaffSelectUIAndWaitInput().then(function(e){var t=n.searchStaffInfoByUserName(e);i.resolve(t)});else if(n.isReferMembership()){var e=userInfo.getCustomerInfoById(n._parent._getCurrentScenario().referCustomerInformationId);if(n.changeState(n._state.staff),n.fireWaitProcessComplete(),scl_check.isset(e)){var t=n.searchStaffInfoByResponsibleId(e);scl_check.isset(t)?i.resolve(t):i.resolve()}else i.resolve()}else n.changeState(n._state.staff),n.fireWaitProcessComplete(),i.resolve();return sinclo.chatApi.clearAllDisableSelectableUIClass(),i.promise()},_reselectStaffIfNecessary:function(e,t,n){var i=sinclo.scenarioApi._reservation,o=null;if(i._parent.get(i._key.priority)&&(o=i._selectStaffAutomatically(t,n)))return o;var s=$.Deferred();return i._parent._saveVariable(i._getRemoteMRVariable(),e.userName),i._parent.set(i._key.targetMR,e),s.resolve(e,t,n),s.promise()},_selectStaffAutomatically:function(e,t){var n=sinclo.scenarioApi._reservation,i=$.Deferred(),o=n._parent.get(n._key.timeTables),s=null,a=n._getAvailableStaffs(e,t,o);return s=1===a.length?a[0]:(s=n._extractStaffInPriority(a))||n._extractLeisureStaff(a),i.resolve(s,e,t),s?i.promise():null},_confirm:function(e,t,n,i){var o=sinclo.scenarioApi._reservation,s=$.Deferred();return o._parent._hearing._requireConfirm()?o._showConfirmMessage(e,t,n):(s.resolve(e,t,n),i||o._parent._hearing._setCurrentSeq(o._parent._hearing._getLength()+4),s.promise())},_getAvailableStaffs:function(e,t,n){var i=sinclo.scenarioApi._reservation,o=[];for(var s in e=e.split("/").join("-"),t=t.split(" ï½ ").map(function(e){return("0"+e).slice(-5)}),n){var a=n[s].data[e];if(a)for(var r in a){var c=a[r];if(t[0]>=c.fromTime&&t[1]<=c.toTime)for(var l in i._staffInfo){var d=i._staffInfo[l];if(Number(d.id)===Number(s)){o.push(d);break}}}}return o},_extractStaffInPriority:function(e){var t=sinclo.scenarioApi._reservation._parent._getCurrentScenario().priorities,n=null;if(!t||!t.length)return null;for(var i in t.sort(function(e,t){return Number(e.order)-Number(t.order)})){var o=t[i];if(1===Number(o.referPriorityMembership)&&(n=userInfo.getCustomerInfoById(o.referCustomerInformationId)))for(var s in e){var a=e[s];if(String(a.responsibleId)===String(n))return a}}},_extractLeisureStaff:function(e){var t,n=null,i=sinclo.scenarioApi._reservation._extractLeisureStaffs(e);return 0<(t=i.length)&&(n=1===t?i[0]:i[Math.floor(Math.random()*Math.floor(t))]),n},_extractLeisureStaffs:function(e){var t=sinclo.scenarioApi._reservation,n=t._parent.get(t._key.timeTables),i={},o=[];for(var s in e){var a=(d=e[s]).id;i[a]=0;var r=n[a].reservation;for(var c in r)i[a]+=r[c]?r[c].length:0}var l=Object.keys(i).reduce(function(e,t){return i[e]<=i[t]?e:t});for(var a in i)if(!(i[a]>i[l]))for(var s in e){var d=e[s];Number(d.id)===Number(a)&&o.push(d)}return o},isReferMembership:function(){var e=sinclo.scenarioApi._reservation;return 1===Number(e._parent.get(e._parent._lKey.currentScenario).referMembership)},searchStaffInfoByResponsibleId:function(e){var t=sinclo.scenarioApi._reservation,n=($.Deferred(),{});if(scl_check.isset(t._staffInfo)&&0<t._staffInfo.length)for(var i=0;i<t._staffInfo.length;i++)String(t._staffInfo[i].responsibleId)===String(e)&&(n=t._staffInfo[i]);return n},searchStaffInfoByUserName:function(e){var t=sinclo.scenarioApi._reservation,n=($.Deferred(),{});if(scl_check.isset(t._staffInfo)&&0<t._staffInfo.length)for(var i=0;i<t._staffInfo.length;i++)String(t._staffInfo[i].userName)===String(e)&&(n=t._staffInfo[i]);return n},searchDefaultStaff:function(){var e=sinclo.scenarioApi._reservation;if(scl_check.isset(e._staffInfo)&&0<e._staffInfo.length)for(var t=0;t<e._staffInfo.length;t++)if(!scl_check.isset(e._staffInfo[t].isRemoteMR)||!e._staffInfo[t].isRemoteMR){result=e._staffInfo[t];break}return result},showStaffSelectUIAndWaitInput:function(){var t=sinclo.scenarioApi._reservation,n=$.Deferred();if(!t.isState(t._state.staff))switch(Number(t._parent.get(t._parent._lKey.currentScenario).selectType)){case 1:for(var e={options:[],carouselCustomDesign:!1,balloonStyle:"1",lineUpStyle:"1",carouselPattern:"2",arrowType:"4",titlePosition:"1",subTitlePosition:"1",outCarouselNoneBorder:!1,inCarouselNoneBorder:!1,customDesign:{borderColor:common.getWidgetSettings().mainColor,backgroundColor:"#FFFFFF",textColor:"#666666",headerBackgroundColor:common.getWidgetSettings().mainColor,headerTextColor:"#FFFFFF",headerWeekdayBackgroundColor:"#F0F0FA",calendarBackgroundColor:"#FFFFFF",calendarTextColor:"#666666",saturdayColor:"#666666",sundayColor:"#666666",titleColor:"#333333",subTitleColor:"#333333",arrowColor:"#6A71CD",titleFontSize:14,subTitleFontSize:13,outBorderColor:"#E8E7E0",inBorderColor:"#E8E7E0",messageAlign:"2",buttonBackgroundColor:"#F0F0FA",buttonTextColor:"#007AFF",buttonAlign:"2",buttonActiveColor:"#B4B8E6",buttonBorderColor:"#E3E3E3",buttonUIBackgroundColor:"#333333",buttonUITextAlign:"2",buttonUITextColor:"#F0F0FA",buttonUIActiveColor:"#B4B8E6",buttonUIBorderColor:"#E3E3E3",checkboxEntireBackgroundColor:"#B4B8E6",checkboxEntireActiveColor:"#6A71CD",checkboxSelectionDistance:4,checkboxBackgroundColor:"#FFFFFF",checkboxActiveColor:"#FFFFFF",checkboxBorderColor:"#6A71CD",checkboxCheckmarkColor:"#6A71CD",checkboxTextColor:"#333333",checkboxActiveTextColor:"#333333",radioBackgroundColor:"#FFFFFF",radioEntireBackgroundColor:"#B4B8E6",radioEntireActiveColor:"#6A71CD",radioActiveColor:"#6A71CD",radioSelectionDistance:4,radioBorderColor:"#6A71CD",radioTextColor:"#333333",radioActiveTextColor:"#333333"},images:[]},i=0;i<t._staffInfo.length;i++)if(scl_check.isset(t._staffInfo[i].isRemoteMR)&&t._staffInfo[i].isRemoteMR){var o={title:t._staffInfo[i].userName,subTitle:"",answer:t._staffInfo[i].userName,url:scl_check.isset(t._staffInfo[i].profileIcon)?t._staffInfo[i].profileIcon:sincloInfo.site.files+"/img/widget/default_profile.png",isUploading:!0};e.images.push(o)}t._parent.set(t._parent._lKey.sendCustomerMessageType,43),t._parent.set(t._parent._lKey.scenarioMessageType,45),t.waitInSec(Number(t._parent._getIntervalTimeSec())).then(function(){sinclo.chatApi.addCarousel("sinclo_re","ãå¸æã®æå½èãé¸æãã¦ãã ããã",e,{}),sinclo.scenarioApi._putHearingCarousel({uiType:"6",message:"ãå¸æã®æå½èãé¸æãã¦ãã ããã",settings:e}),t._parent._saveShownMessage(t._parent.get(t._parent._lKey.currentScenarioSeqNum),t._parent._hearing._getCurrentSeq()),sinclo.chatApi.scDown()});break;case 2:var s={options:[],radioCustomDesign:!1,radioNoneBorder:!1,radioNoneBackground:!0,radioStyle:"1",customDesign:{radioBackgroundColor:"#FFFFFF",radioEntireBackgroundColor:"#B4B8E6",radioEntireActiveColor:"#6A71CD",radioActiveColor:"#6A71CD",radioSelectionDistance:4,radioBorderColor:"#6A71CD",radioTextColor:"#333333",radioActiveTextColor:"#333333"}};for(i=0;i<t._staffInfo.length;i++)scl_check.isset(t._staffInfo[i].isRemoteMR)&&t._staffInfo[i].isRemoteMR&&s.options.push(t._staffInfo[i].userName);t._parent.set(t._parent._lKey.sendCustomerMessageType,33),t._parent.set(t._parent._lKey.scenarioMessageType,55),t.waitInSec(Number(t._parent._getIntervalTimeSec())).then(function(){sinclo.chatApi.addRadioButton("sinclo_re","ãå¸æã®æå½èåãé¸æãã¦ãã ããã",s,{}),t._parent._saveShownMessage(t._parent.get(t._parent._lKey.currentScenarioSeqNum),t._parent._hearing._getCurrentSeq()),sinclo.chatApi.scDown()})}return t._parent._unWaitingInput(),sinclo.chatApi.addKeyDownEventToSendChat(),t._parent._handleChatTextArea("2"),t._parent._saveWaitingInputState(!0),t._parent._waitingInput(function(e){t._parent._unWaitingInput(),n.resolve(e)}),t.changeState(t._state.staff),t.fireWaitProcessComplete(),n.promise()},_getHearingLength:function(){var e=sinclo.scenarioApi._reservation;return e._parent.get(e._parent._lKey.currentScenario).hearings.length},isCanCancelReservation:function(){var e=sinclo.scenarioApi._reservation;return e._parent.get(e._parent._lKey.currentScenario).canCancelReservation},_getCancelMessage:function(){var e=sinclo.scenarioApi._reservation;return e._parent._replaceVariable(e._parent.get(e._parent._lKey.currentScenario).cancelMessage)},_getAfterCancelAction:function(){var e=sinclo.scenarioApi._reservation;return e._parent.get(e._parent._lKey.currentScenario).afterCancelActions},isEnableAfterDate:function(){var e=sinclo.scenarioApi._reservation;return e._parent.get(e._parent._lKey.currentScenario).isEnableAfterDate},_getEnableAfterDate:function(){var e=sinclo.scenarioApi._reservation;return e._parent.get(e._parent._lKey.currentScenario).enableAfterDate},showCalendarAndWaitInput:function(c,l){var d=sinclo.scenarioApi._reservation,t=$.Deferred();sinclo.chatApi._disableAllSelectableUI();var p={disablePastDate:!0,isSetDisableDate:!0,isDisableDayOfWeek:!0,isSetSpecificDate:!0,isEnableAfterDate:d.isEnableAfterDate(),enableAfterDate:d._getEnableAfterDate(),isDisableAfterData:!1,dayOfWeekSetting:[!1,!1,!1,!1,!1,!1,!1],setSpecificDateType:"2",specificDateData:["2019/09/12","2019/09/13"],language:1,calendarCustomDesign:!1,customDesign:{borderColor:common.getWidgetSettings().mainColor,backgroundColor:"#FFFFFF",textColor:"#666666",headerBackgroundColor:common.getWidgetSettings().mainColor,headerTextColor:"#FFFFFF",headerWeekdayBackgroundColor:"#F0F0FA",calendarBackgroundColor:"#FFFFFF",calendarTextColor:"#666666",saturdayColor:"#666666",sundayColor:"#666666"},dataLoaded:!0};"5ec7981279b54"!==sincloInfo.site.key&&"5e3a5d5f9578c"!==sincloInfo.site.key||(p.isDisableAfterDate=!0,p.disableAfterDate=56),l=Object.keys(l),l=Array.isArray(l)&&0<l.length?l:["1970-01-01"],p.specificDateData=l;function n(e,t,n){var i,o=new Date(n.currentYear,n.currentMonth,1,0,0,0),s=new Date(n.currentYear,n.currentMonth+1,0,23,59,59),a=d._parent.get(d._key.priority)?null:c.id,r=d._parent.get(d._key.priority)?"priority":"normal";a||(i=d._getNextTargetDate(common.formatDateParse(Number(o))))&&d._preparePossibleDate(a,i.fromDate,i.toDate,r);d._preparePossibleDate(a,o,s,r).then(function(e){var t=JSON.parse(e);l=Object.keys(t.result),l=Array.isArray(l)&&0<l.length?l:["1970-01-01"],p.specificDateData=l;var n=sinclo.chatApi.createCalendarOption(p);u.config.enable=n.enable,u.redraw()})}var u=null;if(d.isState(d._state.date)){var e=document.getElementsByTagName("sinclo-chat")[0].children.length,i=document.querySelector("#sinclo-datepicker"+e);i&&(u=i._flatpickr)&&u.config.onMonthChange.push(n),sinclo.chatApi.clearAllDisableSelectableUIClass(Number(d._parent._getIntervalTimeSec()))}else d._parent.set(d._parent._lKey.sendCustomerMessageType,35),d._parent.set(d._parent._lKey.scenarioMessageType,42),d.waitInSec(Number(d._parent._getIntervalTimeSec())).then(function(){var e=d.isCanCancelReservation(),t=d._getCancelMessage();u=sinclo.chatApi.addCalendar("sinclo_re","ãå¸ææ¥ãé¸æãã¦ä¸ãã",p,void 0,e,t),sinclo.scenarioApi._putHearingCalendar({uiType:"5",message:"ãå¸ææ¥ãé¸æãã¦ä¸ãã",settings:p,cancelReservation:e,cancelMessage:t}),d._parent._saveShownMessage(d._parent.get(d._parent._lKey.currentScenarioSeqNum),d._parent._hearing._getCurrentSeq()),u.config.onMonthChange.push(n),sinclo.chatApi.scDown(),sinclo.chatApi.clearAllDisableSelectableUIClass(Number(d._parent._getIntervalTimeSec()))});return d._parent._unWaitingInput(),d._parent._handleChatTextArea("2"),d._parent._saveWaitingInputState(!0),d._parent._waitingInput(function(e){d._parent._unWaitingInput(),t.resolve(e)}),d.changeState(d._state.date),d.fireWaitProcessComplete(),t.promise()},_doAfterCancelAction:function(){var n=sinclo.scenarioApi._reservation,i=n._getAfterCancelAction();switch(n._parent.syncScenarioData._endHearing(),n._parent.unsetSequenceList(n._parent.get(n._parent._lKey.currentScenarioSeqNum)),sinclo.chatApi.clearAllDisableSelectableUIClass(Number(n._parent._getIntervalTimeSec())),n.changeState(n._state.hearing),Number(i.actionType)){case 1:n._parent._doing(n._parent._getIntervalTimeSec(),function(){n._parent._showMessage(10,i.message,n._parent.get(sinclo.scenarioApi._hearing._state.currentSeq)+1,n._parent.get(n._parent._lKey.currentScenario).chatTextArea,function(){n._parent._goToNextScenario()&&n._parent._process()})});break;case 2:var o=i.callScenarioId;"self"===o&&(o=(o=n._parent._getCurrentScenario().scenarioId)||n._parent.get(n._parent._lKey.scenarioId)),emit("getScenario",{scenarioId:o},function(e){var t=!!i.executeNextAction&&i.executeNextAction;n._parent._mergeScenario(e,t,o),n._parent._goToNextScenario(!0)&&n._parent._process()});break;case 3:common.chatBotTypingRemove();var e=Number(n._parent.get(n._parent._lKey.currentScenarioSeqNum)),t=n._parent._getReturnSettingsOnCallerScenario(e);t.isReturn?(n._parent.set(n._parent._lKey.currentScenarioSeqNum,t.lastSequenceNum),n._parent._goToNextScenario()&&n._parent._process()):n._parent._end();break;case 4:n._parent._goToNextScenario()&&n._parent._process();break;case 5:var s=null,a=i.openType;2===Number(a)&&(s=window.open("about:blank","sincloChild"+(new Date).getTime())),n._parent._doing(.2,function(){var e=i.url;switch(Number(a)){case 1:location.href=e;break;case 2:s.location.href=e}n._parent._goToNextScenario()&&n._parent._process()});break;case 6:var r=i.callDiagramId;n._parent._end(),window.sincloInfo.contract.chatbotTreeEditor&&(socket&&!socket.isConnected()?$.ajax({type:"get",url:window.sincloInfo.site.files+"/settings/diagram",cache:!1,data:{sitekey:window.sincloInfo.site.key,did:r},dataType:"json",success:function(e){sinclo.chatApi.execDiagram(e)},error:function(e,t,n){$("#XMLHttpRequest").html("XMLHttpRequest : "+e.status),$("#textStatus").html("textStatus : "+t),$("#errorThrown").html("errorThrown : "+n.message)}}):emit("getChatDiagram",{diagramId:r}))}},_hideMessage:function(e){emit("hideReservationMessages",{hideMessages:e})},_handleReservationCancel:function(e){var t=sinclo.scenarioApi._reservation,n=document.getElementsByTagName("sinclo-chat")[0],i=$(e).prev("div").find("li").data("hearingSeqNum"),o=[],s=$(e);if(0!==t._getHearingLength()||t.staffSelectable())for(var a=0;a<3+2*i;a++)s=s.prev("div");else s=s.prev("div");s[0]?s.nextAll("div").each(function(e,t){o.push($(this).find("li").data("chatId")),$(this).remove()}):$(n).find("div").each(function(e,t){o.push($(this).find("li").data("chatId")),$(this).remove()});var r=Number.MAX_VALUE;for(a=0;a<o.length;a++){var c=Number(o[a]);0!==c&&c<r&&(r=c)}t._hideMessage(o)},showButtonAndInputWait:function(e,t){var n=sinclo.scenarioApi._reservation,i=$.Deferred(),o=document.getElementsByTagName("sinclo-chat")[0],s=o.children[o.children.length-1],a=$(s).find(".sinclo-button-ui");if(sinclo.chatApi._disableAllSelectableUI(),n.isState(n._state.timeSummary)&&0===a.length||!n.isState(n._state.timeSummary)){var r={options:e,buttonUICustomDesign:!1,customDesign:{buttonUIBackgroundColor:"#333333",buttonUITextAlign:"2",buttonUITextColor:"#F0F0FA",buttonUIActiveColor:"#B4B8E6",buttonUIBorderColor:"#e3e3e3"}};"5ec7981279b54"!==sincloInfo.site.key&&"5e3a5d5f9578c"!==sincloInfo.site.key||(r.buttonUICustomDesign=!0,r.customDesign.buttonUIBackgroundColor="#F5C0D4",r.customDesign.buttonUITextColor="#333333",r.customDesign.buttonUIActiveColor="#F5D4DF",r.customDesign.buttonUIBorderColor="#E3E3E3"),n._parent.set(n._parent._lKey.sendCustomerMessageType,50),n._parent.set(n._parent._lKey.scenarioMessageType,49),n.waitInSec(Number(n._parent._getIntervalTimeSec())).then(function(){sinclo.chatApi.addButtonUI("sinclo_re",t,r),sinclo.scenarioApi._putHearingButtonUI({uiType:"8",message:t,settings:r}),n._parent._saveShownMessage(n._parent.get(n._parent._lKey.currentScenarioSeqNum),n._parent._hearing._getCurrentSeq()),sinclo.chatApi.scDown(),sinclo.chatApi.clearAllDisableSelectableUIClass(Number(n._parent._getIntervalTimeSec()))})}else sinclo.chatApi.clearAllDisableSelectableUIClass(Number(n._parent._getIntervalTimeSec()));return n._parent._unWaitingInput(),n._parent._handleChatTextArea("2"),n._parent._saveWaitingInputState(!0),n._parent._waitingInput(function(e){n._parent._unWaitingInput(),i.resolve(e)}),n.changeState(n._state.timeSummary),n.fireWaitProcessComplete(),i.promise()},showPulldownAndInputWait:function(e){var t=sinclo.scenarioApi._reservation,n=$.Deferred();if(sinclo.chatApi._disableAllSelectableUI(),t.isState(t._state.timeDetail))sinclo.chatApi.clearAllDisableSelectableUIClass(Number(t._parent._getIntervalTimeSec()));else{var i={options:e,pulldownCustomDesign:!1,customDesign:{buttonUIBackgroundColor:"#333333",buttonUITextAlign:"2",buttonUITextColor:"#F0F0FA",buttonUIActiveColor:"#B4B8E6",buttonUIBorderColor:"#E3E3E3"}};t._parent.set(t._parent._lKey.sendCustomerMessageType,34),t._parent.set(t._parent._lKey.scenarioMessageType,41),t.waitInSec(Number(t._parent._getIntervalTimeSec())).then(function(){sinclo.chatApi.addPulldown("sinclo_re","ãå¸æã®æéãé¸æãã¦ãã ããããå¸æã®æéããªãå ´åã¯ã¹ã¯ã­ã¼ã«ããã ãæ¥æãåé¸æãã¦ãã ããã","",i,{}),sinclo.scenarioApi._putHearingPulldown({uiType:"4",message:"ãå¸æã®æéãé¸æãã¦ãã ããããå¸æã®æéããªãå ´åã¯ã¹ã¯ã­ã¼ã«ããã ãæ¥æãåé¸æãã¦ãã ããã",settings:i}),t._parent._saveShownMessage(t._parent.get(t._parent._lKey.currentScenarioSeqNum),t._parent._hearing._getCurrentSeq()),sinclo.chatApi.scDown(),sinclo.chatApi.clearAllDisableSelectableUIClass(Number(t._parent._getIntervalTimeSec()))})}return t._parent._unWaitingInput(),t._parent._handleChatTextArea("2"),t._parent._saveWaitingInputState(!0),t._parent._waitingInput(function(e){n.resolve(e)}),t.changeState(t._state.timeDetail),t.fireWaitProcessComplete(),n.promise()},_showConfirmMessage:function(t,n,i){var o=sinclo.scenarioApi._reservation,s=$.Deferred();sinclo.chatApi._disableAllSelectableUI(),scl_check.isIE()&&sinclo.scenarioApi.syncScenarioData.sendDetail("forceWaiting"),o._parent.set(o._parent._lKey.sendCustomerMessageType,14),o._parent.set(o._parent._lKey.scenarioMessageType,22);function e(){o.changeState(o._state.confirm),o._parent._waitingInput(function(e){o._parent._unWaitingInput(),o._parent._handleStoredMessage(),e===o._parent.get(o._parent._lKey.currentScenario).success?(o._parent._hearing._clearRetryFlg(),o._parent.cvIsEnable()&&setTimeout(function(){emit("addLastMessageToCV",{historyId:sinclo.chatApi.historyId})},500),o._parent._hearing._disableAllHearingMessageInput(),o._parent.syncScenarioData.sendDetail("endHearing"),s.resolve(t,n,i)):e===o._parent.get(o._parent._lKey.currentScenario).cancel?(o._parent._hearing._disableAllHearingMessageInput(),o._parent.syncScenarioData.sendDetail("endHearing","isRetrying"),o._parent._hearing._setRetryFlg(),o._parent._deleteShownMessage(o._parent.get(o._parent._lKey.currentScenarioSeqNum),o._parent.get(o._parent._hearing._state.currentSeq)+1),o._parent._hearing._setCurrentSeq(0),s.reject()):o._showError()}),sinclo.chatApi.clearAllDisableSelectableUIClass(Number(o._parent._getIntervalTimeSec()))}var a=o._parent._createSelectionMessage(o._parent.get(o._parent._lKey.currentScenario).confirmMessage,[o._parent.get(o._parent._lKey.currentScenario).success,o._parent.get(o._parent._lKey.currentScenario).cancel]);return o.isState(o._state.confirm)?(o._parent._handleChatTextArea("2"),e()):o._parent._doing(o._parent._getIntervalTimeSec(),function(){o._parent._handleChatTextArea("2"),o._parent._showMessage(o._parent.get(o._parent._lKey.currentScenario).actionType,a,o._parent.get(o._parent._hearing._state.currentSeq)+1,"2",e)}),s.promise()},_createSummaryList:function(e,t,n,i){for(var o=sinclo.scenarioApi._reservation,s={},a=0;a<n.length;a++){for(var r=n[a].fromTime,c=n[a].toTime,l=Number(r.split(":")[0]),d=Number(c.split(":")[0]);l<d;){var p=l+2;s[o._joinDateTime(l+":00",p+":00")]=o._judgeReservation(e,l,p,t,i.buffer,i.length),l+=2}var u=Object.keys(s);delete s[u[u.length-1]],s[o._joinDateTime(l-2+":00",d+":00")]=o._judgeReservation(e,l-2,p,t,i.buffer,i.length)}return s},_judgeReservation:function(e,t,n,i,o,s){var a=sinclo.scenarioApi._reservation;if(0===i.length)return"none";for(var r=new Date(e+" "+t+":00:00"),c=new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes()+Number(s)),l=!1,d=!1;r.getHours()<n;){for(var p=!1,u=0;u<i.length;u++)a._timeExists(i[u],r,c)&&(l=p=!0);p||(d=!0),r=new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes()+Number(o)),c=new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes()+Number(s))}return l&&!d?"free":l&&d?"exist":"none"},_joinDateTime:function(e,t){return e+" ï½ "+t},_timeExists:function(e,t,n){return Number(e.fromTime.split(":")[0])===t.getHours()&&Number(e.fromTime.split(":")[1])===t.getMinutes()&&Number(e.toTime.split(":")[0])===n.getHours()&&Number(e.toTime.split(":")[1])===n.getMinutes()},_getMomemtVariable:function(){var e=sinclo.scenarioApi._reservation;return e._parent.get(e._parent._lKey.currentScenario).momentVariable},_getDatetimeVariable:function(){var e=sinclo.scenarioApi._reservation;return e._parent.get(e._parent._lKey.currentScenario).dateTimeVariable},_getRemoteMRVariable:function(){var e=sinclo.scenarioApi._reservation;return scl_check.isset(e._parent.get(e._parent._lKey.currentScenario).remoteMRVariable)?e._parent.get(e._parent._lKey.currentScenario).remoteMRVariable:"æå½èå"},waitInSec:function(e){return sinclo.scenarioApi._reservation._parent.wait(1e3*e)}},_inputForm:{attributeType:{name:1,phone:2,mail:3,birthday:4,address:5,calendar:6,other:7},inputType:{name:{"1box":1,lastFirst:2,nameKana:3,lastFirstKana:4},phone:{"1box":1,separate:2},mail:{"1box":1,separate:2},sex:{horizontal:1,vertical:2},birthday:{yearMonthDay:1},address:{"1box":1,zipAddress:2,separate:3,change:99},calendar:{calendar:1},other:{textbox:1,textarea:2,radio:3,pulldown:4,button:5,checkbox:6}},event:{inputComplete:"sif:inputComplete",sendComplete:"sif:sendComplete",inputCompleteHook:"sif:inputCompleteHook"},messageType:{answer:56,reAnswer:57},_parent:null,getAnswerValueFromKey:function(e,n){var i="";return scl_check.isset&&e.some(function(e,t){if(0===n.indexOf(e.key))return i=e.value,!0}),i},_init:function(e){this._parent=e},_process:function(){sinclo_client_log.client_log("scenarioApi._inputForm._process","");var i=sinclo.scenarioApi._inputForm;sinclo.hideTextarea(),i._parent.wait(1e3*i._parent._getIntervalTimeSec()).then(function(){i._showForm(i._parent.get(i._parent._lKey.currentScenario)),sinclo.chatApi.scDown({}),i._parent._saveWaitingInputState(!0),$(document).off(i.event.inputComplete),$(document).one(i.event.inputComplete,function(e,t){i._parent._handleStoredMessage();var n=sinclo.chatApi.getInputFormValue(t.data,t.chatElementIndex);n.forEach(function(e,t,n){i._parent._saveVariable(e.key,e.value)}),sinclo.chatApi.send(JSON.stringify({inputForm:t.data.inputForm,answer:n,customDesign:t.data.customDesign})),$(document).one("sinclo:sendChatCompleted",function(){i._parent._saveWaitingInputState(!1),$(document).trigger(i.event.inputCompleteHook),setTimeout(function(){sinclo.chatApi.scDown({}),i._parent.cvIsEnable()?setTimeout(function(){emit("addLastMessageToCV",{historyId:sinclo.chatApi.historyId},function(){i._parent._goToNextScenario()&&i._parent._process()})},500):i._parent._goToNextScenario()&&i._parent._process()},100)})})})},_showForm:function(e){sinclo.scenarioApi._inputForm;sinclo.chatApi.addScenarioInputForm(e)}},_changeAddress:{messageType:{answer:58,reAnswer:57},_parent:null,_init:function(e){this._parent=e},_jisCodeMap:{},_process:function(){sinclo_client_log.client_log("scenarioApi._changeAddress._process","");var e=sinclo.scenarioApi._changeAddress,t=e._parent;sinclo.hideTextarea(),t._doing(t._getIntervalTimeSec(),e._doInputForm)},_doInputForm:function(){var e=sinclo.scenarioApi._changeAddress,t=e._parent,n=(t._getCurrentScenario(),t._inputForm),i=sinclo.chatApi,o=i.validateInputForm;i.validateInputForm=e._validateInputForm,$(document).off(n.event.inputCompleteHook),$(document).one(n.event.inputCompleteHook,function(){sinclo.chatApi.validateInputForm=o,e._saveDeliveryVariable()}),t.set(t._lKey.sendCustomerMessageType,e.messageType.answer),t.set(t._lKey.scenarioMessageType,e.messageType.reAnswer),e._modifyCurrentScenario(),n._init(t),n._process()},_saveDeliveryVariable:function(){var e=sinclo.scenarioApi._changeAddress,t=e._parent,n=t._getCurrentScenario(),i=t._getStoredVariable(n.setting.variable.postcode),o=t._getStoredVariable(n.setting.variable.address2),s=e._jisCodeMap[o];e._getDeliveryMethod(i,s).then(function(e){t._saveVariable(n.JISCodeVariable,s),t._saveVariable(n.judgeAddressVariable,e.delivery_method),t._saveVariable(n.deliveryWeekDayVariable,e.arrival_week_name)},function(){alert("ãå±ãæ¹æ³ã®åå¾ã«å¤±æãã¾ããã")})},_modifyCurrentScenario:function(){var e=sinclo.scenarioApi,t=e._inputForm,n=e._getCurrentScenario();n.inputForm=[{attribute:t.attributeType.address,type:t.inputType.address.change,isShowLabel:!0,isShowPlaceholder:!0,required:!0,addressAutoComplete:!1,settings:n.setting,customDesign:{elementDistance:n.customDesign.elementDistance}}],n.restore=!1,n.cv=!1,e.set(e._lKey.currentScenario,n)},_validateInputForm:function(e,t){var n=sinclo.scenarioApi._changeAddress,i=n._getFormId();n._initInputFormState(),$(i+" .inputFormOKButton").on("click",function(){if(n._changeInputFormState(),$(this).hasClass("disabled"))return!1;$(document).trigger(sinclo.scenarioApi._inputForm.event.inputComplete,{data:e,chatElementIndex:t}),n._disableAll(e)})},_disableAll:function(t){var n=sinclo.scenarioApi._changeAddress,i=n._getFormId();Object.keys(t.inputForm[0].settings.variable).forEach(function(e){"address1"!==e&&n._changeDisabled($(i+" ."+e),!0,t)}),n._changeDisabled($(i+" span.inputFormOKButton"),!0,t)},_postcodeHandler:function(e){var i=sinclo.scenarioApi._changeAddress,t=i._getFormId(),o=$(t+" .address1"),s=$(t+" .address2");i._getAddressList(e.value).then(function(e){for(var t in i._jisCodeMap={},o.text(Array.isArray(e)&&0<e.length?e[0].pref_name:""),i._initSelectBox(s),e){var n=e[t].joined;i._appendOption(s,n,n),i._jisCodeMap[n]=e[t].address_jis_code}i._changeInputFormState()},function(){alert("ãã¼ã¿ãåå¾ã§ãã¾ããã§ããã")})},_initSelectBox:function(e){var t=sinclo.scenarioApi._changeAddress;e.find("option").remove(),t._appendOption(e,"é¸æãã¦ãã ãã","")},_appendOption:function(e,t,n){e.append($("<option>").html(t).val(n))},_getAddressList:function(e){var t=$.Deferred();return e?(socket.once("sendAddressList",function(e){t.resolve(JSON.parse(e))}),emit("getAddressList",{postal_code:e})):t.resolve(),t.promise()},_getDeliveryMethod:function(e,t){var n=$.Deferred();return socket.once("sendDeliveryMethod",function(e){n.resolve(JSON.parse(e))}),emit("getDeliveryMethod",{postal_code:e,address_jis_code:t}),n.promise()},_initInputFormState:function(){var e=sinclo.scenarioApi._changeAddress,t=e._getFormId(),n=$(t+" .postcode"),i=$(t+" .address1"),o=$(t+" .address2"),s=$(t+" .address3"),a=$(t+" .address4"),r=$(t+" span.inputFormOKButton");n.val(""),i.text(""),e._initSelectBox(o),s.val(""),a.val(""),e._changeDisabled(o,!0),e._changeDisabled(s,!0),e._changeDisabled(a,!0),e._changeDisabled(r,!0)},_changeInputFormState:function(){var e=sinclo.scenarioApi._changeAddress,t=e._getFormId(),n=$(t+" .postcode"),i=$(t+" .address1"),o=$(t+" .address2"),s=$(t+" .address3"),a=$(t+" .address4"),r=$(t+" span.inputFormOKButton"),c=!n.val(),l=c||!i.text(),d=1<o.find("option").length,p=l||!d||!o.val(),u=p,g=u||!s.val();c?e._initInputFormState():(e._changeDisabled(o,l),e._changeDisabled(s,p),e._changeDisabled(a,u),e._changeDisabled(r,g))},_getFormId:function(){return"#chat_element"+(document.getElementsByTagName("sinclo-chat")[0].children.length-1)+"_inputForm"},_changeDisabled:function(e,t,n){var i=t?"addClass":"removeClass",o=sinclo.scenarioApi._getCurrentScenario(),s=(o=n||o).customDesign.boxBackgroundColor,a=o.customDesign.textColor,r=t?.5:1;switch(!0){case e.is(".inputFormOKButton"):e[i]("disabled").css({opacity:r});break;case e.is('input[type="radio"]'):case e.is('input[type="checkbox"]'):e[i]("disabled").parent("label, sinclo-radio").css({opacity:r,"pointer-events":t?"none":"auto"});break;case e.is("select"):e.prop("disabled",t).css({"pointer-events":t?"none":"auto","background-color":t?"#CCCCCC":s,color:a});break;default:e.prop("disabled",t).css({"background-color":t?"#CCCCCC":s,color:a})}}},syncScenarioData:{sendLockFlg:!1,sendDetail:function(e,t){if(!this.sendLockFlg&&sinclo.scenarioApi.isProcessing()){var n=sinclo.scenarioApi,i=0,o=0;try{i=n.get(n._lKey.currentScenarioSeqNum)}catch(e){}try{o=n._hearing._getCurrentSeq()}catch(e){}emit("syncScenarioData",{detail:e,scenarioSeq:i,hearingSeq:o,otherInformation:t,siteKey:sincloInfo.site.key,sessionID:userInfo.sincloSessionId})}},checkDetail:function(e){sinclo.scenarioApi;var t=JSON.parse(e),n=t.param;if(t.tabId!==userInfo.tabId&&document.getElementById("sincloBox")){if(sinclo.diagramApi.callScenario.checkCallScenario()&&"startScenario"===n&&sinclo.chatApi.disableAllButtons(),this.sendLockFlg=!0,"startScenario"===n)this._startScenario(t.otherInformation);else if("startHearing"===n)this._startHearing(t.otherInformation);else if("changeScenarioSeq"===n)this._changeScenarioSeq(t.scenarioSeq,t.otherInformation);else if("changeHearingSeq"===n)this._changeHearingSeq(t.hearingSeq);else if("endHearing"===n)this._endHearing(t.otherInformation,t.scenarioSeq);else if("endScenario"===n)this._endScenario();else if("cancelHearing"===n)if(sinclo.scenarioApi._reservation.isInMode()){var i=sinclo.scenarioApi._reservation.calcStateByScequenceNum(t.hearingSeq,sinclo.scenarioApi._hearing._getLength());sinclo.scenarioApi._reservation.changeState(i),sinclo.scenarioApi._hearing._setCurrentSeq(t.hearingSeq),this._deleteAnsweredMessage(t.otherInformation)}else this._cancelHearing(t.otherInformation);else"forceWaiting"===n?this._forceInputWaiting():"handleTextArea"===n?this._syncFreeInputArea(t.otherInformation):"startBulkHearing"===n?this._startBulkHearing():"syncCustomerInfo"===n&&this._syncCustomerInfo();this.sendLockFlg=!1}},_startScenario:function(e){sinclo.scenarioApi._disablePreviousRadioButton(),scl_check.isIE()&&(sinclo.scenarioApi.init(e.id,e.scenarioObj,!0),sinclo.scenarioApi._saveProcessingState(!0))},_startHearing:function(e){sinclo.scenarioApi.set(sinclo.scenarioApi._lKey.currentScenario,e),sinclo.scenarioApi._hearing._init(sinclo.scenarioApi),sinclo.scenarioApi._hearing._process(!1,!0)},_startBulkHearing:function(){sinclo.scenarioApi._bulkHearing._init(sinclo.scenarioApi),sinclo.scenarioApi._bulkHearing._process(),sinclo.scenarioApi.set(sinclo.scenarioApi._lKey.sendCustomerMessageType,30)},_changeScenarioSeq:function(e,t){sinclo.scenarioApi._handleChatTextArea("2"),scl_check.isIE()&&(sinclo.scenarioApi.set(sinclo.scenarioApi._lKey.currentScenarioSeqNum,Number(e)),sinclo.scenarioApi.set(sinclo.scenarioApi._lKey.currentScenario,t));var n=Number(e),i=sinclo.scenarioApi.get(sinclo.scenarioApi._lKey.scenarios);if(Object.keys(i).length>n){var o=i[n];String(o.actionType)!==sinclo.scenarioApi._actionType.inputForm&&String(o.actionType)!==sinclo.scenarioApi._actionType.changeAddress||sinclo.scenarioApi._process()}},_changeHearingSeq:function(e){scl_check.isIE()&&sinclo.scenarioApi._hearing._setCurrentSeq(e),sinclo.scenarioApi._hearing._process(!1,!0);var t=$("p.sincloButtonWrap");void 0!==t&&t.eq(0).remove(),this._forceInputWaiting()},_cancelHearing:function(e){this._deleteAnsweredMessage(e),sinclo.scenarioApi._hearing._execute(sinclo.scenarioApi._hearing._getCurrentHearingProcess(),!0)},_deleteAnsweredMessage:function(e){var t=$("#sincloBox #chatTalk").find('li[data-chat-id="'+e+'"]'),n=[];n.push(e),t.closest("div").nextAll().each(function(e,t){n.push($(this).find("li").data("chatId")),$(this).fadeOut("fast").promise().then(function(){$(this).remove()})}),t.closest("div").fadeOut("fast").promise().then(function(){$(this).remove()})},_endHearing:function(e,t){sinclo.scenarioApi._saveWaitingInputState(!1),sinclo.scenarioApi._hearing._disableAllHearingMessageInput(),null!==e&&"isRetrying"===e&&(sinclo.scenarioApi._hearing._setRetryFlg(),sinclo.scenarioApi.unsetSequenceList(t)),sinclo.scenarioApi._hearing._setCurrentSeq(0),sinclo.scenarioApi._hearing.isConfirmingFlg=!1,sinclo.scenarioApi._hearing._saveConfirmFlg(!1)},_endScenario:function(){sinclo.scenarioApi._end(!0)},_forceInputWaiting:function(){sinclo.scenarioApi.isProcessing()&&sinclo.scenarioApi._saveWaitingInputState(!0)},_syncFreeInputArea:function(e){switch(Number(e.type)){case 1:sinclo.displayTextarea(e.skippable,e.disabled);break;case 2:sinclo.hideTextarea()}},_syncCustomerInfo:function(){sinclo.scenarioApi._addCustomerInformation._init(sinclo.scenarioApi),sinclo.scenarioApi._addCustomerInformation._getValueAndSend(function(){})}}},diagramApi:{defaultVal:{d_id:0,scl_d_currentdata:{},d_waitingProcess:!1,d_processing:{},d_waiting:!1,d_messages:[],d_messageInterval:2,d_allowSave:!1,d_diagrams:{},d_length:0,d_currentNode:{},d_sendCustomerMessageType:1,d_diagramMessageType:3,d_firstCalled:!1},messageType:{customer:{branch:301,operator:303},message:{branch:300,text:302}},sinclo_storage:{_lKey:{beforeTextareaOpened:"d_beforeTextareaOpened",base:"scl_d_currentdata",diagrams:"d_diagrams",diagramId:"d_id",waitingProcess:"d_waitingProcess",processing:"d_processing",waitingInput:"d_waiting",messages:"d_messages",messageInterval:"d_messageInterval",allowSave:"d_allowSave",diagramLength:"d_length",currentNode:"d_currentNode",sendCustomerMessageType:"d_sendCustomerMessageType",diagramMessageType:"d_diagramMessageType",firstCalled:"d_firstCalled",chatTextArea:"d_chatTextArea"},set:function(e,t){var n=sinclo.diagramApi.sinclo_storage,i={};if(e===n._lKey.diagrams){var o=n.get(n._lKey.diagramId);(i=n.getBaseObj())[e][o]=t,n.setBaseObj(i)}else(i=n.getBaseObj())[e]=t,n.setBaseObj(i)},setSendCustomerMessageType:function(e){var t=sinclo.diagramApi.sinclo_storage;t.set(t._lKey.sendCustomerMessageType,e)},setDiagramMessageType:function(e){var t=sinclo.diagramApi.sinclo_storage;t.set(t._lKey.diagramMessageType,e)},get:function(e,t){var n=sinclo.diagramApi,i={};if(e===n.sinclo_storage._lKey.variables)return i={},(i=sinclo_storage.l.get(n.sinclo_storage._lKey.variables)?sinclo_storage.l.get(n.sinclo_storage._lKey.variables):i)&&"string"==typeof i?JSON.parse(i):i;if(e!==n.sinclo_storage._lKey.diagrams)return void 0!==(i=n.sinclo_storage.getBaseObj())[e]&&null!==i[e]?i[e]:n.defaultVal[e];var o=t||n.sinclo_storage.get(n.sinclo_storage._lKey.diagramId);return(i=n.sinclo_storage.getBaseObj())[e][o]?i[e][o]:{}},getCurrentNode:function(){var e=sinclo.diagramApi.sinclo_storage;return e.get(e._lKey.currentNode)},getSendCustomerMessageType:function(e,t){var n=sinclo.diagramApi;if("manual"===e&&"callOperator"===t)return n.messageType.customer.operator;var i;return i=n.sinclo_storage.get(n.sinclo_storage._lKey.diagrams,Number(e))[t].attrs.nodeBasicInfo.nodeType,n.messageType.customer[i]},getDiagramMessageType:function(e,t){var n=sinclo.diagramApi,i=n.sinclo_storage.get(n.sinclo_storage._lKey.diagrams,Number(e))[t].attrs.nodeBasicInfo.nodeType;return n.messageType.message[i]},unset:function(e){var t=sinclo.diagramApi.sinclo_storage,n=t._getBaseObj();delete n[e],t.setBaseObj(n)},exists:function(){var e=sinclo.diagramApi.sinclo_storage._getBaseObj();return 0!==Object.keys(e).length},getBaseObj:function(){var e=sinclo.diagramApi.sinclo_storage,t=sinclo_storage.l.get(e._lKey.base);return t?JSON.parse(t):{}},setBaseObj:function(e){var t=sinclo.diagramApi.sinclo_storage;sinclo_storage.l.set(t._lKey.base,JSON.stringify(e))},putDiagramMessage:function(e,t,n,i){var o=sinclo.diagramApi,s={nodeId:e,type:t,messageType:o.sinclo_storage.getDiagramMessageType(o.common.getDiagramId(),e),showTextarea:i,message:n};if(!o.common.disallowSaveing())return o.sinclo_storage._storeMessageToDB([s]);o.sinclo_storage._pushDiagramMessage(s).then(function(){}),sinclo.setForNotHavingConnectionMessageStack(s)},_storeMessageToDB:function(e){var t=$.Deferred();return emit("storeDiagramMessage",{message:e},function(){t.resolve()}),t.promise()},_pushDiagramMessage:function(e){var t=$.Deferred();return emit("sendDiagramMessage",e,function(){t.resolve()}),sinclo.chatApi.store.save(e),t.promise()},_unsetBaseObj:function(){var e=sinclo.diagramApi.sinclo_storage;sinclo_storage.l.unset(e._lKey.base)},getNodeById:function(e,t){var n=sinclo.diagramApi,i={},o=n.sinclo_storage.get(n.sinclo_storage._lKey.diagrams,e);return o[t]&&(i=o[t]),i},setWaitingProcess:function(){var e=sinclo.diagramApi;e.sinclo_storage.set(e.sinclo_storage._lKey.waitingProcess,!0)},unsetWaitingProcess:function(){var e=sinclo.diagramApi;e.sinclo_storage.set(e.sinclo_storage._lKey.waitingProcess,!1)},isWaitingProcess:function(){var e=sinclo.diagramApi,t=e.sinclo_storage.get(e.sinclo_storage._lKey.waitingProcess),n=!1;return null===t||"true"!==t&&!0!==t||(n=!0),n}},executor:{_waitTimer:null,isCanceled:!1,execute:function(){var e=sinclo.diagramApi;if(!e.executor.isCanceled){var t=e.sinclo_storage.getCurrentNode();if(scl_check.isset(t.attrs))switch(e.executor.setChatTextArea(t.attrs),t.attrs.nodeBasicInfo.nodeType){case"branch":e.sinclo_storage.setDiagramMessageType(300),e.sinclo_storage.setSendCustomerMessageType(301),e.branch.doAction();break;case"text":e.sinclo_storage.setDiagramMessageType(302),e.speakText.doAction();break;case"scenario":e.callScenario.doAction();break;case"jump":e.jumpNode.doAction();break;case"cv":e.pointCV.doAction();break;case"link":e.jumpLink.doAction();break;case"operator":e.callOperator.doAction();break;case"callTree":e.callAnotherTree.doAction()}}},setNext:function(e,t){var n=sinclo.diagramApi,i=n.sinclo_storage.getNodeById(e,t);n.sinclo_storage.set(n.sinclo_storage._lKey.currentNode,i)},isProcessing:function(){var e=sinclo.diagramApi,t=!1,n=e.sinclo_storage.get(e.sinclo_storage._lKey.processing);return null===n||"true"!==n&&!0!==n||(t=!0),t},wait:function(e){var t=sinclo.diagramApi,n=$.Deferred();return t.executor.isFirstCalled()||(e=0,t.sinclo_storage.set(t.sinclo_storage._lKey.firstCalled,!0)),t.sinclo_storage.setWaitingProcess(),t.executor._waitTimer=setTimeout(function(){t.sinclo_storage.unsetWaitingProcess(),n.resolve()},1e3*e),n.promise()},_cancel:function(){var e=sinclo.diagramApi;clearTimeout(e.executor._waitTimer),e.executor.isCanceled=!0,e.executor._waitTimer=null},isFirstCalled:function(){var e=sinclo.diagramApi,t=e.sinclo_storage.get(e.sinclo_storage._lKey.firstCalled);return t&&(!0===t||"true"===t)},getIntervalTimeSec:function(){var e=sinclo.diagramApi,t=e.sinclo_storage.get(e.sinclo_storage._lKey.messageInterval);return Number(t)},setDiagramId:function(e){var t=sinclo.diagramApi;t.sinclo_storage.set(t.sinclo_storage._lKey.diagramId,e)},setChatTextArea:function(e){var t,n=sinclo.diagramApi;e.actionParam&&(t=e.actionParam.chatTextarea)&&3!=t&&n.sinclo_storage.set(n.sinclo_storage._lKey.chatTextArea,t)},getChatTextArea:function(){var e=sinclo.diagramApi;return e.sinclo_storage.get(e.sinclo_storage._lKey.chatTextArea)},handleChatTextArea:function(){var e=sinclo.diagramApi.executor;switch(Number(e.getChatTextArea())){case 1:sinclo.displayTextarea(),sinclo_storage.l.set("textareaOpend","open");break;case 2:sinclo.hideTextarea(),sinclo_storage.l.set("textareaOpend","close")}}},common:{init:function(e,t){var n=sinclo.diagramApi,i=sinclo.diagramApi.executor.getChatTextArea();n.common.isProcessing()||(n.executor.isCanceled=!1,n.sinclo_storage.setBaseObj(n.defaultVal),i&&sinclo.diagramApi.executor.setChatTextArea({actionParam:{chatTextarea:i}})),n.executor.setDiagramId(e),n.sinclo_storage.set(n.sinclo_storage._lKey.diagrams,t),n.common._saveProcessingState(!0);var o=n.common.getStartNode(t);n.sinclo_storage.set(n.sinclo_storage._lKey.messageInterval,o.attrs.nodeBasicInfo.messageIntervalSec),n.executor.setNext(e,o.attrs.nodeBasicInfo.nextNodeId),sinclo.chatApi.saveFlg&&n.common.changeAllowSaving()},getStartNode:function(t){var n=sinclo.diagramApi,i={};return Object.keys(t).some(function(e){if(i=t[e],n.common.isStartNode(i))return!0}),i},isStartNode:function(e){return e&&e.attrs&&e.attrs.nodeBasicInfo&&e.attrs.nodeBasicInfo.nodeType&&"start"===e.attrs.nodeBasicInfo.nodeType},getDiagramId:function(){var e=sinclo.diagramApi,t=e.sinclo_storage.get(e.sinclo_storage._lKey.diagramId);return t},getCurrentNodeId:function(){var e=sinclo.diagramApi.sinclo_storage.getCurrentNode();return e.id?e.id:""},_saveProcessingState:function(e){var t=sinclo.diagramApi.sinclo_storage;t.set(t._lKey.processing,e)},isProcessing:function(){var e=sinclo.diagramApi.sinclo_storage,t=!1,n=e.get(e._lKey.processing);return null===n||"true"!==n&&!0!==n||(t=!0),t},disallowSaveing:function(){var e=sinclo.diagramApi,t=e.sinclo_storage.get(e.sinclo_storage._lKey.allowSave);return null==t||"false"===t||!1===t},changeAllowSaving:function(){var e=sinclo.diagramApi;e.sinclo_storage.set(e.sinclo_storage._lKey.allowSave,!0)},reset:function(){sinclo.diagramApi.sinclo_storage._unsetBaseObj()}},branch:{doAction:function(){var e=sinclo.diagramApi,t=e.sinclo_storage.get(e.sinclo_storage._lKey.currentNode);t.diagramId=e.common.getDiagramId(),t.sourceNodeId=e.common.getCurrentNodeId();var n=t.attrs.actionParam.text,i=e.branch.getSelectionMap(t),o=e.branch.getLabelMap(t,Object.keys(i)),s=t.attrs.actionParam.customizeDesign;common.chatBotTypingCall({messageType:e.messageType.message.branch}),e.executor.wait(e.executor.getIntervalTimeSec()).then(function(){e.branch.showMessage(t,n,i,o,s),e.branch.saveShownMessage(t,n,i,o,s),e.executor.handleChatTextArea(),sinclo.chatApi.unread++,sinclo.chatApi.showUnreadCnt(),common.chatBotTypingTimerClear(),common.chatBotTypingRemove()})},getSelectionMap:function(e){for(var t=sinclo.diagramApi,n=e.embeds,i={},o=t.sinclo_storage.getBaseObj(),s=0;s<n.length;s++){var a=o[t.sinclo_storage._lKey.diagrams][t.common.getDiagramId()][n[s]];("childPortNode"===a.attrs.nodeBasicInfo.nodeType&&a.attrs.nodeBasicInfo.nextNodeId&&""!==a.attrs.nodeBasicInfo.nextNodeId||"childTextNode"===a.attrs.nodeBasicInfo.nodeType)&&(i[n[s]]=a.attrs.nodeBasicInfo.nextNodeId)}return i},getLabelMap:function(e,t){for(var n=sinclo.diagramApi,i=e.attrs.actionParam.selection,o={},s=n.sinclo_storage.getBaseObj(),a=0;a<t.length&&void 0!==t[a];a++){var r=s[n.sinclo_storage._lKey.diagrams][n.common.getDiagramId()][t[a]];if(("childPortNode"===r.attrs.nodeBasicInfo.nodeType||"childTextNode"===r.attrs.nodeBasicInfo.nodeType)&&r.attrs.nodeBasicInfo.tooltip)for(var c=0;c<i.length;c++)if(scl_check.isset(i[c].uuid)&&i[c].uuid===r.id||!scl_check.isset(i[c].uuid)&&i[c].value===r.attrs.nodeBasicInfo.tooltip){i[c].uuid=t[a],o[c]=i[c];break}}return o},showMessage:function(e,t,n,i,o){var s=sinclo.diagramApi,a="diagram_msg sinclo_re",r=document.getElementsByTagName("sinclo-chat")[0],c=document.createElement("div"),l=document.createElement("li");(c=sinclo.chatApi._editDivForIconSetting(c,!0)).classList.add("sinclo-diagram-msg"),c.appendChild(l),r.appendChild(c);var d=sinclo.chatApi.createMessageHtml(t),p=s.branch.getHtml(e,n,i,o);c.style.textAlign="left",a+=" effect_left",a+=" diagram_msg","1"===o.radioStyle&&(a+=" customWidth"),2==Number(e.attrs.actionParam.btnType)&&(l.style.width="95%"),l.className=a,l.innerHTML=d+p.html,sinclo.chatApi.scDown(),"1"===o.radioStyle&&p.timestampArray.forEach(function(e,t,n){$("#sinclo-radio-button-"+e).css("line-height",0);var i=$("#sinclo-radio-button-"+e+' input[type="radio"]');$("#sinclo-radio-button-"+e+" sinclo-radio").css({"background-color":o.radioEntireBackgroundColor,display:"block"}),i.each(function(){$(this).prop("checked")?($(this).parent().css("background-color",o.radioEntireActiveColor),$(this).parent().find("label").css("color",o.radioActiveTextColor)):$(this).parent().find("label").css("color",o.radioTextColor)}),i.on("change",function(){i.each(function(){$(this).prop("checked")?"1"!==o.radioStyle?$(this).parent().css("background-color","transparent"):($(this).parent().css("background-color",o.radioEntireActiveColor),$(this).parent().find("label").css("color",o.radioActiveTextColor)):"1"!==o.radioStyle?$(this).parent().css("background-color","transparent"):($(this).parent().css("background-color",o.radioEntireBackgroundColor),$(this).parent().find("label").css("color",o.radioTextColor))})})}),2===Number(e.attrs.actionParam.btnType)&&($(document).off("click",".sinclo-button-ui.diagram-ui"),$(document).on("click",".sinclo-button-ui.diagram-ui",function(e){if(sinclo.chatApi.isDisabledSlightly(this)||$(e.target).hasClass("disabled"))return!1;sinclo.scenarioApi._reservation.isInMode()?sinclo.chatApi._disableAllSelectableUI():sinclo.chatApi.disableAllButtonsSlightly(),e.stopPropagation();$(this).text();$(this).parents("div").find(".sinclo-button-ui").removeClass("selected"),$(this).addClass("selected");var t={message:$(this).text(),did:$(this).data("did"),sourceNodeId:$(this).data("nid"),nextNodeId:$(this).data("nextNid")};sinclo.diagramApi.executor.setDiagramId($(e.target).data("did")),sinclo.chatApi.send(t),sinclo.chatApi.scDown()}))},getHtml:function(h,m,f,v){var b=sinclo.diagramApi,y="",x=0,_=[],w=!0,k=!0;return Object.keys(f).forEach(function(e,t,n){var i=common.makeToken(),o=scl_check.isset(h.diagramId)?h.diagramId:b.common.getDiagramId(),s=scl_check.isset(h.sourceNodeId)?h.sourceNodeId:b.common.getCurrentNodeId();if(scl_check.isset(f[n[t]].type)&&scl_check.isset(f[n[t]].value)&&2===Number(f[n[t]].type)){if(k){switch(k=!1,Number(h.attrs.actionParam.btnType)){case 1:var a="sinclo-radio-button-"+i,r=b.branch.createRadioButtonStyle(v,a,o,s);break;case 2:a="sinclo-buttonUI_"+i,r=b.branch.createButtonUIStyle(v,"#"+a)}y+='<div id="'+a+'">',y+=r}y+=sinclo.chatApi.createMessageHtml(f[n[t]].value),(t===n.length-1||scl_check.isset(f[n[t+1]].type)&&scl_check.isset(f[n[t+1]].value)&&1===Number(f[n[t+1]].type))&&(y+="</div>"),w=!0}else{var c=scl_check.isset(f[n[t]].value)?f[n[t]].value:f[n[t]];switch(k=!0,Number(h.attrs.actionParam.btnType)){case 1:a="sinclo-radio-button-"+i,r=b.branch.createRadioButtonStyle(v,a);var l="1"===v.radioStyle?"buttonStyle":"labelStyle";w&&(x=i,_.push(x),y+='<div id="'+a+'" class="'+l+'">',y+=r,w=!1),y+="<sinclo-radio>",y+='<input type="radio" name="sinclo-radio-'+x+'" id="sinclo-radio-btn-'+i+'" class="sinclo-chat-radio" value=\''+c+"' data-did=\""+o+'" data-nid="'+s+'" data-next-nid="'+m[f[n[t]].uuid]+'">',y+='<label for="sinclo-radio-btn-'+i+'">'+c+"</label>",y+="</sinclo-radio>\n",(t===n.length-1||scl_check.isset(f[n[t+1]].type)&&scl_check.isset(f[n[t+1]].value)&&2===Number(f[n[t+1]].type))&&(y+="</div>");break;case 2:var d=0<t&&2===Number(f[n[t-1]].type),p=t<Object.keys(f).length-1&&2===Number(f[n[t+1]].type),u=t===Object.keys(f).length-1,g="";0!==t&&!d||(g+="sinclo-button-ui-top"),(p||u)&&(g+=" sinclo-button-ui-bottom");a="sinclo-buttonUI_"+i,r=b.branch.createButtonUIStyle(v,"#"+a);w&&(x=i,_.push(x),y+='<div id="'+a+'">',y+=r),y+='<button onclick="return false;" class="sinclo-button-ui diagram-ui '+g+'" data-did="'+o+'" data-nid="'+s+'" data-next-nid="'+m[f[n[t]].uuid]+'">'+c+"</button>",(t===n.length-1||scl_check.isset(f[n[t+1]].type)&&scl_check.isset(f[n[t+1]].value)&&2===Number(f[n[t+1]].type))&&(y+="</div>")}}}),{timestamp:x,timestampArray:_,html:y}},createRadioButtonStyle:function(e,t){var n="",i=e.radioSelectionDistance&&e.isCustomize?e.radioSelectionDistance:4;if(n="<style>",e.isCustomize?(n+="#sincloBox ul#chatTalk #"+t+' sinclo-radio [type="radio"] + label:before {background-color: '+e.radioBackgroundColor+" !important;}",n+="#sincloBox ul#chatTalk #"+t+' sinclo-radio [type="radio"]:checked + label:after {background: '+e.radioActiveColor+" !important;}",n+="#sincloBox ul#chatTalk #"+t+" sinclo-radio:first-of-type {margin-top: 8px !important}",n+="#sincloBox ul#chatTalk #"+t+" sinclo-radio {margin-top: "+i+"px !important;}",n+="#sincloBox #"+t+" span.sinclo-text-line { margin-top: "+i+"px; }",e.radioNoneBorder?n+="#sincloBox ul#chatTalk #"+t+' sinclo-radio [type="radio"] + label:before {border-color: transparent !important;}':n+="#sincloBox ul#chatTalk #"+t+' sinclo-radio [type="radio"] + label:before {border-color: '+e.radioBorderColor+"!important;}"):(n+="#sincloBox ul#chatTalk #"+t+' sinclo-radio [type="radio"] + label:before {background-color:#FFFFFF !important;}',n+="#sincloBox ul#chatTalk #"+t+' sinclo-radio [type="radio"]:checked + label:after {background: '+common.getWidgetSettings().mainColor+" !important;}",n+="#sincloBox ul#chatTalk #"+t+" sinclo-radio:first-of-type {margin-top: 8px !important}",n+="#sincloBox ul#chatTalk #"+t+" sinclo-radio {margin-top: "+i+"px !important;}",n+="#sincloBox #"+t+" span.sinclo-text-line { margin-top: "+i+"px; }",n+="#sincloBox ul#chatTalk #"+t+' sinclo-radio [type="radio"] + label:before {border-color: '+common.getWidgetSettings().mainColor+"!important;}"),1!==Number(e.radioStyle))n+="#sincloBox ul#chatTalk #"+t+' sinclo-radio [type="radio"] + label {background-color: transparent;}';else{if(scl_check.smartphone())n+="#sincloBox ul#chatTalk #"+t+" sinclo-radio {padding: "+8*(1/285*(common.getPageWidth()-20))+"px;}";else n+="#sincloBox ul#chatTalk #"+t+" sinclo-radio {padding: 8px;}";scl_check.smartphone()||(n+="#sincloBox ul#chatTalk #"+t+' sinclo-radio [type="radio"] + label {display: block !important;}',n+="#sincloBox ul#chatTalk #"+t+' sinclo-radio [type="radio"]:checked + label:after {top: 9px !important;}',n+="#sincloBox ul#chatTalk #"+t+' sinclo-radio [type="radio"] + label:before {top: 2px !important;}')}return n+="</style>"},createButtonUIStyle:function(e,t){var n="<style>";scl_check.smartphone()?(n+="#sincloBox ul#chatTalk "+t+" button.sinclo-button-ui {cursor: pointer; min-height: 35px; margin-bottom: 1px; padding: "+10*(1/285*(common.getPageWidth()-20))+"px 15px;}",n+="#sincloBox ul#chatTalk "+t+" button.sinclo-button-ui.sinclo-button-ui-top {border-top-left-radius: 8px; border-top-right-radius: 8px}",n+="#sincloBox ul#chatTalk "+t+" button.sinclo-button-ui.sinclo-button-ui-bottom {border-bottom-left-radius: 8px; border-bottom-right-radius: 8px}"):("5f1e328aaa53b"===sincloInfo.site.key?n+="#sincloBox ul#chatTalk "+t+" button.sinclo-button-ui {cursor: pointer; min-height: 35px; margin-bottom: 4px; padding: 10px 15px;}":n+="#sincloBox ul#chatTalk "+t+" button.sinclo-button-ui {cursor: pointer; min-height: 35px; margin-bottom: 1px; padding: 10px 15px;}",n+="#sincloBox ul#chatTalk "+t+" button.sinclo-button-ui.sinclo-button-ui-top {border-top-left-radius: 8px; border-top-right-radius: 8px}",n+="#sincloBox ul#chatTalk "+t+" button.sinclo-button-ui.sinclo-button-ui-bottom {border-bottom-left-radius: 8px; border-bottom-right-radius: 8px}");if(n+="#sincloBox ul#chatTalk "+t+" button.sinclo-button-ui {width: "+sinclo.chatApi.getButtonUIWidth()+";}",n+="#sincloBox ul#chatTalk "+t+" span.sinclo-text-line { margin: 4px 0; }",e.isCustomize)switch(n+="#sincloBox ul#chatTalk "+t+" button.sinclo-button-ui {background-color: "+e.buttonUIBackgroundColor+"}",n+="#sincloBox ul#chatTalk "+t+" button.sinclo-button-ui {color: "+e.buttonUITextColor+"}",n+="#sincloBox ul#chatTalk "+t+" button.sinclo-button-ui:focus {outline: none}",n+="#sincloBox ul#chatTalk "+t+" button.sinclo-button-ui:active {background-color: "+e.buttonUIActiveColor+"}",n+="#sincloBox ul#chatTalk "+t+" button.sinclo-button-ui:hover {background-color: "+e.buttonUIActiveColor+"}",n+="#sincloBox ul#chatTalk "+t+" button.sinclo-button-ui.selected {background-color: "+e.buttonUIActiveColor+" !important;}",e.outButtonUINoneBorder?n+="#sincloBox ul#chatTalk "+t+" button {border: none}":n+="#sincloBox ul#chatTalk "+t+" button {border: 1px solid "+e.buttonUIBorderColor+" }",Number(e.buttonUITextAlign)){case 1:n+="#sincloBox ul#chatTalk "+t+" button {text-align: left}";break;case 2:n+="#sincloBox ul#chatTalk "+t+" button {text-align: center}";break;case 3:n+="#sincloBox ul#chatTalk "+t+" button {text-align: right}";break;default:n+="#sincloBox ul#chatTalk "+t+" button {text-align: center}"}else n+="#sincloBox ul#chatTalk "+t+" button.sinclo-button-ui {background-color: "+common.getWidgetSettings().reTextColor+"}",n+="#sincloBox ul#chatTalk "+t+" button.sinclo-button-ui {color: "+common.getWidgetSettings().reBackgroundColor+"}",n+="#sincloBox ul#chatTalk "+t+" button.sinclo-button-ui:focus {outline: none}",n+="#sincloBox ul#chatTalk "+t+" button.sinclo-button-ui:active {background-color: "+sinclo.chatApi.getRawColor(common.getWidgetSettings().mainColor,.5)+"}",n+="#sincloBox ul#chatTalk "+t+" button.sinclo-button-ui:hover {background-color: "+sinclo.chatApi.getRawColor(common.getWidgetSettings().mainColor,.5)+"}",n+="#sincloBox ul#chatTalk "+t+" button.sinclo-button-ui.selected {background-color: "+sinclo.chatApi.getRawColor(common.getWidgetSettings().mainColor,.5)+" !important;}",n+="#sincloBox ul#chatTalk "+t+" button.sinclo-button-ui {text-align: center}",n+="#sincloBox ul#chatTalk "+t+" button {border: none}";return n+="</style>"},saveShownMessage:function(e,t,n,i,o){var s=sinclo.diagramApi,a={nid:s.common.getCurrentNodeId(),did:s.common.getDiagramId(),message:t,type:Number(e.attrs.actionParam.btnType),selectionMap:n,labels:i,customizeDesign:o};s.sinclo_storage.putDiagramMessage(e.id,e.attrs.nodeBasicInfo.nodeType,a,!1)}},speakText:{doAction:function(){var t=sinclo.diagramApi,n=t.sinclo_storage.getCurrentNode(),e=n.attrs.actionParam.text;common.chatBotTypingCall({messageType:t.messageType.message.text}),t.executor.wait(t.executor.getIntervalTimeSec()).then(function(){return common.chatBotTypingTimerClear(),common.chatBotTypingRemove(),t.speakText.showMessages(n,e)}).then(function(){sinclo.chatApi.unread++,sinclo.chatApi.showUnreadCnt(),sinclo.chatApi.scDown();var e=n.attrs.nodeBasicInfo.nextNodeId;t.executor.setNext(t.common.getDiagramId(),e),t.executor.execute()})},showMessages:function(n,i){for(var o=$.Deferred(),s=sinclo.diagramApi,e=0;e<i.length;e++)!function(e){var t=1e3*s.executor.getIntervalTimeSec()*e;setTimeout(function(){common.chatBotTypingTimerClear(),common.chatBotTypingRemove(),s.speakText.showMessageProcess(i[e]),s.executor.handleChatTextArea(),n.isRedraw||s.speakText.saveShownMessage(n,i[e]),e===i.length-1?o.resolve():common.chatBotTypingCall({messageType:s.messageType.message.text}),sinclo.chatApi.scDown()},t)}(e);return o.promise()},showMessageProcess:function(e){var t=document.getElementsByTagName("sinclo-chat")[0],n=document.createElement("div"),i=document.createElement("li");i.style.display="inline-block",(n=sinclo.chatApi._editDivForIconSetting(n,!0)).classList.add("sinclo-diagram-msg"),n.appendChild(i),t.appendChild(n),n.style.textAlign="left",i.className="diagram_msg sinclo_re effect_left diagram_msg",i.innerHTML=sinclo.chatApi.createMessageHtml(e)},saveShownMessage:function(e,t){var n=sinclo.diagramApi,i={did:e.diagramId?e.diagramId:n.common.getDiagramId(),message:t};n.sinclo_storage.putDiagramMessage(e.id,e.attrs.nodeBasicInfo.nodeType,i,!1)}},callScenario:{_lKey:{callbackEndScenario:"sinclo:notifyEndScenario",callScenario:"sinclo:notifyBeginCallScenario"},isCalledFromDiagram:function(){var e=sinclo.diagramApi.sinclo_storage.getCurrentNode();return scl_check.isset(e)&&"scenario"===e.attrs.nodeBasicInfo.nodeType},doAction:function(){if(window.sincloInfo.contract.chatbotScenario){var e=sinclo.diagramApi,t=e.sinclo_storage.getCurrentNode(),n=t.attrs.actionParam.scenarioId;e.callScenario.beginCallScenario(),t.attrs.actionParam.callbackToDiagram&&e.callScenario.beginWaitEndScenario(),common.chatBotTypingCall({messageType:e.messageType.message.text}),e.executor.wait(e.executor.getIntervalTimeSec()).then(function(){socket&&!socket.isConnected()?socket.connect().then(function(){return sinclo.executeConnectSuccess(window.userInfo.connectSuccessData,window.userInfo.accessInfoData)}).then(sinclo.setHistoryId).then(function(){emit("getScenario",{scenarioId:n})}):emit("getScenario",{scenarioId:n})})}},beginCallScenario:function(){var e=sinclo.diagramApi;e.sinclo_storage.set(e.callScenario._lKey.callScenario,!0)},endCallScenario:function(){var e=sinclo.diagramApi;e.sinclo_storage.set(e.callScenario._lKey.callScenario,!1)},beginWaitEndScenario:function(){var e=sinclo.diagramApi;e.sinclo_storage.set(e.callScenario._lKey.callbackEndScenario,!0)},endWaitEndScenario:function(){var e=sinclo.diagramApi;e.sinclo_storage.set(e.callScenario._lKey.callbackEndScenario,!1)},checkCallScenario:function(){var e=sinclo.diagramApi,t=e.sinclo_storage.get(e.callScenario._lKey.callScenario);return t&&("string"==typeof t&&!0===t||"boolean"==typeof t&&t)},isWaitingEndScenario:function(){var e=sinclo.diagramApi,t=e.sinclo_storage.get(e.callScenario._lKey.callbackEndScenario);return t&&("string"==typeof t&&!0===t||"boolean"==typeof t&&t)},setCorrectNode:function(){var e=sinclo.scenarioApi,t=sinclo.diagramApi,n=JSON.parse(sinclo_storage.l.get(e._lKey.scenarioBase)).s_id,i=null,o=t.sinclo_storage.getBaseObj().d_diagrams[t.common.getDiagramId()];try{i=t.sinclo_storage.getCurrentNode().attrs.actionParam.scenarioId}catch(e){}n!==i&&Object.keys(o).forEach(function(e){o[e].attrs.actionParam&&o[e].attrs.actionParam.scenarioId===n&&o[e].attrs.nodeBasicInfo.nextNodeId===t.sinclo_storage.getCurrentNode().id&&t.executor.setNext(t.common.getDiagramId(),o[e].id)})},goToNextNode:function(){var e=sinclo.diagramApi,t=e.sinclo_storage.getCurrentNode().attrs.nodeBasicInfo.nextNodeId;if(!e.callScenario.isWaitingEndScenario())return!1;e.executor.setNext(e.common.getDiagramId(),t),e.callScenario.endWaitEndScenario(),e.executor.execute()}},jumpNode:{doAction:function(){var e=sinclo.diagramApi,t=e.sinclo_storage.getCurrentNode().attrs.actionParam.targetId;e.executor.setNext(e.common.getDiagramId(),t),e.executor.execute()}},jumpLink:{doAction:function(){var e=sinclo.diagramApi,t=e.sinclo_storage.getCurrentNode(),n=t.attrs.nodeBasicInfo.nextNodeId,i=t.attrs.actionParam.link,o=t.attrs.actionParam.linkType;e.executor.setNext(e.common.getDiagramId(),n),e.executor.wait(2.5).then(function(){switch(scl_check.smartphone()&&sinclo.operatorInfo.ev(),o){case"same":sinclo_storage.s.set("nextNodeKey",!0),window.location.href=i;break;case"another":window.open(i),e.executor.execute()}})}},callOperator:{doAction:function(){sinclo.displayTextarea(),sinclo_storage.l.set("textareaOpend","open");var e=sinclo.diagramApi,t=e.sinclo_storage.getCurrentNode();sinclo.chatApi.send({message:"",did:e.common.getDiagramId(),sourceNodeId:t.id,nextNodeId:"callOperator"})},isNodeIdCallOperatorAction:function(e){return"callOperator"===e}},pointCV:{doAction:function(){var t=sinclo.diagramApi,n=t.sinclo_storage.getCurrentNode();if(t.common.changeAllowSaving(),sinclo.chatApi.saveFlg=!0,socket&&!socket.isConnected())socket.connect().then(function(){return sinclo.executeConnectSuccess(window.userInfo.connectSuccessData,window.userInfo.accessInfoData)}).then(sinclo.setHistoryId).then(function(){setTimeout(function(){sinclo.executeForNotHavingConnectionMessageStack()},500),setTimeout(function(){emit("addLastMessageToConversionFlg",{historyId:sinclo.chatApi.historyId,diagramId:t.common.getDiagramId(),diagramCvId:n.id})},750);var e=n.attrs.nodeBasicInfo.nextNodeId;t.executor.setNext(t.common.getDiagramId(),e),t.executor.execute()});else{setTimeout(function(){sinclo.executeForNotHavingConnectionMessageStack()},500),setTimeout(function(){emit("addLastMessageToConversionFlg",{historyId:sinclo.chatApi.historyId,diagramId:t.common.getDiagramId(),diagramCvId:n.id})},750);var e=n.attrs.nodeBasicInfo.nextNodeId;t.executor.setNext(t.common.getDiagramId(),e),t.executor.execute()}}},callAnotherTree:{doAction:function(){var e=sinclo.diagramApi,t=e.sinclo_storage.getCurrentNode().attrs.actionParam.targetId;e.callAnotherTree.beginCallAnotherTree(t)},beginCallAnotherTree:function(e){socket&&!socket.isConnected()?$.ajax({type:"get",url:window.sincloInfo.site.files+"/settings/diagram",cache:!1,data:{sitekey:window.sincloInfo.site.key,did:e},dataType:"json",success:function(e){sinclo.chatApi.execDiagram(e)},error:function(e,t,n){$("#XMLHttpRequest").html("XMLHttpRequest : "+e.status),$("#textStatus").html("textStatus : "+t),$("#errorThrown").html("errorThrown : "+n.message)}}):emit("getChatDiagram",{diagramId:e})}}},api:{openWidget:function(){common.widgetHandler.openWidget()},getAccessId:function(){var e="";return userInfo&&userInfo.accessId&&(e=userInfo.accessId),e},callFunction:function(e,t){try{sincloInfo.custom.callFunc&&"object"==typeof sincloInfo.custom.callFunc&&sincloInfo.custom.callFunc.hasOwnProperty(e)&&"object"==typeof sincloInfo.custom.callFunc[e]&&sincloInfo.custom.callFunc[e].hasOwnProperty(Number(t))&&"function"==typeof sincloInfo.custom.callFunc[e][Number(t)]&&sincloInfo.custom.callFunc[e][t]()}catch(e){}},callTelCV:function(e){var t="tel:"+e;try{"function"==typeof window.gtag_report_conversion?window.gtag_report_conversion(t):scl_check.isset(window.dataLayer)&&window.dataLayer.push({event:t})}catch(e){emit("traceScenarioInfo",{type:"w",message:"call google tel-cv function is failed. error : "+e.message,data:t})}try{"function"==typeof window.yahoo_report_conversion&&window.yahoo_report_conversion(t)}catch(e){emit("traceScenarioInfo",{type:"w",message:"call yahoo tel-cv function is failed. error : "+e.message,data:t})}}}},sincloVideo={open:function(e){return window.open("https://ap1.sinclo.jp/index.html?userId="+userInfo.userId,"monitor_"+userInfo.userId,"width=480,height=400,dialog=no,toolbar=no,location=no,status=no,menubar=no,directories=no,resizable=no, scrollbars=no"),!1}};var BFCacheHandler={resetScrollImmediately:function(){try{window.bodyScrollLock&&window.bodyScrollLock.clearAllBodyScrollLocks&&window.bodyScrollLock.clearAllBodyScrollLocks(),Object.assign(document.body.style,{overflow:"",position:"",width:""}),document.documentElement.style.overflow="",document.body.classList.remove("body-scroll-lock","sinclo-scroll-locked")}catch(e){}},handleWidgetState:function(){try{var e=document.getElementById("sincloBox"),t=e&&"none"!==window.getComputedStyle(e).display,n=common&&common.widgetHandler&&common.widgetHandler.isShown?common.widgetHandler.isShown():void 0;t?n?sinclo&&sinclo.chatApi&&sinclo.chatApi.lockPageScroll&&sinclo.chatApi.lockPageScroll():(sinclo&&sinclo.chatApi&&sinclo.chatApi.unlockPageScroll&&sinclo.chatApi.unlockPageScroll(),Object.assign(document.body.style,{overflow:"auto",position:"static"}),/iPad|iPhone|iPod/.test(navigator.userAgent)&&(document.body.style.webkitOverflowScrolling="touch")):(sinclo&&sinclo.chatApi&&sinclo.chatApi.unlockPageScroll&&sinclo.chatApi.unlockPageScroll(),Object.assign(document.body.style,{overflow:"auto",position:"static"})),sinclo&&sinclo.chatApi&&sinclo.chatApi.initScrollHandlers&&sinclo.chatApi.initScrollHandlers()}catch(e){Object.assign(document.body.style,{overflow:"auto",position:"static"}),document.documentElement.style.overflow="auto"}},restoreSessionIfNeeded:function(){var e=sinclo_storage.l.get("_scl_session_id_backup"),t=sinclo_storage.c.get("sincloSessionId");scl_check.isset(e)&&e!==t&&(sinclo_storage.c.set("sincloSessionId",e),scl_check.isset(sinclo_storage.s.get("tabId"))||sinclo_storage.s.set("tabId",scl_make.uuid()))},reconnectSocket:function(){socket&&socket.isOnceConnected&&socket.isOnceConnected()&&(socket&&socket.isConnected&&!socket.isConnected()?(void 0!==userInfo&&(userInfo.reAccess=!1,userInfo.processReconnect=!0,userInfo.fromBFCacheContract=!0),socket.connect&&socket.connect().then(function(){window.sincloInfo&&window.sincloInfo.contract&&window.sincloInfo.contract.enableRealtimeMonitor&&4===common.getWidgetSettings().showTiming&&"function"==typeof emit&&setTimeout(function(){emit("getChatMessage",{showName:common.getWidgetSettings().showName})},2e3),common&&common.handleInit&&common.handleInit()}).catch(function(e){})):socket&&socket.isConnected&&socket.isConnected())},backupSessionOnPagehide:function(){try{var e=sinclo_storage.c.get("sincloSessionId");scl_check.isset(e)&&sinclo_storage.l.set("_scl_session_id_backup",e)}catch(e){}}};window.addEventListener("pageshow",function(e){if(e.persisted)BFCacheHandler.resetScrollImmediately(),setTimeout(function(){BFCacheHandler.handleWidgetState(),BFCacheHandler.restoreSessionIfNeeded(),BFCacheHandler.reconnectSocket()},150);else{var t=performance.getEntriesByType("navigation");if(0<t.length){var n=t[0].type;"back_forward"===n&&sinclo_storage.s.set("sinclo_navigating_away","true")}}}),window.addEventListener("pagehide",function(){BFCacheHandler.backupSessionOnPagehide()})}(sincloJquery),function(e){var t={};!function(e){"use strict";function s(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}Object.defineProperty(e,"__esModule",{value:true});var a=false;if(typeof window!=="undefined"){var t={get passive(){a=true;return undefined}};window.addEventListener("testPassive",null,t);window.removeEventListener("testPassive",null,t)}var r=typeof window!=="undefined"&&window.navigator&&window.navigator.platform&&/iP(ad|hone|od)/.test(window.navigator.platform),c=[],l=false,d=-1,i=void 0,o=void 0,p=function e(t){return c.some(function(e){if(e.options.allowTouchMove&&e.options.allowTouchMove(t)){return true}return false})},u=function e(t){var n=t||window.event;if(p(n.target)){return true}if(n.touches.length>1)return true;if(n.preventDefault)n.preventDefault();return false},g=function e(n){setTimeout(function(){if(o===undefined){var e=!!n&&n.reserveScrollBarGap===true;var t=window.innerWidth-document.documentElement.clientWidth;if(e&&t>0){o=document.body.style.paddingRight;document.body.style.paddingRight=t+"px"}}if(i===undefined){i=document.body.style.overflow;document.body.style.overflow="hidden"}})},n=function e(){setTimeout(function(){if(o!==undefined){document.body.style.paddingRight=o;o=undefined}if(i!==undefined){document.body.style.overflow=i;i=undefined}})},h=function e(t){return t?t.scrollHeight-t.scrollTop<=t.clientHeight:false},m=function e(t,n){var i=t.targetTouches[0].clientY-d;if(p(t.target)){return false}if(n&&n.scrollTop===0&&i>0){return u(t)}if(h(n)&&i<0){return u(t)}t.stopPropagation();return true},f=e.disableBodyScroll=function e(t,n){if(r){if(!t){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(t&&!c.some(function(e){return e.targetElement===t})){var i={targetElement:t,options:n||{}};c=[].concat(s(c),[i]);t.ontouchstart=function(e){if(e.targetTouches.length===1){d=e.targetTouches[0].clientY}};t.ontouchmove=function(e){if(e.targetTouches.length===1){m(e,t)}};if(!l){document.addEventListener("touchmove",u,a?{passive:false}:undefined);l=true}}}else{g(n);var o={targetElement:t,options:n||{}};c=[].concat(s(c),[o])}},v=e.clearAllBodyScrollLocks=function e(){if(r){c.forEach(function(e){e.targetElement.ontouchstart=null;e.targetElement.ontouchmove=null});if(l){document.removeEventListener("touchmove",u,a?{passive:false}:undefined);l=false}c=[];d=-1}else{n();c=[]}},b=e.enableBodyScroll=function e(t){if(r){if(!t){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}t.ontouchstart=null;t.ontouchmove=null;c=c.filter(function(e){return e.targetElement!==t});if(l&&c.length===0){document.removeEventListener("touchmove",u,a?{passive:false}:undefined);l=false}}else{c=c.filter(function(e){return e.targetElement!==t});if(!c.length){n()}}}}(t),e.bodyScrollLock=t}(this);